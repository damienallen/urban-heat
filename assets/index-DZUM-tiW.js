var rD=Object.defineProperty;var nD=(e,t,r)=>t in e?rD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var tr=(e,t,r)=>(nD(e,typeof t!="symbol"?t+"":t,r),r);function sP(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const h=Object.getOwnPropertyDescriptor(n,s);h&&Object.defineProperty(e,s,h.get?h:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function n(s){if(s.ep)return;s.ep=!0;const h=r(s);fetch(s.href,h)}})();var iD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function um(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lP={exports:{}},Vy={},cP={exports:{}},cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm=Symbol.for("react.element"),oD=Symbol.for("react.portal"),aD=Symbol.for("react.fragment"),sD=Symbol.for("react.strict_mode"),lD=Symbol.for("react.profiler"),cD=Symbol.for("react.provider"),uD=Symbol.for("react.context"),hD=Symbol.for("react.forward_ref"),dD=Symbol.for("react.suspense"),fD=Symbol.for("react.memo"),pD=Symbol.for("react.lazy"),L4=Symbol.iterator;function mD(e){return e===null||typeof e!="object"?null:(e=L4&&e[L4]||e["@@iterator"],typeof e=="function"?e:null)}var uP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hP=Object.assign,dP={};function gd(e,t,r){this.props=e,this.context=t,this.refs=dP,this.updater=r||uP}gd.prototype.isReactComponent={};gd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fP(){}fP.prototype=gd.prototype;function P2(e,t,r){this.props=e,this.context=t,this.refs=dP,this.updater=r||uP}var T2=P2.prototype=new fP;T2.constructor=P2;hP(T2,gd.prototype);T2.isPureReactComponent=!0;var D4=Array.isArray,pP=Object.prototype.hasOwnProperty,I2={current:null},mP={key:!0,ref:!0,__self:!0,__source:!0};function gP(e,t,r){var n,s={},h=null,d=null;if(t!=null)for(n in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(h=""+t.key),t)pP.call(t,n)&&!mP.hasOwnProperty(n)&&(s[n]=t[n]);var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){for(var b=Array(c),E=0;E<c;E++)b[E]=arguments[E+2];s.children=b}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)s[n]===void 0&&(s[n]=c[n]);return{$$typeof:hm,type:e,key:h,ref:d,props:s,_owner:I2.current}}function gD(e,t){return{$$typeof:hm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function M2(e){return typeof e=="object"&&e!==null&&e.$$typeof===hm}function yD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var O4=/\/+/g;function u_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yD(""+e.key):t.toString(36)}function wg(e,t,r,n,s){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(h){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case hm:case oD:d=!0}}if(d)return d=e,s=s(d),e=n===""?"."+u_(d,0):n,D4(s)?(r="",e!=null&&(r=e.replace(O4,"$&/")+"/"),wg(s,t,r,"",function(E){return E})):s!=null&&(M2(s)&&(s=gD(s,r+(!s.key||d&&d.key===s.key?"":(""+s.key).replace(O4,"$&/")+"/")+e)),t.push(s)),1;if(d=0,n=n===""?".":n+":",D4(e))for(var c=0;c<e.length;c++){h=e[c];var b=n+u_(h,c);d+=wg(h,t,r,b,s)}else if(b=mD(e),typeof b=="function")for(e=b.call(e),c=0;!(h=e.next()).done;)h=h.value,b=n+u_(h,c++),d+=wg(h,t,r,b,s);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function V0(e,t,r){if(e==null)return e;var n=[],s=0;return wg(e,n,"","",function(h){return t.call(r,h,s++)}),n}function vD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $i={current:null},Sg={transition:null},_D={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:Sg,ReactCurrentOwner:I2};function yP(){throw Error("act(...) is not supported in production builds of React.")}cr.Children={map:V0,forEach:function(e,t,r){V0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return V0(e,function(){t++}),t},toArray:function(e){return V0(e,function(t){return t})||[]},only:function(e){if(!M2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};cr.Component=gd;cr.Fragment=aD;cr.Profiler=lD;cr.PureComponent=P2;cr.StrictMode=sD;cr.Suspense=dD;cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_D;cr.act=yP;cr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=hP({},e.props),s=e.key,h=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,d=I2.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(b in t)pP.call(t,b)&&!mP.hasOwnProperty(b)&&(n[b]=t[b]===void 0&&c!==void 0?c[b]:t[b])}var b=arguments.length-2;if(b===1)n.children=r;else if(1<b){c=Array(b);for(var E=0;E<b;E++)c[E]=arguments[E+2];n.children=c}return{$$typeof:hm,type:e.type,key:s,ref:h,props:n,_owner:d}};cr.createContext=function(e){return e={$$typeof:uD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cD,_context:e},e.Consumer=e};cr.createElement=gP;cr.createFactory=function(e){var t=gP.bind(null,e);return t.type=e,t};cr.createRef=function(){return{current:null}};cr.forwardRef=function(e){return{$$typeof:hD,render:e}};cr.isValidElement=M2;cr.lazy=function(e){return{$$typeof:pD,_payload:{_status:-1,_result:e},_init:vD}};cr.memo=function(e,t){return{$$typeof:fD,type:e,compare:t===void 0?null:t}};cr.startTransition=function(e){var t=Sg.transition;Sg.transition={};try{e()}finally{Sg.transition=t}};cr.unstable_act=yP;cr.useCallback=function(e,t){return $i.current.useCallback(e,t)};cr.useContext=function(e){return $i.current.useContext(e)};cr.useDebugValue=function(){};cr.useDeferredValue=function(e){return $i.current.useDeferredValue(e)};cr.useEffect=function(e,t){return $i.current.useEffect(e,t)};cr.useId=function(){return $i.current.useId()};cr.useImperativeHandle=function(e,t,r){return $i.current.useImperativeHandle(e,t,r)};cr.useInsertionEffect=function(e,t){return $i.current.useInsertionEffect(e,t)};cr.useLayoutEffect=function(e,t){return $i.current.useLayoutEffect(e,t)};cr.useMemo=function(e,t){return $i.current.useMemo(e,t)};cr.useReducer=function(e,t,r){return $i.current.useReducer(e,t,r)};cr.useRef=function(e){return $i.current.useRef(e)};cr.useState=function(e){return $i.current.useState(e)};cr.useSyncExternalStore=function(e,t,r){return $i.current.useSyncExternalStore(e,t,r)};cr.useTransition=function(){return $i.current.useTransition()};cr.version="18.3.1";cP.exports=cr;var $=cP.exports;const ue=um($),R2=sP({__proto__:null,default:ue},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xD=$,bD=Symbol.for("react.element"),wD=Symbol.for("react.fragment"),SD=Object.prototype.hasOwnProperty,ED=xD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AD={key:!0,ref:!0,__self:!0,__source:!0};function vP(e,t,r){var n,s={},h=null,d=null;r!==void 0&&(h=""+r),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(d=t.ref);for(n in t)SD.call(t,n)&&!AD.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:bD,type:e,key:h,ref:d,props:s,_owner:ED.current}}Vy.Fragment=wD;Vy.jsx=vP;Vy.jsxs=vP;lP.exports=Vy;var Q=lP.exports,Tx={},_P={exports:{}},Ao={},xP={exports:{}},bP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Se,Be){var tt=Se.length;Se.push(Be);e:for(;0<tt;){var ot=tt-1>>>1,St=Se[ot];if(0<s(St,Be))Se[ot]=Be,Se[tt]=St,tt=ot;else break e}}function r(Se){return Se.length===0?null:Se[0]}function n(Se){if(Se.length===0)return null;var Be=Se[0],tt=Se.pop();if(tt!==Be){Se[0]=tt;e:for(var ot=0,St=Se.length,qt=St>>>1;ot<qt;){var Tt=2*(ot+1)-1,kt=Se[Tt],Lt=Tt+1,Yt=Se[Lt];if(0>s(kt,tt))Lt<St&&0>s(Yt,kt)?(Se[ot]=Yt,Se[Lt]=tt,ot=Lt):(Se[ot]=kt,Se[Tt]=tt,ot=Tt);else if(Lt<St&&0>s(Yt,tt))Se[ot]=Yt,Se[Lt]=tt,ot=Lt;else break e}}return Be}function s(Se,Be){var tt=Se.sortIndex-Be.sortIndex;return tt!==0?tt:Se.id-Be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var d=Date,c=d.now();e.unstable_now=function(){return d.now()-c}}var b=[],E=[],I=1,P=null,T=3,O=!1,j=!1,V=!1,re=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Se){for(var Be=r(E);Be!==null;){if(Be.callback===null)n(E);else if(Be.startTime<=Se)n(E),Be.sortIndex=Be.expirationTime,t(b,Be);else break;Be=r(E)}}function ie(Se){if(V=!1,K(Se),!j)if(r(b)!==null)j=!0,Ve(de);else{var Be=r(E);Be!==null&&He(ie,Be.startTime-Se)}}function de(Se,Be){j=!1,V&&(V=!1,W(we),we=-1),O=!0;var tt=T;try{for(K(Be),P=r(b);P!==null&&(!(P.expirationTime>Be)||Se&&!Oe());){var ot=P.callback;if(typeof ot=="function"){P.callback=null,T=P.priorityLevel;var St=ot(P.expirationTime<=Be);Be=e.unstable_now(),typeof St=="function"?P.callback=St:P===r(b)&&n(b),K(Be)}else n(b);P=r(b)}if(P!==null)var qt=!0;else{var Tt=r(E);Tt!==null&&He(ie,Tt.startTime-Be),qt=!1}return qt}finally{P=null,T=tt,O=!1}}var ae=!1,J=null,we=-1,Re=5,De=-1;function Oe(){return!(e.unstable_now()-De<Re)}function Qe(){if(J!==null){var Se=e.unstable_now();De=Se;var Be=!0;try{Be=J(!0,Se)}finally{Be?qe():(ae=!1,J=null)}}else ae=!1}var qe;if(typeof Z=="function")qe=function(){Z(Qe)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Fe=Ze.port2;Ze.port1.onmessage=Qe,qe=function(){Fe.postMessage(null)}}else qe=function(){re(Qe,0)};function Ve(Se){J=Se,ae||(ae=!0,qe())}function He(Se,Be){we=re(function(){Se(e.unstable_now())},Be)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Se){Se.callback=null},e.unstable_continueExecution=function(){j||O||(j=!0,Ve(de))},e.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<Se?Math.floor(1e3/Se):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function(Se){switch(T){case 1:case 2:case 3:var Be=3;break;default:Be=T}var tt=T;T=Be;try{return Se()}finally{T=tt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Se,Be){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var tt=T;T=Se;try{return Be()}finally{T=tt}},e.unstable_scheduleCallback=function(Se,Be,tt){var ot=e.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?ot+tt:ot):tt=ot,Se){case 1:var St=-1;break;case 2:St=250;break;case 5:St=1073741823;break;case 4:St=1e4;break;default:St=5e3}return St=tt+St,Se={id:I++,callback:Be,priorityLevel:Se,startTime:tt,expirationTime:St,sortIndex:-1},tt>ot?(Se.sortIndex=tt,t(E,Se),r(b)===null&&Se===r(E)&&(V?(W(we),we=-1):V=!0,He(ie,tt-ot))):(Se.sortIndex=St,t(b,Se),j||O||(j=!0,Ve(de))),Se},e.unstable_shouldYield=Oe,e.unstable_wrapCallback=function(Se){var Be=T;return function(){var tt=T;T=Be;try{return Se.apply(this,arguments)}finally{T=tt}}}})(bP);xP.exports=bP;var CD=xP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PD=$,wo=CD;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wP=new Set,Rp={};function au(e,t){Jh(e,t),Jh(e+"Capture",t)}function Jh(e,t){for(Rp[e]=t,e=0;e<t.length;e++)wP.add(t[e])}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ix=Object.prototype.hasOwnProperty,TD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z4={},F4={};function ID(e){return Ix.call(F4,e)?!0:Ix.call(z4,e)?!1:TD.test(e)?F4[e]=!0:(z4[e]=!0,!1)}function MD(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function RD(e,t,r,n){if(t===null||typeof t>"u"||MD(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vi(e,t,r,n,s,h,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=d}var pi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pi[e]=new Vi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pi[t]=new Vi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pi[e]=new Vi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pi[e]=new Vi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pi[e]=new Vi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pi[e]=new Vi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pi[e]=new Vi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pi[e]=new Vi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pi[e]=new Vi(e,5,!1,e.toLowerCase(),null,!1,!1)});var k2=/[\-:]([a-z])/g;function L2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(k2,L2);pi[t]=new Vi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(k2,L2);pi[t]=new Vi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(k2,L2);pi[t]=new Vi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pi[e]=new Vi(e,1,!1,e.toLowerCase(),null,!1,!1)});pi.xlinkHref=new Vi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pi[e]=new Vi(e,1,!1,e.toLowerCase(),null,!0,!0)});function D2(e,t,r,n){var s=pi.hasOwnProperty(t)?pi[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(RD(t,r,s,n)&&(r=null),n||s===null?ID(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Vs=PD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U0=Symbol.for("react.element"),Sh=Symbol.for("react.portal"),Eh=Symbol.for("react.fragment"),O2=Symbol.for("react.strict_mode"),Mx=Symbol.for("react.profiler"),SP=Symbol.for("react.provider"),EP=Symbol.for("react.context"),z2=Symbol.for("react.forward_ref"),Rx=Symbol.for("react.suspense"),kx=Symbol.for("react.suspense_list"),F2=Symbol.for("react.memo"),xl=Symbol.for("react.lazy"),AP=Symbol.for("react.offscreen"),B4=Symbol.iterator;function Vf(e){return e===null||typeof e!="object"?null:(e=B4&&e[B4]||e["@@iterator"],typeof e=="function"?e:null)}var ln=Object.assign,h_;function np(e){if(h_===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);h_=t&&t[1]||""}return`
`+h_+e}var d_=!1;function f_(e,t){if(!e||d_)return"";d_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var n=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){n=E}e.call(t.prototype)}else{try{throw Error()}catch(E){n=E}e()}}catch(E){if(E&&n&&typeof E.stack=="string"){for(var s=E.stack.split(`
`),h=n.stack.split(`
`),d=s.length-1,c=h.length-1;1<=d&&0<=c&&s[d]!==h[c];)c--;for(;1<=d&&0<=c;d--,c--)if(s[d]!==h[c]){if(d!==1||c!==1)do if(d--,c--,0>c||s[d]!==h[c]){var b=`
`+s[d].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=d&&0<=c);break}}}finally{d_=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?np(e):""}function kD(e){switch(e.tag){case 5:return np(e.type);case 16:return np("Lazy");case 13:return np("Suspense");case 19:return np("SuspenseList");case 0:case 2:case 15:return e=f_(e.type,!1),e;case 11:return e=f_(e.type.render,!1),e;case 1:return e=f_(e.type,!0),e;default:return""}}function Lx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Eh:return"Fragment";case Sh:return"Portal";case Mx:return"Profiler";case O2:return"StrictMode";case Rx:return"Suspense";case kx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case EP:return(e.displayName||"Context")+".Consumer";case SP:return(e._context.displayName||"Context")+".Provider";case z2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F2:return t=e.displayName||null,t!==null?t:Lx(e.type)||"Memo";case xl:t=e._payload,e=e._init;try{return Lx(e(t))}catch{}}return null}function LD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lx(t);case 8:return t===O2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function CP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DD(e){var t=CP(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(d){n=""+d,h.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(d){n=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Z0(e){e._valueTracker||(e._valueTracker=DD(e))}function PP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=CP(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Hg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dx(e,t){var r=t.checked;return ln({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function N4(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Bl(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function TP(e,t){t=t.checked,t!=null&&D2(e,"checked",t,!1)}function Ox(e,t){TP(e,t);var r=Bl(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zx(e,t.type,r):t.hasOwnProperty("defaultValue")&&zx(e,t.type,Bl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function j4(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function zx(e,t,r){(t!=="number"||Hg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ip=Array.isArray;function jh(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Bl(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Fx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return ln({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $4(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(et(92));if(ip(r)){if(1<r.length)throw Error(et(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Bl(r)}}function IP(e,t){var r=Bl(t.value),n=Bl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function V4(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function MP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?MP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var H0,RP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(H0=H0||document.createElement("div"),H0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=H0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function kp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var mp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OD=["Webkit","ms","Moz","O"];Object.keys(mp).forEach(function(e){OD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),mp[t]=mp[e]})});function kP(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||mp.hasOwnProperty(e)&&mp[e]?(""+t).trim():t+"px"}function LP(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=kP(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var zD=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nx(e,t){if(t){if(zD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function jx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $x=null;function B2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vx=null,$h=null,Vh=null;function U4(e){if(e=pm(e)){if(typeof Vx!="function")throw Error(et(280));var t=e.stateNode;t&&(t=Gy(t),Vx(e.stateNode,e.type,t))}}function DP(e){$h?Vh?Vh.push(e):Vh=[e]:$h=e}function OP(){if($h){var e=$h,t=Vh;if(Vh=$h=null,U4(e),t)for(e=0;e<t.length;e++)U4(t[e])}}function zP(e,t){return e(t)}function FP(){}var p_=!1;function BP(e,t,r){if(p_)return e(t,r);p_=!0;try{return zP(e,t,r)}finally{p_=!1,($h!==null||Vh!==null)&&(FP(),OP())}}function Lp(e,t){var r=e.stateNode;if(r===null)return null;var n=Gy(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(et(231,t,typeof r));return r}var Ux=!1;if(zs)try{var Uf={};Object.defineProperty(Uf,"passive",{get:function(){Ux=!0}}),window.addEventListener("test",Uf,Uf),window.removeEventListener("test",Uf,Uf)}catch{Ux=!1}function FD(e,t,r,n,s,h,d,c,b){var E=Array.prototype.slice.call(arguments,3);try{t.apply(r,E)}catch(I){this.onError(I)}}var gp=!1,Wg=null,Gg=!1,Zx=null,BD={onError:function(e){gp=!0,Wg=e}};function ND(e,t,r,n,s,h,d,c,b){gp=!1,Wg=null,FD.apply(BD,arguments)}function jD(e,t,r,n,s,h,d,c,b){if(ND.apply(this,arguments),gp){if(gp){var E=Wg;gp=!1,Wg=null}else throw Error(et(198));Gg||(Gg=!0,Zx=E)}}function su(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function NP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Z4(e){if(su(e)!==e)throw Error(et(188))}function $D(e){var t=e.alternate;if(!t){if(t=su(e),t===null)throw Error(et(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var h=s.alternate;if(h===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===h.child){for(h=s.child;h;){if(h===r)return Z4(s),e;if(h===n)return Z4(s),t;h=h.sibling}throw Error(et(188))}if(r.return!==n.return)r=s,n=h;else{for(var d=!1,c=s.child;c;){if(c===r){d=!0,r=s,n=h;break}if(c===n){d=!0,n=s,r=h;break}c=c.sibling}if(!d){for(c=h.child;c;){if(c===r){d=!0,r=h,n=s;break}if(c===n){d=!0,n=h,r=s;break}c=c.sibling}if(!d)throw Error(et(189))}}if(r.alternate!==n)throw Error(et(190))}if(r.tag!==3)throw Error(et(188));return r.stateNode.current===r?e:t}function jP(e){return e=$D(e),e!==null?$P(e):null}function $P(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$P(e);if(t!==null)return t;e=e.sibling}return null}var VP=wo.unstable_scheduleCallback,H4=wo.unstable_cancelCallback,VD=wo.unstable_shouldYield,UD=wo.unstable_requestPaint,wn=wo.unstable_now,ZD=wo.unstable_getCurrentPriorityLevel,N2=wo.unstable_ImmediatePriority,UP=wo.unstable_UserBlockingPriority,qg=wo.unstable_NormalPriority,HD=wo.unstable_LowPriority,ZP=wo.unstable_IdlePriority,Uy=null,Ja=null;function WD(e){if(Ja&&typeof Ja.onCommitFiberRoot=="function")try{Ja.onCommitFiberRoot(Uy,e,void 0,(e.current.flags&128)===128)}catch{}}var wa=Math.clz32?Math.clz32:KD,GD=Math.log,qD=Math.LN2;function KD(e){return e>>>=0,e===0?32:31-(GD(e)/qD|0)|0}var W0=64,G0=4194304;function op(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Kg(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,h=e.pingedLanes,d=r&268435455;if(d!==0){var c=d&~s;c!==0?n=op(c):(h&=d,h!==0&&(n=op(h)))}else d=r&~s,d!==0?n=op(d):h!==0&&(n=op(h));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,h=t&-t,s>=h||s===16&&(h&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-wa(t),s=1<<r,n|=e[r],t&=~s;return n}function XD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YD(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,h=e.pendingLanes;0<h;){var d=31-wa(h),c=1<<d,b=s[d];b===-1?(!(c&r)||c&n)&&(s[d]=XD(c,t)):b<=t&&(e.expiredLanes|=c),h&=~c}}function Hx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function HP(){var e=W0;return W0<<=1,!(W0&4194240)&&(W0=64),e}function m_(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function dm(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wa(t),e[t]=r}function JD(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-wa(r),h=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~h}}function j2(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-wa(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Tr=0;function WP(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var GP,$2,qP,KP,XP,Wx=!1,q0=[],Tl=null,Il=null,Ml=null,Dp=new Map,Op=new Map,wl=[],QD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W4(e,t){switch(e){case"focusin":case"focusout":Tl=null;break;case"dragenter":case"dragleave":Il=null;break;case"mouseover":case"mouseout":Ml=null;break;case"pointerover":case"pointerout":Dp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Op.delete(t.pointerId)}}function Zf(e,t,r,n,s,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:h,targetContainers:[s]},t!==null&&(t=pm(t),t!==null&&$2(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function eO(e,t,r,n,s){switch(t){case"focusin":return Tl=Zf(Tl,e,t,r,n,s),!0;case"dragenter":return Il=Zf(Il,e,t,r,n,s),!0;case"mouseover":return Ml=Zf(Ml,e,t,r,n,s),!0;case"pointerover":var h=s.pointerId;return Dp.set(h,Zf(Dp.get(h)||null,e,t,r,n,s)),!0;case"gotpointercapture":return h=s.pointerId,Op.set(h,Zf(Op.get(h)||null,e,t,r,n,s)),!0}return!1}function YP(e){var t=Lc(e.target);if(t!==null){var r=su(t);if(r!==null){if(t=r.tag,t===13){if(t=NP(r),t!==null){e.blockedOn=t,XP(e.priority,function(){qP(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Gx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);$x=n,r.target.dispatchEvent(n),$x=null}else return t=pm(r),t!==null&&$2(t),e.blockedOn=r,!1;t.shift()}return!0}function G4(e,t,r){Eg(e)&&r.delete(t)}function tO(){Wx=!1,Tl!==null&&Eg(Tl)&&(Tl=null),Il!==null&&Eg(Il)&&(Il=null),Ml!==null&&Eg(Ml)&&(Ml=null),Dp.forEach(G4),Op.forEach(G4)}function Hf(e,t){e.blockedOn===t&&(e.blockedOn=null,Wx||(Wx=!0,wo.unstable_scheduleCallback(wo.unstable_NormalPriority,tO)))}function zp(e){function t(s){return Hf(s,e)}if(0<q0.length){Hf(q0[0],e);for(var r=1;r<q0.length;r++){var n=q0[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Tl!==null&&Hf(Tl,e),Il!==null&&Hf(Il,e),Ml!==null&&Hf(Ml,e),Dp.forEach(t),Op.forEach(t),r=0;r<wl.length;r++)n=wl[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<wl.length&&(r=wl[0],r.blockedOn===null);)YP(r),r.blockedOn===null&&wl.shift()}var Uh=Vs.ReactCurrentBatchConfig,Xg=!0;function rO(e,t,r,n){var s=Tr,h=Uh.transition;Uh.transition=null;try{Tr=1,V2(e,t,r,n)}finally{Tr=s,Uh.transition=h}}function nO(e,t,r,n){var s=Tr,h=Uh.transition;Uh.transition=null;try{Tr=4,V2(e,t,r,n)}finally{Tr=s,Uh.transition=h}}function V2(e,t,r,n){if(Xg){var s=Gx(e,t,r,n);if(s===null)A_(e,t,n,Yg,r),W4(e,n);else if(eO(s,e,t,r,n))n.stopPropagation();else if(W4(e,n),t&4&&-1<QD.indexOf(e)){for(;s!==null;){var h=pm(s);if(h!==null&&GP(h),h=Gx(e,t,r,n),h===null&&A_(e,t,n,Yg,r),h===s)break;s=h}s!==null&&n.stopPropagation()}else A_(e,t,n,null,r)}}var Yg=null;function Gx(e,t,r,n){if(Yg=null,e=B2(n),e=Lc(e),e!==null)if(t=su(e),t===null)e=null;else if(r=t.tag,r===13){if(e=NP(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yg=e,null}function JP(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZD()){case N2:return 1;case UP:return 4;case qg:case HD:return 16;case ZP:return 536870912;default:return 16}default:return 16}}var El=null,U2=null,Ag=null;function QP(){if(Ag)return Ag;var e,t=U2,r=t.length,n,s="value"in El?El.value:El.textContent,h=s.length;for(e=0;e<r&&t[e]===s[e];e++);var d=r-e;for(n=1;n<=d&&t[r-n]===s[h-n];n++);return Ag=s.slice(e,1<n?1-n:void 0)}function Cg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function K0(){return!0}function q4(){return!1}function Co(e){function t(r,n,s,h,d){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=h,this.target=d,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(h):h[c]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?K0:q4,this.isPropagationStopped=q4,this}return ln(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=K0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=K0)},persist:function(){},isPersistent:K0}),t}var yd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Z2=Co(yd),fm=ln({},yd,{view:0,detail:0}),iO=Co(fm),g_,y_,Wf,Zy=ln({},fm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:H2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wf&&(Wf&&e.type==="mousemove"?(g_=e.screenX-Wf.screenX,y_=e.screenY-Wf.screenY):y_=g_=0,Wf=e),g_)},movementY:function(e){return"movementY"in e?e.movementY:y_}}),K4=Co(Zy),oO=ln({},Zy,{dataTransfer:0}),aO=Co(oO),sO=ln({},fm,{relatedTarget:0}),v_=Co(sO),lO=ln({},yd,{animationName:0,elapsedTime:0,pseudoElement:0}),cO=Co(lO),uO=ln({},yd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hO=Co(uO),dO=ln({},yd,{data:0}),X4=Co(dO),fO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mO[e])?!!t[e]:!1}function H2(){return gO}var yO=ln({},fm,{key:function(e){if(e.key){var t=fO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:H2,charCode:function(e){return e.type==="keypress"?Cg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vO=Co(yO),_O=ln({},Zy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y4=Co(_O),xO=ln({},fm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:H2}),bO=Co(xO),wO=ln({},yd,{propertyName:0,elapsedTime:0,pseudoElement:0}),SO=Co(wO),EO=ln({},Zy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AO=Co(EO),CO=[9,13,27,32],W2=zs&&"CompositionEvent"in window,yp=null;zs&&"documentMode"in document&&(yp=document.documentMode);var PO=zs&&"TextEvent"in window&&!yp,eT=zs&&(!W2||yp&&8<yp&&11>=yp),J4=" ",Q4=!1;function tT(e,t){switch(e){case"keyup":return CO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ah=!1;function TO(e,t){switch(e){case"compositionend":return rT(t);case"keypress":return t.which!==32?null:(Q4=!0,J4);case"textInput":return e=t.data,e===J4&&Q4?null:e;default:return null}}function IO(e,t){if(Ah)return e==="compositionend"||!W2&&tT(e,t)?(e=QP(),Ag=U2=El=null,Ah=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eT&&t.locale!=="ko"?null:t.data;default:return null}}var MO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!MO[e.type]:t==="textarea"}function nT(e,t,r,n){DP(n),t=Jg(t,"onChange"),0<t.length&&(r=new Z2("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var vp=null,Fp=null;function RO(e){pT(e,0)}function Hy(e){var t=Th(e);if(PP(t))return e}function kO(e,t){if(e==="change")return t}var iT=!1;if(zs){var __;if(zs){var x_="oninput"in document;if(!x_){var tE=document.createElement("div");tE.setAttribute("oninput","return;"),x_=typeof tE.oninput=="function"}__=x_}else __=!1;iT=__&&(!document.documentMode||9<document.documentMode)}function rE(){vp&&(vp.detachEvent("onpropertychange",oT),Fp=vp=null)}function oT(e){if(e.propertyName==="value"&&Hy(Fp)){var t=[];nT(t,Fp,e,B2(e)),BP(RO,t)}}function LO(e,t,r){e==="focusin"?(rE(),vp=t,Fp=r,vp.attachEvent("onpropertychange",oT)):e==="focusout"&&rE()}function DO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hy(Fp)}function OO(e,t){if(e==="click")return Hy(t)}function zO(e,t){if(e==="input"||e==="change")return Hy(t)}function FO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pa=typeof Object.is=="function"?Object.is:FO;function Bp(e,t){if(Pa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ix.call(t,s)||!Pa(e[s],t[s]))return!1}return!0}function nE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iE(e,t){var r=nE(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nE(r)}}function aT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sT(){for(var e=window,t=Hg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Hg(e.document)}return t}function G2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function BO(e){var t=sT(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&aT(r.ownerDocument.documentElement,r)){if(n!==null&&G2(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,h=Math.min(n.start,s);n=n.end===void 0?h:Math.min(n.end,s),!e.extend&&h>n&&(s=n,n=h,h=s),s=iE(r,h);var d=iE(r,n);s&&d&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),h>n?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var NO=zs&&"documentMode"in document&&11>=document.documentMode,Ch=null,qx=null,_p=null,Kx=!1;function oE(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Kx||Ch==null||Ch!==Hg(n)||(n=Ch,"selectionStart"in n&&G2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_p&&Bp(_p,n)||(_p=n,n=Jg(qx,"onSelect"),0<n.length&&(t=new Z2("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ch)))}function X0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ph={animationend:X0("Animation","AnimationEnd"),animationiteration:X0("Animation","AnimationIteration"),animationstart:X0("Animation","AnimationStart"),transitionend:X0("Transition","TransitionEnd")},b_={},lT={};zs&&(lT=document.createElement("div").style,"AnimationEvent"in window||(delete Ph.animationend.animation,delete Ph.animationiteration.animation,delete Ph.animationstart.animation),"TransitionEvent"in window||delete Ph.transitionend.transition);function Wy(e){if(b_[e])return b_[e];if(!Ph[e])return e;var t=Ph[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in lT)return b_[e]=t[r];return e}var cT=Wy("animationend"),uT=Wy("animationiteration"),hT=Wy("animationstart"),dT=Wy("transitionend"),fT=new Map,aE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hl(e,t){fT.set(e,t),au(t,[e])}for(var w_=0;w_<aE.length;w_++){var S_=aE[w_],jO=S_.toLowerCase(),$O=S_[0].toUpperCase()+S_.slice(1);Hl(jO,"on"+$O)}Hl(cT,"onAnimationEnd");Hl(uT,"onAnimationIteration");Hl(hT,"onAnimationStart");Hl("dblclick","onDoubleClick");Hl("focusin","onFocus");Hl("focusout","onBlur");Hl(dT,"onTransitionEnd");Jh("onMouseEnter",["mouseout","mouseover"]);Jh("onMouseLeave",["mouseout","mouseover"]);Jh("onPointerEnter",["pointerout","pointerover"]);Jh("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ap="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VO=new Set("cancel close invalid load scroll toggle".split(" ").concat(ap));function sE(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,jD(n,t,void 0,e),e.currentTarget=null}function pT(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var h=void 0;if(t)for(var d=n.length-1;0<=d;d--){var c=n[d],b=c.instance,E=c.currentTarget;if(c=c.listener,b!==h&&s.isPropagationStopped())break e;sE(s,c,E),h=b}else for(d=0;d<n.length;d++){if(c=n[d],b=c.instance,E=c.currentTarget,c=c.listener,b!==h&&s.isPropagationStopped())break e;sE(s,c,E),h=b}}}if(Gg)throw e=Zx,Gg=!1,Zx=null,e}function Zr(e,t){var r=t[eb];r===void 0&&(r=t[eb]=new Set);var n=e+"__bubble";r.has(n)||(mT(t,e,2,!1),r.add(n))}function E_(e,t,r){var n=0;t&&(n|=4),mT(r,e,n,t)}var Y0="_reactListening"+Math.random().toString(36).slice(2);function Np(e){if(!e[Y0]){e[Y0]=!0,wP.forEach(function(r){r!=="selectionchange"&&(VO.has(r)||E_(r,!1,e),E_(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Y0]||(t[Y0]=!0,E_("selectionchange",!1,t))}}function mT(e,t,r,n){switch(JP(t)){case 1:var s=rO;break;case 4:s=nO;break;default:s=V2}r=s.bind(null,t,r,e),s=void 0,!Ux||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function A_(e,t,r,n,s){var h=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var c=n.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(d===4)for(d=n.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===s||b.nodeType===8&&b.parentNode===s))return;d=d.return}for(;c!==null;){if(d=Lc(c),d===null)return;if(b=d.tag,b===5||b===6){n=h=d;continue e}c=c.parentNode}}n=n.return}BP(function(){var E=h,I=B2(r),P=[];e:{var T=fT.get(e);if(T!==void 0){var O=Z2,j=e;switch(e){case"keypress":if(Cg(r)===0)break e;case"keydown":case"keyup":O=vO;break;case"focusin":j="focus",O=v_;break;case"focusout":j="blur",O=v_;break;case"beforeblur":case"afterblur":O=v_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=K4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=aO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=bO;break;case cT:case uT:case hT:O=cO;break;case dT:O=SO;break;case"scroll":O=iO;break;case"wheel":O=AO;break;case"copy":case"cut":case"paste":O=hO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Y4}var V=(t&4)!==0,re=!V&&e==="scroll",W=V?T!==null?T+"Capture":null:T;V=[];for(var Z=E,K;Z!==null;){K=Z;var ie=K.stateNode;if(K.tag===5&&ie!==null&&(K=ie,W!==null&&(ie=Lp(Z,W),ie!=null&&V.push(jp(Z,ie,K)))),re)break;Z=Z.return}0<V.length&&(T=new O(T,j,null,r,I),P.push({event:T,listeners:V}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",T&&r!==$x&&(j=r.relatedTarget||r.fromElement)&&(Lc(j)||j[Fs]))break e;if((O||T)&&(T=I.window===I?I:(T=I.ownerDocument)?T.defaultView||T.parentWindow:window,O?(j=r.relatedTarget||r.toElement,O=E,j=j?Lc(j):null,j!==null&&(re=su(j),j!==re||j.tag!==5&&j.tag!==6)&&(j=null)):(O=null,j=E),O!==j)){if(V=K4,ie="onMouseLeave",W="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(V=Y4,ie="onPointerLeave",W="onPointerEnter",Z="pointer"),re=O==null?T:Th(O),K=j==null?T:Th(j),T=new V(ie,Z+"leave",O,r,I),T.target=re,T.relatedTarget=K,ie=null,Lc(I)===E&&(V=new V(W,Z+"enter",j,r,I),V.target=K,V.relatedTarget=re,ie=V),re=ie,O&&j)t:{for(V=O,W=j,Z=0,K=V;K;K=lh(K))Z++;for(K=0,ie=W;ie;ie=lh(ie))K++;for(;0<Z-K;)V=lh(V),Z--;for(;0<K-Z;)W=lh(W),K--;for(;Z--;){if(V===W||W!==null&&V===W.alternate)break t;V=lh(V),W=lh(W)}V=null}else V=null;O!==null&&lE(P,T,O,V,!1),j!==null&&re!==null&&lE(P,re,j,V,!0)}}e:{if(T=E?Th(E):window,O=T.nodeName&&T.nodeName.toLowerCase(),O==="select"||O==="input"&&T.type==="file")var de=kO;else if(eE(T))if(iT)de=zO;else{de=DO;var ae=LO}else(O=T.nodeName)&&O.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(de=OO);if(de&&(de=de(e,E))){nT(P,de,r,I);break e}ae&&ae(e,T,E),e==="focusout"&&(ae=T._wrapperState)&&ae.controlled&&T.type==="number"&&zx(T,"number",T.value)}switch(ae=E?Th(E):window,e){case"focusin":(eE(ae)||ae.contentEditable==="true")&&(Ch=ae,qx=E,_p=null);break;case"focusout":_p=qx=Ch=null;break;case"mousedown":Kx=!0;break;case"contextmenu":case"mouseup":case"dragend":Kx=!1,oE(P,r,I);break;case"selectionchange":if(NO)break;case"keydown":case"keyup":oE(P,r,I)}var J;if(W2)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Ah?tT(e,r)&&(we="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(we="onCompositionStart");we&&(eT&&r.locale!=="ko"&&(Ah||we!=="onCompositionStart"?we==="onCompositionEnd"&&Ah&&(J=QP()):(El=I,U2="value"in El?El.value:El.textContent,Ah=!0)),ae=Jg(E,we),0<ae.length&&(we=new X4(we,e,null,r,I),P.push({event:we,listeners:ae}),J?we.data=J:(J=rT(r),J!==null&&(we.data=J)))),(J=PO?TO(e,r):IO(e,r))&&(E=Jg(E,"onBeforeInput"),0<E.length&&(I=new X4("onBeforeInput","beforeinput",null,r,I),P.push({event:I,listeners:E}),I.data=J))}pT(P,t)})}function jp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Jg(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,h=s.stateNode;s.tag===5&&h!==null&&(s=h,h=Lp(e,r),h!=null&&n.unshift(jp(e,h,s)),h=Lp(e,t),h!=null&&n.push(jp(e,h,s))),e=e.return}return n}function lh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lE(e,t,r,n,s){for(var h=t._reactName,d=[];r!==null&&r!==n;){var c=r,b=c.alternate,E=c.stateNode;if(b!==null&&b===n)break;c.tag===5&&E!==null&&(c=E,s?(b=Lp(r,h),b!=null&&d.unshift(jp(r,b,c))):s||(b=Lp(r,h),b!=null&&d.push(jp(r,b,c)))),r=r.return}d.length!==0&&e.push({event:t,listeners:d})}var UO=/\r\n?/g,ZO=/\u0000|\uFFFD/g;function cE(e){return(typeof e=="string"?e:""+e).replace(UO,`
`).replace(ZO,"")}function J0(e,t,r){if(t=cE(t),cE(e)!==t&&r)throw Error(et(425))}function Qg(){}var Xx=null,Yx=null;function Jx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qx=typeof setTimeout=="function"?setTimeout:void 0,HO=typeof clearTimeout=="function"?clearTimeout:void 0,uE=typeof Promise=="function"?Promise:void 0,WO=typeof queueMicrotask=="function"?queueMicrotask:typeof uE<"u"?function(e){return uE.resolve(null).then(e).catch(GO)}:Qx;function GO(e){setTimeout(function(){throw e})}function C_(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),zp(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);zp(t)}function Rl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var vd=Math.random().toString(36).slice(2),Wa="__reactFiber$"+vd,$p="__reactProps$"+vd,Fs="__reactContainer$"+vd,eb="__reactEvents$"+vd,qO="__reactListeners$"+vd,KO="__reactHandles$"+vd;function Lc(e){var t=e[Wa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Fs]||r[Wa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=hE(e);e!==null;){if(r=e[Wa])return r;e=hE(e)}return t}e=r,r=e.parentNode}return null}function pm(e){return e=e[Wa]||e[Fs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Th(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function Gy(e){return e[$p]||null}var tb=[],Ih=-1;function Wl(e){return{current:e}}function Hr(e){0>Ih||(e.current=tb[Ih],tb[Ih]=null,Ih--)}function $r(e,t){Ih++,tb[Ih]=e.current,e.current=t}var Nl={},Ci=Wl(Nl),Xi=Wl(!1),Wc=Nl;function Qh(e,t){var r=e.type.contextTypes;if(!r)return Nl;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},h;for(h in r)s[h]=t[h];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Yi(e){return e=e.childContextTypes,e!=null}function ey(){Hr(Xi),Hr(Ci)}function dE(e,t,r){if(Ci.current!==Nl)throw Error(et(168));$r(Ci,t),$r(Xi,r)}function gT(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(et(108,LD(e)||"Unknown",s));return ln({},r,n)}function ty(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Nl,Wc=Ci.current,$r(Ci,e),$r(Xi,Xi.current),!0}function fE(e,t,r){var n=e.stateNode;if(!n)throw Error(et(169));r?(e=gT(e,t,Wc),n.__reactInternalMemoizedMergedChildContext=e,Hr(Xi),Hr(Ci),$r(Ci,e)):Hr(Xi),$r(Xi,r)}var As=null,qy=!1,P_=!1;function yT(e){As===null?As=[e]:As.push(e)}function XO(e){qy=!0,yT(e)}function Gl(){if(!P_&&As!==null){P_=!0;var e=0,t=Tr;try{var r=As;for(Tr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}As=null,qy=!1}catch(s){throw As!==null&&(As=As.slice(e+1)),VP(N2,Gl),s}finally{Tr=t,P_=!1}}return null}var Mh=[],Rh=0,ry=null,ny=0,$o=[],Vo=0,Gc=null,Ts=1,Is="";function Tc(e,t){Mh[Rh++]=ny,Mh[Rh++]=ry,ry=e,ny=t}function vT(e,t,r){$o[Vo++]=Ts,$o[Vo++]=Is,$o[Vo++]=Gc,Gc=e;var n=Ts;e=Is;var s=32-wa(n)-1;n&=~(1<<s),r+=1;var h=32-wa(t)+s;if(30<h){var d=s-s%5;h=(n&(1<<d)-1).toString(32),n>>=d,s-=d,Ts=1<<32-wa(t)+s|r<<s|n,Is=h+e}else Ts=1<<h|r<<s|n,Is=e}function q2(e){e.return!==null&&(Tc(e,1),vT(e,1,0))}function K2(e){for(;e===ry;)ry=Mh[--Rh],Mh[Rh]=null,ny=Mh[--Rh],Mh[Rh]=null;for(;e===Gc;)Gc=$o[--Vo],$o[Vo]=null,Is=$o[--Vo],$o[Vo]=null,Ts=$o[--Vo],$o[Vo]=null}var bo=null,xo=null,Yr=!1,_a=null;function _T(e,t){var r=Go(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function pE(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bo=e,xo=Rl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bo=e,xo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Gc!==null?{id:Ts,overflow:Is}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Go(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,bo=e,xo=null,!0):!1;default:return!1}}function rb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nb(e){if(Yr){var t=xo;if(t){var r=t;if(!pE(e,t)){if(rb(e))throw Error(et(418));t=Rl(r.nextSibling);var n=bo;t&&pE(e,t)?_T(n,r):(e.flags=e.flags&-4097|2,Yr=!1,bo=e)}}else{if(rb(e))throw Error(et(418));e.flags=e.flags&-4097|2,Yr=!1,bo=e}}}function mE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bo=e}function Q0(e){if(e!==bo)return!1;if(!Yr)return mE(e),Yr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jx(e.type,e.memoizedProps)),t&&(t=xo)){if(rb(e))throw xT(),Error(et(418));for(;t;)_T(e,t),t=Rl(t.nextSibling)}if(mE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){xo=Rl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}xo=null}}else xo=bo?Rl(e.stateNode.nextSibling):null;return!0}function xT(){for(var e=xo;e;)e=Rl(e.nextSibling)}function ed(){xo=bo=null,Yr=!1}function X2(e){_a===null?_a=[e]:_a.push(e)}var YO=Vs.ReactCurrentBatchConfig;function Gf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(et(309));var n=r.stateNode}if(!n)throw Error(et(147,e));var s=n,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(d){var c=s.refs;d===null?delete c[h]:c[h]=d},t._stringRef=h,t)}if(typeof e!="string")throw Error(et(284));if(!r._owner)throw Error(et(290,e))}return e}function eg(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gE(e){var t=e._init;return t(e._payload)}function bT(e){function t(W,Z){if(e){var K=W.deletions;K===null?(W.deletions=[Z],W.flags|=16):K.push(Z)}}function r(W,Z){if(!e)return null;for(;Z!==null;)t(W,Z),Z=Z.sibling;return null}function n(W,Z){for(W=new Map;Z!==null;)Z.key!==null?W.set(Z.key,Z):W.set(Z.index,Z),Z=Z.sibling;return W}function s(W,Z){return W=Ol(W,Z),W.index=0,W.sibling=null,W}function h(W,Z,K){return W.index=K,e?(K=W.alternate,K!==null?(K=K.index,K<Z?(W.flags|=2,Z):K):(W.flags|=2,Z)):(W.flags|=1048576,Z)}function d(W){return e&&W.alternate===null&&(W.flags|=2),W}function c(W,Z,K,ie){return Z===null||Z.tag!==6?(Z=D_(K,W.mode,ie),Z.return=W,Z):(Z=s(Z,K),Z.return=W,Z)}function b(W,Z,K,ie){var de=K.type;return de===Eh?I(W,Z,K.props.children,ie,K.key):Z!==null&&(Z.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===xl&&gE(de)===Z.type)?(ie=s(Z,K.props),ie.ref=Gf(W,Z,K),ie.return=W,ie):(ie=Lg(K.type,K.key,K.props,null,W.mode,ie),ie.ref=Gf(W,Z,K),ie.return=W,ie)}function E(W,Z,K,ie){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==K.containerInfo||Z.stateNode.implementation!==K.implementation?(Z=O_(K,W.mode,ie),Z.return=W,Z):(Z=s(Z,K.children||[]),Z.return=W,Z)}function I(W,Z,K,ie,de){return Z===null||Z.tag!==7?(Z=$c(K,W.mode,ie,de),Z.return=W,Z):(Z=s(Z,K),Z.return=W,Z)}function P(W,Z,K){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=D_(""+Z,W.mode,K),Z.return=W,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case U0:return K=Lg(Z.type,Z.key,Z.props,null,W.mode,K),K.ref=Gf(W,null,Z),K.return=W,K;case Sh:return Z=O_(Z,W.mode,K),Z.return=W,Z;case xl:var ie=Z._init;return P(W,ie(Z._payload),K)}if(ip(Z)||Vf(Z))return Z=$c(Z,W.mode,K,null),Z.return=W,Z;eg(W,Z)}return null}function T(W,Z,K,ie){var de=Z!==null?Z.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return de!==null?null:c(W,Z,""+K,ie);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case U0:return K.key===de?b(W,Z,K,ie):null;case Sh:return K.key===de?E(W,Z,K,ie):null;case xl:return de=K._init,T(W,Z,de(K._payload),ie)}if(ip(K)||Vf(K))return de!==null?null:I(W,Z,K,ie,null);eg(W,K)}return null}function O(W,Z,K,ie,de){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return W=W.get(K)||null,c(Z,W,""+ie,de);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case U0:return W=W.get(ie.key===null?K:ie.key)||null,b(Z,W,ie,de);case Sh:return W=W.get(ie.key===null?K:ie.key)||null,E(Z,W,ie,de);case xl:var ae=ie._init;return O(W,Z,K,ae(ie._payload),de)}if(ip(ie)||Vf(ie))return W=W.get(K)||null,I(Z,W,ie,de,null);eg(Z,ie)}return null}function j(W,Z,K,ie){for(var de=null,ae=null,J=Z,we=Z=0,Re=null;J!==null&&we<K.length;we++){J.index>we?(Re=J,J=null):Re=J.sibling;var De=T(W,J,K[we],ie);if(De===null){J===null&&(J=Re);break}e&&J&&De.alternate===null&&t(W,J),Z=h(De,Z,we),ae===null?de=De:ae.sibling=De,ae=De,J=Re}if(we===K.length)return r(W,J),Yr&&Tc(W,we),de;if(J===null){for(;we<K.length;we++)J=P(W,K[we],ie),J!==null&&(Z=h(J,Z,we),ae===null?de=J:ae.sibling=J,ae=J);return Yr&&Tc(W,we),de}for(J=n(W,J);we<K.length;we++)Re=O(J,W,we,K[we],ie),Re!==null&&(e&&Re.alternate!==null&&J.delete(Re.key===null?we:Re.key),Z=h(Re,Z,we),ae===null?de=Re:ae.sibling=Re,ae=Re);return e&&J.forEach(function(Oe){return t(W,Oe)}),Yr&&Tc(W,we),de}function V(W,Z,K,ie){var de=Vf(K);if(typeof de!="function")throw Error(et(150));if(K=de.call(K),K==null)throw Error(et(151));for(var ae=de=null,J=Z,we=Z=0,Re=null,De=K.next();J!==null&&!De.done;we++,De=K.next()){J.index>we?(Re=J,J=null):Re=J.sibling;var Oe=T(W,J,De.value,ie);if(Oe===null){J===null&&(J=Re);break}e&&J&&Oe.alternate===null&&t(W,J),Z=h(Oe,Z,we),ae===null?de=Oe:ae.sibling=Oe,ae=Oe,J=Re}if(De.done)return r(W,J),Yr&&Tc(W,we),de;if(J===null){for(;!De.done;we++,De=K.next())De=P(W,De.value,ie),De!==null&&(Z=h(De,Z,we),ae===null?de=De:ae.sibling=De,ae=De);return Yr&&Tc(W,we),de}for(J=n(W,J);!De.done;we++,De=K.next())De=O(J,W,we,De.value,ie),De!==null&&(e&&De.alternate!==null&&J.delete(De.key===null?we:De.key),Z=h(De,Z,we),ae===null?de=De:ae.sibling=De,ae=De);return e&&J.forEach(function(Qe){return t(W,Qe)}),Yr&&Tc(W,we),de}function re(W,Z,K,ie){if(typeof K=="object"&&K!==null&&K.type===Eh&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case U0:e:{for(var de=K.key,ae=Z;ae!==null;){if(ae.key===de){if(de=K.type,de===Eh){if(ae.tag===7){r(W,ae.sibling),Z=s(ae,K.props.children),Z.return=W,W=Z;break e}}else if(ae.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===xl&&gE(de)===ae.type){r(W,ae.sibling),Z=s(ae,K.props),Z.ref=Gf(W,ae,K),Z.return=W,W=Z;break e}r(W,ae);break}else t(W,ae);ae=ae.sibling}K.type===Eh?(Z=$c(K.props.children,W.mode,ie,K.key),Z.return=W,W=Z):(ie=Lg(K.type,K.key,K.props,null,W.mode,ie),ie.ref=Gf(W,Z,K),ie.return=W,W=ie)}return d(W);case Sh:e:{for(ae=K.key;Z!==null;){if(Z.key===ae)if(Z.tag===4&&Z.stateNode.containerInfo===K.containerInfo&&Z.stateNode.implementation===K.implementation){r(W,Z.sibling),Z=s(Z,K.children||[]),Z.return=W,W=Z;break e}else{r(W,Z);break}else t(W,Z);Z=Z.sibling}Z=O_(K,W.mode,ie),Z.return=W,W=Z}return d(W);case xl:return ae=K._init,re(W,Z,ae(K._payload),ie)}if(ip(K))return j(W,Z,K,ie);if(Vf(K))return V(W,Z,K,ie);eg(W,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,Z!==null&&Z.tag===6?(r(W,Z.sibling),Z=s(Z,K),Z.return=W,W=Z):(r(W,Z),Z=D_(K,W.mode,ie),Z.return=W,W=Z),d(W)):r(W,Z)}return re}var td=bT(!0),wT=bT(!1),iy=Wl(null),oy=null,kh=null,Y2=null;function J2(){Y2=kh=oy=null}function Q2(e){var t=iy.current;Hr(iy),e._currentValue=t}function ib(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Zh(e,t){oy=e,Y2=kh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ki=!0),e.firstContext=null)}function Yo(e){var t=e._currentValue;if(Y2!==e)if(e={context:e,memoizedValue:t,next:null},kh===null){if(oy===null)throw Error(et(308));kh=e,oy.dependencies={lanes:0,firstContext:e}}else kh=kh.next=e;return t}var Dc=null;function ew(e){Dc===null?Dc=[e]:Dc.push(e)}function ST(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,ew(t)):(r.next=s.next,s.next=r),t.interleaved=r,Bs(e,n)}function Bs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var bl=!1;function tw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ET(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kl(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,_r&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Bs(e,r)}return s=n.interleaved,s===null?(t.next=t,ew(n)):(t.next=s.next,s.next=t),n.interleaved=t,Bs(e,r)}function Pg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,j2(e,r)}}function yE(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?s=h=d:h=h.next=d,r=r.next}while(r!==null);h===null?s=h=t:h=h.next=t}else s=h=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:h,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ay(e,t,r,n){var s=e.updateQueue;bl=!1;var h=s.firstBaseUpdate,d=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var b=c,E=b.next;b.next=null,d===null?h=E:d.next=E,d=b;var I=e.alternate;I!==null&&(I=I.updateQueue,c=I.lastBaseUpdate,c!==d&&(c===null?I.firstBaseUpdate=E:c.next=E,I.lastBaseUpdate=b))}if(h!==null){var P=s.baseState;d=0,I=E=b=null,c=h;do{var T=c.lane,O=c.eventTime;if((n&T)===T){I!==null&&(I=I.next={eventTime:O,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=e,V=c;switch(T=t,O=r,V.tag){case 1:if(j=V.payload,typeof j=="function"){P=j.call(O,P,T);break e}P=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=V.payload,T=typeof j=="function"?j.call(O,P,T):j,T==null)break e;P=ln({},P,T);break e;case 2:bl=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,T=s.effects,T===null?s.effects=[c]:T.push(c))}else O={eventTime:O,lane:T,tag:c.tag,payload:c.payload,callback:c.callback,next:null},I===null?(E=I=O,b=P):I=I.next=O,d|=T;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;T=c,c=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(!0);if(I===null&&(b=P),s.baseState=b,s.firstBaseUpdate=E,s.lastBaseUpdate=I,t=s.shared.interleaved,t!==null){s=t;do d|=s.lane,s=s.next;while(s!==t)}else h===null&&(s.shared.lanes=0);Kc|=d,e.lanes=d,e.memoizedState=P}}function vE(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(et(191,s));s.call(n)}}}var mm={},Qa=Wl(mm),Vp=Wl(mm),Up=Wl(mm);function Oc(e){if(e===mm)throw Error(et(174));return e}function rw(e,t){switch($r(Up,t),$r(Vp,e),$r(Qa,mm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bx(t,e)}Hr(Qa),$r(Qa,t)}function rd(){Hr(Qa),Hr(Vp),Hr(Up)}function AT(e){Oc(Up.current);var t=Oc(Qa.current),r=Bx(t,e.type);t!==r&&($r(Vp,e),$r(Qa,r))}function nw(e){Vp.current===e&&(Hr(Qa),Hr(Vp))}var nn=Wl(0);function sy(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var T_=[];function iw(){for(var e=0;e<T_.length;e++)T_[e]._workInProgressVersionPrimary=null;T_.length=0}var Tg=Vs.ReactCurrentDispatcher,I_=Vs.ReactCurrentBatchConfig,qc=0,sn=null,zn=null,Yn=null,ly=!1,xp=!1,Zp=0,JO=0;function wi(){throw Error(et(321))}function ow(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Pa(e[r],t[r]))return!1;return!0}function aw(e,t,r,n,s,h){if(qc=h,sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Tg.current=e===null||e.memoizedState===null?rz:nz,e=r(n,s),xp){h=0;do{if(xp=!1,Zp=0,25<=h)throw Error(et(301));h+=1,Yn=zn=null,t.updateQueue=null,Tg.current=iz,e=r(n,s)}while(xp)}if(Tg.current=cy,t=zn!==null&&zn.next!==null,qc=0,Yn=zn=sn=null,ly=!1,t)throw Error(et(300));return e}function sw(){var e=Zp!==0;return Zp=0,e}function Ha(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?sn.memoizedState=Yn=e:Yn=Yn.next=e,Yn}function Jo(){if(zn===null){var e=sn.alternate;e=e!==null?e.memoizedState:null}else e=zn.next;var t=Yn===null?sn.memoizedState:Yn.next;if(t!==null)Yn=t,zn=e;else{if(e===null)throw Error(et(310));zn=e,e={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Yn===null?sn.memoizedState=Yn=e:Yn=Yn.next=e}return Yn}function Hp(e,t){return typeof t=="function"?t(e):t}function M_(e){var t=Jo(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=zn,s=n.baseQueue,h=r.pending;if(h!==null){if(s!==null){var d=s.next;s.next=h.next,h.next=d}n.baseQueue=s=h,r.pending=null}if(s!==null){h=s.next,n=n.baseState;var c=d=null,b=null,E=h;do{var I=E.lane;if((qc&I)===I)b!==null&&(b=b.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),n=E.hasEagerState?E.eagerState:e(n,E.action);else{var P={lane:I,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};b===null?(c=b=P,d=n):b=b.next=P,sn.lanes|=I,Kc|=I}E=E.next}while(E!==null&&E!==h);b===null?d=n:b.next=c,Pa(n,t.memoizedState)||(Ki=!0),t.memoizedState=n,t.baseState=d,t.baseQueue=b,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do h=s.lane,sn.lanes|=h,Kc|=h,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function R_(e){var t=Jo(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,h=t.memoizedState;if(s!==null){r.pending=null;var d=s=s.next;do h=e(h,d.action),d=d.next;while(d!==s);Pa(h,t.memoizedState)||(Ki=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,n]}function CT(){}function PT(e,t){var r=sn,n=Jo(),s=t(),h=!Pa(n.memoizedState,s);if(h&&(n.memoizedState=s,Ki=!0),n=n.queue,lw(MT.bind(null,r,n,e),[e]),n.getSnapshot!==t||h||Yn!==null&&Yn.memoizedState.tag&1){if(r.flags|=2048,Wp(9,IT.bind(null,r,n,s,t),void 0,null),Qn===null)throw Error(et(349));qc&30||TT(r,t,s)}return s}function TT(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function IT(e,t,r,n){t.value=r,t.getSnapshot=n,RT(t)&&kT(e)}function MT(e,t,r){return r(function(){RT(t)&&kT(e)})}function RT(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Pa(e,r)}catch{return!0}}function kT(e){var t=Bs(e,1);t!==null&&Sa(t,e,1,-1)}function _E(e){var t=Ha();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hp,lastRenderedState:e},t.queue=e,e=e.dispatch=tz.bind(null,sn,e),[t.memoizedState,e]}function Wp(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function LT(){return Jo().memoizedState}function Ig(e,t,r,n){var s=Ha();sn.flags|=e,s.memoizedState=Wp(1|t,r,void 0,n===void 0?null:n)}function Ky(e,t,r,n){var s=Jo();n=n===void 0?null:n;var h=void 0;if(zn!==null){var d=zn.memoizedState;if(h=d.destroy,n!==null&&ow(n,d.deps)){s.memoizedState=Wp(t,r,h,n);return}}sn.flags|=e,s.memoizedState=Wp(1|t,r,h,n)}function xE(e,t){return Ig(8390656,8,e,t)}function lw(e,t){return Ky(2048,8,e,t)}function DT(e,t){return Ky(4,2,e,t)}function OT(e,t){return Ky(4,4,e,t)}function zT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function FT(e,t,r){return r=r!=null?r.concat([e]):null,Ky(4,4,zT.bind(null,t,e),r)}function cw(){}function BT(e,t){var r=Jo();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ow(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function NT(e,t){var r=Jo();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ow(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function jT(e,t,r){return qc&21?(Pa(r,t)||(r=HP(),sn.lanes|=r,Kc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ki=!0),e.memoizedState=r)}function QO(e,t){var r=Tr;Tr=r!==0&&4>r?r:4,e(!0);var n=I_.transition;I_.transition={};try{e(!1),t()}finally{Tr=r,I_.transition=n}}function $T(){return Jo().memoizedState}function ez(e,t,r){var n=Dl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},VT(e))UT(t,r);else if(r=ST(e,t,r,n),r!==null){var s=ji();Sa(r,e,n,s),ZT(r,t,n)}}function tz(e,t,r){var n=Dl(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(VT(e))UT(t,s);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var d=t.lastRenderedState,c=h(d,r);if(s.hasEagerState=!0,s.eagerState=c,Pa(c,d)){var b=t.interleaved;b===null?(s.next=s,ew(t)):(s.next=b.next,b.next=s),t.interleaved=s;return}}catch{}finally{}r=ST(e,t,s,n),r!==null&&(s=ji(),Sa(r,e,n,s),ZT(r,t,n))}}function VT(e){var t=e.alternate;return e===sn||t!==null&&t===sn}function UT(e,t){xp=ly=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ZT(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,j2(e,r)}}var cy={readContext:Yo,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useInsertionEffect:wi,useLayoutEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useMutableSource:wi,useSyncExternalStore:wi,useId:wi,unstable_isNewReconciler:!1},rz={readContext:Yo,useCallback:function(e,t){return Ha().memoizedState=[e,t===void 0?null:t],e},useContext:Yo,useEffect:xE,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ig(4194308,4,zT.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ig(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ig(4,2,e,t)},useMemo:function(e,t){var r=Ha();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ha();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ez.bind(null,sn,e),[n.memoizedState,e]},useRef:function(e){var t=Ha();return e={current:e},t.memoizedState=e},useState:_E,useDebugValue:cw,useDeferredValue:function(e){return Ha().memoizedState=e},useTransition:function(){var e=_E(!1),t=e[0];return e=QO.bind(null,e[1]),Ha().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=sn,s=Ha();if(Yr){if(r===void 0)throw Error(et(407));r=r()}else{if(r=t(),Qn===null)throw Error(et(349));qc&30||TT(n,t,r)}s.memoizedState=r;var h={value:r,getSnapshot:t};return s.queue=h,xE(MT.bind(null,n,h,e),[e]),n.flags|=2048,Wp(9,IT.bind(null,n,h,r,t),void 0,null),r},useId:function(){var e=Ha(),t=Qn.identifierPrefix;if(Yr){var r=Is,n=Ts;r=(n&~(1<<32-wa(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Zp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=JO++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nz={readContext:Yo,useCallback:BT,useContext:Yo,useEffect:lw,useImperativeHandle:FT,useInsertionEffect:DT,useLayoutEffect:OT,useMemo:NT,useReducer:M_,useRef:LT,useState:function(){return M_(Hp)},useDebugValue:cw,useDeferredValue:function(e){var t=Jo();return jT(t,zn.memoizedState,e)},useTransition:function(){var e=M_(Hp)[0],t=Jo().memoizedState;return[e,t]},useMutableSource:CT,useSyncExternalStore:PT,useId:$T,unstable_isNewReconciler:!1},iz={readContext:Yo,useCallback:BT,useContext:Yo,useEffect:lw,useImperativeHandle:FT,useInsertionEffect:DT,useLayoutEffect:OT,useMemo:NT,useReducer:R_,useRef:LT,useState:function(){return R_(Hp)},useDebugValue:cw,useDeferredValue:function(e){var t=Jo();return zn===null?t.memoizedState=e:jT(t,zn.memoizedState,e)},useTransition:function(){var e=R_(Hp)[0],t=Jo().memoizedState;return[e,t]},useMutableSource:CT,useSyncExternalStore:PT,useId:$T,unstable_isNewReconciler:!1};function ga(e,t){if(e&&e.defaultProps){t=ln({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ob(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ln({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Xy={isMounted:function(e){return(e=e._reactInternals)?su(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ji(),s=Dl(e),h=Rs(n,s);h.payload=t,r!=null&&(h.callback=r),t=kl(e,h,s),t!==null&&(Sa(t,e,s,n),Pg(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ji(),s=Dl(e),h=Rs(n,s);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=kl(e,h,s),t!==null&&(Sa(t,e,s,n),Pg(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ji(),n=Dl(e),s=Rs(r,n);s.tag=2,t!=null&&(s.callback=t),t=kl(e,s,n),t!==null&&(Sa(t,e,n,r),Pg(t,e,n))}};function bE(e,t,r,n,s,h,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,h,d):t.prototype&&t.prototype.isPureReactComponent?!Bp(r,n)||!Bp(s,h):!0}function HT(e,t,r){var n=!1,s=Nl,h=t.contextType;return typeof h=="object"&&h!==null?h=Yo(h):(s=Yi(t)?Wc:Ci.current,n=t.contextTypes,h=(n=n!=null)?Qh(e,s):Nl),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xy,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=h),t}function wE(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Xy.enqueueReplaceState(t,t.state,null)}function ab(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},tw(e);var h=t.contextType;typeof h=="object"&&h!==null?s.context=Yo(h):(h=Yi(t)?Wc:Ci.current,s.context=Qh(e,h)),s.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(ob(e,t,h,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Xy.enqueueReplaceState(s,s.state,null),ay(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function nd(e,t){try{var r="",n=t;do r+=kD(n),n=n.return;while(n);var s=r}catch(h){s=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:s,digest:null}}function k_(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function sb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var oz=typeof WeakMap=="function"?WeakMap:Map;function WT(e,t,r){r=Rs(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){hy||(hy=!0,yb=n),sb(e,t)},r}function GT(e,t,r){r=Rs(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){sb(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){sb(e,t),typeof n!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),r}function SE(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new oz;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=_z.bind(null,e,t,r),t.then(e,e))}function EE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function AE(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Rs(-1,1),t.tag=2,kl(r,t,1))),r.lanes|=1),e)}var az=Vs.ReactCurrentOwner,Ki=!1;function Ni(e,t,r,n){t.child=e===null?wT(t,null,r,n):td(t,e.child,r,n)}function CE(e,t,r,n,s){r=r.render;var h=t.ref;return Zh(t,s),n=aw(e,t,r,n,h,s),r=sw(),e!==null&&!Ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ns(e,t,s)):(Yr&&r&&q2(t),t.flags|=1,Ni(e,t,n,s),t.child)}function PE(e,t,r,n,s){if(e===null){var h=r.type;return typeof h=="function"&&!yw(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,qT(e,t,h,n,s)):(e=Lg(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&s)){var d=h.memoizedProps;if(r=r.compare,r=r!==null?r:Bp,r(d,n)&&e.ref===t.ref)return Ns(e,t,s)}return t.flags|=1,e=Ol(h,n),e.ref=t.ref,e.return=t,t.child=e}function qT(e,t,r,n,s){if(e!==null){var h=e.memoizedProps;if(Bp(h,n)&&e.ref===t.ref)if(Ki=!1,t.pendingProps=n=h,(e.lanes&s)!==0)e.flags&131072&&(Ki=!0);else return t.lanes=e.lanes,Ns(e,t,s)}return lb(e,t,r,n,s)}function KT(e,t,r){var n=t.pendingProps,s=n.children,h=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$r(Dh,yo),yo|=r;else{if(!(r&1073741824))return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$r(Dh,yo),yo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=h!==null?h.baseLanes:r,$r(Dh,yo),yo|=n}else h!==null?(n=h.baseLanes|r,t.memoizedState=null):n=r,$r(Dh,yo),yo|=n;return Ni(e,t,s,r),t.child}function XT(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function lb(e,t,r,n,s){var h=Yi(r)?Wc:Ci.current;return h=Qh(t,h),Zh(t,s),r=aw(e,t,r,n,h,s),n=sw(),e!==null&&!Ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ns(e,t,s)):(Yr&&n&&q2(t),t.flags|=1,Ni(e,t,r,s),t.child)}function TE(e,t,r,n,s){if(Yi(r)){var h=!0;ty(t)}else h=!1;if(Zh(t,s),t.stateNode===null)Mg(e,t),HT(t,r,n),ab(t,r,n,s),n=!0;else if(e===null){var d=t.stateNode,c=t.memoizedProps;d.props=c;var b=d.context,E=r.contextType;typeof E=="object"&&E!==null?E=Yo(E):(E=Yi(r)?Wc:Ci.current,E=Qh(t,E));var I=r.getDerivedStateFromProps,P=typeof I=="function"||typeof d.getSnapshotBeforeUpdate=="function";P||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(c!==n||b!==E)&&wE(t,d,n,E),bl=!1;var T=t.memoizedState;d.state=T,ay(t,n,d,s),b=t.memoizedState,c!==n||T!==b||Xi.current||bl?(typeof I=="function"&&(ob(t,r,I,n),b=t.memoizedState),(c=bl||bE(t,r,c,n,T,b,E))?(P||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=b),d.props=n,d.state=b,d.context=E,n=c):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{d=t.stateNode,ET(e,t),c=t.memoizedProps,E=t.type===t.elementType?c:ga(t.type,c),d.props=E,P=t.pendingProps,T=d.context,b=r.contextType,typeof b=="object"&&b!==null?b=Yo(b):(b=Yi(r)?Wc:Ci.current,b=Qh(t,b));var O=r.getDerivedStateFromProps;(I=typeof O=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(c!==P||T!==b)&&wE(t,d,n,b),bl=!1,T=t.memoizedState,d.state=T,ay(t,n,d,s);var j=t.memoizedState;c!==P||T!==j||Xi.current||bl?(typeof O=="function"&&(ob(t,r,O,n),j=t.memoizedState),(E=bl||bE(t,r,E,n,T,j,b)||!1)?(I||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(n,j,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(n,j,b)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||c===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),d.props=n,d.state=j,d.context=b,n=E):(typeof d.componentDidUpdate!="function"||c===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),n=!1)}return cb(e,t,r,n,h,s)}function cb(e,t,r,n,s,h){XT(e,t);var d=(t.flags&128)!==0;if(!n&&!d)return s&&fE(t,r,!1),Ns(e,t,h);n=t.stateNode,az.current=t;var c=d&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&d?(t.child=td(t,e.child,null,h),t.child=td(t,null,c,h)):Ni(e,t,c,h),t.memoizedState=n.state,s&&fE(t,r,!0),t.child}function YT(e){var t=e.stateNode;t.pendingContext?dE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dE(e,t.context,!1),rw(e,t.containerInfo)}function IE(e,t,r,n,s){return ed(),X2(s),t.flags|=256,Ni(e,t,r,n),t.child}var ub={dehydrated:null,treeContext:null,retryLane:0};function hb(e){return{baseLanes:e,cachePool:null,transitions:null}}function JT(e,t,r){var n=t.pendingProps,s=nn.current,h=!1,d=(t.flags&128)!==0,c;if((c=d)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),$r(nn,s&1),e===null)return nb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=n.children,e=n.fallback,h?(n=t.mode,h=t.child,d={mode:"hidden",children:d},!(n&1)&&h!==null?(h.childLanes=0,h.pendingProps=d):h=Qy(d,n,0,null),e=$c(e,n,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=hb(r),t.memoizedState=ub,e):uw(t,d));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return sz(e,t,d,n,c,s,r);if(h){h=n.fallback,d=t.mode,s=e.child,c=s.sibling;var b={mode:"hidden",children:n.children};return!(d&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=b,t.deletions=null):(n=Ol(s,b),n.subtreeFlags=s.subtreeFlags&14680064),c!==null?h=Ol(c,h):(h=$c(h,d,r,null),h.flags|=2),h.return=t,n.return=t,n.sibling=h,t.child=n,n=h,h=t.child,d=e.child.memoizedState,d=d===null?hb(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},h.memoizedState=d,h.childLanes=e.childLanes&~r,t.memoizedState=ub,n}return h=e.child,e=h.sibling,n=Ol(h,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function uw(e,t){return t=Qy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tg(e,t,r,n){return n!==null&&X2(n),td(t,e.child,null,r),e=uw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sz(e,t,r,n,s,h,d){if(r)return t.flags&256?(t.flags&=-257,n=k_(Error(et(422))),tg(e,t,d,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=n.fallback,s=t.mode,n=Qy({mode:"visible",children:n.children},s,0,null),h=$c(h,s,d,null),h.flags|=2,n.return=t,h.return=t,n.sibling=h,t.child=n,t.mode&1&&td(t,e.child,null,d),t.child.memoizedState=hb(d),t.memoizedState=ub,h);if(!(t.mode&1))return tg(e,t,d,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var c=n.dgst;return n=c,h=Error(et(419)),n=k_(h,n,void 0),tg(e,t,d,n)}if(c=(d&e.childLanes)!==0,Ki||c){if(n=Qn,n!==null){switch(d&-d){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|d)?0:s,s!==0&&s!==h.retryLane&&(h.retryLane=s,Bs(e,s),Sa(n,e,s,-1))}return gw(),n=k_(Error(et(421))),tg(e,t,d,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=xz.bind(null,e),s._reactRetry=t,null):(e=h.treeContext,xo=Rl(s.nextSibling),bo=t,Yr=!0,_a=null,e!==null&&($o[Vo++]=Ts,$o[Vo++]=Is,$o[Vo++]=Gc,Ts=e.id,Is=e.overflow,Gc=t),t=uw(t,n.children),t.flags|=4096,t)}function ME(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ib(e.return,t,r)}function L_(e,t,r,n,s){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=n,h.tail=r,h.tailMode=s)}function QT(e,t,r){var n=t.pendingProps,s=n.revealOrder,h=n.tail;if(Ni(e,t,n.children,r),n=nn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ME(e,r,t);else if(e.tag===19)ME(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if($r(nn,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&sy(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),L_(t,!1,s,r,h);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&sy(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}L_(t,!0,r,null,h);break;case"together":L_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ns(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Kc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,r=Ol(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ol(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function lz(e,t,r){switch(t.tag){case 3:YT(t),ed();break;case 5:AT(t);break;case 1:Yi(t.type)&&ty(t);break;case 4:rw(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;$r(iy,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?($r(nn,nn.current&1),t.flags|=128,null):r&t.child.childLanes?JT(e,t,r):($r(nn,nn.current&1),e=Ns(e,t,r),e!==null?e.sibling:null);$r(nn,nn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return QT(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$r(nn,nn.current),n)break;return null;case 22:case 23:return t.lanes=0,KT(e,t,r)}return Ns(e,t,r)}var e8,db,t8,r8;e8=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};db=function(){};t8=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Oc(Qa.current);var h=null;switch(r){case"input":s=Dx(e,s),n=Dx(e,n),h=[];break;case"select":s=ln({},s,{value:void 0}),n=ln({},n,{value:void 0}),h=[];break;case"textarea":s=Fx(e,s),n=Fx(e,n),h=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Qg)}Nx(r,n);var d;r=null;for(E in s)if(!n.hasOwnProperty(E)&&s.hasOwnProperty(E)&&s[E]!=null)if(E==="style"){var c=s[E];for(d in c)c.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(Rp.hasOwnProperty(E)?h||(h=[]):(h=h||[]).push(E,null));for(E in n){var b=n[E];if(c=s!=null?s[E]:void 0,n.hasOwnProperty(E)&&b!==c&&(b!=null||c!=null))if(E==="style")if(c){for(d in c)!c.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in b)b.hasOwnProperty(d)&&c[d]!==b[d]&&(r||(r={}),r[d]=b[d])}else r||(h||(h=[]),h.push(E,r)),r=b;else E==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,c=c?c.__html:void 0,b!=null&&c!==b&&(h=h||[]).push(E,b)):E==="children"?typeof b!="string"&&typeof b!="number"||(h=h||[]).push(E,""+b):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(Rp.hasOwnProperty(E)?(b!=null&&E==="onScroll"&&Zr("scroll",e),h||c===b||(h=[])):(h=h||[]).push(E,b))}r&&(h=h||[]).push("style",r);var E=h;(t.updateQueue=E)&&(t.flags|=4)}};r8=function(e,t,r,n){r!==n&&(t.flags|=4)};function qf(e,t){if(!Yr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Si(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function cz(e,t,r){var n=t.pendingProps;switch(K2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(t),null;case 1:return Yi(t.type)&&ey(),Si(t),null;case 3:return n=t.stateNode,rd(),Hr(Xi),Hr(Ci),iw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Q0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_a!==null&&(xb(_a),_a=null))),db(e,t),Si(t),null;case 5:nw(t);var s=Oc(Up.current);if(r=t.type,e!==null&&t.stateNode!=null)t8(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(et(166));return Si(t),null}if(e=Oc(Qa.current),Q0(t)){n=t.stateNode,r=t.type;var h=t.memoizedProps;switch(n[Wa]=t,n[$p]=h,e=(t.mode&1)!==0,r){case"dialog":Zr("cancel",n),Zr("close",n);break;case"iframe":case"object":case"embed":Zr("load",n);break;case"video":case"audio":for(s=0;s<ap.length;s++)Zr(ap[s],n);break;case"source":Zr("error",n);break;case"img":case"image":case"link":Zr("error",n),Zr("load",n);break;case"details":Zr("toggle",n);break;case"input":N4(n,h),Zr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!h.multiple},Zr("invalid",n);break;case"textarea":$4(n,h),Zr("invalid",n)}Nx(r,h),s=null;for(var d in h)if(h.hasOwnProperty(d)){var c=h[d];d==="children"?typeof c=="string"?n.textContent!==c&&(h.suppressHydrationWarning!==!0&&J0(n.textContent,c,e),s=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(h.suppressHydrationWarning!==!0&&J0(n.textContent,c,e),s=["children",""+c]):Rp.hasOwnProperty(d)&&c!=null&&d==="onScroll"&&Zr("scroll",n)}switch(r){case"input":Z0(n),j4(n,h,!0);break;case"textarea":Z0(n),V4(n);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(n.onclick=Qg)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{d=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=MP(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=d.createElement(r,{is:n.is}):(e=d.createElement(r),r==="select"&&(d=e,n.multiple?d.multiple=!0:n.size&&(d.size=n.size))):e=d.createElementNS(e,r),e[Wa]=t,e[$p]=n,e8(e,t,!1,!1),t.stateNode=e;e:{switch(d=jx(r,n),r){case"dialog":Zr("cancel",e),Zr("close",e),s=n;break;case"iframe":case"object":case"embed":Zr("load",e),s=n;break;case"video":case"audio":for(s=0;s<ap.length;s++)Zr(ap[s],e);s=n;break;case"source":Zr("error",e),s=n;break;case"img":case"image":case"link":Zr("error",e),Zr("load",e),s=n;break;case"details":Zr("toggle",e),s=n;break;case"input":N4(e,n),s=Dx(e,n),Zr("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ln({},n,{value:void 0}),Zr("invalid",e);break;case"textarea":$4(e,n),s=Fx(e,n),Zr("invalid",e);break;default:s=n}Nx(r,s),c=s;for(h in c)if(c.hasOwnProperty(h)){var b=c[h];h==="style"?LP(e,b):h==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&RP(e,b)):h==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&kp(e,b):typeof b=="number"&&kp(e,""+b):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Rp.hasOwnProperty(h)?b!=null&&h==="onScroll"&&Zr("scroll",e):b!=null&&D2(e,h,b,d))}switch(r){case"input":Z0(e),j4(e,n,!1);break;case"textarea":Z0(e),V4(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Bl(n.value));break;case"select":e.multiple=!!n.multiple,h=n.value,h!=null?jh(e,!!n.multiple,h,!1):n.defaultValue!=null&&jh(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Qg)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Si(t),null;case 6:if(e&&t.stateNode!=null)r8(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(et(166));if(r=Oc(Up.current),Oc(Qa.current),Q0(t)){if(n=t.stateNode,r=t.memoizedProps,n[Wa]=t,(h=n.nodeValue!==r)&&(e=bo,e!==null))switch(e.tag){case 3:J0(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&J0(n.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Wa]=t,t.stateNode=n}return Si(t),null;case 13:if(Hr(nn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Yr&&xo!==null&&t.mode&1&&!(t.flags&128))xT(),ed(),t.flags|=98560,h=!1;else if(h=Q0(t),n!==null&&n.dehydrated!==null){if(e===null){if(!h)throw Error(et(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(et(317));h[Wa]=t}else ed(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Si(t),h=!1}else _a!==null&&(xb(_a),_a=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||nn.current&1?Fn===0&&(Fn=3):gw())),t.updateQueue!==null&&(t.flags|=4),Si(t),null);case 4:return rd(),db(e,t),e===null&&Np(t.stateNode.containerInfo),Si(t),null;case 10:return Q2(t.type._context),Si(t),null;case 17:return Yi(t.type)&&ey(),Si(t),null;case 19:if(Hr(nn),h=t.memoizedState,h===null)return Si(t),null;if(n=(t.flags&128)!==0,d=h.rendering,d===null)if(n)qf(h,!1);else{if(Fn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=sy(e),d!==null){for(t.flags|=128,qf(h,!1),n=d.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)h=r,e=n,h.flags&=14680066,d=h.alternate,d===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=d.childLanes,h.lanes=d.lanes,h.child=d.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=d.memoizedProps,h.memoizedState=d.memoizedState,h.updateQueue=d.updateQueue,h.type=d.type,e=d.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return $r(nn,nn.current&1|2),t.child}e=e.sibling}h.tail!==null&&wn()>id&&(t.flags|=128,n=!0,qf(h,!1),t.lanes=4194304)}else{if(!n)if(e=sy(d),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),qf(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Yr)return Si(t),null}else 2*wn()-h.renderingStartTime>id&&r!==1073741824&&(t.flags|=128,n=!0,qf(h,!1),t.lanes=4194304);h.isBackwards?(d.sibling=t.child,t.child=d):(r=h.last,r!==null?r.sibling=d:t.child=d,h.last=d)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=wn(),t.sibling=null,r=nn.current,$r(nn,n?r&1|2:r&1),t):(Si(t),null);case 22:case 23:return mw(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?yo&1073741824&&(Si(t),t.subtreeFlags&6&&(t.flags|=8192)):Si(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function uz(e,t){switch(K2(t),t.tag){case 1:return Yi(t.type)&&ey(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rd(),Hr(Xi),Hr(Ci),iw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return nw(t),null;case 13:if(Hr(nn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));ed()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Hr(nn),null;case 4:return rd(),null;case 10:return Q2(t.type._context),null;case 22:case 23:return mw(),null;case 24:return null;default:return null}}var rg=!1,Ei=!1,hz=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function Lh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){mn(e,t,n)}else r.current=null}function fb(e,t,r){try{r()}catch(n){mn(e,t,n)}}var RE=!1;function dz(e,t){if(Xx=Xg,e=sT(),G2(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,h=n.focusNode;n=n.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var d=0,c=-1,b=-1,E=0,I=0,P=e,T=null;t:for(;;){for(var O;P!==r||s!==0&&P.nodeType!==3||(c=d+s),P!==h||n!==0&&P.nodeType!==3||(b=d+n),P.nodeType===3&&(d+=P.nodeValue.length),(O=P.firstChild)!==null;)T=P,P=O;for(;;){if(P===e)break t;if(T===r&&++E===s&&(c=d),T===h&&++I===n&&(b=d),(O=P.nextSibling)!==null)break;P=T,T=P.parentNode}P=O}r=c===-1||b===-1?null:{start:c,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(Yx={focusedElem:e,selectionRange:r},Xg=!1,Ct=t;Ct!==null;)if(t=Ct,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ct=e;else for(;Ct!==null;){t=Ct;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var V=j.memoizedProps,re=j.memoizedState,W=t.stateNode,Z=W.getSnapshotBeforeUpdate(t.elementType===t.type?V:ga(t.type,V),re);W.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var K=t.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(ie){mn(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,Ct=e;break}Ct=t.return}return j=RE,RE=!1,j}function bp(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var h=s.destroy;s.destroy=void 0,h!==void 0&&fb(t,r,h)}s=s.next}while(s!==n)}}function Yy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function pb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function n8(e){var t=e.alternate;t!==null&&(e.alternate=null,n8(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wa],delete t[$p],delete t[eb],delete t[qO],delete t[KO])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function i8(e){return e.tag===5||e.tag===3||e.tag===4}function kE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||i8(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mb(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Qg));else if(n!==4&&(e=e.child,e!==null))for(mb(e,t,r),e=e.sibling;e!==null;)mb(e,t,r),e=e.sibling}function gb(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(gb(e,t,r),e=e.sibling;e!==null;)gb(e,t,r),e=e.sibling}var hi=null,ya=!1;function ml(e,t,r){for(r=r.child;r!==null;)o8(e,t,r),r=r.sibling}function o8(e,t,r){if(Ja&&typeof Ja.onCommitFiberUnmount=="function")try{Ja.onCommitFiberUnmount(Uy,r)}catch{}switch(r.tag){case 5:Ei||Lh(r,t);case 6:var n=hi,s=ya;hi=null,ml(e,t,r),hi=n,ya=s,hi!==null&&(ya?(e=hi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):hi.removeChild(r.stateNode));break;case 18:hi!==null&&(ya?(e=hi,r=r.stateNode,e.nodeType===8?C_(e.parentNode,r):e.nodeType===1&&C_(e,r),zp(e)):C_(hi,r.stateNode));break;case 4:n=hi,s=ya,hi=r.stateNode.containerInfo,ya=!0,ml(e,t,r),hi=n,ya=s;break;case 0:case 11:case 14:case 15:if(!Ei&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var h=s,d=h.destroy;h=h.tag,d!==void 0&&(h&2||h&4)&&fb(r,t,d),s=s.next}while(s!==n)}ml(e,t,r);break;case 1:if(!Ei&&(Lh(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){mn(r,t,c)}ml(e,t,r);break;case 21:ml(e,t,r);break;case 22:r.mode&1?(Ei=(n=Ei)||r.memoizedState!==null,ml(e,t,r),Ei=n):ml(e,t,r);break;default:ml(e,t,r)}}function LE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new hz),t.forEach(function(n){var s=bz.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function ma(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var h=e,d=t,c=d;e:for(;c!==null;){switch(c.tag){case 5:hi=c.stateNode,ya=!1;break e;case 3:hi=c.stateNode.containerInfo,ya=!0;break e;case 4:hi=c.stateNode.containerInfo,ya=!0;break e}c=c.return}if(hi===null)throw Error(et(160));o8(h,d,s),hi=null,ya=!1;var b=s.alternate;b!==null&&(b.return=null),s.return=null}catch(E){mn(s,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)a8(t,e),t=t.sibling}function a8(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ma(t,e),Ua(e),n&4){try{bp(3,e,e.return),Yy(3,e)}catch(V){mn(e,e.return,V)}try{bp(5,e,e.return)}catch(V){mn(e,e.return,V)}}break;case 1:ma(t,e),Ua(e),n&512&&r!==null&&Lh(r,r.return);break;case 5:if(ma(t,e),Ua(e),n&512&&r!==null&&Lh(r,r.return),e.flags&32){var s=e.stateNode;try{kp(s,"")}catch(V){mn(e,e.return,V)}}if(n&4&&(s=e.stateNode,s!=null)){var h=e.memoizedProps,d=r!==null?r.memoizedProps:h,c=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{c==="input"&&h.type==="radio"&&h.name!=null&&TP(s,h),jx(c,d);var E=jx(c,h);for(d=0;d<b.length;d+=2){var I=b[d],P=b[d+1];I==="style"?LP(s,P):I==="dangerouslySetInnerHTML"?RP(s,P):I==="children"?kp(s,P):D2(s,I,P,E)}switch(c){case"input":Ox(s,h);break;case"textarea":IP(s,h);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!h.multiple;var O=h.value;O!=null?jh(s,!!h.multiple,O,!1):T!==!!h.multiple&&(h.defaultValue!=null?jh(s,!!h.multiple,h.defaultValue,!0):jh(s,!!h.multiple,h.multiple?[]:"",!1))}s[$p]=h}catch(V){mn(e,e.return,V)}}break;case 6:if(ma(t,e),Ua(e),n&4){if(e.stateNode===null)throw Error(et(162));s=e.stateNode,h=e.memoizedProps;try{s.nodeValue=h}catch(V){mn(e,e.return,V)}}break;case 3:if(ma(t,e),Ua(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{zp(t.containerInfo)}catch(V){mn(e,e.return,V)}break;case 4:ma(t,e),Ua(e);break;case 13:ma(t,e),Ua(e),s=e.child,s.flags&8192&&(h=s.memoizedState!==null,s.stateNode.isHidden=h,!h||s.alternate!==null&&s.alternate.memoizedState!==null||(fw=wn())),n&4&&LE(e);break;case 22:if(I=r!==null&&r.memoizedState!==null,e.mode&1?(Ei=(E=Ei)||I,ma(t,e),Ei=E):ma(t,e),Ua(e),n&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!I&&e.mode&1)for(Ct=e,I=e.child;I!==null;){for(P=Ct=I;Ct!==null;){switch(T=Ct,O=T.child,T.tag){case 0:case 11:case 14:case 15:bp(4,T,T.return);break;case 1:Lh(T,T.return);var j=T.stateNode;if(typeof j.componentWillUnmount=="function"){n=T,r=T.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(V){mn(n,r,V)}}break;case 5:Lh(T,T.return);break;case 22:if(T.memoizedState!==null){OE(P);continue}}O!==null?(O.return=T,Ct=O):OE(P)}I=I.sibling}e:for(I=null,P=e;;){if(P.tag===5){if(I===null){I=P;try{s=P.stateNode,E?(h=s.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(c=P.stateNode,b=P.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,c.style.display=kP("display",d))}catch(V){mn(e,e.return,V)}}}else if(P.tag===6){if(I===null)try{P.stateNode.nodeValue=E?"":P.memoizedProps}catch(V){mn(e,e.return,V)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===e)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===e)break e;for(;P.sibling===null;){if(P.return===null||P.return===e)break e;I===P&&(I=null),P=P.return}I===P&&(I=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:ma(t,e),Ua(e),n&4&&LE(e);break;case 21:break;default:ma(t,e),Ua(e)}}function Ua(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(i8(r)){var n=r;break e}r=r.return}throw Error(et(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(kp(s,""),n.flags&=-33);var h=kE(e);gb(e,h,s);break;case 3:case 4:var d=n.stateNode.containerInfo,c=kE(e);mb(e,c,d);break;default:throw Error(et(161))}}catch(b){mn(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fz(e,t,r){Ct=e,s8(e)}function s8(e,t,r){for(var n=(e.mode&1)!==0;Ct!==null;){var s=Ct,h=s.child;if(s.tag===22&&n){var d=s.memoizedState!==null||rg;if(!d){var c=s.alternate,b=c!==null&&c.memoizedState!==null||Ei;c=rg;var E=Ei;if(rg=d,(Ei=b)&&!E)for(Ct=s;Ct!==null;)d=Ct,b=d.child,d.tag===22&&d.memoizedState!==null?zE(s):b!==null?(b.return=d,Ct=b):zE(s);for(;h!==null;)Ct=h,s8(h),h=h.sibling;Ct=s,rg=c,Ei=E}DE(e)}else s.subtreeFlags&8772&&h!==null?(h.return=s,Ct=h):DE(e)}}function DE(e){for(;Ct!==null;){var t=Ct;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ei||Yy(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ei)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ga(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&vE(t,h,n);break;case 3:var d=t.updateQueue;if(d!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}vE(t,d,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var I=E.memoizedState;if(I!==null){var P=I.dehydrated;P!==null&&zp(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}Ei||t.flags&512&&pb(t)}catch(T){mn(t,t.return,T)}}if(t===e){Ct=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ct=r;break}Ct=t.return}}function OE(e){for(;Ct!==null;){var t=Ct;if(t===e){Ct=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ct=r;break}Ct=t.return}}function zE(e){for(;Ct!==null;){var t=Ct;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Yy(4,t)}catch(b){mn(t,r,b)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(b){mn(t,s,b)}}var h=t.return;try{pb(t)}catch(b){mn(t,h,b)}break;case 5:var d=t.return;try{pb(t)}catch(b){mn(t,d,b)}}}catch(b){mn(t,t.return,b)}if(t===e){Ct=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Ct=c;break}Ct=t.return}}var pz=Math.ceil,uy=Vs.ReactCurrentDispatcher,hw=Vs.ReactCurrentOwner,Xo=Vs.ReactCurrentBatchConfig,_r=0,Qn=null,Mn=null,fi=0,yo=0,Dh=Wl(0),Fn=0,Gp=null,Kc=0,Jy=0,dw=0,wp=null,qi=null,fw=0,id=1/0,Es=null,hy=!1,yb=null,Ll=null,ng=!1,Al=null,dy=0,Sp=0,vb=null,Rg=-1,kg=0;function ji(){return _r&6?wn():Rg!==-1?Rg:Rg=wn()}function Dl(e){return e.mode&1?_r&2&&fi!==0?fi&-fi:YO.transition!==null?(kg===0&&(kg=HP()),kg):(e=Tr,e!==0||(e=window.event,e=e===void 0?16:JP(e.type)),e):1}function Sa(e,t,r,n){if(50<Sp)throw Sp=0,vb=null,Error(et(185));dm(e,r,n),(!(_r&2)||e!==Qn)&&(e===Qn&&(!(_r&2)&&(Jy|=r),Fn===4&&Sl(e,fi)),Ji(e,n),r===1&&_r===0&&!(t.mode&1)&&(id=wn()+500,qy&&Gl()))}function Ji(e,t){var r=e.callbackNode;YD(e,t);var n=Kg(e,e===Qn?fi:0);if(n===0)r!==null&&H4(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&H4(r),t===1)e.tag===0?XO(FE.bind(null,e)):yT(FE.bind(null,e)),WO(function(){!(_r&6)&&Gl()}),r=null;else{switch(WP(n)){case 1:r=N2;break;case 4:r=UP;break;case 16:r=qg;break;case 536870912:r=ZP;break;default:r=qg}r=m8(r,l8.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function l8(e,t){if(Rg=-1,kg=0,_r&6)throw Error(et(327));var r=e.callbackNode;if(Hh()&&e.callbackNode!==r)return null;var n=Kg(e,e===Qn?fi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=fy(e,n);else{t=n;var s=_r;_r|=2;var h=u8();(Qn!==e||fi!==t)&&(Es=null,id=wn()+500,jc(e,t));do try{yz();break}catch(c){c8(e,c)}while(!0);J2(),uy.current=h,_r=s,Mn!==null?t=0:(Qn=null,fi=0,t=Fn)}if(t!==0){if(t===2&&(s=Hx(e),s!==0&&(n=s,t=_b(e,s))),t===1)throw r=Gp,jc(e,0),Sl(e,n),Ji(e,wn()),r;if(t===6)Sl(e,n);else{if(s=e.current.alternate,!(n&30)&&!mz(s)&&(t=fy(e,n),t===2&&(h=Hx(e),h!==0&&(n=h,t=_b(e,h))),t===1))throw r=Gp,jc(e,0),Sl(e,n),Ji(e,wn()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(et(345));case 2:Ic(e,qi,Es);break;case 3:if(Sl(e,n),(n&130023424)===n&&(t=fw+500-wn(),10<t)){if(Kg(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){ji(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Qx(Ic.bind(null,e,qi,Es),t);break}Ic(e,qi,Es);break;case 4:if(Sl(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var d=31-wa(n);h=1<<d,d=t[d],d>s&&(s=d),n&=~h}if(n=s,n=wn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pz(n/1960))-n,10<n){e.timeoutHandle=Qx(Ic.bind(null,e,qi,Es),n);break}Ic(e,qi,Es);break;case 5:Ic(e,qi,Es);break;default:throw Error(et(329))}}}return Ji(e,wn()),e.callbackNode===r?l8.bind(null,e):null}function _b(e,t){var r=wp;return e.current.memoizedState.isDehydrated&&(jc(e,t).flags|=256),e=fy(e,t),e!==2&&(t=qi,qi=r,t!==null&&xb(t)),e}function xb(e){qi===null?qi=e:qi.push.apply(qi,e)}function mz(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],h=s.getSnapshot;s=s.value;try{if(!Pa(h(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sl(e,t){for(t&=~dw,t&=~Jy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wa(t),n=1<<r;e[r]=-1,t&=~n}}function FE(e){if(_r&6)throw Error(et(327));Hh();var t=Kg(e,0);if(!(t&1))return Ji(e,wn()),null;var r=fy(e,t);if(e.tag!==0&&r===2){var n=Hx(e);n!==0&&(t=n,r=_b(e,n))}if(r===1)throw r=Gp,jc(e,0),Sl(e,t),Ji(e,wn()),r;if(r===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ic(e,qi,Es),Ji(e,wn()),null}function pw(e,t){var r=_r;_r|=1;try{return e(t)}finally{_r=r,_r===0&&(id=wn()+500,qy&&Gl())}}function Xc(e){Al!==null&&Al.tag===0&&!(_r&6)&&Hh();var t=_r;_r|=1;var r=Xo.transition,n=Tr;try{if(Xo.transition=null,Tr=1,e)return e()}finally{Tr=n,Xo.transition=r,_r=t,!(_r&6)&&Gl()}}function mw(){yo=Dh.current,Hr(Dh)}function jc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,HO(r)),Mn!==null)for(r=Mn.return;r!==null;){var n=r;switch(K2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ey();break;case 3:rd(),Hr(Xi),Hr(Ci),iw();break;case 5:nw(n);break;case 4:rd();break;case 13:Hr(nn);break;case 19:Hr(nn);break;case 10:Q2(n.type._context);break;case 22:case 23:mw()}r=r.return}if(Qn=e,Mn=e=Ol(e.current,null),fi=yo=t,Fn=0,Gp=null,dw=Jy=Kc=0,qi=wp=null,Dc!==null){for(t=0;t<Dc.length;t++)if(r=Dc[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,h=r.pending;if(h!==null){var d=h.next;h.next=s,n.next=d}r.pending=n}Dc=null}return e}function c8(e,t){do{var r=Mn;try{if(J2(),Tg.current=cy,ly){for(var n=sn.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ly=!1}if(qc=0,Yn=zn=sn=null,xp=!1,Zp=0,hw.current=null,r===null||r.return===null){Fn=1,Gp=t,Mn=null;break}e:{var h=e,d=r.return,c=r,b=t;if(t=fi,c.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var E=b,I=c,P=I.tag;if(!(I.mode&1)&&(P===0||P===11||P===15)){var T=I.alternate;T?(I.updateQueue=T.updateQueue,I.memoizedState=T.memoizedState,I.lanes=T.lanes):(I.updateQueue=null,I.memoizedState=null)}var O=EE(d);if(O!==null){O.flags&=-257,AE(O,d,c,h,t),O.mode&1&&SE(h,E,t),t=O,b=E;var j=t.updateQueue;if(j===null){var V=new Set;V.add(b),t.updateQueue=V}else j.add(b);break e}else{if(!(t&1)){SE(h,E,t),gw();break e}b=Error(et(426))}}else if(Yr&&c.mode&1){var re=EE(d);if(re!==null){!(re.flags&65536)&&(re.flags|=256),AE(re,d,c,h,t),X2(nd(b,c));break e}}h=b=nd(b,c),Fn!==4&&(Fn=2),wp===null?wp=[h]:wp.push(h),h=d;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var W=WT(h,b,t);yE(h,W);break e;case 1:c=b;var Z=h.type,K=h.stateNode;if(!(h.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Ll===null||!Ll.has(K)))){h.flags|=65536,t&=-t,h.lanes|=t;var ie=GT(h,c,t);yE(h,ie);break e}}h=h.return}while(h!==null)}d8(r)}catch(de){t=de,Mn===r&&r!==null&&(Mn=r=r.return);continue}break}while(!0)}function u8(){var e=uy.current;return uy.current=cy,e===null?cy:e}function gw(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Qn===null||!(Kc&268435455)&&!(Jy&268435455)||Sl(Qn,fi)}function fy(e,t){var r=_r;_r|=2;var n=u8();(Qn!==e||fi!==t)&&(Es=null,jc(e,t));do try{gz();break}catch(s){c8(e,s)}while(!0);if(J2(),_r=r,uy.current=n,Mn!==null)throw Error(et(261));return Qn=null,fi=0,Fn}function gz(){for(;Mn!==null;)h8(Mn)}function yz(){for(;Mn!==null&&!VD();)h8(Mn)}function h8(e){var t=p8(e.alternate,e,yo);e.memoizedProps=e.pendingProps,t===null?d8(e):Mn=t,hw.current=null}function d8(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=uz(r,t),r!==null){r.flags&=32767,Mn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fn=6,Mn=null;return}}else if(r=cz(r,t,yo),r!==null){Mn=r;return}if(t=t.sibling,t!==null){Mn=t;return}Mn=t=e}while(t!==null);Fn===0&&(Fn=5)}function Ic(e,t,r){var n=Tr,s=Xo.transition;try{Xo.transition=null,Tr=1,vz(e,t,r,n)}finally{Xo.transition=s,Tr=n}return null}function vz(e,t,r,n){do Hh();while(Al!==null);if(_r&6)throw Error(et(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(JD(e,h),e===Qn&&(Mn=Qn=null,fi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ng||(ng=!0,m8(qg,function(){return Hh(),null})),h=(r.flags&15990)!==0,r.subtreeFlags&15990||h){h=Xo.transition,Xo.transition=null;var d=Tr;Tr=1;var c=_r;_r|=4,hw.current=null,dz(e,r),a8(r,e),BO(Yx),Xg=!!Xx,Yx=Xx=null,e.current=r,fz(r),UD(),_r=c,Tr=d,Xo.transition=h}else e.current=r;if(ng&&(ng=!1,Al=e,dy=s),h=e.pendingLanes,h===0&&(Ll=null),WD(r.stateNode),Ji(e,wn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(hy)throw hy=!1,e=yb,yb=null,e;return dy&1&&e.tag!==0&&Hh(),h=e.pendingLanes,h&1?e===vb?Sp++:(Sp=0,vb=e):Sp=0,Gl(),null}function Hh(){if(Al!==null){var e=WP(dy),t=Xo.transition,r=Tr;try{if(Xo.transition=null,Tr=16>e?16:e,Al===null)var n=!1;else{if(e=Al,Al=null,dy=0,_r&6)throw Error(et(331));var s=_r;for(_r|=4,Ct=e.current;Ct!==null;){var h=Ct,d=h.child;if(Ct.flags&16){var c=h.deletions;if(c!==null){for(var b=0;b<c.length;b++){var E=c[b];for(Ct=E;Ct!==null;){var I=Ct;switch(I.tag){case 0:case 11:case 15:bp(8,I,h)}var P=I.child;if(P!==null)P.return=I,Ct=P;else for(;Ct!==null;){I=Ct;var T=I.sibling,O=I.return;if(n8(I),I===E){Ct=null;break}if(T!==null){T.return=O,Ct=T;break}Ct=O}}}var j=h.alternate;if(j!==null){var V=j.child;if(V!==null){j.child=null;do{var re=V.sibling;V.sibling=null,V=re}while(V!==null)}}Ct=h}}if(h.subtreeFlags&2064&&d!==null)d.return=h,Ct=d;else e:for(;Ct!==null;){if(h=Ct,h.flags&2048)switch(h.tag){case 0:case 11:case 15:bp(9,h,h.return)}var W=h.sibling;if(W!==null){W.return=h.return,Ct=W;break e}Ct=h.return}}var Z=e.current;for(Ct=Z;Ct!==null;){d=Ct;var K=d.child;if(d.subtreeFlags&2064&&K!==null)K.return=d,Ct=K;else e:for(d=Z;Ct!==null;){if(c=Ct,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Yy(9,c)}}catch(de){mn(c,c.return,de)}if(c===d){Ct=null;break e}var ie=c.sibling;if(ie!==null){ie.return=c.return,Ct=ie;break e}Ct=c.return}}if(_r=s,Gl(),Ja&&typeof Ja.onPostCommitFiberRoot=="function")try{Ja.onPostCommitFiberRoot(Uy,e)}catch{}n=!0}return n}finally{Tr=r,Xo.transition=t}}return!1}function BE(e,t,r){t=nd(r,t),t=WT(e,t,1),e=kl(e,t,1),t=ji(),e!==null&&(dm(e,1,t),Ji(e,t))}function mn(e,t,r){if(e.tag===3)BE(e,e,r);else for(;t!==null;){if(t.tag===3){BE(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ll===null||!Ll.has(n))){e=nd(r,e),e=GT(t,e,1),t=kl(t,e,1),e=ji(),t!==null&&(dm(t,1,e),Ji(t,e));break}}t=t.return}}function _z(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ji(),e.pingedLanes|=e.suspendedLanes&r,Qn===e&&(fi&r)===r&&(Fn===4||Fn===3&&(fi&130023424)===fi&&500>wn()-fw?jc(e,0):dw|=r),Ji(e,t)}function f8(e,t){t===0&&(e.mode&1?(t=G0,G0<<=1,!(G0&130023424)&&(G0=4194304)):t=1);var r=ji();e=Bs(e,t),e!==null&&(dm(e,t,r),Ji(e,r))}function xz(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),f8(e,r)}function bz(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(et(314))}n!==null&&n.delete(t),f8(e,r)}var p8;p8=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xi.current)Ki=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ki=!1,lz(e,t,r);Ki=!!(e.flags&131072)}else Ki=!1,Yr&&t.flags&1048576&&vT(t,ny,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Mg(e,t),e=t.pendingProps;var s=Qh(t,Ci.current);Zh(t,r),s=aw(null,t,n,e,s,r);var h=sw();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yi(n)?(h=!0,ty(t)):h=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tw(t),s.updater=Xy,t.stateNode=s,s._reactInternals=t,ab(t,n,e,r),t=cb(null,t,n,!0,h,r)):(t.tag=0,Yr&&h&&q2(t),Ni(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Mg(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Sz(n),e=ga(n,e),s){case 0:t=lb(null,t,n,e,r);break e;case 1:t=TE(null,t,n,e,r);break e;case 11:t=CE(null,t,n,e,r);break e;case 14:t=PE(null,t,n,ga(n.type,e),r);break e}throw Error(et(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ga(n,s),lb(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ga(n,s),TE(e,t,n,s,r);case 3:e:{if(YT(t),e===null)throw Error(et(387));n=t.pendingProps,h=t.memoizedState,s=h.element,ET(e,t),ay(t,n,null,r);var d=t.memoizedState;if(n=d.element,h.isDehydrated)if(h={element:n,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){s=nd(Error(et(423)),t),t=IE(e,t,n,r,s);break e}else if(n!==s){s=nd(Error(et(424)),t),t=IE(e,t,n,r,s);break e}else for(xo=Rl(t.stateNode.containerInfo.firstChild),bo=t,Yr=!0,_a=null,r=wT(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ed(),n===s){t=Ns(e,t,r);break e}Ni(e,t,n,r)}t=t.child}return t;case 5:return AT(t),e===null&&nb(t),n=t.type,s=t.pendingProps,h=e!==null?e.memoizedProps:null,d=s.children,Jx(n,s)?d=null:h!==null&&Jx(n,h)&&(t.flags|=32),XT(e,t),Ni(e,t,d,r),t.child;case 6:return e===null&&nb(t),null;case 13:return JT(e,t,r);case 4:return rw(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=td(t,null,n,r):Ni(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ga(n,s),CE(e,t,n,s,r);case 7:return Ni(e,t,t.pendingProps,r),t.child;case 8:return Ni(e,t,t.pendingProps.children,r),t.child;case 12:return Ni(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,h=t.memoizedProps,d=s.value,$r(iy,n._currentValue),n._currentValue=d,h!==null)if(Pa(h.value,d)){if(h.children===s.children&&!Xi.current){t=Ns(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var c=h.dependencies;if(c!==null){d=h.child;for(var b=c.firstContext;b!==null;){if(b.context===n){if(h.tag===1){b=Rs(-1,r&-r),b.tag=2;var E=h.updateQueue;if(E!==null){E=E.shared;var I=E.pending;I===null?b.next=b:(b.next=I.next,I.next=b),E.pending=b}}h.lanes|=r,b=h.alternate,b!==null&&(b.lanes|=r),ib(h.return,r,t),c.lanes|=r;break}b=b.next}}else if(h.tag===10)d=h.type===t.type?null:h.child;else if(h.tag===18){if(d=h.return,d===null)throw Error(et(341));d.lanes|=r,c=d.alternate,c!==null&&(c.lanes|=r),ib(d,r,t),d=h.sibling}else d=h.child;if(d!==null)d.return=h;else for(d=h;d!==null;){if(d===t){d=null;break}if(h=d.sibling,h!==null){h.return=d.return,d=h;break}d=d.return}h=d}Ni(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Zh(t,r),s=Yo(s),n=n(s),t.flags|=1,Ni(e,t,n,r),t.child;case 14:return n=t.type,s=ga(n,t.pendingProps),s=ga(n.type,s),PE(e,t,n,s,r);case 15:return qT(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ga(n,s),Mg(e,t),t.tag=1,Yi(n)?(e=!0,ty(t)):e=!1,Zh(t,r),HT(t,n,s),ab(t,n,s,r),cb(null,t,n,!0,e,r);case 19:return QT(e,t,r);case 22:return KT(e,t,r)}throw Error(et(156,t.tag))};function m8(e,t){return VP(e,t)}function wz(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Go(e,t,r,n){return new wz(e,t,r,n)}function yw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sz(e){if(typeof e=="function")return yw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===z2)return 11;if(e===F2)return 14}return 2}function Ol(e,t){var r=e.alternate;return r===null?(r=Go(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lg(e,t,r,n,s,h){var d=2;if(n=e,typeof e=="function")yw(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Eh:return $c(r.children,s,h,t);case O2:d=8,s|=8;break;case Mx:return e=Go(12,r,t,s|2),e.elementType=Mx,e.lanes=h,e;case Rx:return e=Go(13,r,t,s),e.elementType=Rx,e.lanes=h,e;case kx:return e=Go(19,r,t,s),e.elementType=kx,e.lanes=h,e;case AP:return Qy(r,s,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case SP:d=10;break e;case EP:d=9;break e;case z2:d=11;break e;case F2:d=14;break e;case xl:d=16,n=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=Go(d,r,t,s),t.elementType=e,t.type=n,t.lanes=h,t}function $c(e,t,r,n){return e=Go(7,e,n,t),e.lanes=r,e}function Qy(e,t,r,n){return e=Go(22,e,n,t),e.elementType=AP,e.lanes=r,e.stateNode={isHidden:!1},e}function D_(e,t,r){return e=Go(6,e,null,t),e.lanes=r,e}function O_(e,t,r){return t=Go(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ez(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=m_(0),this.expirationTimes=m_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=m_(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vw(e,t,r,n,s,h,d,c,b){return e=new Ez(e,t,r,c,b),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Go(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},tw(h),e}function Az(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function g8(e){if(!e)return Nl;e=e._reactInternals;e:{if(su(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var r=e.type;if(Yi(r))return gT(e,r,t)}return t}function y8(e,t,r,n,s,h,d,c,b){return e=vw(r,n,!0,e,s,h,d,c,b),e.context=g8(null),r=e.current,n=ji(),s=Dl(r),h=Rs(n,s),h.callback=t??null,kl(r,h,s),e.current.lanes=s,dm(e,s,n),Ji(e,n),e}function e1(e,t,r,n){var s=t.current,h=ji(),d=Dl(s);return r=g8(r),t.context===null?t.context=r:t.pendingContext=r,t=Rs(h,d),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=kl(s,t,d),e!==null&&(Sa(e,s,d,h),Pg(e,s,d)),d}function py(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function NE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function _w(e,t){NE(e,t),(e=e.alternate)&&NE(e,t)}function Cz(){return null}var v8=typeof reportError=="function"?reportError:function(e){console.error(e)};function xw(e){this._internalRoot=e}t1.prototype.render=xw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));e1(e,t,null,null)};t1.prototype.unmount=xw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xc(function(){e1(null,e,null,null)}),t[Fs]=null}};function t1(e){this._internalRoot=e}t1.prototype.unstable_scheduleHydration=function(e){if(e){var t=KP();e={blockedOn:null,target:e,priority:t};for(var r=0;r<wl.length&&t!==0&&t<wl[r].priority;r++);wl.splice(r,0,e),r===0&&YP(e)}};function bw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function r1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jE(){}function Pz(e,t,r,n,s){if(s){if(typeof n=="function"){var h=n;n=function(){var E=py(d);h.call(E)}}var d=y8(t,n,e,0,null,!1,!1,"",jE);return e._reactRootContainer=d,e[Fs]=d.current,Np(e.nodeType===8?e.parentNode:e),Xc(),d}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var c=n;n=function(){var E=py(b);c.call(E)}}var b=vw(e,0,!1,null,null,!1,!1,"",jE);return e._reactRootContainer=b,e[Fs]=b.current,Np(e.nodeType===8?e.parentNode:e),Xc(function(){e1(t,b,r,n)}),b}function n1(e,t,r,n,s){var h=r._reactRootContainer;if(h){var d=h;if(typeof s=="function"){var c=s;s=function(){var b=py(d);c.call(b)}}e1(t,d,e,s)}else d=Pz(r,t,e,s,n);return py(d)}GP=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=op(t.pendingLanes);r!==0&&(j2(t,r|1),Ji(t,wn()),!(_r&6)&&(id=wn()+500,Gl()))}break;case 13:Xc(function(){var n=Bs(e,1);if(n!==null){var s=ji();Sa(n,e,1,s)}}),_w(e,1)}};$2=function(e){if(e.tag===13){var t=Bs(e,134217728);if(t!==null){var r=ji();Sa(t,e,134217728,r)}_w(e,134217728)}};qP=function(e){if(e.tag===13){var t=Dl(e),r=Bs(e,t);if(r!==null){var n=ji();Sa(r,e,t,n)}_w(e,t)}};KP=function(){return Tr};XP=function(e,t){var r=Tr;try{return Tr=e,t()}finally{Tr=r}};Vx=function(e,t,r){switch(t){case"input":if(Ox(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Gy(n);if(!s)throw Error(et(90));PP(n),Ox(n,s)}}}break;case"textarea":IP(e,r);break;case"select":t=r.value,t!=null&&jh(e,!!r.multiple,t,!1)}};zP=pw;FP=Xc;var Tz={usingClientEntryPoint:!1,Events:[pm,Th,Gy,DP,OP,pw]},Kf={findFiberByHostInstance:Lc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Iz={bundleType:Kf.bundleType,version:Kf.version,rendererPackageName:Kf.rendererPackageName,rendererConfig:Kf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jP(e),e===null?null:e.stateNode},findFiberByHostInstance:Kf.findFiberByHostInstance||Cz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ig=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ig.isDisabled&&ig.supportsFiber)try{Uy=ig.inject(Iz),Ja=ig}catch{}}Ao.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tz;Ao.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bw(t))throw Error(et(200));return Az(e,t,null,r)};Ao.createRoot=function(e,t){if(!bw(e))throw Error(et(299));var r=!1,n="",s=v8;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=vw(e,1,!1,null,null,r,!1,n,s),e[Fs]=t.current,Np(e.nodeType===8?e.parentNode:e),new xw(t)};Ao.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=jP(t),e=e===null?null:e.stateNode,e};Ao.flushSync=function(e){return Xc(e)};Ao.hydrate=function(e,t,r){if(!r1(t))throw Error(et(200));return n1(null,e,t,!0,r)};Ao.hydrateRoot=function(e,t,r){if(!bw(e))throw Error(et(405));var n=r!=null&&r.hydratedSources||null,s=!1,h="",d=v8;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),t=y8(t,null,e,1,r??null,s,!1,h,d),e[Fs]=t.current,Np(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new t1(t)};Ao.render=function(e,t,r){if(!r1(t))throw Error(et(200));return n1(null,e,t,!1,r)};Ao.unmountComponentAtNode=function(e){if(!r1(e))throw Error(et(40));return e._reactRootContainer?(Xc(function(){n1(null,null,e,!1,function(){e._reactRootContainer=null,e[Fs]=null})}),!0):!1};Ao.unstable_batchedUpdates=pw;Ao.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!r1(r))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return n1(e,t,r,!1,n)};Ao.version="18.3.1-next-f1338f8080-20240426";function _8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_8)}catch(e){console.error(e)}}_8(),_P.exports=Ao;var _d=_P.exports;const x8=um(_d),Mz=sP({__proto__:null,default:x8},[_d]);var $E=_d;Tx.createRoot=$E.createRoot,Tx.hydrateRoot=$E.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rn(){return rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rn.apply(this,arguments)}var In;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(In||(In={}));const VE="popstate";function Rz(e){e===void 0&&(e={});function t(n,s){let{pathname:h,search:d,hash:c}=n.location;return qp("",{pathname:h,search:d,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:gm(s)}return Lz(t,r,null,e)}function hr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function od(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kz(){return Math.random().toString(36).substr(2,8)}function UE(e,t){return{usr:e.state,key:e.key,idx:t}}function qp(e,t,r,n){return r===void 0&&(r=null),rn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ql(t):t,{state:r,key:t&&t.key||n||kz()})}function gm(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ql(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Lz(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:h=!1}=n,d=s.history,c=In.Pop,b=null,E=I();E==null&&(E=0,d.replaceState(rn({},d.state,{idx:E}),""));function I(){return(d.state||{idx:null}).idx}function P(){c=In.Pop;let re=I(),W=re==null?null:re-E;E=re,b&&b({action:c,location:V.location,delta:W})}function T(re,W){c=In.Push;let Z=qp(V.location,re,W);E=I()+1;let K=UE(Z,E),ie=V.createHref(Z);try{d.pushState(K,"",ie)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;s.location.assign(ie)}h&&b&&b({action:c,location:V.location,delta:1})}function O(re,W){c=In.Replace;let Z=qp(V.location,re,W);E=I();let K=UE(Z,E),ie=V.createHref(Z);d.replaceState(K,"",ie),h&&b&&b({action:c,location:V.location,delta:0})}function j(re){let W=s.location.origin!=="null"?s.location.origin:s.location.href,Z=typeof re=="string"?re:gm(re);return Z=Z.replace(/ $/,"%20"),hr(W,"No window.location.(origin|href) available to create URL for href: "+Z),new URL(Z,W)}let V={get action(){return c},get location(){return e(s,d)},listen(re){if(b)throw new Error("A history only accepts one active listener");return s.addEventListener(VE,P),b=re,()=>{s.removeEventListener(VE,P),b=null}},createHref(re){return t(s,re)},createURL:j,encodeLocation(re){let W=j(re);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:T,replace:O,go(re){return d.go(re)}};return V}var Xr;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Xr||(Xr={}));const Dz=new Set(["lazy","caseSensitive","path","id","index","children"]);function Oz(e){return e.index===!0}function bb(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((s,h)=>{let d=[...r,h],c=typeof s.id=="string"?s.id:d.join("-");if(hr(s.index!==!0||!s.children,"Cannot specify children on an index route"),hr(!n[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),Oz(s)){let b=rn({},s,t(s),{id:c});return n[c]=b,b}else{let b=rn({},s,t(s),{id:c,children:void 0});return n[c]=b,s.children&&(b.children=bb(s.children,t,d,n)),b}})}function Oh(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?ql(t):t,s=ym(n.pathname||"/",r);if(s==null)return null;let h=b8(e);Fz(h);let d=null;for(let c=0;d==null&&c<h.length;++c){let b=Kz(s);d=Wz(h[c],b)}return d}function zz(e,t){let{route:r,pathname:n,params:s}=e;return{id:r.id,pathname:n,params:s,data:t[r.id],handle:r.handle}}function b8(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(h,d,c)=>{let b={relativePath:c===void 0?h.path||"":c,caseSensitive:h.caseSensitive===!0,childrenIndex:d,route:h};b.relativePath.startsWith("/")&&(hr(b.relativePath.startsWith(n),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(n.length));let E=zl([n,b.relativePath]),I=r.concat(b);h.children&&h.children.length>0&&(hr(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),b8(h.children,t,I,E)),!(h.path==null&&!h.index)&&t.push({path:E,score:Zz(E,h.index),routesMeta:I})};return e.forEach((h,d)=>{var c;if(h.path===""||!((c=h.path)!=null&&c.includes("?")))s(h,d);else for(let b of w8(h.path))s(h,d,b)}),t}function w8(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),h=r.replace(/\?$/,"");if(n.length===0)return s?[h,""]:[h];let d=w8(n.join("/")),c=[];return c.push(...d.map(b=>b===""?h:[h,b].join("/"))),s&&c.push(...d),c.map(b=>e.startsWith("/")&&b===""?"/":b)}function Fz(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Hz(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Bz=/^:[\w-]+$/,Nz=3,jz=2,$z=1,Vz=10,Uz=-2,ZE=e=>e==="*";function Zz(e,t){let r=e.split("/"),n=r.length;return r.some(ZE)&&(n+=Uz),t&&(n+=jz),r.filter(s=>!ZE(s)).reduce((s,h)=>s+(Bz.test(h)?Nz:h===""?$z:Vz),n)}function Hz(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Wz(e,t){let{routesMeta:r}=e,n={},s="/",h=[];for(let d=0;d<r.length;++d){let c=r[d],b=d===r.length-1,E=s==="/"?t:t.slice(s.length)||"/",I=Gz({path:c.relativePath,caseSensitive:c.caseSensitive,end:b},E);if(!I)return null;Object.assign(n,I.params);let P=c.route;h.push({params:n,pathname:zl([s,I.pathname]),pathnameBase:Jz(zl([s,I.pathnameBase])),route:P}),I.pathnameBase!=="/"&&(s=zl([s,I.pathnameBase]))}return h}function Gz(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=qz(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let h=s[0],d=h.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((E,I,P)=>{let{paramName:T,isOptional:O}=I;if(T==="*"){let V=c[P]||"";d=h.slice(0,h.length-V.length).replace(/(.)\/+$/,"$1")}const j=c[P];return O&&!j?E[T]=void 0:E[T]=(j||"").replace(/%2F/g,"/"),E},{}),pathname:h,pathnameBase:d,pattern:e}}function qz(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),od(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,c,b)=>(n.push({paramName:c,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Kz(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return od(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ym(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Xz(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?ql(e):e;return{pathname:r?r.startsWith("/")?r:Yz(r,t):t,search:Qz(n),hash:eF(s)}}function Yz(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function z_(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function S8(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function E8(e,t){let r=S8(e);return t?r.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function A8(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=ql(e):(s=rn({},e),hr(!s.pathname||!s.pathname.includes("?"),z_("?","pathname","search",s)),hr(!s.pathname||!s.pathname.includes("#"),z_("#","pathname","hash",s)),hr(!s.search||!s.search.includes("#"),z_("#","search","hash",s)));let h=e===""||s.pathname==="",d=h?"/":s.pathname,c;if(d==null)c=r;else{let P=t.length-1;if(!n&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),P-=1;s.pathname=T.join("/")}c=P>=0?t[P]:"/"}let b=Xz(s,c),E=d&&d!=="/"&&d.endsWith("/"),I=(h||d===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(E||I)&&(b.pathname+="/"),b}const zl=e=>e.join("/").replace(/\/\/+/g,"/"),Jz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Qz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,eF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class ww{constructor(t,r,n,s){s===void 0&&(s=!1),this.status=t,this.statusText=r||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Sw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const C8=["post","put","patch","delete"],tF=new Set(C8),rF=["get",...C8],nF=new Set(rF),iF=new Set([301,302,303,307,308]),oF=new Set([307,308]),F_={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},aF={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Xf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Ew=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sF=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),P8="remix-router-transitions";function lF(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;hr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let D=e.detectErrorBoundary;s=H=>({hasErrorBoundary:D(H)})}else s=sF;let h={},d=bb(e.routes,s,void 0,h),c,b=e.basename||"/",E=e.unstable_dataStrategy||dF,I=rn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),P=null,T=new Set,O=null,j=null,V=null,re=e.hydrationData!=null,W=Oh(d,e.history.location,b),Z=null;if(W==null){let D=No(404,{pathname:e.history.location.pathname}),{matches:H,route:ee}=eA(d);W=H,Z={[ee.id]:D}}let K,ie=W.some(D=>D.route.lazy),de=W.some(D=>D.route.loader);if(ie)K=!1;else if(!de)K=!0;else if(I.v7_partialHydration){let D=e.hydrationData?e.hydrationData.loaderData:null,H=e.hydrationData?e.hydrationData.errors:null,ee=se=>se.route.loader?typeof se.route.loader=="function"&&se.route.loader.hydrate===!0?!1:D&&D[se.route.id]!==void 0||H&&H[se.route.id]!==void 0:!0;if(H){let se=W.findIndex(ge=>H[ge.route.id]!==void 0);K=W.slice(0,se+1).every(ee)}else K=W.every(ee)}else K=e.hydrationData!=null;let ae,J={historyAction:e.history.action,location:e.history.location,matches:W,initialized:K,navigation:F_,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||Z,fetchers:new Map,blockers:new Map},we=In.Pop,Re=!1,De,Oe=!1,Qe=new Map,qe=null,Ze=!1,Fe=!1,Ve=[],He=[],Se=new Map,Be=0,tt=-1,ot=new Map,St=new Set,qt=new Map,Tt=new Map,kt=new Set,Lt=new Map,Yt=new Map,or=!1;function zr(){if(P=e.history.listen(D=>{let{action:H,location:ee,delta:se}=D;if(or){or=!1;return}od(Yt.size===0||se!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ge=jt({currentLocation:J.location,nextLocation:ee,historyAction:H});if(ge&&se!=null){or=!0,e.history.go(se*-1),cn(ge,{state:"blocked",location:ee,proceed(){cn(ge,{state:"proceeding",proceed:void 0,reset:void 0,location:ee}),e.history.go(se)},reset(){let fe=new Map(J.blockers);fe.set(ge,Xf),ar({blockers:fe})}});return}return Le(H,ee)}),r){EF(t,Qe);let D=()=>AF(t,Qe);t.addEventListener("pagehide",D),qe=()=>t.removeEventListener("pagehide",D)}return J.initialized||Le(In.Pop,J.location,{initialHydration:!0}),ae}function Fr(){P&&P(),qe&&qe(),T.clear(),De&&De.abort(),J.fetchers.forEach((D,H)=>gn(H)),J.blockers.forEach((D,H)=>An(H))}function ti(D){return T.add(D),()=>T.delete(D)}function ar(D,H){H===void 0&&(H={}),J=rn({},J,D);let ee=[],se=[];I.v7_fetcherPersist&&J.fetchers.forEach((ge,fe)=>{ge.state==="idle"&&(kt.has(fe)?se.push(fe):ee.push(fe))}),[...T].forEach(ge=>ge(J,{deletedFetchers:se,unstable_viewTransitionOpts:H.viewTransitionOpts,unstable_flushSync:H.flushSync===!0})),I.v7_fetcherPersist&&(ee.forEach(ge=>J.fetchers.delete(ge)),se.forEach(ge=>gn(ge)))}function Jr(D,H,ee){var se,ge;let{flushSync:fe}=ee===void 0?{}:ee,_e=J.actionData!=null&&J.navigation.formMethod!=null&&va(J.navigation.formMethod)&&J.navigation.state==="loading"&&((se=D.state)==null?void 0:se._isRedirect)!==!0,Pe;H.actionData?Object.keys(H.actionData).length>0?Pe=H.actionData:Pe=null:_e?Pe=J.actionData:Pe=null;let Me=H.loaderData?JE(J.loaderData,H.loaderData,H.matches||[],H.errors):J.loaderData,Te=J.blockers;Te.size>0&&(Te=new Map(Te),Te.forEach((it,mt)=>Te.set(mt,Xf)));let dt=Re===!0||J.navigation.formMethod!=null&&va(J.navigation.formMethod)&&((ge=D.state)==null?void 0:ge._isRedirect)!==!0;c&&(d=c,c=void 0),Ze||we===In.Pop||(we===In.Push?e.history.push(D,D.state):we===In.Replace&&e.history.replace(D,D.state));let ct;if(we===In.Pop){let it=Qe.get(J.location.pathname);it&&it.has(D.pathname)?ct={currentLocation:J.location,nextLocation:D}:Qe.has(D.pathname)&&(ct={currentLocation:D,nextLocation:J.location})}else if(Oe){let it=Qe.get(J.location.pathname);it?it.add(D.pathname):(it=new Set([D.pathname]),Qe.set(J.location.pathname,it)),ct={currentLocation:J.location,nextLocation:D}}ar(rn({},H,{actionData:Pe,loaderData:Me,historyAction:we,location:D,initialized:!0,navigation:F_,revalidation:"idle",restoreScrollPosition:U(D,H.matches||J.matches),preventScrollReset:dt,blockers:Te}),{viewTransitionOpts:ct,flushSync:fe===!0}),we=In.Pop,Re=!1,Oe=!1,Ze=!1,Fe=!1,Ve=[],He=[]}async function Wt(D,H){if(typeof D=="number"){e.history.go(D);return}let ee=wb(J.location,J.matches,b,I.v7_prependBasename,D,I.v7_relativeSplatPath,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:se,submission:ge,error:fe}=HE(I.v7_normalizeFormMethod,!1,ee,H),_e=J.location,Pe=qp(J.location,se,H&&H.state);Pe=rn({},Pe,e.history.encodeLocation(Pe));let Me=H&&H.replace!=null?H.replace:void 0,Te=In.Push;Me===!0?Te=In.Replace:Me===!1||ge!=null&&va(ge.formMethod)&&ge.formAction===J.location.pathname+J.location.search&&(Te=In.Replace);let dt=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,ct=(H&&H.unstable_flushSync)===!0,it=jt({currentLocation:_e,nextLocation:Pe,historyAction:Te});if(it){cn(it,{state:"blocked",location:Pe,proceed(){cn(it,{state:"proceeding",proceed:void 0,reset:void 0,location:Pe}),Wt(D,H)},reset(){let mt=new Map(J.blockers);mt.set(it,Xf),ar({blockers:mt})}});return}return await Le(Te,Pe,{submission:ge,pendingError:fe,preventScrollReset:dt,replace:H&&H.replace,enableViewTransition:H&&H.unstable_viewTransition,flushSync:ct})}function ri(){if(ur(),ar({revalidation:"loading"}),J.navigation.state!=="submitting"){if(J.navigation.state==="idle"){Le(J.historyAction,J.location,{startUninterruptedRevalidation:!0});return}Le(we||J.historyAction,J.navigation.location,{overrideNavigation:J.navigation})}}async function Le(D,H,ee){De&&De.abort(),De=null,we=D,Ze=(ee&&ee.startUninterruptedRevalidation)===!0,he(J.location,J.matches),Re=(ee&&ee.preventScrollReset)===!0,Oe=(ee&&ee.enableViewTransition)===!0;let se=c||d,ge=ee&&ee.overrideNavigation,fe=Oh(se,H,b),_e=(ee&&ee.flushSync)===!0;if(!fe){let it=No(404,{pathname:H.pathname}),{matches:mt,route:Mt}=eA(se);Mi(),Jr(H,{matches:mt,loaderData:{},errors:{[Mt.id]:it}},{flushSync:_e});return}if(J.initialized&&!Fe&&vF(J.location,H)&&!(ee&&ee.submission&&va(ee.submission.formMethod))){Jr(H,{matches:fe},{flushSync:_e});return}De=new AbortController;let Pe=ch(e.history,H,De.signal,ee&&ee.submission),Me;if(ee&&ee.pendingError)Me=[Ep(fe).route.id,{type:Xr.error,error:ee.pendingError}];else if(ee&&ee.submission&&va(ee.submission.formMethod)){let it=await Sn(Pe,H,ee.submission,fe,{replace:ee.replace,flushSync:_e});if(it.shortCircuited)return;Me=it.pendingActionResult,ge=B_(H,ee.submission),_e=!1,Pe=ch(e.history,Pe.url,Pe.signal)}let{shortCircuited:Te,loaderData:dt,errors:ct}=await Rn(Pe,H,fe,ge,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,_e,Me);Te||(De=null,Jr(H,rn({matches:fe},QE(Me),{loaderData:dt,errors:ct})))}async function Sn(D,H,ee,se,ge){ge===void 0&&(ge={}),ur();let fe=wF(H,ee);ar({navigation:fe},{flushSync:ge.flushSync===!0});let _e,Pe=Eb(se,H);if(!Pe.route.action&&!Pe.route.lazy)_e={type:Xr.error,error:No(405,{method:D.method,pathname:H.pathname,routeId:Pe.route.id})};else if(_e=(await Vt("action",D,[Pe],se))[0],D.signal.aborted)return{shortCircuited:!0};if(Fc(_e)){let Me;return ge&&ge.replace!=null?Me=ge.replace:Me=KE(_e.response.headers.get("Location"),new URL(D.url),b)===J.location.pathname+J.location.search,await $t(D,_e,{submission:ee,replace:Me}),{shortCircuited:!0}}if(zc(_e))throw No(400,{type:"defer-action"});if(Uo(_e)){let Me=Ep(se,Pe.route.id);return(ge&&ge.replace)!==!0&&(we=In.Push),{pendingActionResult:[Me.route.id,_e]}}return{pendingActionResult:[Pe.route.id,_e]}}async function Rn(D,H,ee,se,ge,fe,_e,Pe,Me,Te){let dt=se||B_(H,ge),ct=ge||fe||nA(dt),it=c||d,[mt,Mt]=WE(e.history,J,ee,ct,H,I.v7_partialHydration&&Pe===!0,I.unstable_skipActionErrorRevalidation,Fe,Ve,He,kt,qt,St,it,b,Te);if(Mi(er=>!(ee&&ee.some(Ln=>Ln.route.id===er))||mt&&mt.some(Ln=>Ln.route.id===er)),tt=++Be,mt.length===0&&Mt.length===0){let er=Xe();return Jr(H,rn({matches:ee,loaderData:{},errors:Te&&Uo(Te[1])?{[Te[0]]:Te[1].error}:null},QE(Te),er?{fetchers:new Map(J.fetchers)}:{}),{flushSync:Me}),{shortCircuited:!0}}if(!Ze&&(!I.v7_partialHydration||!Pe)){Mt.forEach(Ln=>{let Kt=J.fetchers.get(Ln.key),en=Yf(void 0,Kt?Kt.data:void 0);J.fetchers.set(Ln.key,en)});let er;Te&&!Uo(Te[1])?er={[Te[0]]:Te[1].data}:J.actionData&&(Object.keys(J.actionData).length===0?er=null:er=J.actionData),ar(rn({navigation:dt},er!==void 0?{actionData:er}:{},Mt.length>0?{fetchers:new Map(J.fetchers)}:{}),{flushSync:Me})}Mt.forEach(er=>{Se.has(er.key)&&ni(er.key),er.controller&&Se.set(er.key,er.controller)});let sr=()=>Mt.forEach(er=>ni(er.key));De&&De.signal.addEventListener("abort",sr);let{loaderResults:lr,fetcherResults:Cr}=await Ii(J.matches,ee,mt,Mt,D);if(D.signal.aborted)return{shortCircuited:!0};De&&De.signal.removeEventListener("abort",sr),Mt.forEach(er=>Se.delete(er.key));let zt=tA([...lr,...Cr]);if(zt){if(zt.idx>=mt.length){let er=Mt[zt.idx-mt.length].key;St.add(er)}return await $t(D,zt.result,{replace:_e}),{shortCircuited:!0}}let{loaderData:yr,errors:br}=YE(J,ee,mt,lr,Te,Mt,Cr,Lt);Lt.forEach((er,Ln)=>{er.subscribe(Kt=>{(Kt||er.done)&&Lt.delete(Ln)})}),I.v7_partialHydration&&Pe&&J.errors&&Object.entries(J.errors).filter(er=>{let[Ln]=er;return!mt.some(Kt=>Kt.route.id===Ln)}).forEach(er=>{let[Ln,Kt]=er;br=Object.assign(br||{},{[Ln]:Kt})});let yn=Xe(),Cn=Ut(tt),Br=yn||Cn||Mt.length>0;return rn({loaderData:yr,errors:br},Br?{fetchers:new Map(J.fetchers)}:{})}function nr(D,H,ee,se){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Se.has(D)&&ni(D);let ge=(se&&se.unstable_flushSync)===!0,fe=c||d,_e=wb(J.location,J.matches,b,I.v7_prependBasename,ee,I.v7_relativeSplatPath,H,se==null?void 0:se.relative),Pe=Oh(fe,_e,b);if(!Pe){Ui(D,H,No(404,{pathname:_e}),{flushSync:ge});return}let{path:Me,submission:Te,error:dt}=HE(I.v7_normalizeFormMethod,!0,_e,se);if(dt){Ui(D,H,dt,{flushSync:ge});return}let ct=Eb(Pe,Me);if(Re=(se&&se.preventScrollReset)===!0,Te&&va(Te.formMethod)){dr(D,H,Me,ct,Pe,ge,Te);return}qt.set(D,{routeId:H,path:Me}),kn(D,H,Me,ct,Pe,ge,Te)}async function dr(D,H,ee,se,ge,fe,_e){if(ur(),qt.delete(D),!se.route.action&&!se.route.lazy){let en=No(405,{method:_e.formMethod,pathname:ee,routeId:H});Ui(D,H,en,{flushSync:fe});return}let Pe=J.fetchers.get(D);En(D,SF(_e,Pe),{flushSync:fe});let Me=new AbortController,Te=ch(e.history,ee,Me.signal,_e);Se.set(D,Me);let dt=Be,it=(await Vt("action",Te,[se],ge))[0];if(Te.signal.aborted){Se.get(D)===Me&&Se.delete(D);return}if(I.v7_fetcherPersist&&kt.has(D)){if(Fc(it)||Uo(it)){En(D,vl(void 0));return}}else{if(Fc(it))if(Se.delete(D),tt>dt){En(D,vl(void 0));return}else return St.add(D),En(D,Yf(_e)),$t(Te,it,{fetcherSubmission:_e});if(Uo(it)){Ui(D,H,it.error);return}}if(zc(it))throw No(400,{type:"defer-action"});let mt=J.navigation.location||J.location,Mt=ch(e.history,mt,Me.signal),sr=c||d,lr=J.navigation.state!=="idle"?Oh(sr,J.navigation.location,b):J.matches;hr(lr,"Didn't find any matches after fetcher action");let Cr=++Be;ot.set(D,Cr);let zt=Yf(_e,it.data);J.fetchers.set(D,zt);let[yr,br]=WE(e.history,J,lr,_e,mt,!1,I.unstable_skipActionErrorRevalidation,Fe,Ve,He,kt,qt,St,sr,b,[se.route.id,it]);br.filter(en=>en.key!==D).forEach(en=>{let ia=en.key,jn=J.fetchers.get(ia),$n=Yf(void 0,jn?jn.data:void 0);J.fetchers.set(ia,$n),Se.has(ia)&&ni(ia),en.controller&&Se.set(ia,en.controller)}),ar({fetchers:new Map(J.fetchers)});let yn=()=>br.forEach(en=>ni(en.key));Me.signal.addEventListener("abort",yn);let{loaderResults:Cn,fetcherResults:Br}=await Ii(J.matches,lr,yr,br,Mt);if(Me.signal.aborted)return;Me.signal.removeEventListener("abort",yn),ot.delete(D),Se.delete(D),br.forEach(en=>Se.delete(en.key));let er=tA([...Cn,...Br]);if(er){if(er.idx>=yr.length){let en=br[er.idx-yr.length].key;St.add(en)}return $t(Mt,er.result)}let{loaderData:Ln,errors:Kt}=YE(J,J.matches,yr,Cn,void 0,br,Br,Lt);if(J.fetchers.has(D)){let en=vl(it.data);J.fetchers.set(D,en)}Ut(Cr),J.navigation.state==="loading"&&Cr>tt?(hr(we,"Expected pending action"),De&&De.abort(),Jr(J.navigation.location,{matches:lr,loaderData:Ln,errors:Kt,fetchers:new Map(J.fetchers)})):(ar({errors:Kt,loaderData:JE(J.loaderData,Ln,lr,Kt),fetchers:new Map(J.fetchers)}),Fe=!1)}async function kn(D,H,ee,se,ge,fe,_e){let Pe=J.fetchers.get(D);En(D,Yf(_e,Pe?Pe.data:void 0),{flushSync:fe});let Me=new AbortController,Te=ch(e.history,ee,Me.signal);Se.set(D,Me);let dt=Be,it=(await Vt("loader",Te,[se],ge))[0];if(zc(it)&&(it=await R8(it,Te.signal,!0)||it),Se.get(D)===Me&&Se.delete(D),!Te.signal.aborted){if(kt.has(D)){En(D,vl(void 0));return}if(Fc(it))if(tt>dt){En(D,vl(void 0));return}else{St.add(D),await $t(Te,it);return}if(Uo(it)){Ui(D,H,it.error);return}hr(!zc(it),"Unhandled fetcher deferred data"),En(D,vl(it.data))}}async function $t(D,H,ee){let{submission:se,fetcherSubmission:ge,replace:fe}=ee===void 0?{}:ee;H.response.headers.has("X-Remix-Revalidate")&&(Fe=!0);let _e=H.response.headers.get("Location");hr(_e,"Expected a Location header on the redirect Response"),_e=KE(_e,new URL(D.url),b);let Pe=qp(J.location,_e,{_isRedirect:!0});if(r){let mt=!1;if(H.response.headers.has("X-Remix-Reload-Document"))mt=!0;else if(Ew.test(_e)){const Mt=e.history.createURL(_e);mt=Mt.origin!==t.location.origin||ym(Mt.pathname,b)==null}if(mt){fe?t.location.replace(_e):t.location.assign(_e);return}}De=null;let Me=fe===!0?In.Replace:In.Push,{formMethod:Te,formAction:dt,formEncType:ct}=J.navigation;!se&&!ge&&Te&&dt&&ct&&(se=nA(J.navigation));let it=se||ge;if(oF.has(H.response.status)&&it&&va(it.formMethod))await Le(Me,Pe,{submission:rn({},it,{formAction:_e}),preventScrollReset:Re});else{let mt=B_(Pe,se);await Le(Me,Pe,{overrideNavigation:mt,fetcherSubmission:ge,preventScrollReset:Re})}}async function Vt(D,H,ee,se){try{let ge=await fF(E,D,H,ee,se,h,s);return await Promise.all(ge.map((fe,_e)=>{if(_F(fe)){let Pe=fe.result;return{type:Xr.redirect,response:gF(Pe,H,ee[_e].route.id,se,b,I.v7_relativeSplatPath)}}return mF(fe)}))}catch(ge){return ee.map(()=>({type:Xr.error,error:ge}))}}async function Ii(D,H,ee,se,ge){let[fe,..._e]=await Promise.all([ee.length?Vt("loader",ge,ee,H):[],...se.map(Pe=>{if(Pe.matches&&Pe.match&&Pe.controller){let Me=ch(e.history,Pe.path,Pe.controller.signal);return Vt("loader",Me,[Pe.match],Pe.matches).then(Te=>Te[0])}else return Promise.resolve({type:Xr.error,error:No(404,{pathname:Pe.path})})})]);return await Promise.all([rA(D,ee,fe,fe.map(()=>ge.signal),!1,J.loaderData),rA(D,se.map(Pe=>Pe.match),_e,se.map(Pe=>Pe.controller?Pe.controller.signal:null),!0)]),{loaderResults:fe,fetcherResults:_e}}function ur(){Fe=!0,Ve.push(...Mi()),qt.forEach((D,H)=>{Se.has(H)&&(He.push(H),ni(H))})}function En(D,H,ee){ee===void 0&&(ee={}),J.fetchers.set(D,H),ar({fetchers:new Map(J.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function Ui(D,H,ee,se){se===void 0&&(se={});let ge=Ep(J.matches,H);gn(D),ar({errors:{[ge.route.id]:ee},fetchers:new Map(J.fetchers)},{flushSync:(se&&se.flushSync)===!0})}function Ye(D){return I.v7_fetcherPersist&&(Tt.set(D,(Tt.get(D)||0)+1),kt.has(D)&&kt.delete(D)),J.fetchers.get(D)||aF}function gn(D){let H=J.fetchers.get(D);Se.has(D)&&!(H&&H.state==="loading"&&ot.has(D))&&ni(D),qt.delete(D),ot.delete(D),St.delete(D),kt.delete(D),J.fetchers.delete(D)}function Nn(D){if(I.v7_fetcherPersist){let H=(Tt.get(D)||0)-1;H<=0?(Tt.delete(D),kt.add(D)):Tt.set(D,H)}else gn(D);ar({fetchers:new Map(J.fetchers)})}function ni(D){let H=Se.get(D);hr(H,"Expected fetch controller: "+D),H.abort(),Se.delete(D)}function Ro(D){for(let H of D){let ee=Ye(H),se=vl(ee.data);J.fetchers.set(H,se)}}function Xe(){let D=[],H=!1;for(let ee of St){let se=J.fetchers.get(ee);hr(se,"Expected fetcher: "+ee),se.state==="loading"&&(St.delete(ee),D.push(ee),H=!0)}return Ro(D),H}function Ut(D){let H=[];for(let[ee,se]of ot)if(se<D){let ge=J.fetchers.get(ee);hr(ge,"Expected fetcher: "+ee),ge.state==="loading"&&(ni(ee),ot.delete(ee),H.push(ee))}return Ro(H),H.length>0}function Bt(D,H){let ee=J.blockers.get(D)||Xf;return Yt.get(D)!==H&&Yt.set(D,H),ee}function An(D){J.blockers.delete(D),Yt.delete(D)}function cn(D,H){let ee=J.blockers.get(D)||Xf;hr(ee.state==="unblocked"&&H.state==="blocked"||ee.state==="blocked"&&H.state==="blocked"||ee.state==="blocked"&&H.state==="proceeding"||ee.state==="blocked"&&H.state==="unblocked"||ee.state==="proceeding"&&H.state==="unblocked","Invalid blocker state transition: "+ee.state+" -> "+H.state);let se=new Map(J.blockers);se.set(D,H),ar({blockers:se})}function jt(D){let{currentLocation:H,nextLocation:ee,historyAction:se}=D;if(Yt.size===0)return;Yt.size>1&&od(!1,"A router only supports one blocker at a time");let ge=Array.from(Yt.entries()),[fe,_e]=ge[ge.length-1],Pe=J.blockers.get(fe);if(!(Pe&&Pe.state==="proceeding")&&_e({currentLocation:H,nextLocation:ee,historyAction:se}))return fe}function Mi(D){let H=[];return Lt.forEach((ee,se)=>{(!D||D(se))&&(ee.cancel(),H.push(se),Lt.delete(se))}),H}function ro(D,H,ee){if(O=D,V=H,j=ee||null,!re&&J.navigation===F_){re=!0;let se=U(J.location,J.matches);se!=null&&ar({restoreScrollPosition:se})}return()=>{O=null,V=null,j=null}}function Qr(D,H){return j&&j(D,H.map(se=>zz(se,J.loaderData)))||D.key}function he(D,H){if(O&&V){let ee=Qr(D,H);O[ee]=V()}}function U(D,H){if(O){let ee=Qr(D,H),se=O[ee];if(typeof se=="number")return se}return null}function q(D){h={},c=bb(D,s,void 0,h)}return ae={get basename(){return b},get future(){return I},get state(){return J},get routes(){return d},get window(){return t},initialize:zr,subscribe:ti,enableScrollRestoration:ro,navigate:Wt,fetch:nr,revalidate:ri,createHref:D=>e.history.createHref(D),encodeLocation:D=>e.history.encodeLocation(D),getFetcher:Ye,deleteFetcher:Nn,dispose:Fr,getBlocker:Bt,deleteBlocker:An,_internalFetchControllers:Se,_internalActiveDeferreds:Lt,_internalSetRoutes:q},ae}function cF(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function wb(e,t,r,n,s,h,d,c){let b,E;if(d){b=[];for(let P of t)if(b.push(P),P.route.id===d){E=P;break}}else b=t,E=t[t.length-1];let I=A8(s||".",E8(b,h),ym(e.pathname,r)||e.pathname,c==="path");return s==null&&(I.search=e.search,I.hash=e.hash),(s==null||s===""||s===".")&&E&&E.route.index&&!Aw(I.search)&&(I.search=I.search?I.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(I.pathname=I.pathname==="/"?r:zl([r,I.pathname])),gm(I)}function HE(e,t,r,n){if(!n||!cF(n))return{path:r};if(n.formMethod&&!bF(n.formMethod))return{path:r,error:No(405,{method:n.formMethod})};let s=()=>({path:r,error:No(400,{type:"invalid-body"})}),h=n.formMethod||"get",d=e?h.toUpperCase():h.toLowerCase(),c=I8(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!va(d))return s();let T=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((O,j)=>{let[V,re]=j;return""+O+V+"="+re+`
`},""):String(n.body);return{path:r,submission:{formMethod:d,formAction:c,formEncType:n.formEncType,formData:void 0,json:void 0,text:T}}}else if(n.formEncType==="application/json"){if(!va(d))return s();try{let T=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:d,formAction:c,formEncType:n.formEncType,formData:void 0,json:T,text:void 0}}}catch{return s()}}}hr(typeof FormData=="function","FormData is not available in this environment");let b,E;if(n.formData)b=Sb(n.formData),E=n.formData;else if(n.body instanceof FormData)b=Sb(n.body),E=n.body;else if(n.body instanceof URLSearchParams)b=n.body,E=XE(b);else if(n.body==null)b=new URLSearchParams,E=new FormData;else try{b=new URLSearchParams(n.body),E=XE(b)}catch{return s()}let I={formMethod:d,formAction:c,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:E,json:void 0,text:void 0};if(va(I.formMethod))return{path:r,submission:I};let P=ql(r);return t&&P.search&&Aw(P.search)&&b.append("index",""),P.search="?"+b,{path:gm(P),submission:I}}function uF(e,t){let r=e;if(t){let n=e.findIndex(s=>s.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function WE(e,t,r,n,s,h,d,c,b,E,I,P,T,O,j,V){let re=V?Uo(V[1])?V[1].error:V[1].data:void 0,W=e.createURL(t.location),Z=e.createURL(s),K=V&&Uo(V[1])?V[0]:void 0,ie=K?uF(r,K):r,de=V?V[1].statusCode:void 0,ae=d&&de&&de>=400,J=ie.filter((Re,De)=>{let{route:Oe}=Re;if(Oe.lazy)return!0;if(Oe.loader==null)return!1;if(h)return typeof Oe.loader!="function"||Oe.loader.hydrate?!0:t.loaderData[Oe.id]===void 0&&(!t.errors||t.errors[Oe.id]===void 0);if(hF(t.loaderData,t.matches[De],Re)||b.some(Ze=>Ze===Re.route.id))return!0;let Qe=t.matches[De],qe=Re;return GE(Re,rn({currentUrl:W,currentParams:Qe.params,nextUrl:Z,nextParams:qe.params},n,{actionResult:re,unstable_actionStatus:de,defaultShouldRevalidate:ae?!1:c||W.pathname+W.search===Z.pathname+Z.search||W.search!==Z.search||T8(Qe,qe)}))}),we=[];return P.forEach((Re,De)=>{if(h||!r.some(Fe=>Fe.route.id===Re.routeId)||I.has(De))return;let Oe=Oh(O,Re.path,j);if(!Oe){we.push({key:De,routeId:Re.routeId,path:Re.path,matches:null,match:null,controller:null});return}let Qe=t.fetchers.get(De),qe=Eb(Oe,Re.path),Ze=!1;T.has(De)?Ze=!1:E.includes(De)?Ze=!0:Qe&&Qe.state!=="idle"&&Qe.data===void 0?Ze=c:Ze=GE(qe,rn({currentUrl:W,currentParams:t.matches[t.matches.length-1].params,nextUrl:Z,nextParams:r[r.length-1].params},n,{actionResult:re,unstable_actionStatus:de,defaultShouldRevalidate:ae?!1:c})),Ze&&we.push({key:De,routeId:Re.routeId,path:Re.path,matches:Oe,match:qe,controller:new AbortController})}),[J,we]}function hF(e,t,r){let n=!t||r.route.id!==t.route.id,s=e[r.route.id]===void 0;return n||s}function T8(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function GE(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function qE(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let s=r[e.id];hr(s,"No route found in manifest");let h={};for(let d in n){let b=s[d]!==void 0&&d!=="hasErrorBoundary";od(!b,'Route "'+s.id+'" has a static property "'+d+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+d+'" will be ignored.')),!b&&!Dz.has(d)&&(h[d]=n[d])}Object.assign(s,h),Object.assign(s,rn({},t(s),{lazy:void 0}))}function dF(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function fF(e,t,r,n,s,h,d,c){let b=n.reduce((P,T)=>P.add(T.route.id),new Set),E=new Set,I=await e({matches:s.map(P=>{let T=b.has(P.route.id);return rn({},P,{shouldLoad:T,resolve:j=>(E.add(P.route.id),T?pF(t,r,P,h,d,j,c):Promise.resolve({type:Xr.data,result:void 0}))})}),request:r,params:s[0].params,context:c});return s.forEach(P=>hr(E.has(P.route.id),'`match.resolve()` was not called for route id "'+P.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),I.filter((P,T)=>b.has(s[T].route.id))}async function pF(e,t,r,n,s,h,d){let c,b,E=I=>{let P,T=new Promise((V,re)=>P=re);b=()=>P(),t.signal.addEventListener("abort",b);let O=V=>typeof I!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):I({request:t,params:r.params,context:d},...V!==void 0?[V]:[]),j;return h?j=h(V=>O(V)):j=(async()=>{try{return{type:"data",result:await O()}}catch(V){return{type:"error",result:V}}})(),Promise.race([j,T])};try{let I=r.route[e];if(r.route.lazy)if(I){let P,[T]=await Promise.all([E(I).catch(O=>{P=O}),qE(r.route,s,n)]);if(P!==void 0)throw P;c=T}else if(await qE(r.route,s,n),I=r.route[e],I)c=await E(I);else if(e==="action"){let P=new URL(t.url),T=P.pathname+P.search;throw No(405,{method:t.method,pathname:T,routeId:r.route.id})}else return{type:Xr.data,result:void 0};else if(I)c=await E(I);else{let P=new URL(t.url),T=P.pathname+P.search;throw No(404,{pathname:T})}hr(c.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(I){return{type:Xr.error,result:I}}finally{b&&t.signal.removeEventListener("abort",b)}return c}async function mF(e){let{result:t,type:r,status:n}=e;if(M8(t)){let d;try{let c=t.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?t.body==null?d=null:d=await t.json():d=await t.text()}catch(c){return{type:Xr.error,error:c}}return r===Xr.error?{type:Xr.error,error:new ww(t.status,t.statusText,d),statusCode:t.status,headers:t.headers}:{type:Xr.data,data:d,statusCode:t.status,headers:t.headers}}if(r===Xr.error)return{type:Xr.error,error:t,statusCode:Sw(t)?t.status:n};if(xF(t)){var s,h;return{type:Xr.deferred,deferredData:t,statusCode:(s=t.init)==null?void 0:s.status,headers:((h=t.init)==null?void 0:h.headers)&&new Headers(t.init.headers)}}return{type:Xr.data,data:t,statusCode:n}}function gF(e,t,r,n,s,h){let d=e.headers.get("Location");if(hr(d,"Redirects returned/thrown from loaders/actions must have a Location header"),!Ew.test(d)){let c=n.slice(0,n.findIndex(b=>b.route.id===r)+1);d=wb(new URL(t.url),c,s,!0,d,h),e.headers.set("Location",d)}return e}function KE(e,t,r){if(Ew.test(e)){let n=e,s=n.startsWith("//")?new URL(t.protocol+n):new URL(n),h=ym(s.pathname,r)!=null;if(s.origin===t.origin&&h)return s.pathname+s.search+s.hash}return e}function ch(e,t,r,n){let s=e.createURL(I8(t)).toString(),h={signal:r};if(n&&va(n.formMethod)){let{formMethod:d,formEncType:c}=n;h.method=d.toUpperCase(),c==="application/json"?(h.headers=new Headers({"Content-Type":c}),h.body=JSON.stringify(n.json)):c==="text/plain"?h.body=n.text:c==="application/x-www-form-urlencoded"&&n.formData?h.body=Sb(n.formData):h.body=n.formData}return new Request(s,h)}function Sb(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function XE(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function yF(e,t,r,n,s,h){let d={},c=null,b,E=!1,I={},P=n&&Uo(n[1])?n[1].error:void 0;return r.forEach((T,O)=>{let j=t[O].route.id;if(hr(!Fc(T),"Cannot handle redirect results in processLoaderData"),Uo(T)){let V=T.error;P!==void 0&&(V=P,P=void 0),c=c||{};{let re=Ep(e,j);c[re.route.id]==null&&(c[re.route.id]=V)}d[j]=void 0,E||(E=!0,b=Sw(T.error)?T.error.status:500),T.headers&&(I[j]=T.headers)}else zc(T)?(s.set(j,T.deferredData),d[j]=T.deferredData.data,T.statusCode!=null&&T.statusCode!==200&&!E&&(b=T.statusCode),T.headers&&(I[j]=T.headers)):(d[j]=T.data,T.statusCode&&T.statusCode!==200&&!E&&(b=T.statusCode),T.headers&&(I[j]=T.headers))}),P!==void 0&&n&&(c={[n[0]]:P},d[n[0]]=void 0),{loaderData:d,errors:c,statusCode:b||200,loaderHeaders:I}}function YE(e,t,r,n,s,h,d,c){let{loaderData:b,errors:E}=yF(t,r,n,s,c);for(let I=0;I<h.length;I++){let{key:P,match:T,controller:O}=h[I];hr(d!==void 0&&d[I]!==void 0,"Did not find corresponding fetcher result");let j=d[I];if(!(O&&O.signal.aborted))if(Uo(j)){let V=Ep(e.matches,T==null?void 0:T.route.id);E&&E[V.route.id]||(E=rn({},E,{[V.route.id]:j.error})),e.fetchers.delete(P)}else if(Fc(j))hr(!1,"Unhandled fetcher revalidation redirect");else if(zc(j))hr(!1,"Unhandled fetcher deferred data");else{let V=vl(j.data);e.fetchers.set(P,V)}}return{loaderData:b,errors:E}}function JE(e,t,r,n){let s=rn({},t);for(let h of r){let d=h.route.id;if(t.hasOwnProperty(d)?t[d]!==void 0&&(s[d]=t[d]):e[d]!==void 0&&h.route.loader&&(s[d]=e[d]),n&&n.hasOwnProperty(d))break}return s}function QE(e){return e?Uo(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Ep(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function eA(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function No(e,t){let{pathname:r,routeId:n,method:s,type:h}=t===void 0?{}:t,d="Unknown Server Error",c="Unknown @remix-run/router error";return e===400?(d="Bad Request",s&&r&&n?c="You made a "+s+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":h==="defer-action"?c="defer() is not supported in actions":h==="invalid-body"&&(c="Unable to encode submission body")):e===403?(d="Forbidden",c='Route "'+n+'" does not match URL "'+r+'"'):e===404?(d="Not Found",c='No route matches URL "'+r+'"'):e===405&&(d="Method Not Allowed",s&&r&&n?c="You made a "+s.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":s&&(c='Invalid request method "'+s.toUpperCase()+'"')),new ww(e||500,d,new Error(c),!0)}function tA(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(Fc(r))return{result:r,idx:t}}}function I8(e){let t=typeof e=="string"?ql(e):e;return gm(rn({},t,{hash:""}))}function vF(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function _F(e){return M8(e.result)&&iF.has(e.result.status)}function zc(e){return e.type===Xr.deferred}function Uo(e){return e.type===Xr.error}function Fc(e){return(e&&e.type)===Xr.redirect}function xF(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function M8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function bF(e){return nF.has(e.toLowerCase())}function va(e){return tF.has(e.toLowerCase())}async function rA(e,t,r,n,s,h){for(let d=0;d<r.length;d++){let c=r[d],b=t[d];if(!b)continue;let E=e.find(P=>P.route.id===b.route.id),I=E!=null&&!T8(E,b)&&(h&&h[b.route.id])!==void 0;if(zc(c)&&(s||I)){let P=n[d];hr(P,"Expected an AbortSignal for revalidating fetcher deferred result"),await R8(c,P,s).then(T=>{T&&(r[d]=T||r[d])})}}}async function R8(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Xr.data,data:e.deferredData.unwrappedData}}catch(s){return{type:Xr.error,error:s}}return{type:Xr.data,data:e.deferredData.data}}}function Aw(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Eb(e,t){let r=typeof t=="string"?ql(t).search:t.search;if(e[e.length-1].route.index&&Aw(r||""))return e[e.length-1];let n=S8(e);return n[n.length-1]}function nA(e){let{formMethod:t,formAction:r,formEncType:n,text:s,formData:h,json:d}=e;if(!(!t||!r||!n)){if(s!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:s};if(h!=null)return{formMethod:t,formAction:r,formEncType:n,formData:h,json:void 0,text:void 0};if(d!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:d,text:void 0}}}function B_(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function wF(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Yf(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function SF(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function vl(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function EF(e,t){try{let r=e.sessionStorage.getItem(P8);if(r){let n=JSON.parse(r);for(let[s,h]of Object.entries(n||{}))h&&Array.isArray(h)&&t.set(s,new Set(h||[]))}}catch{}}function AF(e,t){if(t.size>0){let r={};for(let[n,s]of t)r[n]=[...s];try{e.sessionStorage.setItem(P8,JSON.stringify(r))}catch(n){od(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function my(){return my=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},my.apply(this,arguments)}const i1=$.createContext(null),k8=$.createContext(null),o1=$.createContext(null),Cw=$.createContext(null),xd=$.createContext({outlet:null,matches:[],isDataRoute:!1}),L8=$.createContext(null);function a1(){return $.useContext(Cw)!=null}function Pw(){return a1()||hr(!1),$.useContext(Cw).location}function D8(e){$.useContext(o1).static||$.useLayoutEffect(e)}function O8(){let{isDataRoute:e}=$.useContext(xd);return e?FF():CF()}function CF(){a1()||hr(!1);let e=$.useContext(i1),{basename:t,future:r,navigator:n}=$.useContext(o1),{matches:s}=$.useContext(xd),{pathname:h}=Pw(),d=JSON.stringify(E8(s,r.v7_relativeSplatPath)),c=$.useRef(!1);return D8(()=>{c.current=!0}),$.useCallback(function(E,I){if(I===void 0&&(I={}),!c.current)return;if(typeof E=="number"){n.go(E);return}let P=A8(E,JSON.parse(d),h,I.relative==="path");e==null&&t!=="/"&&(P.pathname=P.pathname==="/"?t:zl([t,P.pathname])),(I.replace?n.replace:n.push)(P,I.state,I)},[t,n,d,h,e])}function PF(e,t,r,n){a1()||hr(!1);let{navigator:s}=$.useContext(o1),{matches:h}=$.useContext(xd),d=h[h.length-1],c=d?d.params:{};d&&d.pathname;let b=d?d.pathnameBase:"/";d&&d.route;let E=Pw(),I;I=E;let P=I.pathname||"/",T=P;if(b!=="/"){let V=b.replace(/^\//,"").split("/");T="/"+P.replace(/^\//,"").split("/").slice(V.length).join("/")}let O=Oh(e,{pathname:T});return kF(O&&O.map(V=>Object.assign({},V,{params:Object.assign({},c,V.params),pathname:zl([b,s.encodeLocation?s.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?b:zl([b,s.encodeLocation?s.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),h,r,n)}function TF(){let e=zF(),t=Sw(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),r?$.createElement("pre",{style:s},r):null,null)}const IF=$.createElement(TF,null);class MF extends $.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?$.createElement(xd.Provider,{value:this.props.routeContext},$.createElement(L8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RF(e){let{routeContext:t,match:r,children:n}=e,s=$.useContext(i1);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),$.createElement(xd.Provider,{value:t},n)}function kF(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var h;if((h=r)!=null&&h.errors)e=r.matches;else return null}let d=e,c=(s=r)==null?void 0:s.errors;if(c!=null){let I=d.findIndex(P=>P.route.id&&(c==null?void 0:c[P.route.id])!==void 0);I>=0||hr(!1),d=d.slice(0,Math.min(d.length,I+1))}let b=!1,E=-1;if(r&&n&&n.v7_partialHydration)for(let I=0;I<d.length;I++){let P=d[I];if((P.route.HydrateFallback||P.route.hydrateFallbackElement)&&(E=I),P.route.id){let{loaderData:T,errors:O}=r,j=P.route.loader&&T[P.route.id]===void 0&&(!O||O[P.route.id]===void 0);if(P.route.lazy||j){b=!0,E>=0?d=d.slice(0,E+1):d=[d[0]];break}}}return d.reduceRight((I,P,T)=>{let O,j=!1,V=null,re=null;r&&(O=c&&P.route.id?c[P.route.id]:void 0,V=P.route.errorElement||IF,b&&(E<0&&T===0?(BF("route-fallback"),j=!0,re=null):E===T&&(j=!0,re=P.route.hydrateFallbackElement||null)));let W=t.concat(d.slice(0,T+1)),Z=()=>{let K;return O?K=V:j?K=re:P.route.Component?K=$.createElement(P.route.Component,null):P.route.element?K=P.route.element:K=I,$.createElement(RF,{match:P,routeContext:{outlet:I,matches:W,isDataRoute:r!=null},children:K})};return r&&(P.route.ErrorBoundary||P.route.errorElement||T===0)?$.createElement(MF,{location:r.location,revalidation:r.revalidation,component:V,error:O,children:Z(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):Z()},null)}var z8=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(z8||{}),gy=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(gy||{});function LF(e){let t=$.useContext(i1);return t||hr(!1),t}function DF(e){let t=$.useContext(k8);return t||hr(!1),t}function OF(e){let t=$.useContext(xd);return t||hr(!1),t}function F8(e){let t=OF(),r=t.matches[t.matches.length-1];return r.route.id||hr(!1),r.route.id}function zF(){var e;let t=$.useContext(L8),r=DF(gy.UseRouteError),n=F8(gy.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function FF(){let{router:e}=LF(z8.UseNavigateStable),t=F8(gy.UseNavigateStable),r=$.useRef(!1);return D8(()=>{r.current=!0}),$.useCallback(function(s,h){h===void 0&&(h={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,my({fromRouteId:t},h)))},[e,t])}const iA={};function BF(e,t,r){iA[e]||(iA[e]=!0)}function NF(e){let{basename:t="/",children:r=null,location:n,navigationType:s=In.Pop,navigator:h,static:d=!1,future:c}=e;a1()&&hr(!1);let b=t.replace(/^\/*/,"/"),E=$.useMemo(()=>({basename:b,navigator:h,static:d,future:my({v7_relativeSplatPath:!1},c)}),[b,c,h,d]);typeof n=="string"&&(n=ql(n));let{pathname:I="/",search:P="",hash:T="",state:O=null,key:j="default"}=n,V=$.useMemo(()=>{let re=ym(I,b);return re==null?null:{location:{pathname:re,search:P,hash:T,state:O,key:j},navigationType:s}},[b,I,P,T,O,j,s]);return V==null?null:$.createElement(o1.Provider,{value:E},$.createElement(Cw.Provider,{children:r,value:V}))}new Promise(()=>{});function jF(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:$.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:$.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:$.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yy(){return yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yy.apply(this,arguments)}const $F="6";try{window.__reactRouterVersion=$F}catch{}function VF(e,t){return lF({basename:void 0,future:yy({},void 0,{v7_prependBasename:!0}),history:Rz({window:void 0}),hydrationData:UF(),routes:e,mapRouteProperties:jF,unstable_dataStrategy:void 0,window:void 0}).initialize()}function UF(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=yy({},t,{errors:ZF(t.errors)})),t}function ZF(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,s]of t)if(s&&s.__type==="RouteErrorResponse")r[n]=new ww(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let h=window[s.__subType];if(typeof h=="function")try{let d=new h(s.message);d.stack="",r[n]=d}catch{}}if(r[n]==null){let h=new Error(s.message);h.stack="",r[n]=h}}else r[n]=s;return r}const HF=$.createContext({isTransitioning:!1}),WF=$.createContext(new Map),GF="startTransition",oA=R2[GF],qF="flushSync",aA=Mz[qF];function KF(e){oA?oA(e):e()}function Jf(e){aA?aA(e):e()}class XF{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function YF(e){let{fallbackElement:t,router:r,future:n}=e,[s,h]=$.useState(r.state),[d,c]=$.useState(),[b,E]=$.useState({isTransitioning:!1}),[I,P]=$.useState(),[T,O]=$.useState(),[j,V]=$.useState(),re=$.useRef(new Map),{v7_startTransition:W}=n||{},Z=$.useCallback(J=>{W?KF(J):J()},[W]),K=$.useCallback((J,we)=>{let{deletedFetchers:Re,unstable_flushSync:De,unstable_viewTransitionOpts:Oe}=we;Re.forEach(qe=>re.current.delete(qe)),J.fetchers.forEach((qe,Ze)=>{qe.data!==void 0&&re.current.set(Ze,qe.data)});let Qe=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!Oe||Qe){De?Jf(()=>h(J)):Z(()=>h(J));return}if(De){Jf(()=>{T&&(I&&I.resolve(),T.skipTransition()),E({isTransitioning:!0,flushSync:!0,currentLocation:Oe.currentLocation,nextLocation:Oe.nextLocation})});let qe=r.window.document.startViewTransition(()=>{Jf(()=>h(J))});qe.finished.finally(()=>{Jf(()=>{P(void 0),O(void 0),c(void 0),E({isTransitioning:!1})})}),Jf(()=>O(qe));return}T?(I&&I.resolve(),T.skipTransition(),V({state:J,currentLocation:Oe.currentLocation,nextLocation:Oe.nextLocation})):(c(J),E({isTransitioning:!0,flushSync:!1,currentLocation:Oe.currentLocation,nextLocation:Oe.nextLocation}))},[r.window,T,I,re,Z]);$.useLayoutEffect(()=>r.subscribe(K),[r,K]),$.useEffect(()=>{b.isTransitioning&&!b.flushSync&&P(new XF)},[b]),$.useEffect(()=>{if(I&&d&&r.window){let J=d,we=I.promise,Re=r.window.document.startViewTransition(async()=>{Z(()=>h(J)),await we});Re.finished.finally(()=>{P(void 0),O(void 0),c(void 0),E({isTransitioning:!1})}),O(Re)}},[Z,d,I,r.window]),$.useEffect(()=>{I&&d&&s.location.key===d.location.key&&I.resolve()},[I,T,s.location,d]),$.useEffect(()=>{!b.isTransitioning&&j&&(c(j.state),E({isTransitioning:!0,flushSync:!1,currentLocation:j.currentLocation,nextLocation:j.nextLocation}),V(void 0))},[b.isTransitioning,j]),$.useEffect(()=>{},[]);let ie=$.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:J=>r.navigate(J),push:(J,we,Re)=>r.navigate(J,{state:we,preventScrollReset:Re==null?void 0:Re.preventScrollReset}),replace:(J,we,Re)=>r.navigate(J,{replace:!0,state:we,preventScrollReset:Re==null?void 0:Re.preventScrollReset})}),[r]),de=r.basename||"/",ae=$.useMemo(()=>({router:r,navigator:ie,static:!1,basename:de}),[r,ie,de]);return $.createElement($.Fragment,null,$.createElement(i1.Provider,{value:ae},$.createElement(k8.Provider,{value:s},$.createElement(WF.Provider,{value:re.current},$.createElement(HF.Provider,{value:b},$.createElement(NF,{basename:de,location:s.location,navigationType:s.historyAction,navigator:ie,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},s.initialized||r.future.v7_partialHydration?$.createElement(JF,{routes:r.routes,future:r.future,state:s}):t))))),null)}function JF(e){let{routes:t,future:r,state:n}=e;return PF(t,void 0,n,r)}var sA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(sA||(sA={}));var lA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lA||(lA={}));var B8={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.3.2/LICENSE.txt
 */(function(e,t){(function(r,n){e.exports=n()})(iD,function(){var r={},n={};function s(d,c,b){if(n[d]=b,d==="index"){var E="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",I={};return n.shared(I),n.index(r,I),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),r}}s("shared",["exports"],function(d){function c(a,i,l,f){return new(l||(l=Promise))(function(m,v){function x(R){try{A(f.next(R))}catch(L){v(L)}}function w(R){try{A(f.throw(R))}catch(L){v(L)}}function A(R){var L;R.done?m(R.value):(L=R.value,L instanceof l?L:new l(function(z){z(L)})).then(x,w)}A((f=f.apply(a,i||[])).next())})}function b(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var E=I;function I(a,i){this.x=a,this.y=i}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,i){return this.clone()._rotateAround(a,i)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var i=a.x-this.x,l=a.y-this.y;return i*i+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,i){return Math.atan2(this.x*i-this.y*a,this.x*a+this.y*i)},_matMult:function(a){var i=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=i,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var i=Math.cos(a),l=Math.sin(a),f=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=f,this},_rotateAround:function(a,i){var l=Math.cos(a),f=Math.sin(a),m=i.y+f*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-f*(this.y-i.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(a){return a instanceof I?a:Array.isArray(a)?new I(a[0],a[1]):a};var P=b(E),T=O;function O(a,i,l,f){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(f-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=i,this.p2x=l,this.p2y=f}O.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,i){if(i===void 0&&(i=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,f=0;f<8;f++){var m=this.sampleCurveX(l)-a;if(Math.abs(m)<i)return l;var v=this.sampleCurveDerivativeX(l);if(Math.abs(v)<1e-6)break;l-=m/v}var x=0,w=1;for(l=a,f=0;f<20&&(m=this.sampleCurveX(l),!(Math.abs(m-a)<i));f++)a>m?x=l:w=l,l=.5*(w-x)+x;return l},solve:function(a,i){return this.sampleCurveY(this.solveCurveX(a,i))}};var j=b(T);let V,re;function W(){return V==null&&(V=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),V}function Z(){if(re==null&&(re=!1,W())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let f=0;f<5*5;f++){const m=4*f;i.fillStyle=`rgb(${m},${m+1},${m+2})`,i.fillRect(f%5,Math.floor(f/5),1,1)}const l=i.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&l[f]!==f){re=!0;break}}}return re||!1}function K(a,i,l,f){const m=new j(a,i,l,f);return v=>m.solve(v)}const ie=K(.25,.1,.25,1);function de(a,i,l){return Math.min(l,Math.max(i,a))}function ae(a,i,l){const f=l-i,m=((a-i)%f+f)%f+i;return m===i?l:m}function J(a,...i){for(const l of i)for(const f in l)a[f]=l[f];return a}let we=1;function Re(a,i,l){const f={};for(const m in a)f[m]=i.call(this,a[m],m,a);return f}function De(a,i,l){const f={};for(const m in a)i.call(this,a[m],m,a)&&(f[m]=a[m]);return f}function Oe(a){return Array.isArray(a)?a.map(Oe):typeof a=="object"&&a?Re(a,Oe):a}const Qe={};function qe(a){Qe[a]||(typeof console<"u"&&console.warn(a),Qe[a]=!0)}function Ze(a,i,l){return(l.y-a.y)*(i.x-a.x)>(i.y-a.y)*(l.x-a.x)}function Fe(a){return typeof WorkerGlobalScope<"u"&&a!==void 0&&a instanceof WorkerGlobalScope}let Ve=null;function He(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Be(a,i,l,f,m){return c(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(a,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),A=new Uint8ClampedArray(f*m*4);if(yield v.copyTo(A,function(R,L,z,N,G){const Y=4*Math.max(-L,0),ne=(Math.max(0,z)-z)*N*4+Y,ce=4*N,ye=Math.max(0,L),Ce=Math.max(0,z);return{rect:{x:ye,y:Ce,width:Math.min(R.width,L+N)-ye,height:Math.min(R.height,z+G)-Ce},layout:[{offset:ne,stride:ce}]}}(a,i,l,f,m)),w)for(let R=0;R<A.length;R+=4){const L=A[R];A[R]=A[R+2],A[R+2]=L}return A}finally{v.close()}})}let tt,ot;const St="AbortError";function qt(){return new Error(St)}const Tt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function kt(a){return Tt.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]}const Lt="global-dispatcher";class Yt extends Error{constructor(i,l,f,m){super(`AJAXError: ${l} (${i}): ${f}`),this.status=i,this.statusText=l,this.url=f,this.body=m}}const or=()=>Fe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,zr=function(a,i){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){const f=kt(a.url);if(f)return f(a,i);if(Fe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,targetMapId:Lt},i)}if(!(/^file:/.test(l=a.url)||/^file:/.test(or())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(f,m){return c(this,void 0,void 0,function*(){const v=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:or(),signal:m.signal});f.type==="json"&&v.headers.set("Accept","application/json");const x=yield fetch(v);if(!x.ok){const R=yield x.blob();throw new Yt(x.status,x.statusText,f.url,R)}let w;w=f.type==="arrayBuffer"||f.type==="image"?x.arrayBuffer():f.type==="json"?x.json():x.text();const A=yield w;if(m.signal.aborted)throw qt();return{data:A,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(a,i);if(Fe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,mustQueue:!0,targetMapId:Lt},i)}var l;return function(f,m){return new Promise((v,x)=>{const w=new XMLHttpRequest;w.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(w.responseType="arraybuffer");for(const A in f.headers)w.setRequestHeader(A,f.headers[A]);f.type==="json"&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials=f.credentials==="include",w.onerror=()=>{x(new Error(w.statusText))},w.onload=()=>{if(!m.signal.aborted)if((w.status>=200&&w.status<300||w.status===0)&&w.response!==null){let A=w.response;if(f.type==="json")try{A=JSON.parse(w.response)}catch(R){return void x(R)}v({data:A,cacheControl:w.getResponseHeader("Cache-Control"),expires:w.getResponseHeader("Expires")})}else{const A=new Blob([w.response],{type:w.getResponseHeader("Content-Type")});x(new Yt(w.status,w.statusText,f.url,A))}},m.signal.addEventListener("abort",()=>{w.abort(),x(qt())}),w.send(f.body)})}(a,i)};function Fr(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const i=new URL(a),l=window.location;return i.protocol===l.protocol&&i.host===l.host}function ti(a,i,l){l[a]&&l[a].indexOf(i)!==-1||(l[a]=l[a]||[],l[a].push(i))}function ar(a,i,l){if(l&&l[a]){const f=l[a].indexOf(i);f!==-1&&l[a].splice(f,1)}}class Jr{constructor(i,l={}){J(this,l),this.type=i}}class Wt extends Jr{constructor(i,l={}){super("error",J({error:i},l))}}class ri{on(i,l){return this._listeners=this._listeners||{},ti(i,l,this._listeners),this}off(i,l){return ar(i,l,this._listeners),ar(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},ti(i,l,this._oneTimeListeners),this):new Promise(f=>this.once(i,f))}fire(i,l){typeof i=="string"&&(i=new Jr(i,l||{}));const f=i.type;if(this.listens(f)){i.target=this;const m=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const w of m)w.call(this,i);const v=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const w of v)ar(f,w,this._oneTimeListeners),w.call(this,i);const x=this._eventedParent;x&&(J(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof Wt&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var Le={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Sn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Rn(a,i){const l={};for(const f in a)f!=="ref"&&(l[f]=a[f]);return Sn.forEach(f=>{f in i&&(l[f]=i[f])}),l}function nr(a,i){if(Array.isArray(a)){if(!Array.isArray(i)||a.length!==i.length)return!1;for(let l=0;l<a.length;l++)if(!nr(a[l],i[l]))return!1;return!0}if(typeof a=="object"&&a!==null&&i!==null){if(typeof i!="object"||Object.keys(a).length!==Object.keys(i).length)return!1;for(const l in a)if(!nr(a[l],i[l]))return!1;return!0}return a===i}function dr(a,i){a.push(i)}function kn(a,i,l){dr(l,{command:"addSource",args:[a,i[a]]})}function $t(a,i,l){dr(i,{command:"removeSource",args:[a]}),l[a]=!0}function Vt(a,i,l,f){$t(a,l,f),kn(a,i,l)}function Ii(a,i,l){let f;for(f in a[l])if(Object.prototype.hasOwnProperty.call(a[l],f)&&f!=="data"&&!nr(a[l][f],i[l][f]))return!1;for(f in i[l])if(Object.prototype.hasOwnProperty.call(i[l],f)&&f!=="data"&&!nr(a[l][f],i[l][f]))return!1;return!0}function ur(a,i,l,f,m,v){a=a||{},i=i||{};for(const x in a)Object.prototype.hasOwnProperty.call(a,x)&&(nr(a[x],i[x])||l.push({command:v,args:[f,x,i[x],m]}));for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&!Object.prototype.hasOwnProperty.call(a,x)&&(nr(a[x],i[x])||l.push({command:v,args:[f,x,i[x],m]}))}function En(a){return a.id}function Ui(a,i){return a[i.id]=i,a}class Ye{constructor(i,l,f,m){this.message=(i?`${i}: `:"")+f,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function gn(a,...i){for(const l of i)for(const f in l)a[f]=l[f];return a}class Nn extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}class ni{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[f,m]of l)this.bindings[f]=m}concat(i){return new ni(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Ro={kind:"null"},Xe={kind:"number"},Ut={kind:"string"},Bt={kind:"boolean"},An={kind:"color"},cn={kind:"object"},jt={kind:"value"},Mi={kind:"collator"},ro={kind:"formatted"},Qr={kind:"padding"},he={kind:"resolvedImage"},U={kind:"variableAnchorOffsetCollection"};function q(a,i){return{kind:"array",itemType:a,N:i}}function D(a){if(a.kind==="array"){const i=D(a.itemType);return typeof a.N=="number"?`array<${i}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${i}>`}return a.kind}const H=[Ro,Xe,Ut,Bt,An,ro,cn,q(jt),Qr,he,U];function ee(a,i){if(i.kind==="error")return null;if(a.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!ee(a.itemType,i.itemType))&&(typeof a.N!="number"||a.N===i.N))return null}else{if(a.kind===i.kind)return null;if(a.kind==="value"){for(const l of H)if(!ee(l,i))return null}}return`Expected ${D(a)} but found ${D(i)} instead.`}function se(a,i){return i.some(l=>l.kind===a.kind)}function ge(a,i){return i.some(l=>l==="null"?a===null:l==="array"?Array.isArray(a):l==="object"?a&&!Array.isArray(a)&&typeof a=="object":l===typeof a)}function fe(a,i){return a.kind==="array"&&i.kind==="array"?a.itemType.kind===i.itemType.kind&&typeof a.N=="number":a.kind===i.kind}const _e=.96422,Pe=.82521,Me=4/29,Te=6/29,dt=3*Te*Te,ct=Te*Te*Te,it=Math.PI/180,mt=180/Math.PI;function Mt(a){return(a%=360)<0&&(a+=360),a}function sr([a,i,l,f]){let m,v;const x=Cr((.2225045*(a=lr(a))+.7168786*(i=lr(i))+.0606169*(l=lr(l)))/1);a===i&&i===l?m=v=x:(m=Cr((.4360747*a+.3850649*i+.1430804*l)/_e),v=Cr((.0139322*a+.0971045*i+.7141733*l)/Pe));const w=116*x-16;return[w<0?0:w,500*(m-x),200*(x-v),f]}function lr(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Cr(a){return a>ct?Math.pow(a,1/3):a/dt+Me}function zt([a,i,l,f]){let m=(a+16)/116,v=isNaN(i)?m:m+i/500,x=isNaN(l)?m:m-l/200;return m=1*br(m),v=_e*br(v),x=Pe*br(x),[yr(3.1338561*v-1.6168667*m-.4906146*x),yr(-.9787684*v+1.9161415*m+.033454*x),yr(.0719453*v-.2289914*m+1.4052427*x),f]}function yr(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function br(a){return a>Te?a*a*a:dt*(a-Me)}function yn(a){return parseInt(a.padEnd(2,a),16)/255}function Cn(a,i){return Br(i?a/100:a,0,1)}function Br(a,i,l){return Math.min(Math.max(i,a),l)}function er(a){return!a.some(Number.isNaN)}const Ln={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Kt{constructor(i,l,f,m=1,v=!0){this.r=i,this.g=l,this.b=f,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[i,l,f,m]))}static parse(i){if(i instanceof Kt)return i;if(typeof i!="string")return;const l=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Ln[f];if(m){const[x,w,A]=m;return[x/255,w/255,A/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const x=f.length<6?1:2;let w=1;return[yn(f.slice(w,w+=x)),yn(f.slice(w,w+=x)),yn(f.slice(w,w+=x)),yn(f.slice(w,w+x)||"ff")]}if(f.startsWith("rgb")){const x=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,A,R,L,z,N,G,Y,ne,ce,ye,Ce]=x,xe=[L||" ",G||" ",ce].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const Ae=[R,N,ne].join(""),ze=Ae==="%%%"?100:Ae===""?255:0;if(ze){const je=[Br(+A/ze,0,1),Br(+z/ze,0,1),Br(+Y/ze,0,1),ye?Cn(+ye,Ce):1];if(er(je))return je}}return}}const v=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,w,A,R,L,z,N,G,Y]=v,ne=[A||" ",L||" ",N].join("");if(ne==="  "||ne==="  /"||ne===",,"||ne===",,,"){const ce=[+w,Br(+R,0,100),Br(+z,0,100),G?Cn(+G,Y):1];if(er(ce))return function([ye,Ce,xe,Ae]){function ze(je){const ht=(je+ye/30)%12,wt=Ce*Math.min(xe,1-xe);return xe-wt*Math.max(-1,Math.min(ht-3,9-ht,1))}return ye=Mt(ye),Ce/=100,xe/=100,[ze(0),ze(8),ze(4),Ae]}(ce)}}}(i);return l?new Kt(...l,!1):void 0}get rgb(){const{r:i,g:l,b:f,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[i/v,l/v,f/v,m])}get hcl(){return this.overwriteGetter("hcl",function(i){const[l,f,m,v]=sr(i),x=Math.sqrt(f*f+m*m);return[Math.round(1e4*x)?Mt(Math.atan2(m,f)*mt):NaN,x,l,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",sr(this.rgb))}overwriteGetter(i,l){return Object.defineProperty(this,i,{value:l}),l}toString(){const[i,l,f,m]=this.rgb;return`rgba(${[i,l,f].map(v=>Math.round(255*v)).join(",")},${m})`}}Kt.black=new Kt(0,0,0,1),Kt.white=new Kt(1,1,1,1),Kt.transparent=new Kt(0,0,0,0),Kt.red=new Kt(1,0,0,1);class en{constructor(i,l,f){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ia{constructor(i,l,f,m,v){this.text=i,this.image=l,this.scale=f,this.fontStack=m,this.textColor=v}}class jn{constructor(i){this.sections=i}static fromString(i){return new jn([new ia(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof jn?i:jn.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class $n{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof $n)return i;if(typeof i=="number")return new $n([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const l of i)if(typeof l!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new $n(i)}}toString(){return JSON.stringify(this.values)}}const tc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class gi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof gi)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let l=0;l<i.length;l+=2){const f=i[l],m=i[l+1];if(typeof f!="string"||!tc.has(f)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new gi(i)}}toString(){return JSON.stringify(this.values)}}class Zi{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Zi({name:i,available:!1}):null}}function Dm(a,i,l,f){return typeof a=="number"&&a>=0&&a<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[a,i,l,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[a,i,l,f]:[a,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function oa(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Kt||a instanceof en||a instanceof jn||a instanceof $n||a instanceof gi||a instanceof Zi)return!0;if(Array.isArray(a)){for(const i of a)if(!oa(i))return!1;return!0}if(typeof a=="object"){for(const i in a)if(!oa(a[i]))return!1;return!0}return!1}function un(a){if(a===null)return Ro;if(typeof a=="string")return Ut;if(typeof a=="boolean")return Bt;if(typeof a=="number")return Xe;if(a instanceof Kt)return An;if(a instanceof en)return Mi;if(a instanceof jn)return ro;if(a instanceof $n)return Qr;if(a instanceof gi)return U;if(a instanceof Zi)return he;if(Array.isArray(a)){const i=a.length;let l;for(const f of a){const m=un(f);if(l){if(l===m)continue;l=jt;break}l=m}return q(l||jt,i)}return cn}function rc(a){const i=typeof a;return a===null?"":i==="string"||i==="number"||i==="boolean"?String(a):a instanceof Kt||a instanceof jn||a instanceof $n||a instanceof gi||a instanceof Zi?a.toString():JSON.stringify(a)}class os{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!oa(i[1]))return l.error("invalid value");const f=i[1];let m=un(f);const v=l.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new os(m,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Gr{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const as={string:Ut,number:Xe,boolean:Bt,object:cn};class no{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let f,m=1;const v=i[0];if(v==="array"){let w,A;if(i.length>2){const R=i[1];if(typeof R!="string"||!(R in as)||R==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);w=as[R],m++}else w=jt;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);A=i[2],m++}f=q(w,A)}else{if(!as[v])throw new Error(`Types doesn't contain name = ${v}`);f=as[v]}const x=[];for(;m<i.length;m++){const w=l.parse(i[m],m,jt);if(!w)return null;x.push(w)}return new no(f,x)}evaluate(i){for(let l=0;l<this.args.length;l++){const f=this.args[l].evaluate(i);if(!ee(this.type,un(f)))return f;if(l===this.args.length-1)throw new Gr(`Expected value to be of type ${D(this.type)}, but found ${D(un(f))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const pu={"to-boolean":Bt,"to-color":An,"to-number":Xe,"to-string":Ut};class ko{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const f=i[0];if(!pu[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&i.length!==2)return l.error("Expected one argument.");const m=pu[f],v=[];for(let x=1;x<i.length;x++){const w=l.parse(i[x],x,jt);if(!w)return null;v.push(w)}return new ko(m,v)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let l,f;for(const m of this.args){if(l=m.evaluate(i),f=null,l instanceof Kt)return l;if(typeof l=="string"){const v=i.parseColor(l);if(v)return v}else if(Array.isArray(l)&&(f=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Dm(l[0],l[1],l[2],l[3]),!f))return new Kt(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Gr(f||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const f of this.args){l=f.evaluate(i);const m=$n.parse(l);if(m)return m}throw new Gr(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const f of this.args){l=f.evaluate(i);const m=gi.parse(l);if(m)return m}throw new Gr(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const f of this.args){if(l=f.evaluate(i),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new Gr(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return jn.fromString(rc(this.args[0].evaluate(i)));case"resolvedImage":return Zi.fromString(rc(this.args[0].evaluate(i)));default:return rc(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Dd=["Unknown","Point","LineString","Polygon"];class Ws{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Dd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let l=this._parseColorCache[i];return l||(l=this._parseColorCache[i]=Kt.parse(i)),l}}class mr{constructor(i,l,f=[],m,v=new ni,x=[]){this.registry=i,this.path=f,this.key=f.map(w=>`[${w}]`).join(""),this.scope=v,this.errors=x,this.expectedType=m,this._isConstant=l}parse(i,l,f,m,v={}){return l?this.concat(l,f,m)._parse(i,v):this._parse(i,v)}_parse(i,l){function f(m,v,x){return x==="assert"?new no(v,[m]):x==="coerce"?new ko(v,[m]):m}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=i[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let x=v.parse(i,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,A=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||A.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string")if(w.kind!=="padding"||A.kind!=="value"&&A.kind!=="number"&&A.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||A.kind!=="value"&&A.kind!=="array"){if(this.checkSubtype(w,A))return null}else x=f(x,w,l.typeAnnotation||"coerce");else x=f(x,w,l.typeAnnotation||"coerce");else x=f(x,w,l.typeAnnotation||"coerce");else x=f(x,w,l.typeAnnotation||"assert")}if(!(x instanceof os)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new Ws;try{x=new os(x.type,x.evaluate(w))}catch(A){return this.error(A.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,f){const m=typeof i=="number"?this.path.concat(i):this.path,v=f?this.scope.concat(f):this.scope;return new mr(this.registry,this._isConstant,m,l||null,v,this.errors)}error(i,...l){const f=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new Nn(f,i))}checkSubtype(i,l){const f=ee(i,l);return f&&this.error(f),f}}class mu{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const f=[];for(let v=1;v<i.length-1;v+=2){const x=i[v];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",v);const w=l.parse(i[v+1],v+1);if(!w)return null;f.push([x,w])}const m=l.parse(i[i.length-1],i.length-1,l.expectedType,f);return m?new mu(f,m):null}outputDefined(){return this.result.outputDefined()}}class Gs{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const f=i[1];return l.scope.has(f)?new Gs(f,l.scope.get(f)):l.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Od{constructor(i,l,f){this.type=i,this.index=l,this.input=f}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,Xe),m=l.parse(i[2],2,q(l.expectedType||jt));return f&&m?new Od(m.type.itemType,f,m):null}evaluate(i){const l=this.index.evaluate(i),f=this.input.evaluate(i);if(l<0)throw new Gr(`Array index out of bounds: ${l} < 0.`);if(l>=f.length)throw new Gr(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l!==Math.floor(l))throw new Gr(`Array index must be an integer, but found ${l} instead.`);return f[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class gu{constructor(i,l){this.type=Bt,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,jt),m=l.parse(i[2],2,jt);return f&&m?se(f.type,[Bt,Ut,Xe,Ro,jt])?new gu(f,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${D(f.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!f)return!1;if(!ge(l,["boolean","string","number","null"]))throw new Gr(`Expected first argument to be of type boolean, string, number or null, but found ${D(un(l))} instead.`);if(!ge(f,["string","array"]))throw new Gr(`Expected second argument to be of type array or string, but found ${D(un(f))} instead.`);return f.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class nc{constructor(i,l,f){this.type=Xe,this.needle=i,this.haystack=l,this.fromIndex=f}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,jt),m=l.parse(i[2],2,jt);if(!f||!m)return null;if(!se(f.type,[Bt,Ut,Xe,Ro,jt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${D(f.type)} instead`);if(i.length===4){const v=l.parse(i[3],3,Xe);return v?new nc(f,m,v):null}return new nc(f,m)}evaluate(i){const l=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!ge(l,["boolean","string","number","null"]))throw new Gr(`Expected first argument to be of type boolean, string, number or null, but found ${D(un(l))} instead.`);if(!ge(f,["string","array"]))throw new Gr(`Expected second argument to be of type array or string, but found ${D(un(f))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(i);return f.indexOf(l,m)}return f.indexOf(l)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class zd{constructor(i,l,f,m,v,x){this.inputType=i,this.type=l,this.input=f,this.cases=m,this.outputs=v,this.otherwise=x}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let f,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const v={},x=[];for(let R=2;R<i.length-1;R+=2){let L=i[R];const z=i[R+1];Array.isArray(L)||(L=[L]);const N=l.concat(R);if(L.length===0)return N.error("Expected at least one branch label.");for(const Y of L){if(typeof Y!="number"&&typeof Y!="string")return N.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return N.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Y=="number"&&Math.floor(Y)!==Y)return N.error("Numeric branch labels must be integer values.");if(f){if(N.checkSubtype(f,un(Y)))return null}else f=un(Y);if(v[String(Y)]!==void 0)return N.error("Branch labels must be unique.");v[String(Y)]=x.length}const G=l.parse(z,R,m);if(!G)return null;m=m||G.type,x.push(G)}const w=l.parse(i[1],1,jt);if(!w)return null;const A=l.parse(i[i.length-1],i.length-1,m);return A?w.type.kind!=="value"&&l.concat(1).checkSubtype(f,w.type)?null:new zd(f,m,w,v,x,A):null}evaluate(i){const l=this.input.evaluate(i);return(un(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class yu{constructor(i,l,f){this.type=i,this.branches=l,this.otherwise=f}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const m=[];for(let x=1;x<i.length-1;x+=2){const w=l.parse(i[x],x,Bt);if(!w)return null;const A=l.parse(i[x+1],x+1,f);if(!A)return null;m.push([w,A]),f=f||A.type}const v=l.parse(i[i.length-1],i.length-1,f);if(!v)return null;if(!f)throw new Error("Can't infer output type");return new yu(f,m,v)}evaluate(i){for(const[l,f]of this.branches)if(l.evaluate(i))return f.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,f]of this.branches)i(l),i(f);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class ic{constructor(i,l,f,m){this.type=i,this.input=l,this.beginIndex=f,this.endIndex=m}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,jt),m=l.parse(i[2],2,Xe);if(!f||!m)return null;if(!se(f.type,[q(jt),Ut,jt]))return l.error(`Expected first argument to be of type array or string, but found ${D(f.type)} instead`);if(i.length===4){const v=l.parse(i[3],3,Xe);return v?new ic(f.type,f,m,v):null}return new ic(f.type,f,m)}evaluate(i){const l=this.input.evaluate(i),f=this.beginIndex.evaluate(i);if(!ge(l,["string","array"]))throw new Gr(`Expected first argument to be of type array or string, but found ${D(un(l))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(i);return l.slice(f,m)}return l.slice(f)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function vu(a,i){const l=a.length-1;let f,m,v=0,x=l,w=0;for(;v<=x;)if(w=Math.floor((v+x)/2),f=a[w],m=a[w+1],f<=i){if(w===l||i<m)return w;v=w+1}else{if(!(f>i))throw new Gr("Input is not a number.");x=w-1}return 0}class oc{constructor(i,l,f){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[m,v]of f)this.labels.push(m),this.outputs.push(v)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const f=l.parse(i[1],1,Xe);if(!f)return null;const m=[];let v=null;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);for(let x=1;x<i.length;x+=2){const w=x===1?-1/0:i[x],A=i[x+1],R=x,L=x+1;if(typeof w!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(m.length&&m[m.length-1][0]>=w)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const z=l.parse(A,L,v);if(!z)return null;v=v||z.type,m.push([w,z])}return new oc(v,f,m)}evaluate(i){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(i);const m=this.input.evaluate(i);if(m<=l[0])return f[0].evaluate(i);const v=l.length;return m>=l[v-1]?f[v-1].evaluate(i):f[vu(l,m)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function ev(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var tv=Fd;function Fd(a,i,l,f){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(f-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=i,this.p2x=l,this.p2y=f}Fd.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,i){if(i===void 0&&(i=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,f=0;f<8;f++){var m=this.sampleCurveX(l)-a;if(Math.abs(m)<i)return l;var v=this.sampleCurveDerivativeX(l);if(Math.abs(v)<1e-6)break;l-=m/v}var x=0,w=1;for(l=a,f=0;f<20&&(m=this.sampleCurveX(l),!(Math.abs(m-a)<i));f++)a>m?x=l:w=l,l=.5*(w-x)+x;return l},solve:function(a,i){return this.sampleCurveY(this.solveCurveX(a,i))}};var Om=ev(tv);function ss(a,i,l){return a+l*(i-a)}function _u(a,i,l){return a.map((f,m)=>ss(f,i[m],l))}const ii={number:ss,color:function(a,i,l,f="rgb"){switch(f){case"rgb":{const[m,v,x,w]=_u(a.rgb,i.rgb,l);return new Kt(m,v,x,w,!1)}case"hcl":{const[m,v,x,w]=a.hcl,[A,R,L,z]=i.hcl;let N,G;if(isNaN(m)||isNaN(A))isNaN(m)?isNaN(A)?N=NaN:(N=A,x!==1&&x!==0||(G=R)):(N=m,L!==1&&L!==0||(G=v));else{let Ce=A-m;A>m&&Ce>180?Ce-=360:A<m&&m-A>180&&(Ce+=360),N=m+l*Ce}const[Y,ne,ce,ye]=function([Ce,xe,Ae,ze]){return Ce=isNaN(Ce)?0:Ce*it,zt([Ae,Math.cos(Ce)*xe,Math.sin(Ce)*xe,ze])}([N,G??ss(v,R,l),ss(x,L,l),ss(w,z,l)]);return new Kt(Y,ne,ce,ye,!1)}case"lab":{const[m,v,x,w]=zt(_u(a.lab,i.lab,l));return new Kt(m,v,x,w,!1)}}},array:_u,padding:function(a,i,l){return new $n(_u(a.values,i.values,l))},variableAnchorOffsetCollection:function(a,i,l){const f=a.values,m=i.values;if(f.length!==m.length)throw new Gr(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${i.toString()}`);const v=[];for(let x=0;x<f.length;x+=2){if(f[x]!==m[x])throw new Gr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${f[x]}, to[${x}]: ${m[x]}`);v.push(f[x]);const[w,A]=f[x+1],[R,L]=m[x+1];v.push([ss(w,R,l),ss(A,L,l)])}return new gi(v)}};class Ri{constructor(i,l,f,m,v){this.type=i,this.operator=l,this.interpolation=f,this.input=m,this.labels=[],this.outputs=[];for(const[x,w]of v)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(i,l,f,m){let v=0;if(i.name==="exponential")v=Bd(l,i.base,f,m);else if(i.name==="linear")v=Bd(l,1,f,m);else if(i.name==="cubic-bezier"){const x=i.controlPoints;v=new Om(x[0],x[1],x[2],x[3]).solve(Bd(l,1,f,m))}return v}static parse(i,l){let[f,m,v,...x]=i;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const R=m[1];if(typeof R!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:R}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const R=m.slice(1);if(R.length!==4||R.some(L=>typeof L!="number"||L<0||L>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:R}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(v=l.parse(v,2,Xe),!v)return null;const w=[];let A=null;f==="interpolate-hcl"||f==="interpolate-lab"?A=An:l.expectedType&&l.expectedType.kind!=="value"&&(A=l.expectedType);for(let R=0;R<x.length;R+=2){const L=x[R],z=x[R+1],N=R+3,G=R+4;if(typeof L!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(w.length&&w[w.length-1][0]>=L)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',N);const Y=l.parse(z,G,A);if(!Y)return null;A=A||Y.type,w.push([L,Y])}return fe(A,Xe)||fe(A,An)||fe(A,Qr)||fe(A,U)||fe(A,q(Xe))?new Ri(A,f,m,v,w):l.error(`Type ${D(A)} is not interpolatable.`)}evaluate(i){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(i);const m=this.input.evaluate(i);if(m<=l[0])return f[0].evaluate(i);const v=l.length;if(m>=l[v-1])return f[v-1].evaluate(i);const x=vu(l,m),w=Ri.interpolationFactor(this.interpolation,m,l[x],l[x+1]),A=f[x].evaluate(i),R=f[x+1].evaluate(i);switch(this.operator){case"interpolate":return ii[this.type.kind](A,R,w);case"interpolate-hcl":return ii.color(A,R,w,"hcl");case"interpolate-lab":return ii.color(A,R,w,"lab")}}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Bd(a,i,l,f){const m=f-l,v=a-l;return m===0?0:i===1?v/m:(Math.pow(i,v)-1)/(Math.pow(i,m)-1)}class xu{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expectected at least one argument.");let f=null;const m=l.expectedType;m&&m.kind!=="value"&&(f=m);const v=[];for(const w of i.slice(1)){const A=l.parse(w,1+v.length,f,void 0,{typeAnnotation:"omit"});if(!A)return null;f=f||A.type,v.push(A)}if(!f)throw new Error("No output type");const x=m&&v.some(w=>ee(m,w.type));return new xu(x?jt:f,v)}evaluate(i){let l,f=null,m=0;for(const v of this.args)if(m++,f=v.evaluate(i),f&&f instanceof Zi&&!f.available&&(l||(l=f.name),f=null,m===this.args.length&&(f=l)),f!==null)break;return f}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function Nd(a,i){return a==="=="||a==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function jd(a,i,l,f){return f.compare(i,l)===0}function qs(a,i,l){const f=a!=="=="&&a!=="!=";return class N8{constructor(v,x,w){this.type=Bt,this.lhs=v,this.rhs=x,this.collator=w,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const w=v[0];let A=x.parse(v[1],1,jt);if(!A)return null;if(!Nd(w,A.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${D(A.type)}'.`);let R=x.parse(v[2],2,jt);if(!R)return null;if(!Nd(w,R.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${D(R.type)}'.`);if(A.type.kind!==R.type.kind&&A.type.kind!=="value"&&R.type.kind!=="value")return x.error(`Cannot compare types '${D(A.type)}' and '${D(R.type)}'.`);f&&(A.type.kind==="value"&&R.type.kind!=="value"?A=new no(R.type,[A]):A.type.kind!=="value"&&R.type.kind==="value"&&(R=new no(A.type,[R])));let L=null;if(v.length===4){if(A.type.kind!=="string"&&R.type.kind!=="string"&&A.type.kind!=="value"&&R.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(L=x.parse(v[3],3,Mi),!L)return null}return new N8(A,R,L)}evaluate(v){const x=this.lhs.evaluate(v),w=this.rhs.evaluate(v);if(f&&this.hasUntypedArgument){const A=un(x),R=un(w);if(A.kind!==R.kind||A.kind!=="string"&&A.kind!=="number")throw new Gr(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${A.kind}, ${R.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const A=un(x),R=un(w);if(A.kind!=="string"||R.kind!=="string")return i(v,x,w)}return this.collator?l(v,x,w,this.collator.evaluate(v)):i(v,x,w)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const rv=qs("==",function(a,i,l){return i===l},jd),zm=qs("!=",function(a,i,l){return i!==l},function(a,i,l,f){return!jd(0,i,l,f)}),Fm=qs("<",function(a,i,l){return i<l},function(a,i,l,f){return f.compare(i,l)<0}),nv=qs(">",function(a,i,l){return i>l},function(a,i,l,f){return f.compare(i,l)>0}),iv=qs("<=",function(a,i,l){return i<=l},function(a,i,l,f){return f.compare(i,l)<=0}),ov=qs(">=",function(a,i,l){return i>=l},function(a,i,l,f){return f.compare(i,l)>=0});class bu{constructor(i,l,f){this.type=Mi,this.locale=f,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const f=i[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");const m=l.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Bt);if(!m)return null;const v=l.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Bt);if(!v)return null;let x=null;return f.locale&&(x=l.parse(f.locale,1,Ut),!x)?null:new bu(m,v,x)}evaluate(i){return new en(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class $d{constructor(i,l,f,m,v){this.type=Ut,this.number=i,this.locale=l,this.currency=f,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const f=l.parse(i[1],1,Xe);if(!f)return null;const m=i[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=l.parse(m.locale,1,Ut),!v))return null;let x=null;if(m.currency&&(x=l.parse(m.currency,1,Ut),!x))return null;let w=null;if(m["min-fraction-digits"]&&(w=l.parse(m["min-fraction-digits"],1,Xe),!w))return null;let A=null;return m["max-fraction-digits"]&&(A=l.parse(m["max-fraction-digits"],1,Xe),!A)?null:new $d(f,v,x,w,A)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class wu{constructor(i){this.type=ro,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const f=i[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");const m=[];let v=!1;for(let x=1;x<=i.length-1;++x){const w=i[x];if(v&&typeof w=="object"&&!Array.isArray(w)){v=!1;let A=null;if(w["font-scale"]&&(A=l.parse(w["font-scale"],1,Xe),!A))return null;let R=null;if(w["text-font"]&&(R=l.parse(w["text-font"],1,q(Ut)),!R))return null;let L=null;if(w["text-color"]&&(L=l.parse(w["text-color"],1,An),!L))return null;const z=m[m.length-1];z.scale=A,z.font=R,z.textColor=L}else{const A=l.parse(i[x],1,jt);if(!A)return null;const R=A.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:A,scale:null,font:null,textColor:null})}}return new wu(m)}evaluate(i){return new jn(this.sections.map(l=>{const f=l.content.evaluate(i);return un(f)===he?new ia("",f,null,null,null):new ia(rc(f),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor)}outputDefined(){return!1}}class Vd{constructor(i){this.type=he,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const f=l.parse(i[1],1,Ut);return f?new Vd(f):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),f=Zi.fromString(l);return f&&i.availableImages&&(f.available=i.availableImages.indexOf(l)>-1),f}eachChild(i){i(this.input)}outputDefined(){return!1}}class ac{constructor(i){this.type=Xe,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const f=l.parse(i[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${D(f.type)} instead.`):new ac(f):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Gr(`Expected value to be of type string or array, but found ${D(un(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const ki=8192;function gr(a,i){const l=(180+a[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,i.z);return[Math.round(l*m*ki),Math.round(f*m*ki)]}function Ud(a,i){const l=Math.pow(2,i.z);return[(m=(a[0]/ki+i.x)/l,360*m-180),(f=(a[1]/ki+i.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,m}function sc(a,i){a[0]=Math.min(a[0],i[0]),a[1]=Math.min(a[1],i[1]),a[2]=Math.max(a[2],i[0]),a[3]=Math.max(a[3],i[1])}function lc(a,i){return!(a[0]<=i[0]||a[2]>=i[2]||a[1]<=i[1]||a[3]>=i[3])}function av(a,i,l){const f=a[0]-i[0],m=a[1]-i[1],v=a[0]-l[0],x=a[1]-l[1];return f*x-v*m==0&&f*v<=0&&m*x<=0}function Su(a,i,l,f){return(m=[f[0]-l[0],f[1]-l[1]])[0]*(v=[i[0]-a[0],i[1]-a[1]])[1]-m[1]*v[0]!=0&&!(!Nm(a,i,l,f)||!Nm(l,f,a,i));var m,v}function sv(a,i,l){for(const f of l)for(let m=0;m<f.length-1;++m)if(Su(a,i,f[m],f[m+1]))return!0;return!1}function Ks(a,i,l=!1){let f=!1;for(const w of i)for(let A=0;A<w.length-1;A++){if(av(a,w[A],w[A+1]))return l;(v=w[A])[1]>(m=a)[1]!=(x=w[A+1])[1]>m[1]&&m[0]<(x[0]-v[0])*(m[1]-v[1])/(x[1]-v[1])+v[0]&&(f=!f)}var m,v,x;return f}function lv(a,i){for(const l of i)if(Ks(a,l))return!0;return!1}function Bm(a,i){for(const l of a)if(!Ks(l,i))return!1;for(let l=0;l<a.length-1;++l)if(sv(a[l],a[l+1],i))return!1;return!0}function cv(a,i){for(const l of i)if(Bm(a,l))return!0;return!1}function Nm(a,i,l,f){const m=f[0]-l[0],v=f[1]-l[1],x=(a[0]-l[0])*v-m*(a[1]-l[1]),w=(i[0]-l[0])*v-m*(i[1]-l[1]);return x>0&&w<0||x<0&&w>0}function Zd(a,i,l){const f=[];for(let m=0;m<a.length;m++){const v=[];for(let x=0;x<a[m].length;x++){const w=gr(a[m][x],l);sc(i,w),v.push(w)}f.push(v)}return f}function jm(a,i,l){const f=[];for(let m=0;m<a.length;m++){const v=Zd(a[m],i,l);f.push(v)}return f}function $m(a,i,l,f){if(a[0]<l[0]||a[0]>l[2]){const m=.5*f;let v=a[0]-l[0]>m?-f:l[0]-a[0]>m?f:0;v===0&&(v=a[0]-l[2]>m?-f:l[2]-a[0]>m?f:0),a[0]+=v}sc(i,a)}function Vm(a,i,l,f){const m=Math.pow(2,f.z)*ki,v=[f.x*ki,f.y*ki],x=[];for(const w of a)for(const A of w){const R=[A.x+v[0],A.y+v[1]];$m(R,i,l,m),x.push(R)}return x}function Um(a,i,l,f){const m=Math.pow(2,f.z)*ki,v=[f.x*ki,f.y*ki],x=[];for(const A of a){const R=[];for(const L of A){const z=[L.x+v[0],L.y+v[1]];sc(i,z),R.push(z)}x.push(R)}if(i[2]-i[0]<=m/2){(w=i)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const A of x)for(const R of A)$m(R,i,l,m)}var w;return x}class ls{constructor(i,l){this.type=Bt,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(oa(i[1])){const f=i[1];if(f.type==="FeatureCollection"){const m=[];for(const v of f.features){const{type:x,coordinates:w}=v.geometry;x==="Polygon"&&m.push(w),x==="MultiPolygon"&&m.push(...w)}if(m.length)return new ls(f,{type:"MultiPolygon",coordinates:m})}else if(f.type==="Feature"){const m=f.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ls(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new ls(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,f){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(f.type==="Polygon"){const w=Zd(f.coordinates,v,x),A=Vm(l.geometry(),m,v,x);if(!lc(m,v))return!1;for(const R of A)if(!Ks(R,w))return!1}if(f.type==="MultiPolygon"){const w=jm(f.coordinates,v,x),A=Vm(l.geometry(),m,v,x);if(!lc(m,v))return!1;for(const R of A)if(!lv(R,w))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,f){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(f.type==="Polygon"){const w=Zd(f.coordinates,v,x),A=Um(l.geometry(),m,v,x);if(!lc(m,v))return!1;for(const R of A)if(!Bm(R,w))return!1}if(f.type==="MultiPolygon"){const w=jm(f.coordinates,v,x),A=Um(l.geometry(),m,v,x);if(!lc(m,v))return!1;for(const R of A)if(!cv(R,w))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Zm=class{constructor(a=[],i=uv){if(this.data=a,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:i,compare:l}=this,f=i[a];for(;a>0;){const m=a-1>>1,v=i[m];if(l(f,v)>=0)break;i[a]=v,a=m}i[a]=f}_down(a){const{data:i,compare:l}=this,f=this.length>>1,m=i[a];for(;a<f;){let v=1+(a<<1),x=i[v];const w=v+1;if(w<this.length&&l(i[w],x)<0&&(v=w,x=i[w]),l(x,m)>=0)break;i[a]=x,a=v}i[a]=m}};function uv(a,i){return a<i?-1:a>i?1:0}function hv(a,i,l,f,m){Hm(a,i,l,f||a.length-1,m||dv)}function Hm(a,i,l,f,m){for(;f>l;){if(f-l>600){var v=f-l+1,x=i-l+1,w=Math.log(v),A=.5*Math.exp(2*w/3),R=.5*Math.sqrt(w*A*(v-A)/v)*(x-v/2<0?-1:1);Hm(a,i,Math.max(l,Math.floor(i-x*A/v+R)),Math.min(f,Math.floor(i+(v-x)*A/v+R)),m)}var L=a[i],z=l,N=f;for(cc(a,l,i),m(a[f],L)>0&&cc(a,l,f);z<N;){for(cc(a,z,N),z++,N--;m(a[z],L)<0;)z++;for(;m(a[N],L)>0;)N--}m(a[l],L)===0?cc(a,l,N):cc(a,++N,f),N<=i&&(l=N+1),i<=N&&(f=N-1)}}function cc(a,i,l){var f=a[i];a[i]=a[l],a[l]=f}function dv(a,i){return a<i?-1:a>i?1:0}function Eu(a,i){if(a.length<=1)return[a];const l=[];let f,m;for(const v of a){const x=pv(v);x!==0&&(v.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(f&&l.push(f),f=[v]):f.push(v))}if(f&&l.push(f),i>1)for(let v=0;v<l.length;v++)l[v].length<=i||(hv(l[v],i,1,l[v].length-1,fv),l[v]=l[v].slice(0,i));return l}function fv(a,i){return i.area-a.area}function pv(a){let i=0;for(let l,f,m=0,v=a.length,x=v-1;m<v;x=m++)l=a[m],f=a[x],i+=(f.x-l.x)*(l.y+f.y);return i}const Wm=1/298.257223563,Gm=Wm*(2-Wm),qm=Math.PI/180;class Hd{constructor(i){const l=6378.137*qm*1e3,f=Math.cos(i*qm),m=1/(1-Gm*(1-f*f)),v=Math.sqrt(m);this.kx=l*v*f,this.ky=l*v*m*(1-Gm)}distance(i,l){const f=this.wrap(i[0]-l[0])*this.kx,m=(i[1]-l[1])*this.ky;return Math.sqrt(f*f+m*m)}pointOnLine(i,l){let f,m,v,x,w=1/0;for(let A=0;A<i.length-1;A++){let R=i[A][0],L=i[A][1],z=this.wrap(i[A+1][0]-R)*this.kx,N=(i[A+1][1]-L)*this.ky,G=0;z===0&&N===0||(G=(this.wrap(l[0]-R)*this.kx*z+(l[1]-L)*this.ky*N)/(z*z+N*N),G>1?(R=i[A+1][0],L=i[A+1][1]):G>0&&(R+=z/this.kx*G,L+=N/this.ky*G)),z=this.wrap(l[0]-R)*this.kx,N=(l[1]-L)*this.ky;const Y=z*z+N*N;Y<w&&(w=Y,f=R,m=L,v=A,x=G)}return{point:[f,m],index:v,t:Math.max(0,Math.min(1,x))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function Km(a,i){return i[0]-a[0]}function Xs(a){return a[1]-a[0]+1}function aa(a,i){return a[1]>=a[0]&&a[1]<i}function Wd(a,i){if(a[0]>a[1])return[null,null];const l=Xs(a);if(i){if(l===2)return[a,null];const m=Math.floor(l/2);return[[a[0],a[0]+m],[a[0]+m,a[1]]]}if(l===1)return[a,null];const f=Math.floor(l/2)-1;return[[a[0],a[0]+f],[a[0]+f+1,a[1]]]}function Gd(a,i){if(!aa(i,a.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let f=i[0];f<=i[1];++f)sc(l,a[f]);return l}function qd(a){const i=[1/0,1/0,-1/0,-1/0];for(const l of a)for(const f of l)sc(i,f);return i}function qr(a){return a[0]!==-1/0&&a[1]!==-1/0&&a[2]!==1/0&&a[3]!==1/0}function Kd(a,i,l){if(!qr(a)||!qr(i))return NaN;let f=0,m=0;return a[2]<i[0]&&(f=i[0]-a[2]),a[0]>i[2]&&(f=a[0]-i[2]),a[1]>i[3]&&(m=a[1]-i[3]),a[3]<i[1]&&(m=i[1]-a[3]),l.distance([0,0],[f,m])}function Xt(a,i,l){const f=l.pointOnLine(i,a);return l.distance(a,f.point)}function uc(a,i,l,f,m){const v=Math.min(Xt(a,[l,f],m),Xt(i,[l,f],m)),x=Math.min(Xt(l,[a,i],m),Xt(f,[a,i],m));return Math.min(v,x)}function Nr(a,i,l,f,m){if(!aa(i,a.length)||!aa(f,l.length))return 1/0;let v=1/0;for(let x=i[0];x<i[1];++x){const w=a[x],A=a[x+1];for(let R=f[0];R<f[1];++R){const L=l[R],z=l[R+1];if(Su(w,A,L,z))return 0;v=Math.min(v,uc(w,A,L,z,m))}}return v}function Dr(a,i,l,f,m){if(!aa(i,a.length)||!aa(f,l.length))return NaN;let v=1/0;for(let x=i[0];x<=i[1];++x)for(let w=f[0];w<=f[1];++w)if(v=Math.min(v,m.distance(a[x],l[w])),v===0)return v;return v}function Au(a,i,l){if(Ks(a,i,!0))return 0;let f=1/0;for(const m of i){const v=m[0],x=m[m.length-1];if(v!==x&&(f=Math.min(f,Xt(a,[x,v],l)),f===0))return f;const w=l.pointOnLine(m,a);if(f=Math.min(f,l.distance(a,w.point)),f===0)return f}return f}function Xm(a,i,l,f){if(!aa(i,a.length))return NaN;for(let v=i[0];v<=i[1];++v)if(Ks(a[v],l,!0))return 0;let m=1/0;for(let v=i[0];v<i[1];++v){const x=a[v],w=a[v+1];for(const A of l)for(let R=0,L=A.length,z=L-1;R<L;z=R++){const N=A[z],G=A[R];if(Su(x,w,N,G))return 0;m=Math.min(m,uc(x,w,N,G,f))}}return m}function Xd(a,i){for(const l of a)for(const f of l)if(Ks(f,i,!0))return!0;return!1}function mv(a,i,l,f=1/0){const m=qd(a),v=qd(i);if(f!==1/0&&Kd(m,v,l)>=f)return f;if(lc(m,v)){if(Xd(a,i))return 0}else if(Xd(i,a))return 0;let x=1/0;for(const w of a)for(let A=0,R=w.length,L=R-1;A<R;L=A++){const z=w[L],N=w[A];for(const G of i)for(let Y=0,ne=G.length,ce=ne-1;Y<ne;ce=Y++){const ye=G[ce],Ce=G[Y];if(Su(z,N,ye,Ce))return 0;x=Math.min(x,uc(z,N,ye,Ce,l))}}return x}function Ym(a,i,l,f,m,v){if(!v)return;const x=Kd(Gd(f,v),m,l);x<i&&a.push([x,v,[0,0]])}function Cu(a,i,l,f,m,v,x){if(!v||!x)return;const w=Kd(Gd(f,v),Gd(m,x),l);w<i&&a.push([w,v,x])}function Pu(a,i,l,f,m=1/0){let v=Math.min(f.distance(a[0],l[0][0]),m);if(v===0)return v;const x=new Zm([[0,[0,a.length-1],[0,0]]],Km),w=qd(l);for(;x.length>0;){const A=x.pop();if(A[0]>=v)continue;const R=A[1],L=i?50:100;if(Xs(R)<=L){if(!aa(R,a.length))return NaN;if(i){const z=Xm(a,R,l,f);if(isNaN(z)||z===0)return z;v=Math.min(v,z)}else for(let z=R[0];z<=R[1];++z){const N=Au(a[z],l,f);if(v=Math.min(v,N),v===0)return 0}}else{const z=Wd(R,i);Ym(x,v,f,a,w,z[0]),Ym(x,v,f,a,w,z[1])}}return v}function hc(a,i,l,f,m,v=1/0){let x=Math.min(v,m.distance(a[0],l[0]));if(x===0)return x;const w=new Zm([[0,[0,a.length-1],[0,l.length-1]]],Km);for(;w.length>0;){const A=w.pop();if(A[0]>=x)continue;const R=A[1],L=A[2],z=i?50:100,N=f?50:100;if(Xs(R)<=z&&Xs(L)<=N){if(!aa(R,a.length)&&aa(L,l.length))return NaN;let G;if(i&&f)G=Nr(a,R,l,L,m),x=Math.min(x,G);else if(i&&!f){const Y=a.slice(R[0],R[1]+1);for(let ne=L[0];ne<=L[1];++ne)if(G=Xt(l[ne],Y,m),x=Math.min(x,G),x===0)return x}else if(!i&&f){const Y=l.slice(L[0],L[1]+1);for(let ne=R[0];ne<=R[1];++ne)if(G=Xt(a[ne],Y,m),x=Math.min(x,G),x===0)return x}else G=Dr(a,R,l,L,m),x=Math.min(x,G)}else{const G=Wd(R,i),Y=Wd(L,f);Cu(w,x,m,a,l,G[0],Y[0]),Cu(w,x,m,a,l,G[0],Y[1]),Cu(w,x,m,a,l,G[1],Y[0]),Cu(w,x,m,a,l,G[1],Y[1])}}return x}function Tu(a){return a.type==="MultiPolygon"?a.coordinates.map(i=>({type:"Polygon",coordinates:i})):a.type==="MultiLineString"?a.coordinates.map(i=>({type:"LineString",coordinates:i})):a.type==="MultiPoint"?a.coordinates.map(i=>({type:"Point",coordinates:i})):[a]}class Da{constructor(i,l){this.type=Xe,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(oa(i[1])){const f=i[1];if(f.type==="FeatureCollection")return new Da(f,f.features.map(m=>Tu(m.geometry)).flat());if(f.type==="Feature")return new Da(f,Tu(f.geometry));if("type"in f&&"coordinates"in f)return new Da(f,Tu(f))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,f){const m=l.geometry(),v=m.flat().map(A=>Ud([A.x,A.y],l.canonical));if(m.length===0)return NaN;const x=new Hd(v[0][1]);let w=1/0;for(const A of f){switch(A.type){case"Point":w=Math.min(w,hc(v,!1,[A.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,hc(v,!1,A.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,Pu(v,!1,A.coordinates,x,w))}if(w===0)return w}return w}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,f){const m=l.geometry(),v=m.flat().map(A=>Ud([A.x,A.y],l.canonical));if(m.length===0)return NaN;const x=new Hd(v[0][1]);let w=1/0;for(const A of f){switch(A.type){case"Point":w=Math.min(w,hc(v,!0,[A.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,hc(v,!0,A.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,Pu(v,!0,A.coordinates,x,w))}if(w===0)return w}return w}(i,this.geometries);if(i.geometryType()==="Polygon")return function(l,f){const m=l.geometry();if(m.length===0||m[0].length===0)return NaN;const v=Eu(m,0).map(A=>A.map(R=>R.map(L=>Ud([L.x,L.y],l.canonical)))),x=new Hd(v[0][0][0][1]);let w=1/0;for(const A of f)for(const R of v){switch(A.type){case"Point":w=Math.min(w,Pu([A.coordinates],!1,R,x,w));break;case"LineString":w=Math.min(w,Pu(A.coordinates,!0,R,x,w));break;case"Polygon":w=Math.min(w,mv(R,A.coordinates,x,w))}if(w===0)return w}return w}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const cs={"==":rv,"!=":zm,">":nv,"<":Fm,">=":ov,"<=":iv,array:no,at:Od,boolean:no,case:yu,coalesce:xu,collator:bu,format:wu,image:Vd,in:gu,"index-of":nc,interpolate:Ri,"interpolate-hcl":Ri,"interpolate-lab":Ri,length:ac,let:mu,literal:os,match:zd,number:no,"number-format":$d,object:no,slice:ic,step:oc,string:no,"to-boolean":ko,"to-color":ko,"to-number":ko,"to-string":ko,var:Gs,within:ls,distance:Da};class yi{constructor(i,l,f,m){this.name=i,this.type=l,this._evaluate=f,this.args=m}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,l){const f=i[0],m=yi.definitions[f];if(!m)return l.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,w=x.filter(([R])=>!Array.isArray(R)||R.length===i.length-1);let A=null;for(const[R,L]of w){A=new mr(l.registry,Iu,l.path,null,l.scope);const z=[];let N=!1;for(let G=1;G<i.length;G++){const Y=i[G],ne=Array.isArray(R)?R[G-1]:R.type,ce=A.parse(Y,1+z.length,ne);if(!ce){N=!0;break}z.push(ce)}if(!N)if(Array.isArray(R)&&R.length!==z.length)A.error(`Expected ${R.length} arguments, but found ${z.length} instead.`);else{for(let G=0;G<z.length;G++){const Y=Array.isArray(R)?R[G]:R.type,ne=z[G];A.concat(G+1).checkSubtype(Y,ne.type)}if(A.errors.length===0)return new yi(f,v,L,z)}}if(w.length===1)l.errors.push(...A.errors);else{const R=(w.length?w:x).map(([z])=>{return N=z,Array.isArray(N)?`(${N.map(D).join(", ")})`:`(${D(N.type)}...)`;var N}).join(" | "),L=[];for(let z=1;z<i.length;z++){const N=l.parse(i[z],1+L.length);if(!N)return null;L.push(D(N.type))}l.error(`Expected arguments of type ${R}, but found (${L.join(", ")}) instead.`)}return null}static register(i,l){yi.definitions=l;for(const f in l)i[f]=yi}}function Jm(a,[i,l,f,m]){i=i.evaluate(a),l=l.evaluate(a),f=f.evaluate(a);const v=m?m.evaluate(a):1,x=Dm(i,l,f,v);if(x)throw new Gr(x);return new Kt(i/255,l/255,f/255,v,!1)}function Qm(a,i){return a in i}function Yd(a,i){const l=i[a];return l===void 0?null:l}function us(a){return{type:a}}function Iu(a){if(a instanceof Gs)return Iu(a.boundExpression);if(a instanceof yi&&a.name==="error"||a instanceof bu||a instanceof ls||a instanceof Da)return!1;const i=a instanceof ko||a instanceof no;let l=!0;return a.eachChild(f=>{l=i?l&&Iu(f):l&&f instanceof os}),!!l&&Mu(a)&&Ru(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Mu(a){if(a instanceof yi&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof ls||a instanceof Da)return!1;let i=!0;return a.eachChild(l=>{i&&!Mu(l)&&(i=!1)}),i}function dc(a){if(a instanceof yi&&a.name==="feature-state")return!1;let i=!0;return a.eachChild(l=>{i&&!dc(l)&&(i=!1)}),i}function Ru(a,i){if(a instanceof yi&&i.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild(f=>{l&&!Ru(f,i)&&(l=!1)}),l}function Jd(a){return{result:"success",value:a}}function hs(a){return{result:"error",value:a}}function sa(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function e0(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function ku(a){return!!a.expression&&a.expression.interpolated}function fr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Ys(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Lu(a){return a}function fc(a,i){const l=i.type==="color",f=a.stops&&typeof a.stops[0][0]=="object",m=f||!(f||a.property!==void 0),v=a.type||(ku(i)?"exponential":"interval");if(l||i.type==="padding"){const L=l?Kt.parse:$n.parse;(a=gn({},a)).stops&&(a.stops=a.stops.map(z=>[z[0],L(z[1])])),a.default=L(a.default?a.default:i.default)}if(a.colorSpace&&(x=a.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var x;let w,A,R;if(v==="exponential")w=ef;else if(v==="interval")w=t0;else if(v==="categorical"){w=Qd,A=Object.create(null);for(const L of a.stops)A[L[0]]=L[1];R=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);w=Du}if(f){const L={},z=[];for(let Y=0;Y<a.stops.length;Y++){const ne=a.stops[Y],ce=ne[0].zoom;L[ce]===void 0&&(L[ce]={zoom:ce,type:a.type,property:a.property,default:a.default,stops:[]},z.push(ce)),L[ce].stops.push([ne[0].value,ne[1]])}const N=[];for(const Y of z)N.push([L[Y].zoom,fc(L[Y],i)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:Ri.interpolationFactor.bind(void 0,G),zoomStops:N.map(Y=>Y[0]),evaluate:({zoom:Y},ne)=>ef({stops:N,base:a.base},i,Y).evaluate(Y,ne)}}if(m){const L=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:Ri.interpolationFactor.bind(void 0,L),zoomStops:a.stops.map(z=>z[0]),evaluate:({zoom:z})=>w(a,i,z,A,R)}}return{kind:"source",evaluate(L,z){const N=z&&z.properties?z.properties[a.property]:void 0;return N===void 0?Js(a.default,i.default):w(a,i,N,A,R)}}}function Js(a,i,l){return a!==void 0?a:i!==void 0?i:l!==void 0?l:void 0}function Qd(a,i,l,f,m){return Js(typeof l===m?f[l]:void 0,a.default,i.default)}function t0(a,i,l){if(fr(l)!=="number")return Js(a.default,i.default);const f=a.stops.length;if(f===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[f-1][0])return a.stops[f-1][1];const m=vu(a.stops.map(v=>v[0]),l);return a.stops[m][1]}function ef(a,i,l){const f=a.base!==void 0?a.base:1;if(fr(l)!=="number")return Js(a.default,i.default);const m=a.stops.length;if(m===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[m-1][0])return a.stops[m-1][1];const v=vu(a.stops.map(L=>L[0]),l),x=function(L,z,N,G){const Y=G-N,ne=L-N;return Y===0?0:z===1?ne/Y:(Math.pow(z,ne)-1)/(Math.pow(z,Y)-1)}(l,f,a.stops[v][0],a.stops[v+1][0]),w=a.stops[v][1],A=a.stops[v+1][1],R=ii[i.type]||Lu;return typeof w.evaluate=="function"?{evaluate(...L){const z=w.evaluate.apply(void 0,L),N=A.evaluate.apply(void 0,L);if(z!==void 0&&N!==void 0)return R(z,N,x,a.colorSpace)}}:R(w,A,x,a.colorSpace)}function Du(a,i,l){switch(i.type){case"color":l=Kt.parse(l);break;case"formatted":l=jn.fromString(l.toString());break;case"resolvedImage":l=Zi.fromString(l.toString());break;case"padding":l=$n.parse(l);break;default:fr(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0)}return Js(l,a.default,i.default)}yi.register(cs,{error:[{kind:"error"},[Ut],(a,[i])=>{throw new Gr(i.evaluate(a))}],typeof:[Ut,[jt],(a,[i])=>D(un(i.evaluate(a)))],"to-rgba":[q(Xe,4),[An],(a,[i])=>{const[l,f,m,v]=i.evaluate(a).rgb;return[255*l,255*f,255*m,v]}],rgb:[An,[Xe,Xe,Xe],Jm],rgba:[An,[Xe,Xe,Xe,Xe],Jm],has:{type:Bt,overloads:[[[Ut],(a,[i])=>Qm(i.evaluate(a),a.properties())],[[Ut,cn],(a,[i,l])=>Qm(i.evaluate(a),l.evaluate(a))]]},get:{type:jt,overloads:[[[Ut],(a,[i])=>Yd(i.evaluate(a),a.properties())],[[Ut,cn],(a,[i,l])=>Yd(i.evaluate(a),l.evaluate(a))]]},"feature-state":[jt,[Ut],(a,[i])=>Yd(i.evaluate(a),a.featureState||{})],properties:[cn,[],a=>a.properties()],"geometry-type":[Ut,[],a=>a.geometryType()],id:[jt,[],a=>a.id()],zoom:[Xe,[],a=>a.globals.zoom],"heatmap-density":[Xe,[],a=>a.globals.heatmapDensity||0],"line-progress":[Xe,[],a=>a.globals.lineProgress||0],accumulated:[jt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Xe,us(Xe),(a,i)=>{let l=0;for(const f of i)l+=f.evaluate(a);return l}],"*":[Xe,us(Xe),(a,i)=>{let l=1;for(const f of i)l*=f.evaluate(a);return l}],"-":{type:Xe,overloads:[[[Xe,Xe],(a,[i,l])=>i.evaluate(a)-l.evaluate(a)],[[Xe],(a,[i])=>-i.evaluate(a)]]},"/":[Xe,[Xe,Xe],(a,[i,l])=>i.evaluate(a)/l.evaluate(a)],"%":[Xe,[Xe,Xe],(a,[i,l])=>i.evaluate(a)%l.evaluate(a)],ln2:[Xe,[],()=>Math.LN2],pi:[Xe,[],()=>Math.PI],e:[Xe,[],()=>Math.E],"^":[Xe,[Xe,Xe],(a,[i,l])=>Math.pow(i.evaluate(a),l.evaluate(a))],sqrt:[Xe,[Xe],(a,[i])=>Math.sqrt(i.evaluate(a))],log10:[Xe,[Xe],(a,[i])=>Math.log(i.evaluate(a))/Math.LN10],ln:[Xe,[Xe],(a,[i])=>Math.log(i.evaluate(a))],log2:[Xe,[Xe],(a,[i])=>Math.log(i.evaluate(a))/Math.LN2],sin:[Xe,[Xe],(a,[i])=>Math.sin(i.evaluate(a))],cos:[Xe,[Xe],(a,[i])=>Math.cos(i.evaluate(a))],tan:[Xe,[Xe],(a,[i])=>Math.tan(i.evaluate(a))],asin:[Xe,[Xe],(a,[i])=>Math.asin(i.evaluate(a))],acos:[Xe,[Xe],(a,[i])=>Math.acos(i.evaluate(a))],atan:[Xe,[Xe],(a,[i])=>Math.atan(i.evaluate(a))],min:[Xe,us(Xe),(a,i)=>Math.min(...i.map(l=>l.evaluate(a)))],max:[Xe,us(Xe),(a,i)=>Math.max(...i.map(l=>l.evaluate(a)))],abs:[Xe,[Xe],(a,[i])=>Math.abs(i.evaluate(a))],round:[Xe,[Xe],(a,[i])=>{const l=i.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[Xe,[Xe],(a,[i])=>Math.floor(i.evaluate(a))],ceil:[Xe,[Xe],(a,[i])=>Math.ceil(i.evaluate(a))],"filter-==":[Bt,[Ut,jt],(a,[i,l])=>a.properties()[i.value]===l.value],"filter-id-==":[Bt,[jt],(a,[i])=>a.id()===i.value],"filter-type-==":[Bt,[Ut],(a,[i])=>a.geometryType()===i.value],"filter-<":[Bt,[Ut,jt],(a,[i,l])=>{const f=a.properties()[i.value],m=l.value;return typeof f==typeof m&&f<m}],"filter-id-<":[Bt,[jt],(a,[i])=>{const l=a.id(),f=i.value;return typeof l==typeof f&&l<f}],"filter->":[Bt,[Ut,jt],(a,[i,l])=>{const f=a.properties()[i.value],m=l.value;return typeof f==typeof m&&f>m}],"filter-id->":[Bt,[jt],(a,[i])=>{const l=a.id(),f=i.value;return typeof l==typeof f&&l>f}],"filter-<=":[Bt,[Ut,jt],(a,[i,l])=>{const f=a.properties()[i.value],m=l.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[Bt,[jt],(a,[i])=>{const l=a.id(),f=i.value;return typeof l==typeof f&&l<=f}],"filter->=":[Bt,[Ut,jt],(a,[i,l])=>{const f=a.properties()[i.value],m=l.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[Bt,[jt],(a,[i])=>{const l=a.id(),f=i.value;return typeof l==typeof f&&l>=f}],"filter-has":[Bt,[jt],(a,[i])=>i.value in a.properties()],"filter-has-id":[Bt,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Bt,[q(Ut)],(a,[i])=>i.value.indexOf(a.geometryType())>=0],"filter-id-in":[Bt,[q(jt)],(a,[i])=>i.value.indexOf(a.id())>=0],"filter-in-small":[Bt,[Ut,q(jt)],(a,[i,l])=>l.value.indexOf(a.properties()[i.value])>=0],"filter-in-large":[Bt,[Ut,q(jt)],(a,[i,l])=>function(f,m,v,x){for(;v<=x;){const w=v+x>>1;if(m[w]===f)return!0;m[w]>f?x=w-1:v=w+1}return!1}(a.properties()[i.value],l.value,0,l.value.length-1)],all:{type:Bt,overloads:[[[Bt,Bt],(a,[i,l])=>i.evaluate(a)&&l.evaluate(a)],[us(Bt),(a,i)=>{for(const l of i)if(!l.evaluate(a))return!1;return!0}]]},any:{type:Bt,overloads:[[[Bt,Bt],(a,[i,l])=>i.evaluate(a)||l.evaluate(a)],[us(Bt),(a,i)=>{for(const l of i)if(l.evaluate(a))return!0;return!1}]]},"!":[Bt,[Bt],(a,[i])=>!i.evaluate(a)],"is-supported-script":[Bt,[Ut],(a,[i])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(i.evaluate(a))}],upcase:[Ut,[Ut],(a,[i])=>i.evaluate(a).toUpperCase()],downcase:[Ut,[Ut],(a,[i])=>i.evaluate(a).toLowerCase()],concat:[Ut,us(jt),(a,i)=>i.map(l=>rc(l.evaluate(a))).join("")],"resolved-locale":[Ut,[Mi],(a,[i])=>i.evaluate(a).resolvedLocale()]});class tf{constructor(i,l){var f;this.expression=i,this._warningHistory={},this._evaluator=new Ws,this._defaultValue=l?(f=l).type==="color"&&Ys(f.default)?new Kt(0,0,0,0):f.type==="color"?Kt.parse(f.default)||null:f.type==="padding"?$n.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?gi.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,f,m,v,x){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(i,l,f,m,v,x){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Gr(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function Ou(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in cs}function zu(a,i){const l=new mr(cs,Iu,[],i?function(m){const v={color:An,string:Ut,number:Xe,enum:Ut,boolean:Bt,formatted:ro,padding:Qr,resolvedImage:he,variableAnchorOffsetCollection:U};return m.type==="array"?q(v[m.value]||jt,m.length):v[m.type]}(i):void 0),f=l.parse(a,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Jd(new tf(f,i)):hs(l.errors)}class rf{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!dc(l.expression)}evaluateWithoutErrorHandling(i,l,f,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,f,m,v,x)}evaluate(i,l,f,m,v,x){return this._styleExpression.evaluate(i,l,f,m,v,x)}}class nf{constructor(i,l,f,m){this.kind=i,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!dc(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(i,l,f,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,f,m,v,x)}evaluate(i,l,f,m,v,x){return this._styleExpression.evaluate(i,l,f,m,v,x)}interpolationFactor(i,l,f){return this.interpolationType?Ri.interpolationFactor(this.interpolationType,i,l,f):0}}function pc(a,i){const l=zu(a,i);if(l.result==="error")return l;const f=l.value.expression,m=Mu(f);if(!m&&!sa(i))return hs([new Nn("","data expressions not supported")]);const v=Ru(f,["zoom"]);if(!v&&!e0(i))return hs([new Nn("","zoom expressions not supported")]);const x=Vn(f);return x||v?x instanceof Nn?hs([x]):x instanceof Ri&&!ku(i)?hs([new Nn("",'"interpolate" expressions cannot be used with this property')]):Jd(x?new nf(m?"camera":"composite",l.value,x.labels,x instanceof Ri?x.interpolation:void 0):new rf(m?"constant":"source",l.value)):hs([new Nn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ds{constructor(i,l){this._parameters=i,this._specification=l,gn(this,fc(this._parameters,this._specification))}static deserialize(i){return new ds(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Vn(a){let i=null;if(a instanceof mu)i=Vn(a.result);else if(a instanceof xu){for(const l of a.args)if(i=Vn(l),i)break}else(a instanceof oc||a instanceof Ri)&&a.input instanceof yi&&a.input.name==="zoom"&&(i=a);return i instanceof Nn||a.eachChild(l=>{const f=Vn(l);f instanceof Nn?i=f:!i&&f?i=new Nn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&f&&i!==f&&(i=new Nn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function fs(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const i of a.slice(1))if(!fs(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const r0={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function of(a){if(a==null)return{filter:()=>!0,needGeometry:!1};fs(a)||(a=mc(a));const i=zu(a,r0);if(i.result==="error")throw new Error(i.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,f,m)=>i.value.evaluate(l,f,{},m),needGeometry:Qs(a)}}function gv(a,i){return a<i?-1:a>i?1:0}function Qs(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let i=1;i<a.length;i++)if(Qs(a[i]))return!0;return!1}function mc(a){if(!a)return!0;const i=a[0];return a.length<=1?i!=="any":i==="=="?gc(a[1],a[2],"=="):i==="!="?Bu(gc(a[1],a[2],"==")):i==="<"||i===">"||i==="<="||i===">="?gc(a[1],a[2],i):i==="any"?(l=a.slice(1),["any"].concat(l.map(mc))):i==="all"?["all"].concat(a.slice(1).map(mc)):i==="none"?["all"].concat(a.slice(1).map(mc).map(Bu)):i==="in"?n0(a[1],a.slice(2)):i==="!in"?Bu(n0(a[1],a.slice(2))):i==="has"?Fu(a[1]):i!=="!has"||Bu(Fu(a[1]));var l}function gc(a,i,l){switch(a){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,a,i]}}function n0(a,i){if(i.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",a,["literal",i.sort(gv)]]:["filter-in-small",a,["literal",i]]}}function Fu(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Bu(a){return["!",a]}function ps(a){const i=typeof a;if(i==="number"||i==="boolean"||i==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const v of a)m+=`${ps(v)},`;return`${m}]`}const l=Object.keys(a).sort();let f="{";for(let m=0;m<l.length;m++)f+=`${JSON.stringify(l[m])}:${ps(a[l[m]])},`;return`${f}}`}function yv(a){let i="";for(const l of Sn)i+=`/${ps(a[l])}`;return i}function Nu(a){const i=a.value;return i?[new Ye(a.key,i,"constants have been deprecated as of v8")]:[]}function Ur(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function la(a){if(Array.isArray(a))return a.map(la);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const i={};for(const l in a)i[l]=la(a[l]);return i}return Ur(a)}function Li(a){const i=a.key,l=a.value,f=a.valueSpec||{},m=a.objectElementValidators||{},v=a.style,x=a.styleSpec,w=a.validateSpec;let A=[];const R=fr(l);if(R!=="object")return[new Ye(i,l,`object expected, ${R} found`)];for(const L in l){const z=L.split(".")[0],N=f[z]||f["*"];let G;if(m[z])G=m[z];else if(f[z])G=w;else if(m["*"])G=m["*"];else{if(!f["*"]){A.push(new Ye(i,l[L],`unknown property "${L}"`));continue}G=w}A=A.concat(G({key:(i&&`${i}.`)+L,value:l[L],valueSpec:N,style:v,styleSpec:x,object:l,objectKey:L,validateSpec:w},l))}for(const L in f)m[L]||f[L].required&&f[L].default===void 0&&l[L]===void 0&&A.push(new Ye(i,l,`missing required property "${L}"`));return A}function ju(a){const i=a.value,l=a.valueSpec,f=a.style,m=a.styleSpec,v=a.key,x=a.arrayElementValidator||a.validateSpec;if(fr(i)!=="array")return[new Ye(v,i,`array expected, ${fr(i)} found`)];if(l.length&&i.length!==l.length)return[new Ye(v,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new Ye(v,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let w={type:l.value,values:l.values};m.$version<7&&(w.function=l.function),fr(l.value)==="object"&&(w=l.value);let A=[];for(let R=0;R<i.length;R++)A=A.concat(x({array:i,arrayIndex:R,value:i[R],valueSpec:w,validateSpec:a.validateSpec,style:f,styleSpec:m,key:`${v}[${R}]`}));return A}function af(a){const i=a.key,l=a.value,f=a.valueSpec;let m=fr(l);return m==="number"&&l!=l&&(m="NaN"),m!=="number"?[new Ye(i,l,`number expected, ${m} found`)]:"minimum"in f&&l<f.minimum?[new Ye(i,l,`${l} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&l>f.maximum?[new Ye(i,l,`${l} is greater than the maximum value ${f.maximum}`)]:[]}function $u(a){const i=a.valueSpec,l=Ur(a.value.type);let f,m,v,x={};const w=l!=="categorical"&&a.value.property===void 0,A=!w,R=fr(a.value.stops)==="array"&&fr(a.value.stops[0])==="array"&&fr(a.value.stops[0][0])==="object",L=Li({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(G){if(l==="identity")return[new Ye(G.key,G.value,'identity function may not have a "stops" property')];let Y=[];const ne=G.value;return Y=Y.concat(ju({key:G.key,value:ne,valueSpec:G.valueSpec,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:z})),fr(ne)==="array"&&ne.length===0&&Y.push(new Ye(G.key,ne,"array must have at least one stop")),Y},default:function(G){return G.validateSpec({key:G.key,value:G.value,valueSpec:i,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec})}}});return l==="identity"&&w&&L.push(new Ye(a.key,a.value,'missing required property "property"')),l==="identity"||a.value.stops||L.push(new Ye(a.key,a.value,'missing required property "stops"')),l==="exponential"&&a.valueSpec.expression&&!ku(a.valueSpec)&&L.push(new Ye(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(A&&!sa(a.valueSpec)?L.push(new Ye(a.key,a.value,"property functions not supported")):w&&!e0(a.valueSpec)&&L.push(new Ye(a.key,a.value,"zoom functions not supported"))),l!=="categorical"&&!R||a.value.property!==void 0||L.push(new Ye(a.key,a.value,'"property" property is required')),L;function z(G){let Y=[];const ne=G.value,ce=G.key;if(fr(ne)!=="array")return[new Ye(ce,ne,`array expected, ${fr(ne)} found`)];if(ne.length!==2)return[new Ye(ce,ne,`array length 2 expected, length ${ne.length} found`)];if(R){if(fr(ne[0])!=="object")return[new Ye(ce,ne,`object expected, ${fr(ne[0])} found`)];if(ne[0].zoom===void 0)return[new Ye(ce,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new Ye(ce,ne,"object stop key must have value")];if(v&&v>Ur(ne[0].zoom))return[new Ye(ce,ne[0].zoom,"stop zoom values must appear in ascending order")];Ur(ne[0].zoom)!==v&&(v=Ur(ne[0].zoom),m=void 0,x={}),Y=Y.concat(Li({key:`${ce}[0]`,value:ne[0],valueSpec:{zoom:{}},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:af,value:N}}))}else Y=Y.concat(N({key:`${ce}[0]`,value:ne[0],valueSpec:{},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec},ne));return Ou(la(ne[1]))?Y.concat([new Ye(`${ce}[1]`,ne[1],"expressions are not allowed in function stops.")]):Y.concat(G.validateSpec({key:`${ce}[1]`,value:ne[1],valueSpec:i,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec}))}function N(G,Y){const ne=fr(G.value),ce=Ur(G.value),ye=G.value!==null?G.value:Y;if(f){if(ne!==f)return[new Ye(G.key,ye,`${ne} stop domain type must match previous stop domain type ${f}`)]}else f=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean")return[new Ye(G.key,ye,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&l!=="categorical"){let Ce=`number expected, ${ne} found`;return sa(i)&&l===void 0&&(Ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ye(G.key,ye,Ce)]}return l!=="categorical"||ne!=="number"||isFinite(ce)&&Math.floor(ce)===ce?l!=="categorical"&&ne==="number"&&m!==void 0&&ce<m?[new Ye(G.key,ye,"stop domain values must appear in ascending order")]:(m=ce,l==="categorical"&&ce in x?[new Ye(G.key,ye,"stop domain values must be unique")]:(x[ce]=!0,[])):[new Ye(G.key,ye,`integer expected, found ${ce}`)]}}function ca(a){const i=(a.expressionContext==="property"?pc:zu)(la(a.value),a.valueSpec);if(i.result==="error")return i.value.map(f=>new Ye(`${a.key}${f.key}`,a.value,f.message));const l=i.value.expression||i.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!l.outputDefined())return[new Ye(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!dc(l))return[new Ye(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!dc(l))return[new Ye(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Ru(l,["zoom","feature-state"]))return[new Ye(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Mu(l))return[new Ye(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function el(a){const i=a.key,l=a.value,f=a.valueSpec,m=[];return Array.isArray(f.values)?f.values.indexOf(Ur(l))===-1&&m.push(new Ye(i,l,`expected one of [${f.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(f.values).indexOf(Ur(l))===-1&&m.push(new Ye(i,l,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function Vu(a){return fs(la(a.value))?ca(gn({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):sf(a)}function sf(a){const i=a.value,l=a.key;if(fr(i)!=="array")return[new Ye(l,i,`array expected, ${fr(i)} found`)];const f=a.styleSpec;let m,v=[];if(i.length<1)return[new Ye(l,i,"filter array must have at least 1 element")];switch(v=v.concat(el({key:`${l}[0]`,value:i[0],valueSpec:f.filter_operator,style:a.style,styleSpec:a.styleSpec})),Ur(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Ur(i[1])==="$type"&&v.push(new Ye(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&v.push(new Ye(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(m=fr(i[1]),m!=="string"&&v.push(new Ye(`${l}[1]`,i[1],`string expected, ${m} found`)));for(let x=2;x<i.length;x++)m=fr(i[x]),Ur(i[1])==="$type"?v=v.concat(el({key:`${l}[${x}]`,value:i[x],valueSpec:f.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Ye(`${l}[${x}]`,i[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)v=v.concat(sf({key:`${l}[${x}]`,value:i[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=fr(i[1]),i.length!==2?v.push(new Ye(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Ye(`${l}[1]`,i[1],`string expected, ${m} found`))}return v}function lf(a,i){const l=a.key,f=a.validateSpec,m=a.style,v=a.styleSpec,x=a.value,w=a.objectKey,A=v[`${i}_${a.layerType}`];if(!A)return[];const R=w.match(/^(.*)-transition$/);if(i==="paint"&&R&&A[R[1]]&&A[R[1]].transition)return f({key:l,value:x,valueSpec:v.transition,style:m,styleSpec:v});const L=a.valueSpec||A[w];if(!L)return[new Ye(l,x,`unknown property "${w}"`)];let z;if(fr(x)==="string"&&sa(L)&&!L.tokens&&(z=/^{([^}]+)}$/.exec(x)))return[new Ye(l,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];const N=[];return a.layerType==="symbol"&&(w==="text-field"&&m&&!m.glyphs&&N.push(new Ye(l,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Ys(la(x))&&Ur(x.type)==="identity"&&N.push(new Ye(l,x,'"text-font" does not support identity functions'))),N.concat(f({key:a.key,value:x,valueSpec:L,style:m,styleSpec:v,expressionContext:"property",propertyType:i,propertyKey:w}))}function Uu(a){return lf(a,"paint")}function cf(a){return lf(a,"layout")}function i0(a){let i=[];const l=a.value,f=a.key,m=a.style,v=a.styleSpec;l.type||l.ref||i.push(new Ye(f,l,'either "type" or "ref" is required'));let x=Ur(l.type);const w=Ur(l.ref);if(l.id){const A=Ur(l.id);for(let R=0;R<a.arrayIndex;R++){const L=m.layers[R];Ur(L.id)===A&&i.push(new Ye(f,l.id,`duplicate layer id "${l.id}", previously used at line ${L.id.__line__}`))}}if("ref"in l){let A;["type","source","source-layer","filter","layout"].forEach(R=>{R in l&&i.push(new Ye(f,l[R],`"${R}" is prohibited for ref layers`))}),m.layers.forEach(R=>{Ur(R.id)===w&&(A=R)}),A?A.ref?i.push(new Ye(f,l.ref,"ref cannot reference another ref layer")):x=Ur(A.type):i.push(new Ye(f,l.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(l.source){const A=m.sources&&m.sources[l.source],R=A&&Ur(A.type);A?R==="vector"&&x==="raster"?i.push(new Ye(f,l.source,`layer "${l.id}" requires a raster source`)):R!=="raster-dem"&&x==="hillshade"?i.push(new Ye(f,l.source,`layer "${l.id}" requires a raster-dem source`)):R==="raster"&&x!=="raster"?i.push(new Ye(f,l.source,`layer "${l.id}" requires a vector source`)):R!=="vector"||l["source-layer"]?R==="raster-dem"&&x!=="hillshade"?i.push(new Ye(f,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]||R==="geojson"&&A.lineMetrics||i.push(new Ye(f,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Ye(f,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new Ye(f,l.source,`source "${l.source}" not found`))}else i.push(new Ye(f,l,'missing required property "source"'));return i=i.concat(Li({key:f,value:l,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${f}.type`,value:l.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:l,objectKey:"type"}),filter:Vu,layout:A=>Li({layer:l,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":R=>cf(gn({layerType:x},R))}}),paint:A=>Li({layer:l,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":R=>Uu(gn({layerType:x},R))}})}})),i}function Oa(a){const i=a.value,l=a.key,f=fr(i);return f!=="string"?[new Ye(l,i,`string expected, ${f} found`)]:[]}const o0={promoteId:function({key:a,value:i}){if(fr(i)==="string")return Oa({key:a,value:i});{const l=[];for(const f in i)l.push(...Oa({key:`${a}.${f}`,value:i[f]}));return l}}};function uf(a){const i=a.value,l=a.key,f=a.styleSpec,m=a.style,v=a.validateSpec;if(!i.type)return[new Ye(l,i,'"type" is required')];const x=Ur(i.type);let w;switch(x){case"vector":case"raster":return w=Li({key:l,value:i,valueSpec:f[`source_${x.replace("-","_")}`],style:a.style,styleSpec:f,objectElementValidators:o0,validateSpec:v}),w;case"raster-dem":return w=function(A){var R;const L=(R=A.sourceName)!==null&&R!==void 0?R:"",z=A.value,N=A.styleSpec,G=N.source_raster_dem,Y=A.style;let ne=[];const ce=fr(z);if(z===void 0)return ne;if(ce!=="object")return ne.push(new Ye("source_raster_dem",z,`object expected, ${ce} found`)),ne;const ye=Ur(z.encoding)==="custom",Ce=["redFactor","greenFactor","blueFactor","baseShift"],xe=A.value.encoding?`"${A.value.encoding}"`:"Default";for(const Ae in z)!ye&&Ce.includes(Ae)?ne.push(new Ye(Ae,z[Ae],`In "${L}": "${Ae}" is only valid when "encoding" is set to "custom". ${xe} encoding found`)):G[Ae]?ne=ne.concat(A.validateSpec({key:Ae,value:z[Ae],valueSpec:G[Ae],validateSpec:A.validateSpec,style:Y,styleSpec:N})):ne.push(new Ye(Ae,z[Ae],`unknown property "${Ae}"`));return ne}({sourceName:l,value:i,style:a.style,styleSpec:f,validateSpec:v}),w;case"geojson":if(w=Li({key:l,value:i,valueSpec:f.source_geojson,style:m,styleSpec:f,validateSpec:v,objectElementValidators:o0}),i.cluster)for(const A in i.clusterProperties){const[R,L]=i.clusterProperties[A],z=typeof R=="string"?[R,["accumulated"],["get",A]]:R;w.push(...ca({key:`${l}.${A}.map`,value:L,validateSpec:v,expressionContext:"cluster-map"})),w.push(...ca({key:`${l}.${A}.reduce`,value:z,validateSpec:v,expressionContext:"cluster-reduce"}))}return w;case"video":return Li({key:l,value:i,valueSpec:f.source_video,style:m,validateSpec:v,styleSpec:f});case"image":return Li({key:l,value:i,valueSpec:f.source_image,style:m,validateSpec:v,styleSpec:f});case"canvas":return[new Ye(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return el({key:`${l}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:f})}}function hf(a){const i=a.value,l=a.styleSpec,f=l.light,m=a.style;let v=[];const x=fr(i);if(i===void 0)return v;if(x!=="object")return v=v.concat([new Ye("light",i,`object expected, ${x} found`)]),v;for(const w in i){const A=w.match(/^(.*)-transition$/);v=v.concat(A&&f[A[1]]&&f[A[1]].transition?a.validateSpec({key:w,value:i[w],valueSpec:l.transition,validateSpec:a.validateSpec,style:m,styleSpec:l}):f[w]?a.validateSpec({key:w,value:i[w],valueSpec:f[w],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new Ye(w,i[w],`unknown property "${w}"`)])}return v}function df(a){const i=a.value,l=a.styleSpec,f=l.sky,m=a.style,v=fr(i);if(i===void 0)return[];if(v!=="object")return[new Ye("sky",i,`object expected, ${v} found`)];let x=[];for(const w in i)x=x.concat(f[w]?a.validateSpec({key:w,value:i[w],valueSpec:f[w],style:m,styleSpec:l}):[new Ye(w,i[w],`unknown property "${w}"`)]);return x}function a0(a){const i=a.value,l=a.styleSpec,f=l.terrain,m=a.style;let v=[];const x=fr(i);if(i===void 0)return v;if(x!=="object")return v=v.concat([new Ye("terrain",i,`object expected, ${x} found`)]),v;for(const w in i)v=v.concat(f[w]?a.validateSpec({key:w,value:i[w],valueSpec:f[w],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new Ye(w,i[w],`unknown property "${w}"`)]);return v}function s0(a){let i=[];const l=a.value,f=a.key;if(Array.isArray(l)){const m=[],v=[];for(const x in l)l[x].id&&m.includes(l[x].id)&&i.push(new Ye(f,l,`all the sprites' ids must be unique, but ${l[x].id} is duplicated`)),m.push(l[x].id),l[x].url&&v.includes(l[x].url)&&i.push(new Ye(f,l,`all the sprites' URLs must be unique, but ${l[x].url} is duplicated`)),v.push(l[x].url),i=i.concat(Li({key:`${f}[${x}]`,value:l[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return i}return Oa({key:f,value:l})}const ff={"*":()=>[],array:ju,boolean:function(a){const i=a.value,l=a.key,f=fr(i);return f!=="boolean"?[new Ye(l,i,`boolean expected, ${f} found`)]:[]},number:af,color:function(a){const i=a.key,l=a.value,f=fr(l);return f!=="string"?[new Ye(i,l,`color expected, ${f} found`)]:Kt.parse(String(l))?[]:[new Ye(i,l,`color expected, "${l}" found`)]},constants:Nu,enum:el,filter:Vu,function:$u,layer:i0,object:Li,source:uf,light:hf,sky:df,terrain:a0,string:Oa,formatted:function(a){return Oa(a).length===0?[]:ca(a)},resolvedImage:function(a){return Oa(a).length===0?[]:ca(a)},padding:function(a){const i=a.key,l=a.value;if(fr(l)==="array"){if(l.length<1||l.length>4)return[new Ye(i,l,`padding requires 1 to 4 values; ${l.length} values found`)];const f={type:"number"};let m=[];for(let v=0;v<l.length;v++)m=m.concat(a.validateSpec({key:`${i}[${v}]`,value:l[v],validateSpec:a.validateSpec,valueSpec:f}));return m}return af({key:i,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const i=a.key,l=a.value,f=fr(l),m=a.styleSpec;if(f!=="array"||l.length<1||l.length%2!=0)return[new Ye(i,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<l.length;x+=2)v=v.concat(el({key:`${i}[${x}]`,value:l[x],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(ju({key:`${i}[${x+1}]`,value:l[x+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:m}));return v},sprite:s0};function tl(a){const i=a.value,l=a.valueSpec,f=a.styleSpec;return a.validateSpec=tl,l.expression&&Ys(Ur(i))?$u(a):l.expression&&Ou(la(i))?ca(a):l.type&&ff[l.type]?ff[l.type](a):Li(gn({},a,{valueSpec:l.type?f[l.type]:l}))}function pf(a){const i=a.value,l=a.key,f=Oa(a);return f.length||(i.indexOf("{fontstack}")===-1&&f.push(new Ye(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&f.push(new Ye(l,i,'"glyphs" url must include a "{range}" token'))),f}function Hi(a,i=Le){let l=[];return l=l.concat(tl({key:"",value:a,valueSpec:i.$root,styleSpec:i,style:a,validateSpec:tl,objectElementValidators:{glyphs:pf,"*":()=>[]}})),a.constants&&(l=l.concat(Nu({key:"constants",value:a.constants,style:a,styleSpec:i,validateSpec:tl}))),l0(l)}function Di(a){return function(i){return a({...i,validateSpec:tl})}}function l0(a){return[].concat(a).sort((i,l)=>i.line-l.line)}function Wi(a){return function(...i){return l0(a.apply(this,i))}}Hi.source=Wi(Di(uf)),Hi.sprite=Wi(Di(s0)),Hi.glyphs=Wi(Di(pf)),Hi.light=Wi(Di(hf)),Hi.sky=Wi(Di(df)),Hi.terrain=Wi(Di(a0)),Hi.layer=Wi(Di(i0)),Hi.filter=Wi(Di(Vu)),Hi.paintProperty=Wi(Di(Uu)),Hi.layoutProperty=Wi(Di(cf));const yc=Hi,vv=yc.light,c0=yc.paintProperty,u0=yc.layoutProperty;function mf(a,i){let l=!1;if(i&&i.length)for(const f of i)a.fire(new Wt(new Error(f.message))),l=!0;return l}class vc{constructor(i,l,f){const m=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const x=new Int32Array(this.arrayBuffer);i=x[0],this.d=(l=x[1])+2*(f=x[2]);for(let A=0;A<this.d*this.d;A++){const R=x[3+A],L=x[3+A+1];m.push(R===L?null:x.subarray(R,L))}const w=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=l+2*f;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=i,this.padding=f,this.scale=l/i,this.uid=0;const v=f/l*i;this.min=-v,this.max=i+v}insert(i,l,f,m,v){this._forEachCell(l,f,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,l,f,m,v,x){this.cells[v].push(x)}query(i,l,f,m,v){const x=this.min,w=this.max;if(i<=x&&l<=x&&w<=f&&w<=m&&!v)return Array.prototype.slice.call(this.keys);{const A=[];return this._forEachCell(i,l,f,m,this._queryCell,A,{},v),A}}_queryCell(i,l,f,m,v,x,w,A){const R=this.cells[v];if(R!==null){const L=this.keys,z=this.bboxes;for(let N=0;N<R.length;N++){const G=R[N];if(w[G]===void 0){const Y=4*G;(A?A(z[Y+0],z[Y+1],z[Y+2],z[Y+3]):i<=z[Y+2]&&l<=z[Y+3]&&f>=z[Y+0]&&m>=z[Y+1])?(w[G]=!0,x.push(L[G])):w[G]=!1}}}}_forEachCell(i,l,f,m,v,x,w,A){const R=this._convertToCellCoord(i),L=this._convertToCellCoord(l),z=this._convertToCellCoord(f),N=this._convertToCellCoord(m);for(let G=R;G<=z;G++)for(let Y=L;Y<=N;Y++){const ne=this.d*Y+G;if((!A||A(this._convertFromCellCoord(G),this._convertFromCellCoord(Y),this._convertFromCellCoord(G+1),this._convertFromCellCoord(Y+1)))&&v.call(this,i,l,f,m,ne,x,w,A))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,l=3+this.cells.length+1+1;let f=0;for(let x=0;x<this.cells.length;x++)f+=this.cells[x].length;const m=new Int32Array(l+f+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=l;for(let x=0;x<i.length;x++){const w=i[x];m[3+x]=v,m.set(w,v),v+=w.length}return m[3+i.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+i.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(i,l){const f=i.toArrayBuffer();return l&&l.push(f),{buffer:f}}static deserialize(i){return new vc(i.buffer)}}const za={};function yt(a,i,l={}){if(za[a])throw new Error(`${a} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:a,writeable:!1}),za[a]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}yt("Object",Object),yt("TransferableGridIndex",vc),yt("Color",Kt),yt("Error",Error),yt("AJAXError",Yt),yt("ResolvedImage",Zi),yt("StylePropertyFunction",ds),yt("StyleExpression",tf,{omit:["_evaluator"]}),yt("ZoomDependentExpression",nf),yt("ZoomConstantExpression",rf),yt("CompoundExpression",yi,{omit:["_evaluate"]});for(const a in cs)cs[a]._classRegistryKey||yt(`Expression_${a}`,cs[a]);function h0(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function _c(a,i){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error)return a;if(h0(a)||He(a))return i&&i.push(a),a;if(ArrayBuffer.isView(a)){const l=a;return i&&i.push(l.buffer),l}if(a instanceof ImageData)return i&&i.push(a.data.buffer),a;if(Array.isArray(a)){const l=[];for(const f of a)l.push(_c(f,i));return l}if(typeof a=="object"){const l=a.constructor,f=l._classRegistryKey;if(!f)throw new Error(`can't serialize object of unregistered class ${l.name}`);if(!za[f])throw new Error(`${f} is not registered.`);const m=l.serialize?l.serialize(a,i):{};if(l.serialize){if(i&&m===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in a){if(!a.hasOwnProperty(v)||za[f].omit.indexOf(v)>=0)continue;const x=a[v];m[v]=za[f].shallow.indexOf(v)>=0?x:_c(x,i)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(m.$name=f),m}throw new Error("can't serialize object of type "+typeof a)}function Lo(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error||h0(a)||He(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(Lo);if(typeof a=="object"){const i=a.$name||"Object";if(!za[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:l}=za[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(a);const f=Object.create(l.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const v=a[m];f[m]=za[i].shallow.indexOf(m)>=0?v:Lo(v)}return f}throw new Error("can't deserialize object of type "+typeof a)}class d0{constructor(){this.first=!0}update(i,l){const f=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=l),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=f,!0))}}const ut={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function gf(a){for(const i of a)if(yf(i.charCodeAt(0)))return!0;return!1}function _v(a){for(const i of a)if(!f0(i.charCodeAt(0)))return!1;return!0}function f0(a){return!(ut.Arabic(a)||ut["Arabic Supplement"](a)||ut["Arabic Extended-A"](a)||ut["Arabic Presentation Forms-A"](a)||ut["Arabic Presentation Forms-B"](a))}function yf(a){return!(a!==746&&a!==747&&(a<4352||!(ut["Bopomofo Extended"](a)||ut.Bopomofo(a)||ut["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||ut["CJK Compatibility Ideographs"](a)||ut["CJK Compatibility"](a)||ut["CJK Radicals Supplement"](a)||ut["CJK Strokes"](a)||!(!ut["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||ut["CJK Unified Ideographs Extension A"](a)||ut["CJK Unified Ideographs"](a)||ut["Enclosed CJK Letters and Months"](a)||ut["Hangul Compatibility Jamo"](a)||ut["Hangul Jamo Extended-A"](a)||ut["Hangul Jamo Extended-B"](a)||ut["Hangul Jamo"](a)||ut["Hangul Syllables"](a)||ut.Hiragana(a)||ut["Ideographic Description Characters"](a)||ut.Kanbun(a)||ut["Kangxi Radicals"](a)||ut["Katakana Phonetic Extensions"](a)||ut.Katakana(a)&&a!==12540||!(!ut["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!ut["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||ut["Unified Canadian Aboriginal Syllabics"](a)||ut["Unified Canadian Aboriginal Syllabics Extended"](a)||ut["Vertical Forms"](a)||ut["Yijing Hexagram Symbols"](a)||ut["Yi Syllables"](a)||ut["Yi Radicals"](a))))}function p0(a){return!(yf(a)||function(i){return!!(ut["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||ut["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||ut["Letterlike Symbols"](i)||ut["Number Forms"](i)||ut["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||ut["Control Pictures"](i)&&i!==9251||ut["Optical Character Recognition"](i)||ut["Enclosed Alphanumerics"](i)||ut["Geometric Shapes"](i)||ut["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||ut["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||ut["CJK Symbols and Punctuation"](i)||ut.Katakana(i)||ut["Private Use Area"](i)||ut["CJK Compatibility Forms"](i)||ut["Small Form Variants"](i)||ut["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(a))}function Fa(a){return a>=1424&&a<=2303||ut["Arabic Presentation Forms-A"](a)||ut["Arabic Presentation Forms-B"](a)}function m0(a,i){return!(!i&&Fa(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||ut.Khmer(a))}function vf(a){for(const i of a)if(Fa(i.charCodeAt(0)))return!0;return!1}const Ba=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(a){this.pluginStatus=a.pluginStatus,this.pluginURL=a.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(a){this.applyArabicShaping=a.applyArabicShaping,this.processBidirectionalText=a.processBidirectionalText,this.processStyledBidirectionalText=a.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Pr{constructor(i,l){this.zoom=i,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new d0,this.transition={})}isSupportedScript(i){return function(l,f){for(const m of l)if(!m0(m.charCodeAt(0),f))return!1;return!0}(i,Ba.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,l=i-Math.floor(i),f=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*l}}}class Zu{constructor(i,l){this.property=i,this.value=l,this.expression=function(f,m){if(Ys(f))return new ds(f,m);if(Ou(f)){const v=pc(f,m);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=f;return m.type==="color"&&typeof f=="string"?v=Kt.parse(f):m.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(v=gi.parse(f)):v=$n.parse(f),{kind:"constant",evaluate:()=>v}}}(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,l,f){return this.property.possiblyEvaluate(this,i,l,f)}}class rl{constructor(i){this.property=i,this.value=new Zu(i,void 0)}transitioned(i,l){return new g0(this.property,this.value,l,J({},i.transition,this.transition),i.now)}untransitioned(){return new g0(this.property,this.value,null,{},0)}}class nl{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Oe(this._values[i].value.value)}setValue(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new rl(this._values[i].property)),this._values[i].value=new Zu(this._values[i].property,l===null?void 0:Oe(l))}getTransition(i){return Oe(this._values[i].transition)}setTransition(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new rl(this._values[i].property)),this._values[i].transition=Oe(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(i[l]=f);const m=this.getTransition(l);m!==void 0&&(i[`${l}-transition`]=m)}return i}transitioned(i,l){const f=new _f(this._properties);for(const m of Object.keys(this._values))f._values[m]=this._values[m].transitioned(i,l._values[m]);return f}untransitioned(){const i=new _f(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class g0{constructor(i,l,f,m,v){this.property=i,this.value=l,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,i.specification.transition&&(m.delay||m.duration)&&(this.prior=f)}possiblyEvaluate(i,l,f){const m=i.now||0,v=this.value.possiblyEvaluate(i,l,f),x=this.prior;if(x){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return x.possiblyEvaluate(i,l,f);{const w=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,l,f),v,function(A){if(A<=0)return 0;if(A>=1)return 1;const R=A*A,L=R*A;return 4*(A<.5?L:3*(A-R)+L-.75)}(w))}}return v}}class _f{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,f){const m=new Hu(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(i,l,f);return m}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class xc{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Oe(this._values[i].value)}setValue(i,l){this._values[i]=new Zu(this._values[i].property,l===null?void 0:Oe(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(i[l]=f)}return i}possiblyEvaluate(i,l,f){const m=new Hu(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(i,l,f);return m}}class Do{constructor(i,l,f){this.property=i,this.value=l,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,f,m){return this.property.evaluate(this.value,this.parameters,i,l,f,m)}}class Hu{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Et{constructor(i){this.specification=i}possiblyEvaluate(i,l){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(l)}interpolate(i,l,f){const m=ii[this.specification.type];return m?m(i,l,f):i}}class It{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,f,m){return new Do(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},f,m)}:i.expression,l)}interpolate(i,l,f){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new Do(this,{kind:"constant",value:void 0},i.parameters);const m=ii[this.specification.type];if(m){const v=m(i.value.value,l.value.value,f);return new Do(this,{kind:"constant",value:v},i.parameters)}return i}evaluate(i,l,f,m,v,x){return i.kind==="constant"?i.value:i.evaluate(l,f,m,v,x)}}class y extends It{possiblyEvaluate(i,l,f,m){if(i.value===void 0)return new Do(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){const v=i.expression.evaluate(l,null,{},f,m),x=i.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,w=this._calculate(x,x,x,l);return new Do(this,{kind:"constant",value:w},l)}if(i.expression.kind==="camera"){const v=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Do(this,{kind:"constant",value:v},l)}return new Do(this,i.expression,l)}evaluate(i,l,f,m,v,x){if(i.kind==="source"){const w=i.evaluate(l,f,m,v,x);return this._calculate(w,w,w,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},f,m),i.evaluate({zoom:Math.floor(l.zoom)},f,m),i.evaluate({zoom:Math.floor(l.zoom)+1},f,m),l):i.value}_calculate(i,l,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:f,to:l}}interpolate(i){return i}}class o{constructor(i){this.specification=i}possiblyEvaluate(i,l,f,m){if(i.value!==void 0){if(i.expression.kind==="constant"){const v=i.expression.evaluate(l,null,{},f,m);return this._calculate(v,v,v,l)}return this._calculate(i.expression.evaluate(new Pr(Math.floor(l.zoom-1),l)),i.expression.evaluate(new Pr(Math.floor(l.zoom),l)),i.expression.evaluate(new Pr(Math.floor(l.zoom+1),l)),l)}}_calculate(i,l,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:f,to:l}}interpolate(i){return i}}class u{constructor(i){this.specification=i}possiblyEvaluate(i,l,f,m){return!!i.expression.evaluate(l,null,{},f,m)}interpolate(){return!1}}class p{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in i){const f=i[l];f.specification.overridable&&this.overridableProperties.push(l);const m=this.defaultPropertyValues[l]=new Zu(f,void 0),v=this.defaultTransitionablePropertyValues[l]=new rl(f);this.defaultTransitioningPropertyValues[l]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}}}yt("DataDrivenProperty",It),yt("DataConstantProperty",Et),yt("CrossFadedDataDrivenProperty",y),yt("CrossFadedProperty",o),yt("ColorRampProperty",u);const g="-transition";class _ extends ri{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new xc(l.layout)),l.paint)){this._transitionablePaint=new nl(l.paint);for(const f in i.paint)this.setPaintProperty(f,i.paint[f],{validate:!1});for(const f in i.layout)this.setLayoutProperty(f,i.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Hu(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,l,f={}){l!=null&&this._validate(u0,`layers.${this.id}.layout.${i}`,i,l,f)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return i.endsWith(g)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,f={}){if(l!=null&&this._validate(c0,`layers.${this.id}.paint.${i}`,i,l,f))return!1;if(i.endsWith(g))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const m=this._transitionablePaint._values[i],v=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),w=m.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const A=this._transitionablePaint._values[i].value;return A.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(i,w,A)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,l,f){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),De(i,(l,f)=>!(l===void 0||f==="layout"&&!Object.keys(l).length||f==="paint"&&!Object.keys(l).length))}_validate(i,l,f,m,v={}){return(!v||v.validate!==!1)&&mf(this,i.call(yc,{key:l,layerType:this.type,objectKey:f,value:m,styleSpec:Le,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof Do&&sa(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const S={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class C{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class M{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function k(a,i=1){let l=0,f=0;return{members:a.map(m=>{const v=S[m.type].BYTES_PER_ELEMENT,x=l=B(l,Math.max(i,v)),w=m.components||1;return f=Math.max(f,v),l+=v*w,{name:m.name,type:m.type,components:w,offset:x}}),size:B(l,Math.max(f,i)),alignment:i}}function B(a,i){return Math.ceil(a/i)*i}class F extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const f=this.length;return this.resize(f+1),this.emplace(f,i,l)}emplace(i,l,f){const m=2*i;return this.int16[m+0]=l,this.int16[m+1]=f,i}}F.prototype.bytesPerElement=4,yt("StructArrayLayout2i4",F);class X extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,l,f)}emplace(i,l,f,m){const v=3*i;return this.int16[v+0]=l,this.int16[v+1]=f,this.int16[v+2]=m,i}}X.prototype.bytesPerElement=6,yt("StructArrayLayout3i6",X);class te extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,m){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,f,m)}emplace(i,l,f,m,v){const x=4*i;return this.int16[x+0]=l,this.int16[x+1]=f,this.int16[x+2]=m,this.int16[x+3]=v,i}}te.prototype.bytesPerElement=8,yt("StructArrayLayout4i8",te);class oe extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,m,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,l,f,m,v,x)}emplace(i,l,f,m,v,x,w){const A=6*i;return this.int16[A+0]=l,this.int16[A+1]=f,this.int16[A+2]=m,this.int16[A+3]=v,this.int16[A+4]=x,this.int16[A+5]=w,i}}oe.prototype.bytesPerElement=12,yt("StructArrayLayout2i4i12",oe);class me extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,m,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,l,f,m,v,x)}emplace(i,l,f,m,v,x,w){const A=4*i,R=8*i;return this.int16[A+0]=l,this.int16[A+1]=f,this.uint8[R+4]=m,this.uint8[R+5]=v,this.uint8[R+6]=x,this.uint8[R+7]=w,i}}me.prototype.bytesPerElement=8,yt("StructArrayLayout2i4ub8",me);class le extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const f=this.length;return this.resize(f+1),this.emplace(f,i,l)}emplace(i,l,f){const m=2*i;return this.float32[m+0]=l,this.float32[m+1]=f,i}}le.prototype.bytesPerElement=8,yt("StructArrayLayout2f8",le);class ve extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f,m,v,x,w,A,R,L){const z=this.length;return this.resize(z+1),this.emplace(z,i,l,f,m,v,x,w,A,R,L)}emplace(i,l,f,m,v,x,w,A,R,L,z){const N=10*i;return this.uint16[N+0]=l,this.uint16[N+1]=f,this.uint16[N+2]=m,this.uint16[N+3]=v,this.uint16[N+4]=x,this.uint16[N+5]=w,this.uint16[N+6]=A,this.uint16[N+7]=R,this.uint16[N+8]=L,this.uint16[N+9]=z,i}}ve.prototype.bytesPerElement=20,yt("StructArrayLayout10ui20",ve);class be extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f,m,v,x,w,A,R,L,z,N){const G=this.length;return this.resize(G+1),this.emplace(G,i,l,f,m,v,x,w,A,R,L,z,N)}emplace(i,l,f,m,v,x,w,A,R,L,z,N,G){const Y=12*i;return this.int16[Y+0]=l,this.int16[Y+1]=f,this.int16[Y+2]=m,this.int16[Y+3]=v,this.uint16[Y+4]=x,this.uint16[Y+5]=w,this.uint16[Y+6]=A,this.uint16[Y+7]=R,this.int16[Y+8]=L,this.int16[Y+9]=z,this.int16[Y+10]=N,this.int16[Y+11]=G,i}}be.prototype.bytesPerElement=24,yt("StructArrayLayout4i4ui4i24",be);class pe extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,l,f)}emplace(i,l,f,m){const v=3*i;return this.float32[v+0]=l,this.float32[v+1]=f,this.float32[v+2]=m,i}}pe.prototype.bytesPerElement=12,yt("StructArrayLayout3f12",pe);class Ee extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}Ee.prototype.bytesPerElement=4,yt("StructArrayLayout1ul4",Ee);class Ie extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f,m,v,x,w,A,R){const L=this.length;return this.resize(L+1),this.emplace(L,i,l,f,m,v,x,w,A,R)}emplace(i,l,f,m,v,x,w,A,R,L){const z=10*i,N=5*i;return this.int16[z+0]=l,this.int16[z+1]=f,this.int16[z+2]=m,this.int16[z+3]=v,this.int16[z+4]=x,this.int16[z+5]=w,this.uint32[N+3]=A,this.uint16[z+8]=R,this.uint16[z+9]=L,i}}Ie.prototype.bytesPerElement=20,yt("StructArrayLayout6i1ul2ui20",Ie);class ke extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,m,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,l,f,m,v,x)}emplace(i,l,f,m,v,x,w){const A=6*i;return this.int16[A+0]=l,this.int16[A+1]=f,this.int16[A+2]=m,this.int16[A+3]=v,this.int16[A+4]=x,this.int16[A+5]=w,i}}ke.prototype.bytesPerElement=12,yt("StructArrayLayout2i2i2i12",ke);class Ne extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,f,m,v)}emplace(i,l,f,m,v,x){const w=4*i,A=8*i;return this.float32[w+0]=l,this.float32[w+1]=f,this.float32[w+2]=m,this.int16[A+6]=v,this.int16[A+7]=x,i}}Ne.prototype.bytesPerElement=16,yt("StructArrayLayout2f1f2i16",Ne);class Ge extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,m,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,l,f,m,v,x)}emplace(i,l,f,m,v,x,w){const A=16*i,R=4*i,L=8*i;return this.uint8[A+0]=l,this.uint8[A+1]=f,this.float32[R+1]=m,this.float32[R+2]=v,this.int16[L+6]=x,this.int16[L+7]=w,i}}Ge.prototype.bytesPerElement=16,yt("StructArrayLayout2ub2f2i16",Ge);class ft extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,l,f)}emplace(i,l,f,m){const v=3*i;return this.uint16[v+0]=l,this.uint16[v+1]=f,this.uint16[v+2]=m,i}}ft.prototype.bytesPerElement=6,yt("StructArrayLayout3ui6",ft);class pt extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,m,v,x,w,A,R,L,z,N,G,Y,ne,ce,ye){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,i,l,f,m,v,x,w,A,R,L,z,N,G,Y,ne,ce,ye)}emplace(i,l,f,m,v,x,w,A,R,L,z,N,G,Y,ne,ce,ye,Ce){const xe=24*i,Ae=12*i,ze=48*i;return this.int16[xe+0]=l,this.int16[xe+1]=f,this.uint16[xe+2]=m,this.uint16[xe+3]=v,this.uint32[Ae+2]=x,this.uint32[Ae+3]=w,this.uint32[Ae+4]=A,this.uint16[xe+10]=R,this.uint16[xe+11]=L,this.uint16[xe+12]=z,this.float32[Ae+7]=N,this.float32[Ae+8]=G,this.uint8[ze+36]=Y,this.uint8[ze+37]=ne,this.uint8[ze+38]=ce,this.uint32[Ae+10]=ye,this.int16[xe+22]=Ce,i}}pt.prototype.bytesPerElement=48,yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",pt);class Ke extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,m,v,x,w,A,R,L,z,N,G,Y,ne,ce,ye,Ce,xe,Ae,ze,je,ht,wt,st,nt,vt,At){const lt=this.length;return this.resize(lt+1),this.emplace(lt,i,l,f,m,v,x,w,A,R,L,z,N,G,Y,ne,ce,ye,Ce,xe,Ae,ze,je,ht,wt,st,nt,vt,At)}emplace(i,l,f,m,v,x,w,A,R,L,z,N,G,Y,ne,ce,ye,Ce,xe,Ae,ze,je,ht,wt,st,nt,vt,At,lt){const $e=32*i,bt=16*i;return this.int16[$e+0]=l,this.int16[$e+1]=f,this.int16[$e+2]=m,this.int16[$e+3]=v,this.int16[$e+4]=x,this.int16[$e+5]=w,this.int16[$e+6]=A,this.int16[$e+7]=R,this.uint16[$e+8]=L,this.uint16[$e+9]=z,this.uint16[$e+10]=N,this.uint16[$e+11]=G,this.uint16[$e+12]=Y,this.uint16[$e+13]=ne,this.uint16[$e+14]=ce,this.uint16[$e+15]=ye,this.uint16[$e+16]=Ce,this.uint16[$e+17]=xe,this.uint16[$e+18]=Ae,this.uint16[$e+19]=ze,this.uint16[$e+20]=je,this.uint16[$e+21]=ht,this.uint16[$e+22]=wt,this.uint32[bt+12]=st,this.float32[bt+13]=nt,this.float32[bt+14]=vt,this.uint16[$e+30]=At,this.uint16[$e+31]=lt,i}}Ke.prototype.bytesPerElement=64,yt("StructArrayLayout8i15ui1ul2f2ui64",Ke);class Je extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}Je.prototype.bytesPerElement=4,yt("StructArrayLayout1f4",Je);class xt extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,l,f)}emplace(i,l,f,m){const v=3*i;return this.uint16[6*i+0]=l,this.float32[v+1]=f,this.float32[v+2]=m,i}}xt.prototype.bytesPerElement=12,yt("StructArrayLayout1ui2f12",xt);class Ft extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,l,f)}emplace(i,l,f,m){const v=4*i;return this.uint32[2*i+0]=l,this.uint16[v+2]=f,this.uint16[v+3]=m,i}}Ft.prototype.bytesPerElement=8,yt("StructArrayLayout1ul2ui8",Ft);class rt extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const f=this.length;return this.resize(f+1),this.emplace(f,i,l)}emplace(i,l,f){const m=2*i;return this.uint16[m+0]=l,this.uint16[m+1]=f,i}}rt.prototype.bytesPerElement=4,yt("StructArrayLayout2ui4",rt);class at extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}at.prototype.bytesPerElement=2,yt("StructArrayLayout1ui2",at);class Dt extends M{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,m){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,f,m)}emplace(i,l,f,m,v){const x=4*i;return this.float32[x+0]=l,this.float32[x+1]=f,this.float32[x+2]=m,this.float32[x+3]=v,i}}Dt.prototype.bytesPerElement=16,yt("StructArrayLayout4f16",Dt);class Mr extends C{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}Mr.prototype.size=20;class Gt extends Ie{get(i){return new Mr(this,i)}}yt("CollisionBoxArray",Gt);class ir extends C{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ir.prototype.size=48;class Rr extends pt{get(i){return new ir(this,i)}}yt("PlacedSymbolArray",Rr);class Un extends C{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Un.prototype.size=64;class io extends Ke{get(i){return new Un(this,i)}}yt("SymbolInstanceArray",io);class kr extends Je{getoffsetX(i){return this.float32[1*i+0]}}yt("GlyphOffsetArray",kr);class vi extends X{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}yt("SymbolLineVertexArray",vi);class oi extends C{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}oi.prototype.size=12;class Zn extends xt{get(i){return new oi(this,i)}}yt("TextAnchorOffsetArray",Zn);class Hn extends C{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Hn.prototype.size=8;class oo extends Ft{get(i){return new Hn(this,i)}}yt("FeatureIndexArray",oo);class ms extends F{}class Wu extends F{}class il extends F{}class gs extends oe{}class Gu extends me{}class xf extends le{}class Dn extends ve{}class ao extends be{}class Na extends pe{}class ol extends Ee{}class Wn extends ke{}class Gn extends Ge{}class Pn extends ft{}class jr extends rt{}const al=k([{name:"a_pos",components:2,type:"Int16"}],4),{members:bf}=al;class vn{constructor(i=[]){this.segments=i}prepareSegment(i,l,f,m){let v=this.segments[this.segments.length-1];return i>vn.MAX_VERTEX_ARRAY_LENGTH&&qe(`Max vertices per segment is ${vn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!v||v.vertexLength+i>vn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:l.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,f,m){return new vn([{vertexOffset:i,primitiveOffset:l,vertexLength:f,primitiveLength:m,vaos:{},sortKey:0}])}}function y0(a,i){return 256*(a=de(Math.floor(a),0,255))+de(Math.floor(i),0,255)}vn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yt("SegmentVector",vn);const qu=k([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ku={exports:{}},ja={exports:{}};ja.exports=function(a,i){var l,f,m,v,x,w,A,R;for(f=a.length-(l=3&a.length),m=i,x=3432918353,w=461845907,R=0;R<f;)A=255&a.charCodeAt(R)|(255&a.charCodeAt(++R))<<8|(255&a.charCodeAt(++R))<<16|(255&a.charCodeAt(++R))<<24,++R,m=27492+(65535&(v=5*(65535&(m=(m^=A=(65535&(A=(A=(65535&A)*x+(((A>>>16)*x&65535)<<16)&4294967295)<<15|A>>>17))*w+(((A>>>16)*w&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(A=0,l){case 3:A^=(255&a.charCodeAt(R+2))<<16;case 2:A^=(255&a.charCodeAt(R+1))<<8;case 1:m^=A=(65535&(A=(A=(65535&(A^=255&a.charCodeAt(R)))*x+(((A>>>16)*x&65535)<<16)&4294967295)<<15|A>>>17))*w+(((A>>>16)*w&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var v0=ja.exports,wf={exports:{}};wf.exports=function(a,i){for(var l,f=a.length,m=i^f,v=0;f>=4;)l=1540483477*(65535&(l=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),f-=4,++v;switch(f){case 3:m^=(255&a.charCodeAt(v+2))<<16;case 2:m^=(255&a.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Sf=v0,Ef=wf.exports;Ku.exports=Sf,Ku.exports.murmur3=Sf,Ku.exports.murmur2=Ef;var Xu=b(Ku.exports);class sl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,f,m){this.ids.push(XS(i)),this.positions.push(l,f,m)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=XS(i);let f=0,m=this.ids.length-1;for(;f<m;){const x=f+m>>1;this.ids[x]>=l?m=x:f=x+1}const v=[];for(;this.ids[f]===l;)v.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return v}static serialize(i,l){const f=new Float64Array(i.ids),m=new Uint32Array(i.positions);return xv(f,m,0,f.length-1),l&&l.push(f.buffer,m.buffer),{ids:f,positions:m}}static deserialize(i){const l=new sl;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function XS(a){const i=+a;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Xu(String(a))}function xv(a,i,l,f){for(;l<f;){const m=a[l+f>>1];let v=l-1,x=f+1;for(;;){do v++;while(a[v]<m);do x--;while(a[x]>m);if(v>=x)break;_0(a,v,x),_0(i,3*v,3*x),_0(i,3*v+1,3*x+1),_0(i,3*v+2,3*x+2)}x-l<f-x?(xv(a,i,l,x),l=x+1):(xv(a,i,x+1,f),f=x)}}function _0(a,i,l){const f=a[i];a[i]=a[l],a[l]=f}yt("FeaturePositionMap",sl);class bc{constructor(i,l){this.gl=i.gl,this.location=l}}class x0 extends bc{constructor(i,l){super(i,l),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class YS extends bc{constructor(i,l){super(i,l),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class JS extends bc{constructor(i,l){super(i,l),this.current=Kt.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const uk=new Float32Array(16);function bv(a){return[y0(255*a.r,255*a.g),y0(255*a.b,255*a.a)]}class Af{constructor(i,l,f){this.value=i,this.uniformNames=l.map(m=>`u_${m}`),this.type=f}setUniform(i,l,f){i.set(f.constantOr(this.value))}getBinding(i,l,f){return this.type==="color"?new JS(i,l):new x0(i,l)}}class Yu{constructor(i,l){this.uniformNames=l.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=i.tlbr}setUniform(i,l,f,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&i.set(v)}getBinding(i,l,f){return f.substr(0,9)==="u_pattern"?new YS(i,l):new x0(i,l)}}class ys{constructor(i,l,f,m){this.expression=i,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map(v=>({name:`a_${v}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(i,l,f,m,v){const x=this.paintVertexArray.length,w=this.expression.evaluate(new Pr(0),l,{},m,[],v);this.paintVertexArray.resize(i),this._setPaintValue(x,i,w)}updatePaintArray(i,l,f,m){const v=this.expression.evaluate({zoom:0},f,m);this._setPaintValue(i,l,v)}_setPaintValue(i,l,f){if(this.type==="color"){const m=bv(f);for(let v=i;v<l;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=i;m<l;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ua{constructor(i,l,f,m,v,x){this.expression=i,this.uniformNames=l.map(w=>`u_${w}_t`),this.type=f,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=l.map(w=>({name:`a_${w}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,l,f,m,v){const x=this.expression.evaluate(new Pr(this.zoom),l,{},m,[],v),w=this.expression.evaluate(new Pr(this.zoom+1),l,{},m,[],v),A=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(A,i,x,w)}updatePaintArray(i,l,f,m){const v=this.expression.evaluate({zoom:this.zoom},f,m),x=this.expression.evaluate({zoom:this.zoom+1},f,m);this._setPaintValue(i,l,v,x)}_setPaintValue(i,l,f,m){if(this.type==="color"){const v=bv(f),x=bv(m);for(let w=i;w<l;w++)this.paintVertexArray.emplace(w,v[0],v[1],x[0],x[1])}else{for(let v=i;v<l;v++)this.paintVertexArray.emplace(v,f,m);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(m))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l){const f=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=de(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);i.set(m)}getBinding(i,l,f){return new x0(i,l)}}class ll{constructor(i,l,f,m,v,x){this.expression=i,this.type=l,this.useIntegerZoom=f,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(i,l,f){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(m,i,l.patterns&&l.patterns[this.layerId],f)}updatePaintArray(i,l,f,m,v){this._setPaintValues(i,l,f.patterns&&f.patterns[this.layerId],v)}_setPaintValues(i,l,f,m){if(!m||!f)return;const{min:v,mid:x,max:w}=f,A=m[v],R=m[x],L=m[w];if(A&&R&&L)for(let z=i;z<l;z++)this.zoomInPaintVertexArray.emplace(z,R.tl[0],R.tl[1],R.br[0],R.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],R.pixelRatio,A.pixelRatio),this.zoomOutPaintVertexArray.emplace(z,R.tl[0],R.tl[1],R.br[0],R.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],R.pixelRatio,L.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,qu.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,qu.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class QS{constructor(i,l,f){this.binders={},this._buffers=[];const m=[];for(const v in i.paint._values){if(!f(v))continue;const x=i.paint.get(v);if(!(x instanceof Do&&sa(x.property.specification)))continue;const w=hk(v,i.type),A=x.value,R=x.property.specification.type,L=x.property.useIntegerZoom,z=x.property.specification["property-type"],N=z==="cross-faded"||z==="cross-faded-data-driven";if(A.kind==="constant")this.binders[v]=N?new Yu(A.value,w):new Af(A.value,w,R),m.push(`/u_${v}`);else if(A.kind==="source"||N){const G=e6(v,R,"source");this.binders[v]=N?new ll(A,R,L,l,G,i.id):new ys(A,w,R,G),m.push(`/a_${v}`)}else{const G=e6(v,R,"composite");this.binders[v]=new ua(A,w,R,L,l,G),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof ys||l instanceof ua?l.maxValue:0}populatePaintArrays(i,l,f,m,v){for(const x in this.binders){const w=this.binders[x];(w instanceof ys||w instanceof ua||w instanceof ll)&&w.populatePaintArray(i,l,f,m,v)}}setConstantPatternPositions(i,l){for(const f in this.binders){const m=this.binders[f];m instanceof Yu&&m.setConstantPatternPositions(i,l)}}updatePaintArrays(i,l,f,m,v){let x=!1;for(const w in i){const A=l.getPositions(w);for(const R of A){const L=f.feature(R.index);for(const z in this.binders){const N=this.binders[z];if((N instanceof ys||N instanceof ua||N instanceof ll)&&N.expression.isStateDependent===!0){const G=m.paint.get(z);N.expression=G.value,N.updatePaintArray(R.start,R.end,L,i[w],v),x=!0}}}}return x}defines(){const i=[];for(const l in this.binders){const f=this.binders[l];(f instanceof Af||f instanceof Yu)&&i.push(...f.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof ys||f instanceof ua)for(let m=0;m<f.paintVertexAttributes.length;m++)i.push(f.paintVertexAttributes[m].name);else if(f instanceof ll)for(let m=0;m<qu.members.length;m++)i.push(qu.members[m].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof Af||f instanceof Yu||f instanceof ua)for(const m of f.uniformNames)i.push(m)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,l){const f=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof Af||v instanceof Yu||v instanceof ua){for(const x of v.uniformNames)if(l[x]){const w=v.getBinding(i,l[x],x);f.push({name:x,property:m,binding:w})}}}return f}setUniforms(i,l,f,m){for(const{name:v,property:x,binding:w}of l)this.binders[x].setUniform(w,m,f.get(x),v)}updatePaintBuffers(i){this._buffers=[];for(const l in this.binders){const f=this.binders[l];if(i&&f instanceof ll){const m=i.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(f instanceof ys||f instanceof ua)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(i){for(const l in this.binders){const f=this.binders[l];(f instanceof ys||f instanceof ua||f instanceof ll)&&f.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof ys||l instanceof ua||l instanceof ll)&&l.destroy()}}}class wc{constructor(i,l,f=()=>!0){this.programConfigurations={};for(const m of i)this.programConfigurations[m.id]=new QS(m,l,f);this.needsUpload=!1,this._featureMap=new sl,this._bufferOffset=0}populatePaintArrays(i,l,f,m,v,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(i,l,m,v,x);l.id!==void 0&&this._featureMap.add(l.id,f,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,f,m){for(const v of f)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(i,this._featureMap,l,v,m)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function hk(a,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${i}-`,"").replace(/-/g,"_")]}function e6(a,i,l){const f={color:{source:le,composite:Dt},number:{source:Je,composite:le}},m=function(v){return{"line-pattern":{source:Dn,composite:Dn},"fill-pattern":{source:Dn,composite:Dn},"fill-extrusion-pattern":{source:Dn,composite:Dn}}[v]}(a);return m&&m[l]||f[i][l]}yt("ConstantBinder",Af),yt("CrossFadedConstantBinder",Yu),yt("SourceExpressionBinder",ys),yt("CrossFadedCompositeBinder",ll),yt("CompositeExpressionBinder",ua),yt("ProgramConfiguration",QS,{omit:["_buffers"]}),yt("ProgramConfigurationSet",wc);const hn=8192,wv=Math.pow(2,14)-1,t6=-wv-1;function Sc(a){const i=hn/a.extent,l=a.loadGeometry();for(let f=0;f<l.length;f++){const m=l[f];for(let v=0;v<m.length;v++){const x=m[v],w=Math.round(x.x*i),A=Math.round(x.y*i);x.x=de(w,t6,wv),x.y=de(A,t6,wv),(w<x.x||w>x.x+1||A<x.y||A>x.y+1)&&qe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Ec(a,i){return{type:a.type,id:a.id,properties:a.properties,geometry:i?Sc(a):[]}}function b0(a,i,l,f,m){a.emplaceBack(2*i+(f+1)/2,2*l+(m+1)/2)}class Sv{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Wu,this.indexArray=new Pn,this.segments=new vn,this.programConfigurations=new wc(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,f){const m=this.layers[0],v=[];let x=null,w=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:A,id:R,index:L,sourceLayerIndex:z}of i){const N=this.layers[0]._featureFilter.needGeometry,G=Ec(A,N);if(!this.layers[0]._featureFilter.filter(new Pr(this.zoom),G,f))continue;const Y=w?x.evaluate(G,{},f):void 0,ne={id:R,properties:A.properties,type:A.type,sourceLayerIndex:z,index:L,geometry:N?G.geometry:Sc(A),patterns:{},sortKey:Y};v.push(ne)}w&&v.sort((A,R)=>A.sortKey-R.sortKey);for(const A of v){const{geometry:R,index:L,sourceLayerIndex:z}=A,N=i[L].feature;this.addFeature(A,R,L,f),l.featureIndex.insert(N,R,L,z,this.index)}}update(i,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,bf),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,f,m){for(const v of l)for(const x of v){const w=x.x,A=x.y;if(w<0||w>=hn||A<0||A>=hn)continue;const R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),L=R.vertexLength;b0(this.layoutVertexArray,w,A,-1,-1),b0(this.layoutVertexArray,w,A,1,-1),b0(this.layoutVertexArray,w,A,1,1),b0(this.layoutVertexArray,w,A,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+3,L+2),R.vertexLength+=4,R.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{},m)}}function r6(a,i){for(let l=0;l<a.length;l++)if(Ju(i,a[l]))return!0;for(let l=0;l<i.length;l++)if(Ju(a,i[l]))return!0;return!!Ev(a,i)}function dk(a,i,l){return!!Ju(a,i)||!!Av(i,a,l)}function n6(a,i){if(a.length===1)return o6(i,a[0]);for(let l=0;l<i.length;l++){const f=i[l];for(let m=0;m<f.length;m++)if(Ju(a,f[m]))return!0}for(let l=0;l<a.length;l++)if(o6(i,a[l]))return!0;for(let l=0;l<i.length;l++)if(Ev(a,i[l]))return!0;return!1}function fk(a,i,l){if(a.length>1){if(Ev(a,i))return!0;for(let f=0;f<i.length;f++)if(Av(i[f],a,l))return!0}for(let f=0;f<a.length;f++)if(Av(a[f],i,l))return!0;return!1}function Ev(a,i){if(a.length===0||i.length===0)return!1;for(let l=0;l<a.length-1;l++){const f=a[l],m=a[l+1];for(let v=0;v<i.length-1;v++)if(pk(f,m,i[v],i[v+1]))return!0}return!1}function pk(a,i,l,f){return Ze(a,l,f)!==Ze(i,l,f)&&Ze(a,i,l)!==Ze(a,i,f)}function Av(a,i,l){const f=l*l;if(i.length===1)return a.distSqr(i[0])<f;for(let m=1;m<i.length;m++)if(i6(a,i[m-1],i[m])<f)return!0;return!1}function i6(a,i,l){const f=i.distSqr(l);if(f===0)return a.distSqr(i);const m=((a.x-i.x)*(l.x-i.x)+(a.y-i.y)*(l.y-i.y))/f;return a.distSqr(m<0?i:m>1?l:l.sub(i)._mult(m)._add(i))}function o6(a,i){let l,f,m,v=!1;for(let x=0;x<a.length;x++){l=a[x];for(let w=0,A=l.length-1;w<l.length;A=w++)f=l[w],m=l[A],f.y>i.y!=m.y>i.y&&i.x<(m.x-f.x)*(i.y-f.y)/(m.y-f.y)+f.x&&(v=!v)}return v}function Ju(a,i){let l=!1;for(let f=0,m=a.length-1;f<a.length;m=f++){const v=a[f],x=a[m];v.y>i.y!=x.y>i.y&&i.x<(x.x-v.x)*(i.y-v.y)/(x.y-v.y)+v.x&&(l=!l)}return l}function mk(a,i,l){const f=l[0],m=l[2];if(a.x<f.x&&i.x<f.x||a.x>m.x&&i.x>m.x||a.y<f.y&&i.y<f.y||a.y>m.y&&i.y>m.y)return!1;const v=Ze(a,i,l[0]);return v!==Ze(a,i,l[1])||v!==Ze(a,i,l[2])||v!==Ze(a,i,l[3])}function Cf(a,i,l){const f=i.paint.get(a).value;return f.kind==="constant"?f.value:l.programConfigurations.get(i.id).getMaxValue(a)}function w0(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function S0(a,i,l,f,m){if(!i[0]&&!i[1])return a;const v=P.convert(i)._mult(m);l==="viewport"&&v._rotate(-f);const x=[];for(let w=0;w<a.length;w++)x.push(a[w].sub(v));return x}let a6,s6;yt("CircleBucket",Sv,{omit:["layers"]});var gk={get paint(){return s6=s6||new p({"circle-radius":new It(Le.paint_circle["circle-radius"]),"circle-color":new It(Le.paint_circle["circle-color"]),"circle-blur":new It(Le.paint_circle["circle-blur"]),"circle-opacity":new It(Le.paint_circle["circle-opacity"]),"circle-translate":new Et(Le.paint_circle["circle-translate"]),"circle-translate-anchor":new Et(Le.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Et(Le.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Et(Le.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new It(Le.paint_circle["circle-stroke-width"]),"circle-stroke-color":new It(Le.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new It(Le.paint_circle["circle-stroke-opacity"])})},get layout(){return a6=a6||new p({"circle-sort-key":new It(Le.layout_circle["circle-sort-key"])})}},_i=1e-6,Qu=typeof Float32Array<"u"?Float32Array:Array;function Cv(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function l6(a,i,l){var f=i[0],m=i[1],v=i[2],x=i[3],w=i[4],A=i[5],R=i[6],L=i[7],z=i[8],N=i[9],G=i[10],Y=i[11],ne=i[12],ce=i[13],ye=i[14],Ce=i[15],xe=l[0],Ae=l[1],ze=l[2],je=l[3];return a[0]=xe*f+Ae*w+ze*z+je*ne,a[1]=xe*m+Ae*A+ze*N+je*ce,a[2]=xe*v+Ae*R+ze*G+je*ye,a[3]=xe*x+Ae*L+ze*Y+je*Ce,a[4]=(xe=l[4])*f+(Ae=l[5])*w+(ze=l[6])*z+(je=l[7])*ne,a[5]=xe*m+Ae*A+ze*N+je*ce,a[6]=xe*v+Ae*R+ze*G+je*ye,a[7]=xe*x+Ae*L+ze*Y+je*Ce,a[8]=(xe=l[8])*f+(Ae=l[9])*w+(ze=l[10])*z+(je=l[11])*ne,a[9]=xe*m+Ae*A+ze*N+je*ce,a[10]=xe*v+Ae*R+ze*G+je*ye,a[11]=xe*x+Ae*L+ze*Y+je*Ce,a[12]=(xe=l[12])*f+(Ae=l[13])*w+(ze=l[14])*z+(je=l[15])*ne,a[13]=xe*m+Ae*A+ze*N+je*ce,a[14]=xe*v+Ae*R+ze*G+je*ye,a[15]=xe*x+Ae*L+ze*Y+je*Ce,a}Math.hypot||(Math.hypot=function(){for(var a=0,i=arguments.length;i--;)a+=arguments[i]*arguments[i];return Math.sqrt(a)});var Pf,yk=l6;function E0(a,i,l){var f=i[0],m=i[1],v=i[2],x=i[3];return a[0]=l[0]*f+l[4]*m+l[8]*v+l[12]*x,a[1]=l[1]*f+l[5]*m+l[9]*v+l[13]*x,a[2]=l[2]*f+l[6]*m+l[10]*v+l[14]*x,a[3]=l[3]*f+l[7]*m+l[11]*v+l[15]*x,a}Pf=new Qu(4),Qu!=Float32Array&&(Pf[0]=0,Pf[1]=0,Pf[2]=0,Pf[3]=0);class vk extends _{constructor(i){super(i,gk)}createBucket(i){return new Sv(i)}queryRadius(i){const l=i;return Cf("circle-radius",this,l)+Cf("circle-stroke-width",this,l)+w0(this.paint.get("circle-translate"))}queryIntersectsFeature(i,l,f,m,v,x,w,A){const R=S0(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),L=this.paint.get("circle-radius").evaluate(l,f)+this.paint.get("circle-stroke-width").evaluate(l,f),z=this.paint.get("circle-pitch-alignment")==="map",N=z?R:function(Y,ne){return Y.map(ce=>c6(ce,ne))}(R,A),G=z?L*w:L;for(const Y of m)for(const ne of Y){const ce=z?ne:c6(ne,A);let ye=G;const Ce=E0([],[ne.x,ne.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ye*=Ce[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ye*=x.cameraToCenterDistance/Ce[3]),dk(N,ce,ye))return!0}return!1}}function c6(a,i){const l=E0([],[a.x,a.y,0,1],i);return new P(l[0]/l[3],l[1]/l[3])}class u6 extends Sv{}let h6;yt("HeatmapBucket",u6,{omit:["layers"]});var _k={get paint(){return h6=h6||new p({"heatmap-radius":new It(Le.paint_heatmap["heatmap-radius"]),"heatmap-weight":new It(Le.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Et(Le.paint_heatmap["heatmap-intensity"]),"heatmap-color":new u(Le.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Et(Le.paint_heatmap["heatmap-opacity"])})}};function Pv(a,{width:i,height:l},f,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==i*l*f)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${i*l*f}`)}else m=new Uint8Array(i*l*f);return a.width=i,a.height=l,a.data=m,a}function d6(a,{width:i,height:l},f){if(i===a.width&&l===a.height)return;const m=Pv({},{width:i,height:l},f);Tv(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,i),height:Math.min(a.height,l)},f),a.width=i,a.height=l,a.data=m.data}function Tv(a,i,l,f,m,v){if(m.width===0||m.height===0)return i;if(m.width>a.width||m.height>a.height||l.x>a.width-m.width||l.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||f.x>i.width-m.width||f.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,w=i.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let A=0;A<m.height;A++){const R=((l.y+A)*a.width+l.x)*v,L=((f.y+A)*i.width+f.x)*v;for(let z=0;z<m.width*v;z++)w[L+z]=x[R+z]}return i}class Tf{constructor(i,l){Pv(this,i,1,l)}resize(i){d6(this,i,1)}clone(){return new Tf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,f,m,v){Tv(i,l,f,m,v,1)}}class so{constructor(i,l){Pv(this,i,4,l)}resize(i){d6(this,i,4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new so({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,f,m,v){Tv(i,l,f,m,v,4)}}function f6(a){const i={},l=a.resolution||256,f=a.clips?a.clips.length:1,m=a.image||new so({width:l,height:f});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const v=(x,w,A)=>{i[a.evaluationKey]=A;const R=a.expression.evaluate(i);m.data[x+w+0]=Math.floor(255*R.r/R.a),m.data[x+w+1]=Math.floor(255*R.g/R.a),m.data[x+w+2]=Math.floor(255*R.b/R.a),m.data[x+w+3]=Math.floor(255*R.a)};if(a.clips)for(let x=0,w=0;x<f;++x,w+=4*l)for(let A=0,R=0;A<l;A++,R+=4){const L=A/(l-1),{start:z,end:N}=a.clips[x];v(w,R,z*(1-L)+N*L)}else for(let x=0,w=0;x<l;x++,w+=4)v(0,w,x/(l-1));return m}yt("AlphaImage",Tf),yt("RGBAImage",so);class xk extends _{createBucket(i){return new u6(i)}constructor(i){super(i,_k),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=f6({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let p6;var bk={get paint(){return p6=p6||new p({"hillshade-illumination-direction":new Et(Le.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Et(Le.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Et(Le.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Et(Le.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Et(Le.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Et(Le.paint_hillshade["hillshade-accent-color"])})}};class wk extends _{constructor(i){super(i,bk)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Sk=k([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ek}=Sk;var Iv={exports:{}};function A0(a,i,l){l=l||2;var f,m,v,x,w,A,R,L=i&&i.length,z=L?i[0]*l:a.length,N=m6(a,0,z,l,!0),G=[];if(!N||N.next===N.prev)return G;if(L&&(N=function(ne,ce,ye,Ce){var xe,Ae,ze,je=[];for(xe=0,Ae=ce.length;xe<Ae;xe++)(ze=m6(ne,ce[xe]*Ce,xe<Ae-1?ce[xe+1]*Ce:ne.length,Ce,!1))===ze.next&&(ze.steiner=!0),je.push(kk(ze));for(je.sort(Ik),xe=0;xe<je.length;xe++)ye=Mk(je[xe],ye);return ye}(a,i,N,l)),a.length>80*l){f=v=a[0],m=x=a[1];for(var Y=l;Y<z;Y+=l)(w=a[Y])<f&&(f=w),(A=a[Y+1])<m&&(m=A),w>v&&(v=w),A>x&&(x=A);R=(R=Math.max(v-f,x-m))!==0?32767/R:0}return If(N,G,l,f,m,R,0),G}function m6(a,i,l,f,m){var v,x;if(m===kv(a,i,l,f)>0)for(v=i;v<l;v+=f)x=v6(v,a[v],a[v+1],x);else for(v=l-f;v>=i;v-=f)x=v6(v,a[v],a[v+1],x);return x&&C0(x,x.next)&&(Rf(x),x=x.next),x}function Ac(a,i){if(!a)return a;i||(i=a);var l,f=a;do if(l=!1,f.steiner||!C0(f,f.next)&&tn(f.prev,f,f.next)!==0)f=f.next;else{if(Rf(f),(f=i=f.prev)===f.next)break;l=!0}while(l||f!==i);return i}function If(a,i,l,f,m,v,x){if(a){!x&&v&&function(L,z,N,G){var Y=L;do Y.z===0&&(Y.z=Mv(Y.x,Y.y,z,N,G)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==L);Y.prevZ.nextZ=null,Y.prevZ=null,function(ne){var ce,ye,Ce,xe,Ae,ze,je,ht,wt=1;do{for(ye=ne,ne=null,Ae=null,ze=0;ye;){for(ze++,Ce=ye,je=0,ce=0;ce<wt&&(je++,Ce=Ce.nextZ);ce++);for(ht=wt;je>0||ht>0&&Ce;)je!==0&&(ht===0||!Ce||ye.z<=Ce.z)?(xe=ye,ye=ye.nextZ,je--):(xe=Ce,Ce=Ce.nextZ,ht--),Ae?Ae.nextZ=xe:ne=xe,xe.prevZ=Ae,Ae=xe;ye=Ce}Ae.nextZ=null,wt*=2}while(ze>1)}(Y)}(a,f,m,v);for(var w,A,R=a;a.prev!==a.next;)if(w=a.prev,A=a.next,v?Ck(a,f,m,v):Ak(a))i.push(w.i/l|0),i.push(a.i/l|0),i.push(A.i/l|0),Rf(a),a=A.next,R=A.next;else if((a=A)===R){x?x===1?If(a=Pk(Ac(a),i,l),i,l,f,m,v,2):x===2&&Tk(a,i,l,f,m,v):If(Ac(a),i,l,f,m,v,1);break}}}function Ak(a){var i=a.prev,l=a,f=a.next;if(tn(i,l,f)>=0)return!1;for(var m=i.x,v=l.x,x=f.x,w=i.y,A=l.y,R=f.y,L=m<v?m<x?m:x:v<x?v:x,z=w<A?w<R?w:R:A<R?A:R,N=m>v?m>x?m:x:v>x?v:x,G=w>A?w>R?w:R:A>R?A:R,Y=f.next;Y!==i;){if(Y.x>=L&&Y.x<=N&&Y.y>=z&&Y.y<=G&&eh(m,w,v,A,x,R,Y.x,Y.y)&&tn(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function Ck(a,i,l,f){var m=a.prev,v=a,x=a.next;if(tn(m,v,x)>=0)return!1;for(var w=m.x,A=v.x,R=x.x,L=m.y,z=v.y,N=x.y,G=w<A?w<R?w:R:A<R?A:R,Y=L<z?L<N?L:N:z<N?z:N,ne=w>A?w>R?w:R:A>R?A:R,ce=L>z?L>N?L:N:z>N?z:N,ye=Mv(G,Y,i,l,f),Ce=Mv(ne,ce,i,l,f),xe=a.prevZ,Ae=a.nextZ;xe&&xe.z>=ye&&Ae&&Ae.z<=Ce;){if(xe.x>=G&&xe.x<=ne&&xe.y>=Y&&xe.y<=ce&&xe!==m&&xe!==x&&eh(w,L,A,z,R,N,xe.x,xe.y)&&tn(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,Ae.x>=G&&Ae.x<=ne&&Ae.y>=Y&&Ae.y<=ce&&Ae!==m&&Ae!==x&&eh(w,L,A,z,R,N,Ae.x,Ae.y)&&tn(Ae.prev,Ae,Ae.next)>=0))return!1;Ae=Ae.nextZ}for(;xe&&xe.z>=ye;){if(xe.x>=G&&xe.x<=ne&&xe.y>=Y&&xe.y<=ce&&xe!==m&&xe!==x&&eh(w,L,A,z,R,N,xe.x,xe.y)&&tn(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;Ae&&Ae.z<=Ce;){if(Ae.x>=G&&Ae.x<=ne&&Ae.y>=Y&&Ae.y<=ce&&Ae!==m&&Ae!==x&&eh(w,L,A,z,R,N,Ae.x,Ae.y)&&tn(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.nextZ}return!0}function Pk(a,i,l){var f=a;do{var m=f.prev,v=f.next.next;!C0(m,v)&&g6(m,f,f.next,v)&&Mf(m,v)&&Mf(v,m)&&(i.push(m.i/l|0),i.push(f.i/l|0),i.push(v.i/l|0),Rf(f),Rf(f.next),f=a=v),f=f.next}while(f!==a);return Ac(f)}function Tk(a,i,l,f,m,v){var x=a;do{for(var w=x.next.next;w!==x.prev;){if(x.i!==w.i&&Lk(x,w)){var A=y6(x,w);return x=Ac(x,x.next),A=Ac(A,A.next),If(x,i,l,f,m,v,0),void If(A,i,l,f,m,v,0)}w=w.next}x=x.next}while(x!==a)}function Ik(a,i){return a.x-i.x}function Mk(a,i){var l=function(m,v){var x,w=v,A=m.x,R=m.y,L=-1/0;do{if(R<=w.y&&R>=w.next.y&&w.next.y!==w.y){var z=w.x+(R-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(z<=A&&z>L&&(L=z,x=w.x<w.next.x?w:w.next,z===A))return x}w=w.next}while(w!==v);if(!x)return null;var N,G=x,Y=x.x,ne=x.y,ce=1/0;w=x;do A>=w.x&&w.x>=Y&&A!==w.x&&eh(R<ne?A:L,R,Y,ne,R<ne?L:A,R,w.x,w.y)&&(N=Math.abs(R-w.y)/(A-w.x),Mf(w,m)&&(N<ce||N===ce&&(w.x>x.x||w.x===x.x&&Rk(x,w)))&&(x=w,ce=N)),w=w.next;while(w!==G);return x}(a,i);if(!l)return i;var f=y6(l,a);return Ac(f,f.next),Ac(l,l.next)}function Rk(a,i){return tn(a.prev,a,i.prev)<0&&tn(i.next,a,a.next)<0}function Mv(a,i,l,f,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-l)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-f)*m|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function kk(a){var i=a,l=a;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==a);return l}function eh(a,i,l,f,m,v,x,w){return(m-x)*(i-w)>=(a-x)*(v-w)&&(a-x)*(f-w)>=(l-x)*(i-w)&&(l-x)*(v-w)>=(m-x)*(f-w)}function Lk(a,i){return a.next.i!==i.i&&a.prev.i!==i.i&&!function(l,f){var m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==f.i&&m.next.i!==f.i&&g6(m,m.next,l,f))return!0;m=m.next}while(m!==l);return!1}(a,i)&&(Mf(a,i)&&Mf(i,a)&&function(l,f){var m=l,v=!1,x=(l.x+f.x)/2,w=(l.y+f.y)/2;do m.y>w!=m.next.y>w&&m.next.y!==m.y&&x<(m.next.x-m.x)*(w-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==l);return v}(a,i)&&(tn(a.prev,a,i.prev)||tn(a,i.prev,i))||C0(a,i)&&tn(a.prev,a,a.next)>0&&tn(i.prev,i,i.next)>0)}function tn(a,i,l){return(i.y-a.y)*(l.x-i.x)-(i.x-a.x)*(l.y-i.y)}function C0(a,i){return a.x===i.x&&a.y===i.y}function g6(a,i,l,f){var m=T0(tn(a,i,l)),v=T0(tn(a,i,f)),x=T0(tn(l,f,a)),w=T0(tn(l,f,i));return m!==v&&x!==w||!(m!==0||!P0(a,l,i))||!(v!==0||!P0(a,f,i))||!(x!==0||!P0(l,a,f))||!(w!==0||!P0(l,i,f))}function P0(a,i,l){return i.x<=Math.max(a.x,l.x)&&i.x>=Math.min(a.x,l.x)&&i.y<=Math.max(a.y,l.y)&&i.y>=Math.min(a.y,l.y)}function T0(a){return a>0?1:a<0?-1:0}function Mf(a,i){return tn(a.prev,a,a.next)<0?tn(a,i,a.next)>=0&&tn(a,a.prev,i)>=0:tn(a,i,a.prev)<0||tn(a,a.next,i)<0}function y6(a,i){var l=new Rv(a.i,a.x,a.y),f=new Rv(i.i,i.x,i.y),m=a.next,v=i.prev;return a.next=i,i.prev=a,l.next=m,m.prev=l,f.next=l,l.prev=f,v.next=f,f.prev=v,f}function v6(a,i,l,f){var m=new Rv(a,i,l);return f?(m.next=f.next,m.prev=f,f.next.prev=m,f.next=m):(m.prev=m,m.next=m),m}function Rf(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Rv(a,i,l){this.i=a,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kv(a,i,l,f){for(var m=0,v=i,x=l-f;v<l;v+=f)m+=(a[x]-a[v])*(a[v+1]+a[x+1]),x=v;return m}Iv.exports=A0,Iv.exports.default=A0,A0.deviation=function(a,i,l,f){var m=i&&i.length,v=Math.abs(kv(a,0,m?i[0]*l:a.length,l));if(m)for(var x=0,w=i.length;x<w;x++)v-=Math.abs(kv(a,i[x]*l,x<w-1?i[x+1]*l:a.length,l));var A=0;for(x=0;x<f.length;x+=3){var R=f[x]*l,L=f[x+1]*l,z=f[x+2]*l;A+=Math.abs((a[R]-a[z])*(a[L+1]-a[R+1])-(a[R]-a[L])*(a[z+1]-a[R+1]))}return v===0&&A===0?0:Math.abs((A-v)/v)},A0.flatten=function(a){for(var i=a[0][0].length,l={vertices:[],holes:[],dimensions:i},f=0,m=0;m<a.length;m++){for(var v=0;v<a[m].length;v++)for(var x=0;x<i;x++)l.vertices.push(a[m][v][x]);m>0&&l.holes.push(f+=a[m-1].length)}return l};var _6=b(Iv.exports);function Lv(a,i,l){const f=l.patternDependencies;let m=!1;for(const v of i){const x=v.paint.get(`${a}-pattern`);x.isConstant()||(m=!0);const w=x.constantOr(null);w&&(m=!0,f[w.to]=!0,f[w.from]=!0)}return m}function Dv(a,i,l,f,m){const v=m.patternDependencies;for(const x of i){const w=x.paint.get(`${a}-pattern`).value;if(w.kind!=="constant"){let A=w.evaluate({zoom:f-1},l,{},m.availableImages),R=w.evaluate({zoom:f},l,{},m.availableImages),L=w.evaluate({zoom:f+1},l,{},m.availableImages);A=A&&A.name?A.name:A,R=R&&R.name?R.name:R,L=L&&L.name?L.name:L,v[A]=!0,v[R]=!0,v[L]=!0,l.patterns[x.id]={min:A,mid:R,max:L}}}return l}class Ov{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new il,this.indexArray=new Pn,this.indexArray2=new jr,this.programConfigurations=new wc(i.layers,i.zoom),this.segments=new vn,this.segments2=new vn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,f){this.hasPattern=Lv("fill",this.layers,l);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),x=[];for(const{feature:w,id:A,index:R,sourceLayerIndex:L}of i){const z=this.layers[0]._featureFilter.needGeometry,N=Ec(w,z);if(!this.layers[0]._featureFilter.filter(new Pr(this.zoom),N,f))continue;const G=v?m.evaluate(N,{},f,l.availableImages):void 0,Y={id:A,properties:w.properties,type:w.type,sourceLayerIndex:L,index:R,geometry:z?N.geometry:Sc(w),patterns:{},sortKey:G};x.push(Y)}v&&x.sort((w,A)=>w.sortKey-A.sortKey);for(const w of x){const{geometry:A,index:R,sourceLayerIndex:L}=w;if(this.hasPattern){const z=Dv("fill",this.layers,w,this.zoom,l);this.patternFeatures.push(z)}else this.addFeature(w,A,R,f,{});l.featureIndex.insert(i[R].feature,A,R,L,this.index)}}update(i,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,f)}addFeatures(i,l,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Ek),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,f,m,v){for(const x of Eu(l,500)){let w=0;for(const G of x)w+=G.length;const A=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),R=A.vertexLength,L=[],z=[];for(const G of x){if(G.length===0)continue;G!==x[0]&&z.push(L.length/2);const Y=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),ne=Y.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(ne+G.length-1,ne),L.push(G[0].x),L.push(G[0].y);for(let ce=1;ce<G.length;ce++)this.layoutVertexArray.emplaceBack(G[ce].x,G[ce].y),this.indexArray2.emplaceBack(ne+ce-1,ne+ce),L.push(G[ce].x),L.push(G[ce].y);Y.vertexLength+=G.length,Y.primitiveLength+=G.length}const N=_6(L,z);for(let G=0;G<N.length;G+=3)this.indexArray.emplaceBack(R+N[G],R+N[G+1],R+N[G+2]);A.vertexLength+=w,A.primitiveLength+=N.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,v,m)}}let x6,b6;yt("FillBucket",Ov,{omit:["layers","patternFeatures"]});var Dk={get paint(){return b6=b6||new p({"fill-antialias":new Et(Le.paint_fill["fill-antialias"]),"fill-opacity":new It(Le.paint_fill["fill-opacity"]),"fill-color":new It(Le.paint_fill["fill-color"]),"fill-outline-color":new It(Le.paint_fill["fill-outline-color"]),"fill-translate":new Et(Le.paint_fill["fill-translate"]),"fill-translate-anchor":new Et(Le.paint_fill["fill-translate-anchor"]),"fill-pattern":new y(Le.paint_fill["fill-pattern"])})},get layout(){return x6=x6||new p({"fill-sort-key":new It(Le.layout_fill["fill-sort-key"])})}};class Ok extends _{constructor(i){super(i,Dk)}recalculate(i,l){super.recalculate(i,l);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Ov(i)}queryRadius(){return w0(this.paint.get("fill-translate"))}queryIntersectsFeature(i,l,f,m,v,x,w){return n6(S0(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),m)}isTileClipped(){return!0}}const zk=k([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Fk=k([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Bk}=zk;var cl={},Nk=E,w6=th;function th(a,i,l,f,m){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=f,this._values=m,a.readFields(jk,this,i)}function jk(a,i,l){a==1?i.id=l.readVarint():a==2?function(f,m){for(var v=f.readVarint()+f.pos;f.pos<v;){var x=m._keys[f.readVarint()],w=m._values[f.readVarint()];m.properties[x]=w}}(l,i):a==3?i.type=l.readVarint():a==4&&(i._geometry=l.pos)}function $k(a){for(var i,l,f=0,m=0,v=a.length,x=v-1;m<v;x=m++)f+=((l=a[x]).x-(i=a[m]).x)*(i.y+l.y);return f}th.types=["Unknown","Point","LineString","Polygon"],th.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var i,l=a.readVarint()+a.pos,f=1,m=0,v=0,x=0,w=[];a.pos<l;){if(m<=0){var A=a.readVarint();f=7&A,m=A>>3}if(m--,f===1||f===2)v+=a.readSVarint(),x+=a.readSVarint(),f===1&&(i&&w.push(i),i=[]),i.push(new Nk(v,x));else{if(f!==7)throw new Error("unknown command "+f);i&&i.push(i[0].clone())}}return i&&w.push(i),w},th.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var i=a.readVarint()+a.pos,l=1,f=0,m=0,v=0,x=1/0,w=-1/0,A=1/0,R=-1/0;a.pos<i;){if(f<=0){var L=a.readVarint();l=7&L,f=L>>3}if(f--,l===1||l===2)(m+=a.readSVarint())<x&&(x=m),m>w&&(w=m),(v+=a.readSVarint())<A&&(A=v),v>R&&(R=v);else if(l!==7)throw new Error("unknown command "+l)}return[x,A,w,R]},th.prototype.toGeoJSON=function(a,i,l){var f,m,v=this.extent*Math.pow(2,l),x=this.extent*a,w=this.extent*i,A=this.loadGeometry(),R=th.types[this.type];function L(G){for(var Y=0;Y<G.length;Y++){var ne=G[Y];G[Y]=[360*(ne.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(ne.y+w)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(f=0;f<A.length;f++)z[f]=A[f][0];L(A=z);break;case 2:for(f=0;f<A.length;f++)L(A[f]);break;case 3:for(A=function(G){var Y=G.length;if(Y<=1)return[G];for(var ne,ce,ye=[],Ce=0;Ce<Y;Ce++){var xe=$k(G[Ce]);xe!==0&&(ce===void 0&&(ce=xe<0),ce===xe<0?(ne&&ye.push(ne),ne=[G[Ce]]):ne.push(G[Ce]))}return ne&&ye.push(ne),ye}(A),f=0;f<A.length;f++)for(m=0;m<A[f].length;m++)L(A[f][m])}A.length===1?A=A[0]:R="Multi"+R;var N={type:"Feature",geometry:{type:R,coordinates:A},properties:this.properties};return"id"in this&&(N.id=this.id),N};var Vk=w6,S6=E6;function E6(a,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(Uk,this,i),this.length=this._features.length}function Uk(a,i,l){a===15?i.version=l.readVarint():a===1?i.name=l.readString():a===5?i.extent=l.readVarint():a===2?i._features.push(l.pos):a===3?i._keys.push(l.readString()):a===4&&i._values.push(function(f){for(var m=null,v=f.readVarint()+f.pos;f.pos<v;){var x=f.readVarint()>>3;m=x===1?f.readString():x===2?f.readFloat():x===3?f.readDouble():x===4?f.readVarint64():x===5?f.readVarint():x===6?f.readSVarint():x===7?f.readBoolean():null}return m}(l))}E6.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var i=this._pbf.readVarint()+this._pbf.pos;return new Vk(this._pbf,i,this.extent,this._keys,this._values)};var Zk=S6;function Hk(a,i,l){if(a===3){var f=new Zk(l,l.readVarint()+l.pos);f.length&&(i[f.name]=f)}}cl.VectorTile=function(a,i){this.layers=a.readFields(Hk,{},i)},cl.VectorTileFeature=w6,cl.VectorTileLayer=S6;const Wk=cl.VectorTileFeature.types,zv=Math.pow(2,13);function kf(a,i,l,f,m,v,x,w){a.emplaceBack(i,l,2*Math.floor(f*zv)+x,m*zv*2,v*zv*2,Math.round(w))}class Fv{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new gs,this.centroidVertexArray=new ms,this.indexArray=new Pn,this.programConfigurations=new wc(i.layers,i.zoom),this.segments=new vn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,f){this.features=[],this.hasPattern=Lv("fill-extrusion",this.layers,l);for(const{feature:m,id:v,index:x,sourceLayerIndex:w}of i){const A=this.layers[0]._featureFilter.needGeometry,R=Ec(m,A);if(!this.layers[0]._featureFilter.filter(new Pr(this.zoom),R,f))continue;const L={id:v,sourceLayerIndex:w,index:x,geometry:A?R.geometry:Sc(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Dv("fill-extrusion",this.layers,L,this.zoom,l)):this.addFeature(L,L.geometry,x,f,{}),l.featureIndex.insert(m,L.geometry,x,w,this.index,!0)}}addFeatures(i,l,f){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,l,f)}}update(i,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Bk),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,Fk.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,l,f,m,v){const x={x:0,y:0,vertexCount:0};for(const w of Eu(l,500)){let A=0;for(const Y of w)A+=Y.length;let R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Y of w){if(Y.length===0||qk(Y))continue;let ne=0;for(let ce=0;ce<Y.length;ce++){const ye=Y[ce];if(ce>=1){const Ce=Y[ce-1];if(!Gk(ye,Ce)){R.vertexLength+4>vn.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xe=ye.sub(Ce)._perp()._unit(),Ae=Ce.dist(ye);ne+Ae>32768&&(ne=0),kf(this.layoutVertexArray,ye.x,ye.y,xe.x,xe.y,0,0,ne),kf(this.layoutVertexArray,ye.x,ye.y,xe.x,xe.y,0,1,ne),x.x+=2*ye.x,x.y+=2*ye.y,x.vertexCount+=2,ne+=Ae,kf(this.layoutVertexArray,Ce.x,Ce.y,xe.x,xe.y,0,0,ne),kf(this.layoutVertexArray,Ce.x,Ce.y,xe.x,xe.y,0,1,ne),x.x+=2*Ce.x,x.y+=2*Ce.y,x.vertexCount+=2;const ze=R.vertexLength;this.indexArray.emplaceBack(ze,ze+2,ze+1),this.indexArray.emplaceBack(ze+1,ze+2,ze+3),R.vertexLength+=4,R.primitiveLength+=2}}}}if(R.vertexLength+A>vn.MAX_VERTEX_ARRAY_LENGTH&&(R=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),Wk[i.type]!=="Polygon")continue;const L=[],z=[],N=R.vertexLength;for(const Y of w)if(Y.length!==0){Y!==w[0]&&z.push(L.length/2);for(let ne=0;ne<Y.length;ne++){const ce=Y[ne];kf(this.layoutVertexArray,ce.x,ce.y,0,0,1,1,0),x.x+=ce.x,x.y+=ce.y,x.vertexCount+=1,L.push(ce.x),L.push(ce.y)}}const G=_6(L,z);for(let Y=0;Y<G.length;Y+=3)this.indexArray.emplaceBack(N+G[Y],N+G[Y+2],N+G[Y+1]);R.primitiveLength+=G.length/3,R.vertexLength+=A}for(let w=0;w<x.vertexCount;w++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,v,m)}}function Gk(a,i){return a.x===i.x&&(a.x<0||a.x>hn)||a.y===i.y&&(a.y<0||a.y>hn)}function qk(a){return a.every(i=>i.x<0)||a.every(i=>i.x>hn)||a.every(i=>i.y<0)||a.every(i=>i.y>hn)}let A6;yt("FillExtrusionBucket",Fv,{omit:["layers","features"]});var Kk={get paint(){return A6=A6||new p({"fill-extrusion-opacity":new Et(Le["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new It(Le["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Et(Le["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Et(Le["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new y(Le["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new It(Le["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new It(Le["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Et(Le["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Xk extends _{constructor(i){super(i,Kk)}createBucket(i){return new Fv(i)}queryRadius(){return w0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,l,f,m,v,x,w,A){const R=S0(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),L=this.paint.get("fill-extrusion-height").evaluate(l,f),z=this.paint.get("fill-extrusion-base").evaluate(l,f),N=function(Y,ne,ce,ye){const Ce=[];for(const xe of Y){const Ae=[xe.x,xe.y,0,1];E0(Ae,Ae,ne),Ce.push(new P(Ae[0]/Ae[3],Ae[1]/Ae[3]))}return Ce}(R,A),G=function(Y,ne,ce,ye){const Ce=[],xe=[],Ae=ye[8]*ne,ze=ye[9]*ne,je=ye[10]*ne,ht=ye[11]*ne,wt=ye[8]*ce,st=ye[9]*ce,nt=ye[10]*ce,vt=ye[11]*ce;for(const At of Y){const lt=[],$e=[];for(const bt of At){const _t=bt.x,Zt=bt.y,Er=ye[0]*_t+ye[4]*Zt+ye[12],Ar=ye[1]*_t+ye[5]*Zt+ye[13],dn=ye[2]*_t+ye[6]*Zt+ye[14],co=ye[3]*_t+ye[7]*Zt+ye[15],ai=dn+je,xn=co+ht,On=Er+wt,si=Ar+st,xi=dn+nt,li=co+vt,fn=new P((Er+Ae)/xn,(Ar+ze)/xn);fn.z=ai/xn,lt.push(fn);const Tn=new P(On/li,si/li);Tn.z=xi/li,$e.push(Tn)}Ce.push(lt),xe.push($e)}return[Ce,xe]}(m,z,L,A);return function(Y,ne,ce){let ye=1/0;n6(ce,ne)&&(ye=C6(ce,ne[0]));for(let Ce=0;Ce<ne.length;Ce++){const xe=ne[Ce],Ae=Y[Ce];for(let ze=0;ze<xe.length-1;ze++){const je=xe[ze],ht=[je,xe[ze+1],Ae[ze+1],Ae[ze],je];r6(ce,ht)&&(ye=Math.min(ye,C6(ce,ht)))}}return ye!==1/0&&ye}(G[0],G[1],N)}}function Lf(a,i){return a.x*i.x+a.y*i.y}function C6(a,i){if(a.length===1){let l=0;const f=i[l++];let m;for(;!m||f.equals(m);)if(m=i[l++],!m)return 1/0;for(;l<i.length;l++){const v=i[l],x=a[0],w=m.sub(f),A=v.sub(f),R=x.sub(f),L=Lf(w,w),z=Lf(w,A),N=Lf(A,A),G=Lf(R,w),Y=Lf(R,A),ne=L*N-z*z,ce=(N*G-z*Y)/ne,ye=(L*Y-z*G)/ne,Ce=f.z*(1-ce-ye)+m.z*ce+v.z*ye;if(isFinite(Ce))return Ce}return 1/0}{let l=1/0;for(const f of i)l=Math.min(l,f.z);return l}}const Yk=k([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Jk}=Yk,Qk=k([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:eL}=Qk,tL=cl.VectorTileFeature.types,rL=Math.cos(Math.PI/180*37.5),P6=Math.pow(2,14)/.5;class Bv{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Gu,this.layoutVertexArray2=new xf,this.indexArray=new Pn,this.programConfigurations=new wc(i.layers,i.zoom),this.segments=new vn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,f){this.hasPattern=Lv("line",this.layers,l);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),x=[];for(const{feature:w,id:A,index:R,sourceLayerIndex:L}of i){const z=this.layers[0]._featureFilter.needGeometry,N=Ec(w,z);if(!this.layers[0]._featureFilter.filter(new Pr(this.zoom),N,f))continue;const G=v?m.evaluate(N,{},f):void 0,Y={id:A,properties:w.properties,type:w.type,sourceLayerIndex:L,index:R,geometry:z?N.geometry:Sc(w),patterns:{},sortKey:G};x.push(Y)}v&&x.sort((w,A)=>w.sortKey-A.sortKey);for(const w of x){const{geometry:A,index:R,sourceLayerIndex:L}=w;if(this.hasPattern){const z=Dv("line",this.layers,w,this.zoom,l);this.patternFeatures.push(z)}else this.addFeature(w,A,R,f,{});l.featureIndex.insert(i[R].feature,A,R,L,this.index)}}update(i,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,f)}addFeatures(i,l,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,eL)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Jk),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,f,m,v){const x=this.layers[0].layout,w=x.get("line-join").evaluate(i,{}),A=x.get("line-cap"),R=x.get("line-miter-limit"),L=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const z of l)this.addLine(z,i,w,A,R,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,v,m)}addLine(i,l,f,m,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ye=0;ye<i.length-1;ye++)this.totalDistance+=i[ye].dist(i[ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=tL[l.type]==="Polygon";let A=i.length;for(;A>=2&&i[A-1].equals(i[A-2]);)A--;let R=0;for(;R<A-1&&i[R].equals(i[R+1]);)R++;if(A<(w?3:2))return;f==="bevel"&&(v=1.05);const L=this.overscaling<=16?15*hn/(512*this.overscaling):0,z=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray);let N,G,Y,ne,ce;this.e1=this.e2=-1,w&&(N=i[A-2],ce=i[R].sub(N)._unit()._perp());for(let ye=R;ye<A;ye++){if(Y=ye===A-1?w?i[R+1]:void 0:i[ye+1],Y&&i[ye].equals(Y))continue;ce&&(ne=ce),N&&(G=N),N=i[ye],ce=Y?Y.sub(N)._unit()._perp():ne,ne=ne||ce;let Ce=ne.add(ce);Ce.x===0&&Ce.y===0||Ce._unit();const xe=ne.x*ce.x+ne.y*ce.y,Ae=Ce.x*ce.x+Ce.y*ce.y,ze=Ae!==0?1/Ae:1/0,je=2*Math.sqrt(2-2*Ae),ht=Ae<rL&&G&&Y,wt=ne.x*ce.y-ne.y*ce.x>0;if(ht&&ye>R){const vt=N.dist(G);if(vt>2*L){const At=N.sub(N.sub(G)._mult(L/vt)._round());this.updateDistance(G,At),this.addCurrentVertex(At,ne,0,0,z),G=At}}const st=G&&Y;let nt=st?f:w?"butt":m;if(st&&nt==="round"&&(ze<x?nt="miter":ze<=2&&(nt="fakeround")),nt==="miter"&&ze>v&&(nt="bevel"),nt==="bevel"&&(ze>2&&(nt="flipbevel"),ze<v&&(nt="miter")),G&&this.updateDistance(G,N),nt==="miter")Ce._mult(ze),this.addCurrentVertex(N,Ce,0,0,z);else if(nt==="flipbevel"){if(ze>100)Ce=ce.mult(-1);else{const vt=ze*ne.add(ce).mag()/ne.sub(ce).mag();Ce._perp()._mult(vt*(wt?-1:1))}this.addCurrentVertex(N,Ce,0,0,z),this.addCurrentVertex(N,Ce.mult(-1),0,0,z)}else if(nt==="bevel"||nt==="fakeround"){const vt=-Math.sqrt(ze*ze-1),At=wt?vt:0,lt=wt?0:vt;if(G&&this.addCurrentVertex(N,ne,At,lt,z),nt==="fakeround"){const $e=Math.round(180*je/Math.PI/20);for(let bt=1;bt<$e;bt++){let _t=bt/$e;if(_t!==.5){const Er=_t-.5;_t+=_t*Er*(_t-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*Er*Er+(.848013+xe*(.215638*xe-1.06021)))}const Zt=ce.sub(ne)._mult(_t)._add(ne)._unit()._mult(wt?-1:1);this.addHalfVertex(N,Zt.x,Zt.y,!1,wt,0,z)}}Y&&this.addCurrentVertex(N,ce,-At,-lt,z)}else if(nt==="butt")this.addCurrentVertex(N,Ce,0,0,z);else if(nt==="square"){const vt=G?1:-1;this.addCurrentVertex(N,Ce,vt,vt,z)}else nt==="round"&&(G&&(this.addCurrentVertex(N,ne,0,0,z),this.addCurrentVertex(N,ne,1,1,z,!0)),Y&&(this.addCurrentVertex(N,ce,-1,-1,z,!0),this.addCurrentVertex(N,ce,0,0,z)));if(ht&&ye<A-1){const vt=N.dist(Y);if(vt>2*L){const At=N.add(Y.sub(N)._mult(L/vt)._round());this.updateDistance(N,At),this.addCurrentVertex(At,ce,0,0,z),N=At}}}}addCurrentVertex(i,l,f,m,v,x=!1){const w=l.y*m-l.x,A=-l.y-l.x*m;this.addHalfVertex(i,l.x+l.y*f,l.y-l.x*f,x,!1,f,v),this.addHalfVertex(i,w,A,x,!0,-m,v),this.distance>P6/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,l,f,m,v,x))}addHalfVertex({x:i,y:l},f,m,v,x,w,A){const R=.5*(this.lineClips?this.scaledDistance*(P6-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(v?1:0),(l<<1)+(x?1:0),Math.round(63*f)+128,Math.round(63*m)+128,1+(w===0?0:w<0?-1:1)|(63&R)<<2,R>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),A.primitiveLength++),x?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}let T6,I6;yt("LineBucket",Bv,{omit:["layers","patternFeatures"]});var M6={get paint(){return I6=I6||new p({"line-opacity":new It(Le.paint_line["line-opacity"]),"line-color":new It(Le.paint_line["line-color"]),"line-translate":new Et(Le.paint_line["line-translate"]),"line-translate-anchor":new Et(Le.paint_line["line-translate-anchor"]),"line-width":new It(Le.paint_line["line-width"]),"line-gap-width":new It(Le.paint_line["line-gap-width"]),"line-offset":new It(Le.paint_line["line-offset"]),"line-blur":new It(Le.paint_line["line-blur"]),"line-dasharray":new o(Le.paint_line["line-dasharray"]),"line-pattern":new y(Le.paint_line["line-pattern"]),"line-gradient":new u(Le.paint_line["line-gradient"])})},get layout(){return T6=T6||new p({"line-cap":new Et(Le.layout_line["line-cap"]),"line-join":new It(Le.layout_line["line-join"]),"line-miter-limit":new Et(Le.layout_line["line-miter-limit"]),"line-round-limit":new Et(Le.layout_line["line-round-limit"]),"line-sort-key":new It(Le.layout_line["line-sort-key"])})}};class nL extends It{possiblyEvaluate(i,l){return l=new Pr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(i,l)}evaluate(i,l,f,m){return l=J({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(i,l,f,m)}}let I0;class iL extends _{constructor(i){super(i,M6),this.gradientVersion=0,I0||(I0=new nL(M6.paint.properties["line-width"].specification),I0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof oc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,l){super.recalculate(i,l),this.paint._values["line-floorwidth"]=I0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Bv(i)}queryRadius(i){const l=i,f=R6(Cf("line-width",this,l),Cf("line-gap-width",this,l)),m=Cf("line-offset",this,l);return f/2+Math.abs(m)+w0(this.paint.get("line-translate"))}queryIntersectsFeature(i,l,f,m,v,x,w){const A=S0(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),R=w/2*R6(this.paint.get("line-width").evaluate(l,f),this.paint.get("line-gap-width").evaluate(l,f)),L=this.paint.get("line-offset").evaluate(l,f);return L&&(m=function(z,N){const G=[];for(let Y=0;Y<z.length;Y++){const ne=z[Y],ce=[];for(let ye=0;ye<ne.length;ye++){const Ce=ne[ye-1],xe=ne[ye],Ae=ne[ye+1],ze=ye===0?new P(0,0):xe.sub(Ce)._unit()._perp(),je=ye===ne.length-1?new P(0,0):Ae.sub(xe)._unit()._perp(),ht=ze._add(je)._unit(),wt=ht.x*je.x+ht.y*je.y;wt!==0&&ht._mult(1/wt),ce.push(ht._mult(N)._add(xe))}G.push(ce)}return G}(m,L*w)),function(z,N,G){for(let Y=0;Y<N.length;Y++){const ne=N[Y];if(z.length>=3){for(let ce=0;ce<ne.length;ce++)if(Ju(z,ne[ce]))return!0}if(fk(z,ne,G))return!0}return!1}(A,m,R)}isTileClipped(){return!0}}function R6(a,i){return i>0?i+2*a:a}const oL=k([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),aL=k([{name:"a_projected_pos",components:3,type:"Float32"}],4);k([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const sL=k([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);k([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const k6=k([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),lL=k([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function cL(a,i,l){return a.sections.forEach(f=>{f.text=function(m,v,x){const w=v.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?m=m.toLocaleUpperCase():w==="lowercase"&&(m=m.toLocaleLowerCase()),Ba.applyArabicShaping&&(m=Ba.applyArabicShaping(m)),m}(f.text,i,l)}),a}k([{name:"triangle",components:3,type:"Uint16"}]),k([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),k([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),k([{type:"Float32",name:"offsetX"}]),k([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),k([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Df={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var _n=24,L6=Sr,D6=function(a,i,l,f,m){var v,x,w=8*m-f-1,A=(1<<w)-1,R=A>>1,L=-7,z=m-1,N=-1,G=a[i+z];for(z+=N,v=G&(1<<-L)-1,G>>=-L,L+=w;L>0;v=256*v+a[i+z],z+=N,L-=8);for(x=v&(1<<-L)-1,v>>=-L,L+=f;L>0;x=256*x+a[i+z],z+=N,L-=8);if(v===0)v=1-R;else{if(v===A)return x?NaN:1/0*(G?-1:1);x+=Math.pow(2,f),v-=R}return(G?-1:1)*x*Math.pow(2,v-f)},O6=function(a,i,l,f,m,v){var x,w,A,R=8*v-m-1,L=(1<<R)-1,z=L>>1,N=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=0,Y=1,ne=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(w=isNaN(i)?1:0,x=L):(x=Math.floor(Math.log(i)/Math.LN2),i*(A=Math.pow(2,-x))<1&&(x--,A*=2),(i+=x+z>=1?N/A:N*Math.pow(2,1-z))*A>=2&&(x++,A/=2),x+z>=L?(w=0,x=L):x+z>=1?(w=(i*A-1)*Math.pow(2,m),x+=z):(w=i*Math.pow(2,z-1)*Math.pow(2,m),x=0));m>=8;a[l+G]=255&w,G+=Y,w/=256,m-=8);for(x=x<<m|w,R+=m;R>0;a[l+G]=255&x,G+=Y,x/=256,R-=8);a[l+G-Y]|=128*ne};function Sr(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Sr.Varint=0,Sr.Fixed64=1,Sr.Bytes=2,Sr.Fixed32=5;var Nv=4294967296,z6=1/Nv,F6=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function vs(a){return a.type===Sr.Bytes?a.readVarint()+a.pos:a.pos+1}function rh(a,i,l){return l?4294967296*i+(a>>>0):4294967296*(i>>>0)+(a>>>0)}function B6(a,i,l){var f=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(f);for(var m=l.pos-1;m>=a;m--)l.buf[m+f]=l.buf[m]}function uL(a,i){for(var l=0;l<a.length;l++)i.writeVarint(a[l])}function hL(a,i){for(var l=0;l<a.length;l++)i.writeSVarint(a[l])}function dL(a,i){for(var l=0;l<a.length;l++)i.writeFloat(a[l])}function fL(a,i){for(var l=0;l<a.length;l++)i.writeDouble(a[l])}function pL(a,i){for(var l=0;l<a.length;l++)i.writeBoolean(a[l])}function mL(a,i){for(var l=0;l<a.length;l++)i.writeFixed32(a[l])}function gL(a,i){for(var l=0;l<a.length;l++)i.writeSFixed32(a[l])}function yL(a,i){for(var l=0;l<a.length;l++)i.writeFixed64(a[l])}function vL(a,i){for(var l=0;l<a.length;l++)i.writeSFixed64(a[l])}function M0(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+16777216*a[i+3]}function nh(a,i,l){a[l]=i,a[l+1]=i>>>8,a[l+2]=i>>>16,a[l+3]=i>>>24}function N6(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+(a[i+3]<<24)}Sr.prototype={destroy:function(){this.buf=null},readFields:function(a,i,l){for(l=l||this.length;this.pos<l;){var f=this.readVarint(),m=f>>3,v=this.pos;this.type=7&f,a(m,i,this),this.pos===v&&this.skip(f)}return i},readMessage:function(a,i){return this.readFields(a,i,this.readVarint()+this.pos)},readFixed32:function(){var a=M0(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=N6(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=M0(this.buf,this.pos)+M0(this.buf,this.pos+4)*Nv;return this.pos+=8,a},readSFixed64:function(){var a=M0(this.buf,this.pos)+N6(this.buf,this.pos+4)*Nv;return this.pos+=8,a},readFloat:function(){var a=D6(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=D6(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var i,l,f=this.buf;return i=127&(l=f[this.pos++]),l<128?i:(i|=(127&(l=f[this.pos++]))<<7,l<128?i:(i|=(127&(l=f[this.pos++]))<<14,l<128?i:(i|=(127&(l=f[this.pos++]))<<21,l<128?i:function(m,v,x){var w,A,R=x.buf;if(w=(112&(A=R[x.pos++]))>>4,A<128||(w|=(127&(A=R[x.pos++]))<<3,A<128)||(w|=(127&(A=R[x.pos++]))<<10,A<128)||(w|=(127&(A=R[x.pos++]))<<17,A<128)||(w|=(127&(A=R[x.pos++]))<<24,A<128)||(w|=(1&(A=R[x.pos++]))<<31,A<128))return rh(m,w,v);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(l=f[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,i=this.pos;return this.pos=a,a-i>=12&&F6?function(l,f,m){return F6.decode(l.subarray(f,m))}(this.buf,i,a):function(l,f,m){for(var v="",x=f;x<m;){var w,A,R,L=l[x],z=null,N=L>239?4:L>223?3:L>191?2:1;if(x+N>m)break;N===1?L<128&&(z=L):N===2?(192&(w=l[x+1]))==128&&(z=(31&L)<<6|63&w)<=127&&(z=null):N===3?(A=l[x+2],(192&(w=l[x+1]))==128&&(192&A)==128&&((z=(15&L)<<12|(63&w)<<6|63&A)<=2047||z>=55296&&z<=57343)&&(z=null)):N===4&&(A=l[x+2],R=l[x+3],(192&(w=l[x+1]))==128&&(192&A)==128&&(192&R)==128&&((z=(15&L)<<18|(63&w)<<12|(63&A)<<6|63&R)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,N=1):z>65535&&(z-=65536,v+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),v+=String.fromCharCode(z),x+=N}return v}(this.buf,i,a)},readBytes:function(){var a=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,a);return this.pos=a,i},readPackedVarint:function(a,i){if(this.type!==Sr.Bytes)return a.push(this.readVarint(i));var l=vs(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(i));return a},readPackedSVarint:function(a){if(this.type!==Sr.Bytes)return a.push(this.readSVarint());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Sr.Bytes)return a.push(this.readBoolean());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Sr.Bytes)return a.push(this.readFloat());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Sr.Bytes)return a.push(this.readDouble());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Sr.Bytes)return a.push(this.readFixed32());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Sr.Bytes)return a.push(this.readSFixed32());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Sr.Bytes)return a.push(this.readFixed64());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Sr.Bytes)return a.push(this.readSFixed64());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed64());return a},skip:function(a){var i=7&a;if(i===Sr.Varint)for(;this.buf[this.pos++]>127;);else if(i===Sr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Sr.Fixed32)this.pos+=4;else{if(i!==Sr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(a,i){this.writeVarint(a<<3|i)},realloc:function(a){for(var i=this.length||16;i<this.pos+a;)i*=2;if(i!==this.length){var l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),nh(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),nh(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),nh(this.buf,-1&a,this.pos),nh(this.buf,Math.floor(a*z6),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),nh(this.buf,-1&a,this.pos),nh(this.buf,Math.floor(a*z6),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(i,l){var f,m;if(i>=0?(f=i%4294967296|0,m=i/4294967296|0):(m=~(-i/4294967296),4294967295^(f=~(-i%4294967296))?f=f+1|0:(f=0,m=m+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,x,w){w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,w.buf[w.pos]=127&(v>>>=7)}(f,0,l),function(v,x){var w=(7&v)<<4;x.buf[x.pos++]|=w|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(m,l)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var i=this.pos;this.pos=function(f,m,v){for(var x,w,A=0;A<m.length;A++){if((x=m.charCodeAt(A))>55295&&x<57344){if(!w){x>56319||A+1===m.length?(f[v++]=239,f[v++]=191,f[v++]=189):w=x;continue}if(x<56320){f[v++]=239,f[v++]=191,f[v++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(f[v++]=239,f[v++]=191,f[v++]=189,w=null);x<128?f[v++]=x:(x<2048?f[v++]=x>>6|192:(x<65536?f[v++]=x>>12|224:(f[v++]=x>>18|240,f[v++]=x>>12&63|128),f[v++]=x>>6&63|128),f[v++]=63&x|128)}return v}(this.buf,a,this.pos);var l=this.pos-i;l>=128&&B6(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),O6(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),O6(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var i=a.length;this.writeVarint(i),this.realloc(i);for(var l=0;l<i;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,i){this.pos++;var l=this.pos;a(i,this);var f=this.pos-l;f>=128&&B6(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeMessage:function(a,i,l){this.writeTag(a,Sr.Bytes),this.writeRawMessage(i,l)},writePackedVarint:function(a,i){i.length&&this.writeMessage(a,uL,i)},writePackedSVarint:function(a,i){i.length&&this.writeMessage(a,hL,i)},writePackedBoolean:function(a,i){i.length&&this.writeMessage(a,pL,i)},writePackedFloat:function(a,i){i.length&&this.writeMessage(a,dL,i)},writePackedDouble:function(a,i){i.length&&this.writeMessage(a,fL,i)},writePackedFixed32:function(a,i){i.length&&this.writeMessage(a,mL,i)},writePackedSFixed32:function(a,i){i.length&&this.writeMessage(a,gL,i)},writePackedFixed64:function(a,i){i.length&&this.writeMessage(a,yL,i)},writePackedSFixed64:function(a,i){i.length&&this.writeMessage(a,vL,i)},writeBytesField:function(a,i){this.writeTag(a,Sr.Bytes),this.writeBytes(i)},writeFixed32Field:function(a,i){this.writeTag(a,Sr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(a,i){this.writeTag(a,Sr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(a,i){this.writeTag(a,Sr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(a,i){this.writeTag(a,Sr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(a,i){this.writeTag(a,Sr.Varint),this.writeVarint(i)},writeSVarintField:function(a,i){this.writeTag(a,Sr.Varint),this.writeSVarint(i)},writeStringField:function(a,i){this.writeTag(a,Sr.Bytes),this.writeString(i)},writeFloatField:function(a,i){this.writeTag(a,Sr.Fixed32),this.writeFloat(i)},writeDoubleField:function(a,i){this.writeTag(a,Sr.Fixed64),this.writeDouble(i)},writeBooleanField:function(a,i){this.writeVarintField(a,!!i)}};var jv=b(L6);const $v=3;function _L(a,i,l){a===1&&l.readMessage(xL,i)}function xL(a,i,l){if(a===3){const{id:f,bitmap:m,width:v,height:x,left:w,top:A,advance:R}=l.readMessage(bL,{});i.push({id:f,bitmap:new Tf({width:v+2*$v,height:x+2*$v},m),metrics:{width:v,height:x,left:w,top:A,advance:R}})}}function bL(a,i,l){a===1?i.id=l.readVarint():a===2?i.bitmap=l.readBytes():a===3?i.width=l.readVarint():a===4?i.height=l.readVarint():a===5?i.left=l.readSVarint():a===6?i.top=l.readSVarint():a===7&&(i.advance=l.readVarint())}const j6=$v;function $6(a){let i=0,l=0;for(const x of a)i+=x.w*x.h,l=Math.max(l,x.w);a.sort((x,w)=>w.h-x.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let m=0,v=0;for(const x of a)for(let w=f.length-1;w>=0;w--){const A=f[w];if(!(x.w>A.w||x.h>A.h)){if(x.x=A.x,x.y=A.y,v=Math.max(v,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===A.w&&x.h===A.h){const R=f.pop();w<f.length&&(f[w]=R)}else x.h===A.h?(A.x+=x.w,A.w-=x.w):x.w===A.w?(A.y+=x.h,A.h-=x.h):(f.push({x:A.x+x.w,y:A.y,w:A.w-x.w,h:x.h}),A.y+=x.h,A.h-=x.h);break}}return{w:m,h:v,fill:i/(m*v)||0}}const Oi=1;class Vv{constructor(i,{pixelRatio:l,version:f,stretchX:m,stretchY:v,content:x,textFitWidth:w,textFitHeight:A}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=m,this.stretchY=v,this.content=x,this.version=f,this.textFitWidth=w,this.textFitHeight=A}get tl(){return[this.paddedRect.x+Oi,this.paddedRect.y+Oi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Oi,this.paddedRect.y+this.paddedRect.h-Oi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Oi)/this.pixelRatio,(this.paddedRect.h-2*Oi)/this.pixelRatio]}}class V6{constructor(i,l){const f={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(i,f,v),this.addImages(l,m,v);const{w:x,h:w}=$6(v),A=new so({width:x||1,height:w||1});for(const R in i){const L=i[R],z=f[R].paddedRect;so.copy(L.data,A,{x:0,y:0},{x:z.x+Oi,y:z.y+Oi},L.data)}for(const R in l){const L=l[R],z=m[R].paddedRect,N=z.x+Oi,G=z.y+Oi,Y=L.data.width,ne=L.data.height;so.copy(L.data,A,{x:0,y:0},{x:N,y:G},L.data),so.copy(L.data,A,{x:0,y:ne-1},{x:N,y:G-1},{width:Y,height:1}),so.copy(L.data,A,{x:0,y:0},{x:N,y:G+ne},{width:Y,height:1}),so.copy(L.data,A,{x:Y-1,y:0},{x:N-1,y:G},{width:1,height:ne}),so.copy(L.data,A,{x:0,y:0},{x:N+Y,y:G},{width:1,height:ne})}this.image=A,this.iconPositions=f,this.patternPositions=m}addImages(i,l,f){for(const m in i){const v=i[m],x={x:0,y:0,w:v.data.width+2*Oi,h:v.data.height+2*Oi};f.push(x),l[m]=new Vv(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(i,l){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in i.updatedImages)this.patchUpdatedImage(this.iconPositions[f],i.getImage(f),l),this.patchUpdatedImage(this.patternPositions[f],i.getImage(f),l)}patchUpdatedImage(i,l,f){if(!i||!l||i.version===l.version)return;i.version=l.version;const[m,v]=i.tl;f.update(l.data,void 0,{x:m,y:v})}}var ul;yt("ImagePosition",Vv),yt("ImageAtlas",V6),d.ah=void 0,(ul=d.ah||(d.ah={}))[ul.none=0]="none",ul[ul.horizontal=1]="horizontal",ul[ul.vertical=2]="vertical",ul[ul.horizontalOnly=3]="horizontalOnly";const Of=-17;class zf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,l){const f=new zf;return f.scale=i||1,f.fontStack=l,f}static forImage(i){const l=new zf;return l.imageName=i,l}}class ih{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const f=new ih;for(let m=0;m<i.sections.length;m++){const v=i.sections[m];v.image?f.addImageSection(v):f.addTextSection(v,l)}return f}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let l="";for(let f=0;f<i.length;f++){const m=i.charCodeAt(f+1)||null,v=i.charCodeAt(f-1)||null;l+=m&&p0(m)&&!Df[i[f+1]]||v&&p0(v)&&!Df[i[f-1]]||!Df[i[f]]?i[f]:Df[i[f]]}return l}(this.text)}trim(){let i=0;for(let f=0;f<this.text.length&&k0[this.text.charCodeAt(f)];f++)i++;let l=this.text.length;for(let f=this.text.length-1;f>=0&&f>=i&&k0[this.text.charCodeAt(f)];f--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const f=new ih;return f.text=this.text.substring(i,l),f.sectionIndex=this.sectionIndex.slice(i,l),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}addTextSection(i,l){this.text+=i.text,this.sections.push(zf.forText(i.scale,i.fontStack||l));const f=this.sections.length-1;for(let m=0;m<i.text.length;++m)this.sectionIndex.push(f)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void qe("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(zf.forImage(l)),this.sectionIndex.push(this.sections.length-1)):qe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function R0(a,i,l,f,m,v,x,w,A,R,L,z,N,G,Y,ne){const ce=ih.fromFeature(a,m);let ye;z===d.ah.vertical&&ce.verticalizePunctuation();const{processBidirectionalText:Ce,processStyledBidirectionalText:xe}=Ba;if(Ce&&ce.sections.length===1){ye=[];const je=Ce(ce.toString(),Uv(ce,R,v,i,f,G,Y));for(const ht of je){const wt=new ih;wt.text=ht,wt.sections=ce.sections;for(let st=0;st<ht.length;st++)wt.sectionIndex.push(0);ye.push(wt)}}else if(xe){ye=[];const je=xe(ce.text,ce.sectionIndex,Uv(ce,R,v,i,f,G,Y));for(const ht of je){const wt=new ih;wt.text=ht[0],wt.sectionIndex=ht[1],wt.sections=ce.sections,ye.push(wt)}}else ye=function(je,ht){const wt=[],st=je.text;let nt=0;for(const vt of ht)wt.push(je.substring(nt,vt)),nt=vt;return nt<st.length&&wt.push(je.substring(nt,st.length)),wt}(ce,Uv(ce,R,v,i,f,G,Y));const Ae=[],ze={positionedLines:Ae,text:ce.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:z,iconsInText:!1,verticalizable:!1};return function(je,ht,wt,st,nt,vt,At,lt,$e,bt,_t,Zt){let Er=0,Ar=Of,dn=0,co=0;const ai=lt==="right"?1:lt==="left"?0:.5;let xn=0;for(const fn of nt){fn.trim();const Tn=fn.getMaxScale(),bi=(Tn-1)*_n,zi={positionedGlyphs:[],lineOffset:0};je.positionedLines[xn]=zi;const Kn=zi.positionedGlyphs;let Fi=0;if(!fn.length()){Ar+=vt,++xn;continue}for(let Kr=0;Kr<fn.length();Kr++){const Jt=fn.getSection(Kr),pn=fn.getSectionIndex(Kr),Xn=fn.getCharCode(Kr);let bn=0,Oo=null,ha=null,da=null,_s=_n;const zo=!($e===d.ah.horizontal||!_t&&!yf(Xn)||_t&&(k0[Xn]||(On=Xn,ut.Arabic(On)||ut["Arabic Supplement"](On)||ut["Arabic Extended-A"](On)||ut["Arabic Presentation Forms-A"](On)||ut["Arabic Presentation Forms-B"](On))));if(Jt.imageName){const ho=st[Jt.imageName];if(!ho)continue;da=Jt.imageName,je.iconsInText=je.iconsInText||!0,ha=ho.paddedRect;const Bi=ho.displaySize;Jt.scale=Jt.scale*_n/Zt,Oo={width:Bi[0],height:Bi[1],left:Oi,top:-j6,advance:zo?Bi[1]:Bi[0]},bn=bi+(_n-Bi[1]*Jt.scale),_s=Oo.advance;const xs=zo?Bi[0]*Jt.scale-_n*Tn:Bi[1]*Jt.scale-_n*Tn;xs>0&&xs>Fi&&(Fi=xs)}else{const ho=wt[Jt.fontStack],Bi=ho&&ho[Xn];if(Bi&&Bi.rect)ha=Bi.rect,Oo=Bi.metrics;else{const xs=ht[Jt.fontStack],$f=xs&&xs[Xn];if(!$f)continue;Oo=$f.metrics}bn=(Tn-Jt.scale)*_n}zo?(je.verticalizable=!0,Kn.push({glyph:Xn,imageName:da,x:Er,y:Ar+bn,vertical:zo,scale:Jt.scale,fontStack:Jt.fontStack,sectionIndex:pn,metrics:Oo,rect:ha}),Er+=_s*Jt.scale+bt):(Kn.push({glyph:Xn,imageName:da,x:Er,y:Ar+bn,vertical:zo,scale:Jt.scale,fontStack:Jt.fontStack,sectionIndex:pn,metrics:Oo,rect:ha}),Er+=Oo.advance*Jt.scale+bt)}Kn.length!==0&&(dn=Math.max(Er-bt,dn),EL(Kn,0,Kn.length-1,ai,Fi)),Er=0;const uo=vt*Tn+Fi;zi.lineOffset=Math.max(Fi,bi),Ar+=uo,co=Math.max(uo,co),++xn}var On;const si=Ar-Of,{horizontalAlign:xi,verticalAlign:li}=Zv(At);(function(fn,Tn,bi,zi,Kn,Fi,uo,Kr,Jt){const pn=(Tn-bi)*Kn;let Xn=0;Xn=Fi!==uo?-Kr*zi-Of:(-zi*Jt+.5)*uo;for(const bn of fn)for(const Oo of bn.positionedGlyphs)Oo.x+=pn,Oo.y+=Xn})(je.positionedLines,ai,xi,li,dn,co,vt,si,nt.length),je.top+=-li*si,je.bottom=je.top+si,je.left+=-xi*dn,je.right=je.left+dn}(ze,i,l,f,ye,x,w,A,z,R,N,ne),!function(je){for(const ht of je)if(ht.positionedGlyphs.length!==0)return!1;return!0}(Ae)&&ze}const k0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},wL={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function U6(a,i,l,f,m,v){if(i.imageName){const x=f[i.imageName];return x?x.displaySize[0]*i.scale*_n/v+m:0}{const x=l[i.fontStack],w=x&&x[a];return w?w.metrics.advance*i.scale+m:0}}function Z6(a,i,l,f){const m=Math.pow(a-i,2);return f?a<i?m/2:2*m:m+Math.abs(l)*l}function SL(a,i,l){let f=0;return a===10&&(f-=1e4),l&&(f+=150),a!==40&&a!==65288||(f+=50),i!==41&&i!==65289||(f+=50),f}function H6(a,i,l,f,m,v){let x=null,w=Z6(i,l,m,v);for(const A of f){const R=Z6(i-A.x,l,m,v)+A.badness;R<=w&&(x=A,w=R)}return{index:a,x:i,priorBreak:x,badness:w}}function W6(a){return a?W6(a.priorBreak).concat(a.index):[]}function Uv(a,i,l,f,m,v,x){if(v!=="point")return[];if(!a)return[];const w=[],A=function(N,G,Y,ne,ce,ye){let Ce=0;for(let xe=0;xe<N.length();xe++){const Ae=N.getSection(xe);Ce+=U6(N.getCharCode(xe),Ae,ne,ce,G,ye)}return Ce/Math.max(1,Math.ceil(Ce/Y))}(a,i,l,f,m,x),R=a.text.indexOf("​")>=0;let L=0;for(let N=0;N<a.length();N++){const G=a.getSection(N),Y=a.getCharCode(N);if(k0[Y]||(L+=U6(Y,G,f,m,i,x)),N<a.length()-1){const ne=!((z=Y)<11904||!(ut["Bopomofo Extended"](z)||ut.Bopomofo(z)||ut["CJK Compatibility Forms"](z)||ut["CJK Compatibility Ideographs"](z)||ut["CJK Compatibility"](z)||ut["CJK Radicals Supplement"](z)||ut["CJK Strokes"](z)||ut["CJK Symbols and Punctuation"](z)||ut["CJK Unified Ideographs Extension A"](z)||ut["CJK Unified Ideographs"](z)||ut["Enclosed CJK Letters and Months"](z)||ut["Halfwidth and Fullwidth Forms"](z)||ut.Hiragana(z)||ut["Ideographic Description Characters"](z)||ut["Kangxi Radicals"](z)||ut["Katakana Phonetic Extensions"](z)||ut.Katakana(z)||ut["Vertical Forms"](z)||ut["Yi Radicals"](z)||ut["Yi Syllables"](z)));(wL[Y]||ne||G.imageName)&&w.push(H6(N+1,L,A,w,SL(Y,a.getCharCode(N+1),ne&&R),!1))}}var z;return W6(H6(a.length(),L,A,w,0,!0))}function Zv(a){let i=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function EL(a,i,l,f,m){if(!f&&!m)return;const v=a[l],x=(a[l].x+v.metrics.advance*v.scale)*f;for(let w=i;w<=l;w++)a[w].x-=x,a[w].y+=m}function AL(a,i,l){const{horizontalAlign:f,verticalAlign:m}=Zv(l),v=i[0]-a.displaySize[0]*f,x=i[1]-a.displaySize[1]*m;return{image:a,top:x,bottom:x+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function G6(a){var i,l;let f=a.left,m=a.top,v=a.right-f,x=a.bottom-m;const w=(i=a.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",A=(l=a.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",R=(a.image.content[2]-a.image.content[0])/(a.image.content[3]-a.image.content[1]);if(A==="proportional"){if(w==="stretchOnly"&&v/x<R||w==="proportional"){const L=Math.ceil(x*R);f*=L/v,v=L}}else if(w==="proportional"&&A==="stretchOnly"&&R!==0&&v/x>R){const L=Math.ceil(v/R);m*=L/x,x=L}return{x1:f,y1:m,x2:f+v,y2:m+x}}function q6(a,i,l,f,m,v){const x=a.image;let w;if(x.content){const ce=x.content,ye=x.pixelRatio||1;w=[ce[0]/ye,ce[1]/ye,x.displaySize[0]-ce[2]/ye,x.displaySize[1]-ce[3]/ye]}const A=i.left*v,R=i.right*v;let L,z,N,G;l==="width"||l==="both"?(G=m[0]+A-f[3],z=m[0]+R+f[1]):(G=m[0]+(A+R-x.displaySize[0])/2,z=G+x.displaySize[0]);const Y=i.top*v,ne=i.bottom*v;return l==="height"||l==="both"?(L=m[1]+Y-f[0],N=m[1]+ne+f[2]):(L=m[1]+(Y+ne-x.displaySize[1])/2,N=L+x.displaySize[1]),{image:x,top:L,right:z,bottom:N,left:G,collisionPadding:w}}const Ff=255,$a=128,hl=Ff*$a;function K6(a,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Pr(a+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:m}=l;let v=0;for(;v<f.length&&f[v]<=a;)v++;v=Math.max(0,v-1);let x=v;for(;x<f.length&&f[x]<a+1;)x++;x=Math.min(f.length-1,x);const w=f[v],A=f[x];return l.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:A,interpolationType:m}:{kind:"camera",minZoom:w,maxZoom:A,minSize:l.evaluate(new Pr(w)),maxSize:l.evaluate(new Pr(A)),interpolationType:m}}}function Hv(a,i,l){let f="never";const m=a.get(i);return m?f=m:a.get(l)&&(f="always"),f}const CL=cl.VectorTileFeature.types,PL=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function L0(a,i,l,f,m,v,x,w,A,R,L,z,N){const G=w?Math.min(hl,Math.round(w[0])):0,Y=w?Math.min(hl,Math.round(w[1])):0;a.emplaceBack(i,l,Math.round(32*f),Math.round(32*m),v,x,(G<<1)+(A?1:0),Y,16*R,16*L,256*z,256*N)}function Wv(a,i,l){a.emplaceBack(i.x,i.y,l),a.emplaceBack(i.x,i.y,l),a.emplaceBack(i.x,i.y,l),a.emplaceBack(i.x,i.y,l)}function TL(a){for(const i of a.sections)if(vf(i.text))return!0;return!1}class Gv{constructor(i){this.layoutVertexArray=new ao,this.indexArray=new Pn,this.programConfigurations=i,this.segments=new vn,this.dynamicLayoutVertexArray=new Na,this.opacityVertexArray=new ol,this.hasVisibleVertices=!1,this.placedSymbolArray=new Rr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,f,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,oL.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,aL.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,PL,!0),this.opacityVertexBuffer.itemSize=1),(f||m)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}yt("SymbolBuffers",Gv);class qv{constructor(i,l,f){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new f,this.segments=new vn,this.collisionVertexArray=new Gn}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,sL.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}yt("CollisionBuffers",qv);class oh{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Cv([]),this.placementViewportMatrix=Cv([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=K6(this.zoom,l["text-size"]),this.iconSizeData=K6(this.zoom,l["icon-size"]);const f=this.layers[0].layout,m=f.get("symbol-sort-key"),v=f.get("symbol-z-order");this.canOverlap=Hv(f,"text-overlap","text-allow-overlap")!=="never"||Hv(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(x=>d.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID}createArrays(){this.text=new Gv(new wc(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new Gv(new wc(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new kr,this.lineVertexArray=new vi,this.symbolInstances=new io,this.textAnchorOffsets=new Zn}calculateGlyphDependencies(i,l,f,m,v){for(let x=0;x<i.length;x++)if(l[i.charCodeAt(x)]=!0,(f||m)&&v){const w=Df[i.charAt(x)];w&&(l[w.charCodeAt(0)]=!0)}}populate(i,l,f){const m=this.layers[0],v=m.layout,x=v.get("text-font"),w=v.get("text-field"),A=v.get("icon-image"),R=(w.value.kind!=="constant"||w.value.value instanceof jn&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),L=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,z=v.get("symbol-sort-key");if(this.features=[],!R&&!L)return;const N=l.iconDependencies,G=l.glyphDependencies,Y=l.availableImages,ne=new Pr(this.zoom);for(const{feature:ce,id:ye,index:Ce,sourceLayerIndex:xe}of i){const Ae=m._featureFilter.needGeometry,ze=Ec(ce,Ae);if(!m._featureFilter.filter(ne,ze,f))continue;let je,ht;if(Ae||(ze.geometry=Sc(ce)),R){const st=m.getValueAndResolveTokens("text-field",ze,f,Y),nt=jn.factory(st),vt=this.hasRTLText=this.hasRTLText||TL(nt);(!vt||Ba.getRTLTextPluginStatus()==="unavailable"||vt&&Ba.isParsed())&&(je=cL(nt,m,ze))}if(L){const st=m.getValueAndResolveTokens("icon-image",ze,f,Y);ht=st instanceof Zi?st:Zi.fromString(st)}if(!je&&!ht)continue;const wt=this.sortFeaturesByKey?z.evaluate(ze,{},f):void 0;if(this.features.push({id:ye,text:je,icon:ht,index:Ce,sourceLayerIndex:xe,geometry:ze.geometry,properties:ce.properties,type:CL[ce.type],sortKey:wt}),ht&&(N[ht.name]=!0),je){const st=x.evaluate(ze,{},f).join(","),nt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ah.vertical)>=0;for(const vt of je.sections)if(vt.image)N[vt.image.name]=!0;else{const At=gf(je.toString()),lt=vt.fontStack||st,$e=G[lt]=G[lt]||{};this.calculateGlyphDependencies(vt.text,$e,nt,this.allowVerticalPlacement,At)}}}v.get("symbol-placement")==="line"&&(this.features=function(ce){const ye={},Ce={},xe=[];let Ae=0;function ze(st){xe.push(ce[st]),Ae++}function je(st,nt,vt){const At=Ce[st];return delete Ce[st],Ce[nt]=At,xe[At].geometry[0].pop(),xe[At].geometry[0]=xe[At].geometry[0].concat(vt[0]),At}function ht(st,nt,vt){const At=ye[nt];return delete ye[nt],ye[st]=At,xe[At].geometry[0].shift(),xe[At].geometry[0]=vt[0].concat(xe[At].geometry[0]),At}function wt(st,nt,vt){const At=vt?nt[0][nt[0].length-1]:nt[0][0];return`${st}:${At.x}:${At.y}`}for(let st=0;st<ce.length;st++){const nt=ce[st],vt=nt.geometry,At=nt.text?nt.text.toString():null;if(!At){ze(st);continue}const lt=wt(At,vt),$e=wt(At,vt,!0);if(lt in Ce&&$e in ye&&Ce[lt]!==ye[$e]){const bt=ht(lt,$e,vt),_t=je(lt,$e,xe[bt].geometry);delete ye[lt],delete Ce[$e],Ce[wt(At,xe[_t].geometry,!0)]=_t,xe[bt].geometry=null}else lt in Ce?je(lt,$e,vt):$e in ye?ht(lt,$e,vt):(ze(st),ye[lt]=Ae-1,Ce[$e]=Ae-1)}return xe.filter(st=>st.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ce,ye)=>ce.sortKey-ye.sortKey)}update(i,l,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,f),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const f=this.lineVertexArray.length;if(i.segment!==void 0){let m=i.dist(l[i.segment+1]),v=i.dist(l[i.segment]);const x={};for(let w=i.segment+1;w<l.length;w++)x[w]={x:l[w].x,y:l[w].y,tileUnitDistanceFromAnchor:m},w<l.length-1&&(m+=l[w+1].dist(l[w]));for(let w=i.segment||0;w>=0;w--)x[w]={x:l[w].x,y:l[w].y,tileUnitDistanceFromAnchor:v},w>0&&(v+=l[w-1].dist(l[w]));for(let w=0;w<l.length;w++){const A=x[w];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(i,l,f,m,v,x,w,A,R,L,z,N){const G=i.indexArray,Y=i.layoutVertexArray,ne=i.segments.prepareSegment(4*l.length,Y,G,this.canOverlap?x.sortKey:void 0),ce=this.glyphOffsetArray.length,ye=ne.vertexLength,Ce=this.allowVerticalPlacement&&w===d.ah.vertical?Math.PI/2:0,xe=x.text&&x.text.sections;for(let Ae=0;Ae<l.length;Ae++){const{tl:ze,tr:je,bl:ht,br:wt,tex:st,pixelOffsetTL:nt,pixelOffsetBR:vt,minFontScaleX:At,minFontScaleY:lt,glyphOffset:$e,isSDF:bt,sectionIndex:_t}=l[Ae],Zt=ne.vertexLength,Er=$e[1];L0(Y,A.x,A.y,ze.x,Er+ze.y,st.x,st.y,f,bt,nt.x,nt.y,At,lt),L0(Y,A.x,A.y,je.x,Er+je.y,st.x+st.w,st.y,f,bt,vt.x,nt.y,At,lt),L0(Y,A.x,A.y,ht.x,Er+ht.y,st.x,st.y+st.h,f,bt,nt.x,vt.y,At,lt),L0(Y,A.x,A.y,wt.x,Er+wt.y,st.x+st.w,st.y+st.h,f,bt,vt.x,vt.y,At,lt),Wv(i.dynamicLayoutVertexArray,A,Ce),G.emplaceBack(Zt,Zt+1,Zt+2),G.emplaceBack(Zt+1,Zt+2,Zt+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($e[0]),Ae!==l.length-1&&_t===l[Ae+1].sectionIndex||i.programConfigurations.populatePaintArrays(Y.length,x,x.index,{},N,xe&&xe[_t])}i.placedSymbolArray.emplaceBack(A.x,A.y,ce,this.glyphOffsetArray.length-ce,ye,R,L,A.segment,f?f[0]:0,f?f[1]:0,m[0],m[1],w,0,!1,0,z)}_addCollisionDebugVertex(i,l,f,m,v,x){return l.emplaceBack(0,0),i.emplaceBack(f.x,f.y,m,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(i,l,f,m,v,x,w){const A=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),R=A.vertexLength,L=v.layoutVertexArray,z=v.collisionVertexArray,N=w.anchorX,G=w.anchorY;this._addCollisionDebugVertex(L,z,x,N,G,new P(i,l)),this._addCollisionDebugVertex(L,z,x,N,G,new P(f,l)),this._addCollisionDebugVertex(L,z,x,N,G,new P(f,m)),this._addCollisionDebugVertex(L,z,x,N,G,new P(i,m)),A.vertexLength+=4;const Y=v.indexArray;Y.emplaceBack(R,R+1),Y.emplaceBack(R+1,R+2),Y.emplaceBack(R+2,R+3),Y.emplaceBack(R+3,R),A.primitiveLength+=4}addDebugCollisionBoxes(i,l,f,m){for(let v=i;v<l;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new qv(Wn,k6.members,jr),this.iconCollisionBox=new qv(Wn,k6.members,jr);for(let i=0;i<this.symbolInstances.length;i++){const l=this.symbolInstances.get(i);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(i,l,f,m,v,x,w,A,R){const L={};for(let z=l;z<f;z++){const N=i.get(z);L.textBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.textFeatureIndex=N.featureIndex;break}for(let z=m;z<v;z++){const N=i.get(z);L.verticalTextBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.verticalTextFeatureIndex=N.featureIndex;break}for(let z=x;z<w;z++){const N=i.get(z);L.iconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.iconFeatureIndex=N.featureIndex;break}for(let z=A;z<R;z++){const N=i.get(z);L.verticalIconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.verticalIconFeatureIndex=N.featureIndex;break}return L}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const f=i.placedSymbolArray.get(l),m=f.vertexStartIndex+4*f.numGlyphs;for(let v=f.vertexStartIndex;v<m;v+=4)i.indexArray.emplaceBack(v,v+1,v+2),i.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),f=Math.cos(i),m=[],v=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const A=this.symbolInstances.get(w);m.push(0|Math.round(l*A.anchorX+f*A.anchorY)),v.push(A.featureIndex)}return x.sort((w,A)=>m[w]-m[A]||v[A]-v[w]),x}addToSortKeyRanges(i,l){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const f=this.symbolInstances.get(l);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((m,v,x)=>{m>=0&&x.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let X6,Y6;yt("SymbolBucket",oh,{omit:["layers","collisionBoxArray","features","compareText"]}),oh.MAX_GLYPHS=65535,oh.addDynamicAttributes=Wv;var Kv={get paint(){return Y6=Y6||new p({"icon-opacity":new It(Le.paint_symbol["icon-opacity"]),"icon-color":new It(Le.paint_symbol["icon-color"]),"icon-halo-color":new It(Le.paint_symbol["icon-halo-color"]),"icon-halo-width":new It(Le.paint_symbol["icon-halo-width"]),"icon-halo-blur":new It(Le.paint_symbol["icon-halo-blur"]),"icon-translate":new Et(Le.paint_symbol["icon-translate"]),"icon-translate-anchor":new Et(Le.paint_symbol["icon-translate-anchor"]),"text-opacity":new It(Le.paint_symbol["text-opacity"]),"text-color":new It(Le.paint_symbol["text-color"],{runtimeType:An,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new It(Le.paint_symbol["text-halo-color"]),"text-halo-width":new It(Le.paint_symbol["text-halo-width"]),"text-halo-blur":new It(Le.paint_symbol["text-halo-blur"]),"text-translate":new Et(Le.paint_symbol["text-translate"]),"text-translate-anchor":new Et(Le.paint_symbol["text-translate-anchor"])})},get layout(){return X6=X6||new p({"symbol-placement":new Et(Le.layout_symbol["symbol-placement"]),"symbol-spacing":new Et(Le.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Et(Le.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new It(Le.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Et(Le.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Et(Le.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Et(Le.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Et(Le.layout_symbol["icon-ignore-placement"]),"icon-optional":new Et(Le.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Et(Le.layout_symbol["icon-rotation-alignment"]),"icon-size":new It(Le.layout_symbol["icon-size"]),"icon-text-fit":new Et(Le.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Et(Le.layout_symbol["icon-text-fit-padding"]),"icon-image":new It(Le.layout_symbol["icon-image"]),"icon-rotate":new It(Le.layout_symbol["icon-rotate"]),"icon-padding":new It(Le.layout_symbol["icon-padding"]),"icon-keep-upright":new Et(Le.layout_symbol["icon-keep-upright"]),"icon-offset":new It(Le.layout_symbol["icon-offset"]),"icon-anchor":new It(Le.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Et(Le.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Et(Le.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Et(Le.layout_symbol["text-rotation-alignment"]),"text-field":new It(Le.layout_symbol["text-field"]),"text-font":new It(Le.layout_symbol["text-font"]),"text-size":new It(Le.layout_symbol["text-size"]),"text-max-width":new It(Le.layout_symbol["text-max-width"]),"text-line-height":new Et(Le.layout_symbol["text-line-height"]),"text-letter-spacing":new It(Le.layout_symbol["text-letter-spacing"]),"text-justify":new It(Le.layout_symbol["text-justify"]),"text-radial-offset":new It(Le.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Et(Le.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new It(Le.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new It(Le.layout_symbol["text-anchor"]),"text-max-angle":new Et(Le.layout_symbol["text-max-angle"]),"text-writing-mode":new Et(Le.layout_symbol["text-writing-mode"]),"text-rotate":new It(Le.layout_symbol["text-rotate"]),"text-padding":new Et(Le.layout_symbol["text-padding"]),"text-keep-upright":new Et(Le.layout_symbol["text-keep-upright"]),"text-transform":new It(Le.layout_symbol["text-transform"]),"text-offset":new It(Le.layout_symbol["text-offset"]),"text-allow-overlap":new Et(Le.layout_symbol["text-allow-overlap"]),"text-overlap":new Et(Le.layout_symbol["text-overlap"]),"text-ignore-placement":new Et(Le.layout_symbol["text-ignore-placement"]),"text-optional":new Et(Le.layout_symbol["text-optional"])})}};class J6{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Ro,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}yt("FormatSectionOverride",J6,{omit:["defaultValue"]});class D0 extends _{constructor(i){super(i,Kv)}recalculate(i,l){if(super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const m=[];for(const v of f)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,l,f,m){const v=this.layout.get(i).evaluate(l,{},f,m),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||Ou(x.value)||!v?v:function(w,A){return A.replace(/{([^{}]+)}/g,(R,L)=>w&&L in w?String(w[L]):"")}(l.properties,v)}createBucket(i){return new oh(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of Kv.paint.overridableProperties){if(!D0.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),f=new J6(l),m=new tf(f,l.property.specification);let v=null;v=l.value.kind==="constant"||l.value.kind==="source"?new rf("source",m):new nf("composite",m,l.value.zoomStops),this.paint._values[i]=new Do(l.property,v,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,f){return!(!this.layout||l.isDataDriven()||f.isDataDriven())&&D0.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const f=i.get("text-field"),m=Kv.paint.properties[l];let v=!1;const x=w=>{for(const A of w)if(m.overrides&&m.overrides.hasOverride(A))return void(v=!0)};if(f.value.kind==="constant"&&f.value.value instanceof jn)x(f.value.value.sections);else if(f.value.kind==="source"){const w=R=>{v||(R instanceof os&&un(R.value)===ro?x(R.value.sections):R instanceof wu?x(R.sections):R.eachChild(w))},A=f.value;A._styleExpression&&w(A._styleExpression.expression)}return v}}let Q6;var IL={get paint(){return Q6=Q6||new p({"background-color":new Et(Le.paint_background["background-color"]),"background-pattern":new o(Le.paint_background["background-pattern"]),"background-opacity":new Et(Le.paint_background["background-opacity"])})}};class ML extends _{constructor(i){super(i,IL)}}let e4;var RL={get paint(){return e4=e4||new p({"raster-opacity":new Et(Le.paint_raster["raster-opacity"]),"raster-hue-rotate":new Et(Le.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Et(Le.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Et(Le.paint_raster["raster-brightness-max"]),"raster-saturation":new Et(Le.paint_raster["raster-saturation"]),"raster-contrast":new Et(Le.paint_raster["raster-contrast"]),"raster-resampling":new Et(Le.paint_raster["raster-resampling"]),"raster-fade-duration":new Et(Le.paint_raster["raster-fade-duration"])})}};class kL extends _{constructor(i){super(i,RL)}}class LL extends _{constructor(i){super(i,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class DL{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Xv=63710088e-1;class dl{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new dl(ae(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,f=this.lat*l,m=i.lat*l,v=Math.sin(f)*Math.sin(m)+Math.cos(f)*Math.cos(m)*Math.cos((i.lng-this.lng)*l);return Xv*Math.acos(Math.min(v,1))}static convert(i){if(i instanceof dl)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new dl(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new dl(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const t4=2*Math.PI*Xv;function r4(a){return t4*Math.cos(a*Math.PI/180)}function n4(a){return(180+a)/360}function i4(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function o4(a,i){return a/r4(i)}function Yv(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class O0{constructor(i,l,f=0){this.x=+i,this.y=+l,this.z=+f}static fromLngLat(i,l=0){const f=dl.convert(i);return new O0(n4(f.lng),i4(f.lat),o4(l,f.lat))}toLngLat(){return new dl(360*this.x-180,Yv(this.y))}toAltitude(){return this.z*r4(Yv(this.y))}meterInMercatorCoordinateUnits(){return 1/t4*(i=Yv(this.y),1/Math.cos(i*Math.PI/180));var i}}function a4(a,i,l){var f=2*Math.PI*6378137/256/Math.pow(2,l);return[a*f-2*Math.PI*6378137/2,i*f-2*Math.PI*6378137/2]}class Jv{constructor(i,l,f){if(i<0||i>25||f<0||f>=Math.pow(2,i)||l<0||l>=Math.pow(2,i))throw new Error(`x=${l}, y=${f}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=l,this.y=f,this.key=Bf(0,i,i,l,f)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l,f){const m=(x=this.y,w=this.z,A=a4(256*(v=this.x),256*(x=Math.pow(2,w)-x-1),w),R=a4(256*(v+1),256*(x+1),w),A[0]+","+A[1]+","+R[0]+","+R[1]);var v,x,w,A,R;const L=function(z,N,G){let Y,ne="";for(let ce=z;ce>0;ce--)Y=1<<ce-1,ne+=(N&Y?1:0)+(G&Y?2:0);return ne}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,m)}isChildOf(i){const l=this.z-i.z;return l>0&&i.x===this.x>>l&&i.y===this.y>>l}getTilePoint(i){const l=Math.pow(2,this.z);return new P((i.x*l-this.x)*hn,(i.y*l-this.y)*hn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class s4{constructor(i,l){this.wrap=i,this.canonical=l,this.key=Bf(i,l.z,l.z,l.x,l.y)}}class lo{constructor(i,l,f,m,v){if(i<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${f}`);this.overscaledZ=i,this.wrap=l,this.canonical=new Jv(f,+m,+v),this.key=Bf(l,i,f,m,v)}clone(){return new lo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-i;return i>this.canonical.z?new lo(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new lo(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-i;return i>this.canonical.z?Bf(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y):Bf(this.wrap*+l,i,i,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new lo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,f=2*this.canonical.x,m=2*this.canonical.y;return[new lo(l,this.wrap,l,f,m),new lo(l,this.wrap,l,f+1,m),new lo(l,this.wrap,l,f,m+1),new lo(l,this.wrap,l,f+1,m+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new lo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new lo(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new s4(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new O0(i.x-this.wrap,i.y))}}function Bf(a,i,l,f,m){(a*=2)<0&&(a=-1*a-1);const v=1<<l;return(v*v*a+v*m+f).toString(36)+l.toString(36)+i.toString(36)}yt("CanonicalTileID",Jv),yt("OverscaledTileID",lo,{omit:["posMatrix"]});class l4{constructor(i,l,f,m=1,v=1,x=1,w=0){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void qe(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const A=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let R=0;R<A;R++)this.data[this._idx(-1,R)]=this.data[this._idx(0,R)],this.data[this._idx(A,R)]=this.data[this._idx(A-1,R)],this.data[this._idx(R,-1)]=this.data[this._idx(R,0)],this.data[this._idx(R,A)]=this.data[this._idx(R,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let R=0;R<A;R++)for(let L=0;L<A;L++){const z=this.get(R,L);z>this.max&&(this.max=z),z<this.min&&(this.min=z)}}get(i,l){const f=new Uint8Array(this.data.buffer),m=4*this._idx(i,l);return this.unpack(f[m],f[m+1],f[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}unpack(i,l,f){return i*this.redFactor+l*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new so({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,l,f){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,v=l*this.dim+this.dim,x=f*this.dim,w=f*this.dim+this.dim;switch(l){case-1:m=v-1;break;case 1:v=m+1}switch(f){case-1:x=w-1;break;case 1:w=x+1}const A=-l*this.dim,R=-f*this.dim;for(let L=x;L<w;L++)for(let z=m;z<v;z++)this.data[this._idx(z,L)]=i.data[this._idx(z+A,L+R)]}}yt("DEMData",l4);class c4{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const f=i[l];this._stringToNumber[f]=l,this._numberToString[l]=f}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class u4{constructor(i,l,f,m,v){this.type="Feature",this._vectorTileFeature=i,i._z=l,i._x=f,i._y=m,this.properties=i.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(i[l]=this[l]);return i}}class h4{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new vc(hn,16,0),this.grid3D=new vc(hn,16,0),this.featureIndexArray=new oo,this.promoteId=l}insert(i,l,f,m,v,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,m,v);const A=x?this.grid3D:this.grid;for(let R=0;R<l.length;R++){const L=l[R],z=[1/0,1/0,-1/0,-1/0];for(let N=0;N<L.length;N++){const G=L[N];z[0]=Math.min(z[0],G.x),z[1]=Math.min(z[1],G.y),z[2]=Math.max(z[2],G.x),z[3]=Math.max(z[3],G.y)}z[0]<hn&&z[1]<hn&&z[2]>=0&&z[3]>=0&&A.insert(w,z[0],z[1],z[2],z[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new cl.VectorTile(new jv(this.rawTileData)).layers,this.sourceLayerCoder=new c4(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,l,f,m){this.loadVTLayers();const v=i.params||{},x=hn/i.tileSize/i.scale,w=of(v.filter),A=i.queryGeometry,R=i.queryPadding*x,L=f4(A),z=this.grid.query(L.minX-R,L.minY-R,L.maxX+R,L.maxY+R),N=f4(i.cameraQueryGeometry),G=this.grid3D.query(N.minX-R,N.minY-R,N.maxX+R,N.maxY+R,(ce,ye,Ce,xe)=>function(Ae,ze,je,ht,wt){for(const nt of Ae)if(ze<=nt.x&&je<=nt.y&&ht>=nt.x&&wt>=nt.y)return!0;const st=[new P(ze,je),new P(ze,wt),new P(ht,wt),new P(ht,je)];if(Ae.length>2){for(const nt of st)if(Ju(Ae,nt))return!0}for(let nt=0;nt<Ae.length-1;nt++)if(mk(Ae[nt],Ae[nt+1],st))return!0;return!1}(i.cameraQueryGeometry,ce-R,ye-R,Ce+R,xe+R));for(const ce of G)z.push(ce);z.sort(OL);const Y={};let ne;for(let ce=0;ce<z.length;ce++){const ye=z[ce];if(ye===ne)continue;ne=ye;const Ce=this.featureIndexArray.get(ye);let xe=null;this.loadMatchingFeature(Y,Ce.bucketIndex,Ce.sourceLayerIndex,Ce.featureIndex,w,v.layers,v.availableImages,l,f,m,(Ae,ze,je)=>(xe||(xe=Sc(Ae)),ze.queryIntersectsFeature(A,Ae,je,xe,this.z,i.transform,x,i.pixelPosMatrix)))}return Y}loadMatchingFeature(i,l,f,m,v,x,w,A,R,L,z){const N=this.bucketLayerIDs[l];if(x&&!function(ce,ye){for(let Ce=0;Ce<ce.length;Ce++)if(ye.indexOf(ce[Ce])>=0)return!0;return!1}(x,N))return;const G=this.sourceLayerCoder.decode(f),Y=this.vtLayers[G].feature(m);if(v.needGeometry){const ce=Ec(Y,!0);if(!v.filter(new Pr(this.tileID.overscaledZ),ce,this.tileID.canonical))return}else if(!v.filter(new Pr(this.tileID.overscaledZ),Y))return;const ne=this.getId(Y,G);for(let ce=0;ce<N.length;ce++){const ye=N[ce];if(x&&x.indexOf(ye)<0)continue;const Ce=A[ye];if(!Ce)continue;let xe={};ne&&L&&(xe=L.getState(Ce.sourceLayer||"_geojsonTileLayer",ne));const Ae=J({},R[ye]);Ae.paint=d4(Ae.paint,Ce.paint,Y,xe,w),Ae.layout=d4(Ae.layout,Ce.layout,Y,xe,w);const ze=!z||z(Y,Ce,xe);if(!ze)continue;const je=new u4(Y,this.z,this.x,this.y,ne);je.layer=Ae;let ht=i[ye];ht===void 0&&(ht=i[ye]=[]),ht.push({featureIndex:m,feature:je,intersectionZ:ze})}}lookupSymbolFeatures(i,l,f,m,v,x,w,A){const R={};this.loadVTLayers();const L=of(v);for(const z of i)this.loadMatchingFeature(R,f,m,z,L,x,w,A,l);return R}hasLayer(i){for(const l of this.bucketLayerIDs)for(const f of l)if(i===f)return!0;return!1}getId(i,l){let f=i.id;return this.promoteId&&(f=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof f=="boolean"&&(f=Number(f))),f}}function d4(a,i,l,f,m){return Re(a,(v,x)=>{const w=i instanceof Hu?i.get(x):null;return w&&w.evaluate?w.evaluate(l,f,m):w})}function f4(a){let i=1/0,l=1/0,f=-1/0,m=-1/0;for(const v of a)i=Math.min(i,v.x),l=Math.min(l,v.y),f=Math.max(f,v.x),m=Math.max(m,v.y);return{minX:i,minY:l,maxX:f,maxY:m}}function OL(a,i){return i-a}function p4(a,i,l,f,m){const v=[];for(let x=0;x<a.length;x++){const w=a[x];let A;for(let R=0;R<w.length-1;R++){let L=w[R],z=w[R+1];L.x<i&&z.x<i||(L.x<i?L=new P(i,L.y+(i-L.x)/(z.x-L.x)*(z.y-L.y))._round():z.x<i&&(z=new P(i,L.y+(i-L.x)/(z.x-L.x)*(z.y-L.y))._round()),L.y<l&&z.y<l||(L.y<l?L=new P(L.x+(l-L.y)/(z.y-L.y)*(z.x-L.x),l)._round():z.y<l&&(z=new P(L.x+(l-L.y)/(z.y-L.y)*(z.x-L.x),l)._round()),L.x>=f&&z.x>=f||(L.x>=f?L=new P(f,L.y+(f-L.x)/(z.x-L.x)*(z.y-L.y))._round():z.x>=f&&(z=new P(f,L.y+(f-L.x)/(z.x-L.x)*(z.y-L.y))._round()),L.y>=m&&z.y>=m||(L.y>=m?L=new P(L.x+(m-L.y)/(z.y-L.y)*(z.x-L.x),m)._round():z.y>=m&&(z=new P(L.x+(m-L.y)/(z.y-L.y)*(z.x-L.x),m)._round()),A&&L.equals(A[A.length-1])||(A=[L],v.push(A)),A.push(z)))))}}return v}yt("FeatureIndex",h4,{omit:["rawTileData","sourceLayerCoder"]});class fl extends P{constructor(i,l,f,m){super(i,l),this.angle=f,m!==void 0&&(this.segment=m)}clone(){return new fl(this.x,this.y,this.angle,this.segment)}}function m4(a,i,l,f,m){if(i.segment===void 0||l===0)return!0;let v=i,x=i.segment+1,w=0;for(;w>-l/2;){if(x--,x<0)return!1;w-=a[x].dist(v),v=a[x]}w+=a[x].dist(a[x+1]),x++;const A=[];let R=0;for(;w<l/2;){const L=a[x],z=a[x+1];if(!z)return!1;let N=a[x-1].angleTo(L)-L.angleTo(z);for(N=Math.abs((N+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:w,angleDelta:N}),R+=N;w-A[0].distance>f;)R-=A.shift().angleDelta;if(R>m)return!1;x++,w+=L.dist(z)}return!0}function g4(a){let i=0;for(let l=0;l<a.length-1;l++)i+=a[l].dist(a[l+1]);return i}function y4(a,i,l){return a?.6*i*l:0}function v4(a,i){return Math.max(a?a.right-a.left:0,i?i.right-i.left:0)}function zL(a,i,l,f,m,v){const x=y4(l,m,v),w=v4(l,f)*v;let A=0;const R=g4(a)/2;for(let L=0;L<a.length-1;L++){const z=a[L],N=a[L+1],G=z.dist(N);if(A+G>R){const Y=(R-A)/G,ne=ii.number(z.x,N.x,Y),ce=ii.number(z.y,N.y,Y),ye=new fl(ne,ce,N.angleTo(z),L);return ye._round(),!x||m4(a,ye,w,x,i)?ye:void 0}A+=G}}function FL(a,i,l,f,m,v,x,w,A){const R=y4(f,v,x),L=v4(f,m),z=L*x,N=a[0].x===0||a[0].x===A||a[0].y===0||a[0].y===A;return i-z<i/4&&(i=z+i/4),_4(a,N?i/2*w%i:(L/2+2*v)*x*w%i,i,R,l,z,N,!1,A)}function _4(a,i,l,f,m,v,x,w,A){const R=v/2,L=g4(a);let z=0,N=i-l,G=[];for(let Y=0;Y<a.length-1;Y++){const ne=a[Y],ce=a[Y+1],ye=ne.dist(ce),Ce=ce.angleTo(ne);for(;N+l<z+ye;){N+=l;const xe=(N-z)/ye,Ae=ii.number(ne.x,ce.x,xe),ze=ii.number(ne.y,ce.y,xe);if(Ae>=0&&Ae<A&&ze>=0&&ze<A&&N-R>=0&&N+R<=L){const je=new fl(Ae,ze,Ce,Y);je._round(),f&&!m4(a,je,v,f,m)||G.push(je)}}z+=ye}return w||G.length||x||(G=_4(a,z/2,l,f,m,v,x,!0,A)),G}yt("Anchor",fl);const ah=Oi;function x4(a,i,l,f){const m=[],v=a.image,x=v.pixelRatio,w=v.paddedRect.w-2*ah,A=v.paddedRect.h-2*ah;let R={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};const L=v.stretchX||[[0,w]],z=v.stretchY||[[0,A]],N=($e,bt)=>$e+bt[1]-bt[0],G=L.reduce(N,0),Y=z.reduce(N,0),ne=w-G,ce=A-Y;let ye=0,Ce=G,xe=0,Ae=Y,ze=0,je=ne,ht=0,wt=ce;if(v.content&&f){const $e=v.content,bt=$e[2]-$e[0],_t=$e[3]-$e[1];(v.textFitWidth||v.textFitHeight)&&(R=G6(a)),ye=z0(L,0,$e[0]),xe=z0(z,0,$e[1]),Ce=z0(L,$e[0],$e[2]),Ae=z0(z,$e[1],$e[3]),ze=$e[0]-ye,ht=$e[1]-xe,je=bt-Ce,wt=_t-Ae}const st=R.x1,nt=R.y1,vt=R.x2-st,At=R.y2-nt,lt=($e,bt,_t,Zt)=>{const Er=F0($e.stretch-ye,Ce,vt,st),Ar=B0($e.fixed-ze,je,$e.stretch,G),dn=F0(bt.stretch-xe,Ae,At,nt),co=B0(bt.fixed-ht,wt,bt.stretch,Y),ai=F0(_t.stretch-ye,Ce,vt,st),xn=B0(_t.fixed-ze,je,_t.stretch,G),On=F0(Zt.stretch-xe,Ae,At,nt),si=B0(Zt.fixed-ht,wt,Zt.stretch,Y),xi=new P(Er,dn),li=new P(ai,dn),fn=new P(ai,On),Tn=new P(Er,On),bi=new P(Ar/x,co/x),zi=new P(xn/x,si/x),Kn=i*Math.PI/180;if(Kn){const Kr=Math.sin(Kn),Jt=Math.cos(Kn),pn=[Jt,-Kr,Kr,Jt];xi._matMult(pn),li._matMult(pn),Tn._matMult(pn),fn._matMult(pn)}const Fi=$e.stretch+$e.fixed,uo=bt.stretch+bt.fixed;return{tl:xi,tr:li,bl:Tn,br:fn,tex:{x:v.paddedRect.x+ah+Fi,y:v.paddedRect.y+ah+uo,w:_t.stretch+_t.fixed-Fi,h:Zt.stretch+Zt.fixed-uo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:bi,pixelOffsetBR:zi,minFontScaleX:je/x/vt,minFontScaleY:wt/x/At,isSDF:l}};if(f&&(v.stretchX||v.stretchY)){const $e=b4(L,ne,G),bt=b4(z,ce,Y);for(let _t=0;_t<$e.length-1;_t++){const Zt=$e[_t],Er=$e[_t+1];for(let Ar=0;Ar<bt.length-1;Ar++)m.push(lt(Zt,bt[Ar],Er,bt[Ar+1]))}}else m.push(lt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:A+1}));return m}function z0(a,i,l){let f=0;for(const m of a)f+=Math.max(i,Math.min(l,m[1]))-Math.max(i,Math.min(l,m[0]));return f}function b4(a,i,l){const f=[{fixed:-ah,stretch:0}];for(const[m,v]of a){const x=f[f.length-1];f.push({fixed:m-x.stretch,stretch:x.stretch}),f.push({fixed:m-x.stretch,stretch:x.stretch+(v-m)})}return f.push({fixed:i+ah,stretch:l}),f}function F0(a,i,l,f){return a/i*l+f}function B0(a,i,l,f){return a-i*l/f}class N0{constructor(i,l,f,m,v,x,w,A,R,L){var z;if(this.boxStartIndex=i.length,R){let N=x.top,G=x.bottom;const Y=x.collisionPadding;Y&&(N-=Y[1],G+=Y[3]);let ne=G-N;ne>0&&(ne=Math.max(10,ne),this.circleDiameter=ne)}else{const N=!((z=x.image)===null||z===void 0)&&z.content&&(x.image.textFitWidth||x.image.textFitHeight)?G6(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};N.y1=N.y1*w-A[0],N.y2=N.y2*w+A[2],N.x1=N.x1*w-A[3],N.x2=N.x2*w+A[1];const G=x.collisionPadding;if(G&&(N.x1-=G[0]*w,N.y1-=G[1]*w,N.x2+=G[2]*w,N.y2+=G[3]*w),L){const Y=new P(N.x1,N.y1),ne=new P(N.x2,N.y1),ce=new P(N.x1,N.y2),ye=new P(N.x2,N.y2),Ce=L*Math.PI/180;Y._rotate(Ce),ne._rotate(Ce),ce._rotate(Ce),ye._rotate(Ce),N.x1=Math.min(Y.x,ne.x,ce.x,ye.x),N.x2=Math.max(Y.x,ne.x,ce.x,ye.x),N.y1=Math.min(Y.y,ne.y,ce.y,ye.y),N.y2=Math.max(Y.y,ne.y,ce.y,ye.y)}i.emplaceBack(l.x,l.y,N.x1,N.y1,N.x2,N.y2,f,m,v)}this.boxEndIndex=i.length}}class BL{constructor(i=[],l=NL){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:f}=this,m=l[i];for(;i>0;){const v=i-1>>1,x=l[v];if(f(m,x)>=0)break;l[i]=x,i=v}l[i]=m}_down(i){const{data:l,compare:f}=this,m=this.length>>1,v=l[i];for(;i<m;){let x=1+(i<<1),w=l[x];const A=x+1;if(A<this.length&&f(l[A],w)<0&&(x=A,w=l[A]),f(w,v)>=0)break;l[i]=w,i=x}l[i]=v}}function NL(a,i){return a<i?-1:a>i?1:0}function jL(a,i=1,l=!1){let f=1/0,m=1/0,v=-1/0,x=-1/0;const w=a[0];for(let G=0;G<w.length;G++){const Y=w[G];(!G||Y.x<f)&&(f=Y.x),(!G||Y.y<m)&&(m=Y.y),(!G||Y.x>v)&&(v=Y.x),(!G||Y.y>x)&&(x=Y.y)}const A=Math.min(v-f,x-m);let R=A/2;const L=new BL([],$L);if(A===0)return new P(f,m);for(let G=f;G<v;G+=A)for(let Y=m;Y<x;Y+=A)L.push(new sh(G+R,Y+R,R,a));let z=function(G){let Y=0,ne=0,ce=0;const ye=G[0];for(let Ce=0,xe=ye.length,Ae=xe-1;Ce<xe;Ae=Ce++){const ze=ye[Ce],je=ye[Ae],ht=ze.x*je.y-je.x*ze.y;ne+=(ze.x+je.x)*ht,ce+=(ze.y+je.y)*ht,Y+=3*ht}return new sh(ne/Y,ce/Y,0,G)}(a),N=L.length;for(;L.length;){const G=L.pop();(G.d>z.d||!z.d)&&(z=G,l&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,N)),G.max-z.d<=i||(R=G.h/2,L.push(new sh(G.p.x-R,G.p.y-R,R,a)),L.push(new sh(G.p.x+R,G.p.y-R,R,a)),L.push(new sh(G.p.x-R,G.p.y+R,R,a)),L.push(new sh(G.p.x+R,G.p.y+R,R,a)),N+=4)}return l&&(console.log(`num probes: ${N}`),console.log(`best distance: ${z.d}`)),z.p}function $L(a,i){return i.max-a.max}function sh(a,i,l,f){this.p=new P(a,i),this.h=l,this.d=function(m,v){let x=!1,w=1/0;for(let A=0;A<v.length;A++){const R=v[A];for(let L=0,z=R.length,N=z-1;L<z;N=L++){const G=R[L],Y=R[N];G.y>m.y!=Y.y>m.y&&m.x<(Y.x-G.x)*(m.y-G.y)/(Y.y-G.y)+G.x&&(x=!x),w=Math.min(w,i6(m,G,Y))}}return(x?1:-1)*Math.sqrt(w)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var qn;d.aq=void 0,(qn=d.aq||(d.aq={}))[qn.center=1]="center",qn[qn.left=2]="left",qn[qn.right=3]="right",qn[qn.top=4]="top",qn[qn.bottom=5]="bottom",qn[qn["top-left"]=6]="top-left",qn[qn["top-right"]=7]="top-right",qn[qn["bottom-left"]=8]="bottom-left",qn[qn["bottom-right"]=9]="bottom-right";const pl=7,Qv=Number.POSITIVE_INFINITY;function w4(a,i){return i[1]!==Qv?function(l,f,m){let v=0,x=0;switch(f=Math.abs(f),m=Math.abs(m),l){case"top-right":case"top-left":case"top":x=m-pl;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+pl}switch(l){case"top-right":case"bottom-right":case"right":v=-f;break;case"top-left":case"bottom-left":case"left":v=f}return[v,x]}(a,i[0],i[1]):function(l,f){let m=0,v=0;f<0&&(f=0);const x=f/Math.SQRT2;switch(l){case"top-right":case"top-left":v=x-pl;break;case"bottom-right":case"bottom-left":v=-x+pl;break;case"bottom":v=-f+pl;break;case"top":v=f-pl}switch(l){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=f;break;case"right":m=-f}return[m,v]}(a,i[0])}function S4(a,i,l){var f;const m=a.layout,v=(f=m.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(i,{},l);if(v){const w=v.values,A=[];for(let R=0;R<w.length;R+=2){const L=A[R]=w[R],z=w[R+1].map(N=>N*_n);L.startsWith("top")?z[1]-=pl:L.startsWith("bottom")&&(z[1]+=pl),A[R+1]=z}return new gi(A)}const x=m.get("text-variable-anchor");if(x){let w;w=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(i,{},l)*_n,Qv]:m.get("text-offset").evaluate(i,{},l).map(R=>R*_n);const A=[];for(const R of x)A.push(R,w4(R,w));return new gi(A)}return null}function e_(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function VL(a,i,l,f,m,v,x,w,A,R,L){let z=v.textMaxSize.evaluate(i,{});z===void 0&&(z=x);const N=a.layers[0].layout,G=N.get("icon-offset").evaluate(i,{},L),Y=A4(l.horizontal),ne=x/24,ce=a.tilePixelRatio*ne,ye=a.tilePixelRatio*z/24,Ce=a.tilePixelRatio*w,xe=a.tilePixelRatio*N.get("symbol-spacing"),Ae=N.get("text-padding")*a.tilePixelRatio,ze=function($e,bt,_t,Zt=1){const Er=$e.get("icon-padding").evaluate(bt,{},_t),Ar=Er&&Er.values;return[Ar[0]*Zt,Ar[1]*Zt,Ar[2]*Zt,Ar[3]*Zt]}(N,i,L,a.tilePixelRatio),je=N.get("text-max-angle")/180*Math.PI,ht=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point",wt=N.get("icon-rotation-alignment")==="map"&&N.get("symbol-placement")!=="point",st=N.get("symbol-placement"),nt=xe/2,vt=N.get("icon-text-fit");let At;f&&vt!=="none"&&(a.allowVerticalPlacement&&l.vertical&&(At=q6(f,l.vertical,vt,N.get("icon-text-fit-padding"),G,ne)),Y&&(f=q6(f,Y,vt,N.get("icon-text-fit-padding"),G,ne)));const lt=($e,bt)=>{bt.x<0||bt.x>=hn||bt.y<0||bt.y>=hn||function(_t,Zt,Er,Ar,dn,co,ai,xn,On,si,xi,li,fn,Tn,bi,zi,Kn,Fi,uo,Kr,Jt,pn,Xn,bn,Oo){const ha=_t.addToLineVertexArray(Zt,Er);let da,_s,zo,ho,Bi=0,xs=0,$f=0,I4=0,l_=-1,c_=-1;const bs={};let M4=Xu("");if(_t.allowVerticalPlacement&&Ar.vertical){const ci=xn.layout.get("text-rotate").evaluate(Jt,{},bn)+90;zo=new N0(On,Zt,si,xi,li,Ar.vertical,fn,Tn,bi,ci),ai&&(ho=new N0(On,Zt,si,xi,li,ai,Kn,Fi,bi,ci))}if(dn){const ci=xn.layout.get("icon-rotate").evaluate(Jt,{}),fo=xn.layout.get("icon-text-fit")!=="none",Cc=x4(dn,ci,Xn,fo),pa=ai?x4(ai,ci,Xn,fo):void 0;_s=new N0(On,Zt,si,xi,li,dn,Kn,Fi,!1,ci),Bi=4*Cc.length;const Pc=_t.iconSizeData;let Va=null;Pc.kind==="source"?(Va=[$a*xn.layout.get("icon-size").evaluate(Jt,{})],Va[0]>hl&&qe(`${_t.layerIds[0]}: Value for "icon-size" is >= ${Ff}. Reduce your "icon-size".`)):Pc.kind==="composite"&&(Va=[$a*pn.compositeIconSizes[0].evaluate(Jt,{},bn),$a*pn.compositeIconSizes[1].evaluate(Jt,{},bn)],(Va[0]>hl||Va[1]>hl)&&qe(`${_t.layerIds[0]}: Value for "icon-size" is >= ${Ff}. Reduce your "icon-size".`)),_t.addSymbols(_t.icon,Cc,Va,Kr,uo,Jt,d.ah.none,Zt,ha.lineStartIndex,ha.lineLength,-1,bn),l_=_t.icon.placedSymbolArray.length-1,pa&&(xs=4*pa.length,_t.addSymbols(_t.icon,pa,Va,Kr,uo,Jt,d.ah.vertical,Zt,ha.lineStartIndex,ha.lineLength,-1,bn),c_=_t.icon.placedSymbolArray.length-1)}const R4=Object.keys(Ar.horizontal);for(const ci of R4){const fo=Ar.horizontal[ci];if(!da){M4=Xu(fo.text);const pa=xn.layout.get("text-rotate").evaluate(Jt,{},bn);da=new N0(On,Zt,si,xi,li,fo,fn,Tn,bi,pa)}const Cc=fo.positionedLines.length===1;if($f+=E4(_t,Zt,fo,co,xn,bi,Jt,zi,ha,Ar.vertical?d.ah.horizontal:d.ah.horizontalOnly,Cc?R4:[ci],bs,l_,pn,bn),Cc)break}Ar.vertical&&(I4+=E4(_t,Zt,Ar.vertical,co,xn,bi,Jt,zi,ha,d.ah.vertical,["vertical"],bs,c_,pn,bn));const HL=da?da.boxStartIndex:_t.collisionBoxArray.length,WL=da?da.boxEndIndex:_t.collisionBoxArray.length,GL=zo?zo.boxStartIndex:_t.collisionBoxArray.length,qL=zo?zo.boxEndIndex:_t.collisionBoxArray.length,KL=_s?_s.boxStartIndex:_t.collisionBoxArray.length,XL=_s?_s.boxEndIndex:_t.collisionBoxArray.length,YL=ho?ho.boxStartIndex:_t.collisionBoxArray.length,JL=ho?ho.boxEndIndex:_t.collisionBoxArray.length;let fa=-1;const $0=(ci,fo)=>ci&&ci.circleDiameter?Math.max(ci.circleDiameter,fo):fo;fa=$0(da,fa),fa=$0(zo,fa),fa=$0(_s,fa),fa=$0(ho,fa);const k4=fa>-1?1:0;k4&&(fa*=Oo/_n),_t.glyphOffsetArray.length>=oh.MAX_GLYPHS&&qe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jt.sortKey!==void 0&&_t.addToSortKeyRanges(_t.symbolInstances.length,Jt.sortKey);const QL=S4(xn,Jt,bn),[eD,tD]=function(ci,fo){const Cc=ci.length,pa=fo==null?void 0:fo.values;if((pa==null?void 0:pa.length)>0)for(let Pc=0;Pc<pa.length;Pc+=2){const Va=pa[Pc+1];ci.emplaceBack(d.aq[pa[Pc]],Va[0],Va[1])}return[Cc,ci.length]}(_t.textAnchorOffsets,QL);_t.symbolInstances.emplaceBack(Zt.x,Zt.y,bs.right>=0?bs.right:-1,bs.center>=0?bs.center:-1,bs.left>=0?bs.left:-1,bs.vertical||-1,l_,c_,M4,HL,WL,GL,qL,KL,XL,YL,JL,si,$f,I4,Bi,xs,k4,0,fn,fa,eD,tD)}(a,bt,$e,l,f,m,At,a.layers[0],a.collisionBoxArray,i.index,i.sourceLayerIndex,a.index,ce,[Ae,Ae,Ae,Ae],ht,A,Ce,ze,wt,G,i,v,R,L,x)};if(st==="line")for(const $e of p4(i.geometry,0,0,hn,hn)){const bt=FL($e,xe,je,l.vertical||Y,f,24,ye,a.overscaling,hn);for(const _t of bt)Y&&UL(a,Y.text,nt,_t)||lt($e,_t)}else if(st==="line-center"){for(const $e of i.geometry)if($e.length>1){const bt=zL($e,je,l.vertical||Y,f,24,ye);bt&&lt($e,bt)}}else if(i.type==="Polygon")for(const $e of Eu(i.geometry,0)){const bt=jL($e,16);lt($e[0],new fl(bt.x,bt.y,0))}else if(i.type==="LineString")for(const $e of i.geometry)lt($e,new fl($e[0].x,$e[0].y,0));else if(i.type==="Point")for(const $e of i.geometry)for(const bt of $e)lt([bt],new fl(bt.x,bt.y,0))}function E4(a,i,l,f,m,v,x,w,A,R,L,z,N,G,Y){const ne=function(Ce,xe,Ae,ze,je,ht,wt,st){const nt=ze.layout.get("text-rotate").evaluate(ht,{})*Math.PI/180,vt=[];for(const At of xe.positionedLines)for(const lt of At.positionedGlyphs){if(!lt.rect)continue;const $e=lt.rect||{};let bt=j6+1,_t=!0,Zt=1,Er=0;const Ar=(je||st)&&lt.vertical,dn=lt.metrics.advance*lt.scale/2;if(st&&xe.verticalizable&&(Er=At.lineOffset/2-(lt.imageName?-(_n-lt.metrics.width*lt.scale)/2:(lt.scale-1)*_n)),lt.imageName){const Kr=wt[lt.imageName];_t=Kr.sdf,Zt=Kr.pixelRatio,bt=Oi/Zt}const co=je?[lt.x+dn,lt.y]:[0,0];let ai=je?[0,0]:[lt.x+dn+Ae[0],lt.y+Ae[1]-Er],xn=[0,0];Ar&&(xn=ai,ai=[0,0]);const On=lt.metrics.isDoubleResolution?2:1,si=(lt.metrics.left-bt)*lt.scale-dn+ai[0],xi=(-lt.metrics.top-bt)*lt.scale+ai[1],li=si+$e.w/On*lt.scale/Zt,fn=xi+$e.h/On*lt.scale/Zt,Tn=new P(si,xi),bi=new P(li,xi),zi=new P(si,fn),Kn=new P(li,fn);if(Ar){const Kr=new P(-dn,dn-Of),Jt=-Math.PI/2,pn=_n/2-dn,Xn=new P(5-Of-pn,-(lt.imageName?pn:0)),bn=new P(...xn);Tn._rotateAround(Jt,Kr)._add(Xn)._add(bn),bi._rotateAround(Jt,Kr)._add(Xn)._add(bn),zi._rotateAround(Jt,Kr)._add(Xn)._add(bn),Kn._rotateAround(Jt,Kr)._add(Xn)._add(bn)}if(nt){const Kr=Math.sin(nt),Jt=Math.cos(nt),pn=[Jt,-Kr,Kr,Jt];Tn._matMult(pn),bi._matMult(pn),zi._matMult(pn),Kn._matMult(pn)}const Fi=new P(0,0),uo=new P(0,0);vt.push({tl:Tn,tr:bi,bl:zi,br:Kn,tex:$e,writingMode:xe.writingMode,glyphOffset:co,sectionIndex:lt.sectionIndex,isSDF:_t,pixelOffsetTL:Fi,pixelOffsetBR:uo,minFontScaleX:0,minFontScaleY:0})}return vt}(0,l,w,m,v,x,f,a.allowVerticalPlacement),ce=a.textSizeData;let ye=null;ce.kind==="source"?(ye=[$a*m.layout.get("text-size").evaluate(x,{})],ye[0]>hl&&qe(`${a.layerIds[0]}: Value for "text-size" is >= ${Ff}. Reduce your "text-size".`)):ce.kind==="composite"&&(ye=[$a*G.compositeTextSizes[0].evaluate(x,{},Y),$a*G.compositeTextSizes[1].evaluate(x,{},Y)],(ye[0]>hl||ye[1]>hl)&&qe(`${a.layerIds[0]}: Value for "text-size" is >= ${Ff}. Reduce your "text-size".`)),a.addSymbols(a.text,ne,ye,w,v,x,R,i,A.lineStartIndex,A.lineLength,N,Y);for(const Ce of L)z[Ce]=a.text.placedSymbolArray.length-1;return 4*ne.length}function A4(a){for(const i in a)return a[i];return null}function UL(a,i,l,f){const m=a.compareText;if(i in m){const v=m[i];for(let x=v.length-1;x>=0;x--)if(f.dist(v[x])<l)return!0}else m[i]=[];return m[i].push(f),!1}const C4=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class t_{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,f]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=f>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=C4[15&f];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(i,2,1),[w]=new Uint32Array(i,4,1);return new t_(w,x,v,i)}constructor(i,l=64,f=Float64Array,m){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=f,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const v=C4.indexOf(this.ArrayType),x=2*i*this.ArrayType.BYTES_PER_ELEMENT,w=i*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-w%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${f}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+A,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+A),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+A,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=i,this.coords[this._pos++]=l,f}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return r_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:w}=this,A=[0,v.length-1,0],R=[];for(;A.length;){const L=A.pop()||0,z=A.pop()||0,N=A.pop()||0;if(z-N<=w){for(let ce=N;ce<=z;ce++){const ye=x[2*ce],Ce=x[2*ce+1];ye>=i&&ye<=f&&Ce>=l&&Ce<=m&&R.push(v[ce])}continue}const G=N+z>>1,Y=x[2*G],ne=x[2*G+1];Y>=i&&Y<=f&&ne>=l&&ne<=m&&R.push(v[G]),(L===0?i<=Y:l<=ne)&&(A.push(N),A.push(G-1),A.push(1-L)),(L===0?f>=Y:m>=ne)&&(A.push(G+1),A.push(z),A.push(1-L))}return R}within(i,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,w=[0,m.length-1,0],A=[],R=f*f;for(;w.length;){const L=w.pop()||0,z=w.pop()||0,N=w.pop()||0;if(z-N<=x){for(let ce=N;ce<=z;ce++)T4(v[2*ce],v[2*ce+1],i,l)<=R&&A.push(m[ce]);continue}const G=N+z>>1,Y=v[2*G],ne=v[2*G+1];T4(Y,ne,i,l)<=R&&A.push(m[G]),(L===0?i-f<=Y:l-f<=ne)&&(w.push(N),w.push(G-1),w.push(1-L)),(L===0?i+f>=Y:l+f>=ne)&&(w.push(G+1),w.push(z),w.push(1-L))}return A}}function r_(a,i,l,f,m,v){if(m-f<=l)return;const x=f+m>>1;P4(a,i,x,f,m,v),r_(a,i,l,f,x-1,1-v),r_(a,i,l,x+1,m,1-v)}function P4(a,i,l,f,m,v){for(;m>f;){if(m-f>600){const R=m-f+1,L=l-f+1,z=Math.log(R),N=.5*Math.exp(2*z/3),G=.5*Math.sqrt(z*N*(R-N)/R)*(L-R/2<0?-1:1);P4(a,i,l,Math.max(f,Math.floor(l-L*N/R+G)),Math.min(m,Math.floor(l+(R-L)*N/R+G)),v)}const x=i[2*l+v];let w=f,A=m;for(Nf(a,i,f,l),i[2*m+v]>x&&Nf(a,i,f,m);w<A;){for(Nf(a,i,w,A),w++,A--;i[2*w+v]<x;)w++;for(;i[2*A+v]>x;)A--}i[2*f+v]===x?Nf(a,i,f,A):(A++,Nf(a,i,A,m)),A<=l&&(f=A+1),l<=A&&(m=A-1)}}function Nf(a,i,l,f){n_(a,l,f),n_(i,2*l,2*f),n_(i,2*l+1,2*f+1)}function n_(a,i,l){const f=a[i];a[i]=a[l],a[l]=f}function T4(a,i,l,f){const m=a-l,v=i-f;return m*m+v*v}var i_;d.be=void 0,(i_=d.be||(d.be={})).create="create",i_.load="load",i_.fullLoad="fullLoad";let j0=null,jf=[];const o_=1e3/60,a_="loadTime",s_="fullLoadTime",ZL={mark(a){performance.mark(a)},frame(a){const i=a;j0!=null&&jf.push(i-j0),j0=i},clearMetrics(){j0=null,jf=[],performance.clearMeasures(a_),performance.clearMeasures(s_);for(const a in d.be)performance.clearMarks(d.be[a])},getPerformanceMetrics(){performance.measure(a_,d.be.create,d.be.load),performance.measure(s_,d.be.create,d.be.fullLoad);const a=performance.getEntriesByName(a_)[0].duration,i=performance.getEntriesByName(s_)[0].duration,l=jf.length,f=1/(jf.reduce((v,x)=>v+x,0)/l/1e3),m=jf.filter(v=>v>o_).reduce((v,x)=>v+(x-o_)/o_,0);return{loadTime:a,fullLoadTime:i,fps:f,percentDroppedFrames:m/(l+m)*100,totalFrames:l}}};d.$=vn,d.A=Qu,d.B=function(a){if(Ve==null){const i=a.navigator?a.navigator.userAgent:null;Ve=!!a.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Ve},d.C=class{constructor(a,i){this.target=a,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new DL(()=>this.process()),this.subscription=function(l,f,m,v){return l.addEventListener(f,m,!1),{unsubscribe:()=>{l.removeEventListener(f,m,!1)}}}(this.target,"message",l=>this.receive(l)),this.globalScope=Fe(self)?a:window}registerMessageHandler(a,i){this.messageHandlers[a]=i}sendAsync(a,i){return new Promise((l,f)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:l,reject:f},i&&i.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const w={id:m,type:"<cancel>",origin:location.origin,targetMapId:a.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const v=[],x=Object.assign(Object.assign({},a),{id:m,sourceMapId:this.mapId,origin:location.origin,data:_c(a.data,v)});this.target.postMessage(x,{transfer:v})})}receive(a){const i=a.data,l=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[l];const f=this.abortControllers[l];return delete this.abortControllers[l],void(f&&f.abort())}if(Fe(self)||i.mustQueue)return this.tasks[l]=i,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,i)}}process(){if(this.taskQueue.length===0)return;const a=this.taskQueue.shift(),i=this.tasks[a];delete this.tasks[a],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(a,i)}processTask(a,i){return c(this,void 0,void 0,function*(){if(i.type==="<response>"){const m=this.resolveRejects[a];return delete this.resolveRejects[a],m?void(i.error?m.reject(Lo(i.error)):m.resolve(Lo(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(a,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=Lo(i.data),f=new AbortController;this.abortControllers[a]=f;try{const m=yield this.messageHandlers[i.type](i.sourceMapId,l,f);this.completeTask(a,null,m)}catch(m){this.completeTask(a,m)}})}completeTask(a,i,l){const f=[];delete this.abortControllers[a];const m={id:a,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?_c(i):null,data:_c(l,f)};this.target.postMessage(m,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.D=Et,d.E=ri,d.F=function(){var a=new Qu(16);return Qu!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},d.G=Lt,d.H=function(a,i,l){var f,m,v,x,w,A,R,L,z,N,G,Y,ne=l[0],ce=l[1],ye=l[2];return i===a?(a[12]=i[0]*ne+i[4]*ce+i[8]*ye+i[12],a[13]=i[1]*ne+i[5]*ce+i[9]*ye+i[13],a[14]=i[2]*ne+i[6]*ce+i[10]*ye+i[14],a[15]=i[3]*ne+i[7]*ce+i[11]*ye+i[15]):(m=i[1],v=i[2],x=i[3],w=i[4],A=i[5],R=i[6],L=i[7],z=i[8],N=i[9],G=i[10],Y=i[11],a[0]=f=i[0],a[1]=m,a[2]=v,a[3]=x,a[4]=w,a[5]=A,a[6]=R,a[7]=L,a[8]=z,a[9]=N,a[10]=G,a[11]=Y,a[12]=f*ne+w*ce+z*ye+i[12],a[13]=m*ne+A*ce+N*ye+i[13],a[14]=v*ne+R*ce+G*ye+i[14],a[15]=x*ne+L*ce+Y*ye+i[15]),a},d.I=Vv,d.J=function(a,i,l){var f=l[0],m=l[1],v=l[2];return a[0]=i[0]*f,a[1]=i[1]*f,a[2]=i[2]*f,a[3]=i[3]*f,a[4]=i[4]*m,a[5]=i[5]*m,a[6]=i[6]*m,a[7]=i[7]*m,a[8]=i[8]*v,a[9]=i[9]*v,a[10]=i[10]*v,a[11]=i[11]*v,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a},d.K=l6,d.L=function(a,i){const l={};for(let f=0;f<i.length;f++){const m=i[f];m in a&&(l[m]=a[m])}return l},d.M=dl,d.N=n4,d.O=i4,d.P=P,d.Q=lo,d.R=so,d.S=W,d.T=nl,d.U=Z,d.V=Be,d.W=hn,d.X=k,d.Y=O0,d.Z=class extends te{},d._=c,d.a=Tt,d.a$=function(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a},d.a0=Jv,d.a1=Ye,d.a2=a=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(l=>{i.onloadstart=()=>{l(i)};for(const f of a){const m=window.document.createElement("source");Fr(f)||(i.crossOrigin="Anonymous"),m.src=f,i.appendChild(m)}})},d.a3=function(){return we++},d.a4=Gt,d.a5=oh,d.a6=of,d.a7=Ec,d.a8=Pr,d.a9=u4,d.aA=function(a){if(a.type==="custom")return new LL(a);switch(a.type){case"background":return new ML(a);case"circle":return new vk(a);case"fill":return new Ok(a);case"fill-extrusion":return new Xk(a);case"heatmap":return new xk(a);case"hillshade":return new wk(a);case"line":return new iL(a);case"raster":return new kL(a);case"symbol":return new D0(a)}},d.aB=Oe,d.aC=function(a,i){if(!a)return[{command:"setStyle",args:[i]}];let l=[];try{if(!nr(a.version,i.version))return[{command:"setStyle",args:[i]}];nr(a.center,i.center)||l.push({command:"setCenter",args:[i.center]}),nr(a.zoom,i.zoom)||l.push({command:"setZoom",args:[i.zoom]}),nr(a.bearing,i.bearing)||l.push({command:"setBearing",args:[i.bearing]}),nr(a.pitch,i.pitch)||l.push({command:"setPitch",args:[i.pitch]}),nr(a.sprite,i.sprite)||l.push({command:"setSprite",args:[i.sprite]}),nr(a.glyphs,i.glyphs)||l.push({command:"setGlyphs",args:[i.glyphs]}),nr(a.transition,i.transition)||l.push({command:"setTransition",args:[i.transition]}),nr(a.light,i.light)||l.push({command:"setLight",args:[i.light]}),nr(a.terrain,i.terrain)||l.push({command:"setTerrain",args:[i.terrain]}),nr(a.sky,i.sky)||l.push({command:"setSky",args:[i.sky]});const f={},m=[];(function(x,w,A,R){let L;for(L in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,L)&&(Object.prototype.hasOwnProperty.call(w,L)||$t(L,A,R));for(L in w)Object.prototype.hasOwnProperty.call(w,L)&&(Object.prototype.hasOwnProperty.call(x,L)?nr(x[L],w[L])||(x[L].type==="geojson"&&w[L].type==="geojson"&&Ii(x,w,L)?dr(A,{command:"setGeoJSONSourceData",args:[L,w[L].data]}):Vt(L,w,A,R)):kn(L,w,A))})(a.sources,i.sources,m,f);const v=[];a.layers&&a.layers.forEach(x=>{"source"in x&&f[x.source]?l.push({command:"removeLayer",args:[x.id]}):v.push(x)}),l=l.concat(m),function(x,w,A){w=w||[];const R=(x=x||[]).map(En),L=w.map(En),z=x.reduce(Ui,{}),N=w.reduce(Ui,{}),G=R.slice(),Y=Object.create(null);let ne,ce,ye,Ce,xe;for(let Ae=0,ze=0;Ae<R.length;Ae++)ne=R[Ae],Object.prototype.hasOwnProperty.call(N,ne)?ze++:(dr(A,{command:"removeLayer",args:[ne]}),G.splice(G.indexOf(ne,ze),1));for(let Ae=0,ze=0;Ae<L.length;Ae++)ne=L[L.length-1-Ae],G[G.length-1-Ae]!==ne&&(Object.prototype.hasOwnProperty.call(z,ne)?(dr(A,{command:"removeLayer",args:[ne]}),G.splice(G.lastIndexOf(ne,G.length-ze),1)):ze++,Ce=G[G.length-Ae],dr(A,{command:"addLayer",args:[N[ne],Ce]}),G.splice(G.length-Ae,0,ne),Y[ne]=!0);for(let Ae=0;Ae<L.length;Ae++)if(ne=L[Ae],ce=z[ne],ye=N[ne],!Y[ne]&&!nr(ce,ye))if(nr(ce.source,ye.source)&&nr(ce["source-layer"],ye["source-layer"])&&nr(ce.type,ye.type)){for(xe in ur(ce.layout,ye.layout,A,ne,null,"setLayoutProperty"),ur(ce.paint,ye.paint,A,ne,null,"setPaintProperty"),nr(ce.filter,ye.filter)||dr(A,{command:"setFilter",args:[ne,ye.filter]}),nr(ce.minzoom,ye.minzoom)&&nr(ce.maxzoom,ye.maxzoom)||dr(A,{command:"setLayerZoomRange",args:[ne,ye.minzoom,ye.maxzoom]}),ce)Object.prototype.hasOwnProperty.call(ce,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?ur(ce[xe],ye[xe],A,ne,xe.slice(6),"setPaintProperty"):nr(ce[xe],ye[xe])||dr(A,{command:"setLayerProperty",args:[ne,xe,ye[xe]]}));for(xe in ye)Object.prototype.hasOwnProperty.call(ye,xe)&&!Object.prototype.hasOwnProperty.call(ce,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?ur(ce[xe],ye[xe],A,ne,xe.slice(6),"setPaintProperty"):nr(ce[xe],ye[xe])||dr(A,{command:"setLayerProperty",args:[ne,xe,ye[xe]]}))}else dr(A,{command:"removeLayer",args:[ne]}),Ce=G[G.lastIndexOf(ne)+1],dr(A,{command:"addLayer",args:[ye,Ce]})}(v,i.layers,l)}catch(f){console.warn("Unable to compute style diff:",f),l=[{command:"setStyle",args:[i]}]}return l},d.aD=function(a){const i=[],l=a.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),a.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},d.aE=function a(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(let f=0;f<i.length;f++)if(!a(i[f],l[f]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(const f in i)if(!a(i[f],l[f]))return!1;return!0}return i===l},d.aF=Re,d.aG=De,d.aH=class extends bc{constructor(a,i){super(a,i),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},d.aI=x0,d.aJ=class extends bc{constructor(a,i){super(a,i),this.current=uk}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let i=1;i<16;i++)if(a[i]!==this.current[i]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},d.aK=YS,d.aL=class extends bc{constructor(a,i){super(a,i),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},d.aM=class extends bc{constructor(a,i){super(a,i),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},d.aN=JS,d.aO=function(a,i,l,f,m,v,x){var w=1/(i-l),A=1/(f-m),R=1/(v-x);return a[0]=-2*w,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*A,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*R,a[11]=0,a[12]=(i+l)*w,a[13]=(m+f)*A,a[14]=(x+v)*R,a[15]=1,a},d.aP=Kt,d.aQ=yk,d.aR=class extends Ne{},d.aS=lL,d.aT=class extends ft{},d.aU=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},d.aV=f6,d.aW=ms,d.aX=class extends at{},d.aY=Pn,d.aZ=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]&&a[3]===i[3]&&a[4]===i[4]&&a[5]===i[5]&&a[6]===i[6]&&a[7]===i[7]&&a[8]===i[8]&&a[9]===i[9]&&a[10]===i[10]&&a[11]===i[11]&&a[12]===i[12]&&a[13]===i[13]&&a[14]===i[14]&&a[15]===i[15]},d.a_=function(a,i){var l=a[0],f=a[1],m=a[2],v=a[3],x=a[4],w=a[5],A=a[6],R=a[7],L=a[8],z=a[9],N=a[10],G=a[11],Y=a[12],ne=a[13],ce=a[14],ye=a[15],Ce=i[0],xe=i[1],Ae=i[2],ze=i[3],je=i[4],ht=i[5],wt=i[6],st=i[7],nt=i[8],vt=i[9],At=i[10],lt=i[11],$e=i[12],bt=i[13],_t=i[14],Zt=i[15];return Math.abs(l-Ce)<=_i*Math.max(1,Math.abs(l),Math.abs(Ce))&&Math.abs(f-xe)<=_i*Math.max(1,Math.abs(f),Math.abs(xe))&&Math.abs(m-Ae)<=_i*Math.max(1,Math.abs(m),Math.abs(Ae))&&Math.abs(v-ze)<=_i*Math.max(1,Math.abs(v),Math.abs(ze))&&Math.abs(x-je)<=_i*Math.max(1,Math.abs(x),Math.abs(je))&&Math.abs(w-ht)<=_i*Math.max(1,Math.abs(w),Math.abs(ht))&&Math.abs(A-wt)<=_i*Math.max(1,Math.abs(A),Math.abs(wt))&&Math.abs(R-st)<=_i*Math.max(1,Math.abs(R),Math.abs(st))&&Math.abs(L-nt)<=_i*Math.max(1,Math.abs(L),Math.abs(nt))&&Math.abs(z-vt)<=_i*Math.max(1,Math.abs(z),Math.abs(vt))&&Math.abs(N-At)<=_i*Math.max(1,Math.abs(N),Math.abs(At))&&Math.abs(G-lt)<=_i*Math.max(1,Math.abs(G),Math.abs(lt))&&Math.abs(Y-$e)<=_i*Math.max(1,Math.abs(Y),Math.abs($e))&&Math.abs(ne-bt)<=_i*Math.max(1,Math.abs(ne),Math.abs(bt))&&Math.abs(ce-_t)<=_i*Math.max(1,Math.abs(ce),Math.abs(_t))&&Math.abs(ye-Zt)<=_i*Math.max(1,Math.abs(ye),Math.abs(Zt))},d.aa=function(a){const i={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,f,m,v)=>{const x=m||v;return i[f]=!x||x.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i},d.ab=function(a,i){const l=[];for(const f in a)f in i||l.push(f);return l},d.ac=de,d.ad=function(a,i,l){var f=Math.sin(l),m=Math.cos(l),v=i[0],x=i[1],w=i[2],A=i[3],R=i[4],L=i[5],z=i[6],N=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=v*m+R*f,a[1]=x*m+L*f,a[2]=w*m+z*f,a[3]=A*m+N*f,a[4]=R*m-v*f,a[5]=L*m-x*f,a[6]=z*m-w*f,a[7]=N*m-A*f,a},d.ae=function(a){var i=new Qu(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i},d.af=E0,d.ag=function(a,i){let l=0,f=0;if(a.kind==="constant")f=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:x}=a,w=m?de(Ri.interpolationFactor(m,i,v,x),0,1):0;a.kind==="camera"?f=ii.number(a.minSize,a.maxSize,w):l=w}return{uSizeT:l,uSize:f}},d.ai=function(a,{uSize:i,uSizeT:l},{lowerSize:f,upperSize:m}){return a.kind==="source"?f/$a:a.kind==="composite"?ii.number(f/$a,m/$a,l):i},d.aj=Wv,d.ak=function(a,i,l,f){const m=i.y-a.y,v=i.x-a.x,x=f.y-l.y,w=f.x-l.x,A=x*v-w*m;if(A===0)return null;const R=(w*(a.y-l.y)-x*(a.x-l.x))/A;return new P(a.x+R*v,a.y+R*m)},d.al=p4,d.am=r6,d.an=Cv,d.ao=function(a){let i=1/0,l=1/0,f=-1/0,m=-1/0;for(const v of a)i=Math.min(i,v.x),l=Math.min(l,v.y),f=Math.max(f,v.x),m=Math.max(m,v.y);return[i,l,f,m]},d.ap=_n,d.ar=Hv,d.as=function(a,i){var l=i[0],f=i[1],m=i[2],v=i[3],x=i[4],w=i[5],A=i[6],R=i[7],L=i[8],z=i[9],N=i[10],G=i[11],Y=i[12],ne=i[13],ce=i[14],ye=i[15],Ce=l*w-f*x,xe=l*A-m*x,Ae=l*R-v*x,ze=f*A-m*w,je=f*R-v*w,ht=m*R-v*A,wt=L*ne-z*Y,st=L*ce-N*Y,nt=L*ye-G*Y,vt=z*ce-N*ne,At=z*ye-G*ne,lt=N*ye-G*ce,$e=Ce*lt-xe*At+Ae*vt+ze*nt-je*st+ht*wt;return $e?(a[0]=(w*lt-A*At+R*vt)*($e=1/$e),a[1]=(m*At-f*lt-v*vt)*$e,a[2]=(ne*ht-ce*je+ye*ze)*$e,a[3]=(N*je-z*ht-G*ze)*$e,a[4]=(A*nt-x*lt-R*st)*$e,a[5]=(l*lt-m*nt+v*st)*$e,a[6]=(ce*Ae-Y*ht-ye*xe)*$e,a[7]=(L*ht-N*Ae+G*xe)*$e,a[8]=(x*At-w*nt+R*wt)*$e,a[9]=(f*nt-l*At-v*wt)*$e,a[10]=(Y*je-ne*Ae+ye*Ce)*$e,a[11]=(z*Ae-L*je-G*Ce)*$e,a[12]=(w*st-x*vt-A*wt)*$e,a[13]=(l*vt-f*st+m*wt)*$e,a[14]=(ne*xe-Y*ze-ce*Ce)*$e,a[15]=(L*ze-z*xe+N*Ce)*$e,a):null},d.at=e_,d.au=Zv,d.av=t_,d.aw=function(){const a={},i=Le.$version;for(const l in Le.$root){const f=Le.$root[l];if(f.required){let m=null;m=l==="version"?i:f.type==="array"?[]:{},m!=null&&(a[l]=m)}}return a},d.ax=d0,d.ay=or,d.az=function(a){a=a.slice();const i=Object.create(null);for(let l=0;l<a.length;l++)i[a[l].id]=a[l];for(let l=0;l<a.length;l++)"ref"in a[l]&&(a[l]=Rn(a[l],i[a[l].ref]));return a},d.b=He,d.b0=function(a,i,l){return a[0]=i[0]*l[0],a[1]=i[1]*l[1],a[2]=i[2]*l[2],a[3]=i[3]*l[3],a},d.b1=function(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]},d.b2=ae,d.b3=s4,d.b4=o4,d.b5=function(a,i,l,f,m){var v,x=1/Math.tan(i/2);return a[0]=x/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+f)*(v=1/(f-m)),a[14]=2*m*f*v):(a[10]=-1,a[14]=-2*f),a},d.b6=function(a,i,l){var f=Math.sin(l),m=Math.cos(l),v=i[4],x=i[5],w=i[6],A=i[7],R=i[8],L=i[9],z=i[10],N=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=v*m+R*f,a[5]=x*m+L*f,a[6]=w*m+z*f,a[7]=A*m+N*f,a[8]=R*m-v*f,a[9]=L*m-x*f,a[10]=z*m-w*f,a[11]=N*m-A*f,a},d.b7=K,d.b8=ie,d.b9=function(a){return a*Math.PI/180},d.bA=zu,d.bB=Ba,d.ba=function(a,i){return a[0]=i[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=i[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},d.bb=class extends X{},d.bc=Xv,d.bd=ZL,d.bf=Yt,d.bg=function(a,i){Tt.REGISTERED_PROTOCOLS[a]=i},d.bh=function(a){delete Tt.REGISTERED_PROTOCOLS[a]},d.bi=function(a,i){const l={};for(let m=0;m<a.length;m++){const v=i&&i[a[m].id]||yv(a[m]);i&&(i[a[m].id]=v);let x=l[v];x||(x=l[v]=[]),x.push(a[m])}const f=[];for(const m in l)f.push(l[m]);return f},d.bj=yt,d.bk=c4,d.bl=h4,d.bm=V6,d.bn=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=hn/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const i=a.bucket.layers[0],l=i.layout,f=i._unevaluatedLayout._values,m={layoutIconSize:f["icon-size"].possiblyEvaluate(new Pr(a.bucket.zoom+1),a.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Pr(a.bucket.zoom+1),a.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Pr(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:R,maxZoom:L}=a.bucket.textSizeData;m.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Pr(R),a.canonical),f["text-size"].possiblyEvaluate(new Pr(L),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:R,maxZoom:L}=a.bucket.iconSizeData;m.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Pr(R),a.canonical),f["icon-size"].possiblyEvaluate(new Pr(L),a.canonical)]}const v=l.get("text-line-height")*_n,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",w=l.get("text-keep-upright"),A=l.get("text-size");for(const R of a.bucket.features){const L=l.get("text-font").evaluate(R,{},a.canonical).join(","),z=A.evaluate(R,{},a.canonical),N=m.layoutTextSize.evaluate(R,{},a.canonical),G=m.layoutIconSize.evaluate(R,{},a.canonical),Y={horizontal:{},vertical:void 0},ne=R.text;let ce,ye=[0,0];if(ne){const Ae=ne.toString(),ze=l.get("text-letter-spacing").evaluate(R,{},a.canonical)*_n,je=_v(Ae)?ze:0,ht=l.get("text-anchor").evaluate(R,{},a.canonical),wt=S4(i,R,a.canonical);if(!wt){const lt=l.get("text-radial-offset").evaluate(R,{},a.canonical);ye=lt?w4(ht,[lt*_n,Qv]):l.get("text-offset").evaluate(R,{},a.canonical).map($e=>$e*_n)}let st=x?"center":l.get("text-justify").evaluate(R,{},a.canonical);const nt=l.get("symbol-placement"),vt=nt==="point"?l.get("text-max-width").evaluate(R,{},a.canonical)*_n:0,At=()=>{a.bucket.allowVerticalPlacement&&gf(Ae)&&(Y.vertical=R0(ne,a.glyphMap,a.glyphPositions,a.imagePositions,L,vt,v,ht,"left",je,ye,d.ah.vertical,!0,nt,N,z))};if(!x&&wt){const lt=new Set;if(st==="auto")for(let bt=0;bt<wt.values.length;bt+=2)lt.add(e_(wt.values[bt]));else lt.add(st);let $e=!1;for(const bt of lt)if(!Y.horizontal[bt])if($e)Y.horizontal[bt]=Y.horizontal[0];else{const _t=R0(ne,a.glyphMap,a.glyphPositions,a.imagePositions,L,vt,v,"center",bt,je,ye,d.ah.horizontal,!1,nt,N,z);_t&&(Y.horizontal[bt]=_t,$e=_t.positionedLines.length===1)}At()}else{st==="auto"&&(st=e_(ht));const lt=R0(ne,a.glyphMap,a.glyphPositions,a.imagePositions,L,vt,v,ht,st,je,ye,d.ah.horizontal,!1,nt,N,z);lt&&(Y.horizontal[st]=lt),At(),gf(Ae)&&x&&w&&(Y.vertical=R0(ne,a.glyphMap,a.glyphPositions,a.imagePositions,L,vt,v,ht,st,je,ye,d.ah.vertical,!1,nt,N,z))}}let Ce=!1;if(R.icon&&R.icon.name){const Ae=a.imageMap[R.icon.name];Ae&&(ce=AL(a.imagePositions[R.icon.name],l.get("icon-offset").evaluate(R,{},a.canonical),l.get("icon-anchor").evaluate(R,{},a.canonical)),Ce=!!Ae.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=Ce:a.bucket.sdfIcons!==Ce&&qe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ae.pixelRatio!==a.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const xe=A4(Y.horizontal)||Y.vertical;a.bucket.iconsInText=!!xe&&xe.iconsInText,(xe||ce)&&VL(a.bucket,R,Y,ce,a.imageMap,m,N,G,ye,Ce,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},d.bo=Bv,d.bp=Ov,d.bq=Fv,d.br=cl,d.bs=jv,d.bt=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},d.bu=function(a,i,l,f,m){return c(this,void 0,void 0,function*(){if(Z())try{return yield Be(a,i,l,f,m)}catch{}return function(v,x,w,A,R){const L=v.width,z=v.height;tt&&ot||(tt=new OffscreenCanvas(L,z),ot=tt.getContext("2d",{willReadFrequently:!0})),tt.width=L,tt.height=z,ot.drawImage(v,0,0,L,z);const N=ot.getImageData(x,w,A,R);return ot.clearRect(0,0,L,z),N.data}(a,i,l,f,m)})},d.bv=l4,d.bw=b,d.bx=E,d.by=L6,d.bz=function(a){return a.message===St},d.c=qt,d.d=a=>c(void 0,void 0,void 0,function*(){if(a.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(a)],{type:"image/png"});try{return createImageBitmap(i)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.e=J,d.f=a=>new Promise((i,l)=>{const f=new Image;f.onload=()=>{i(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=Se})},f.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(a)],{type:"image/png"});f.src=a.byteLength?URL.createObjectURL(m):Se}),d.g=kt,d.h=(a,i)=>zr(J(a,{type:"json"}),i),d.i=Fe,d.j=Wt,d.k=Jr,d.l=(a,i)=>zr(J(a,{type:"arrayBuffer"}),i),d.m=zr,d.n=function(a){return new jv(a).readFields(_L,[])},d.o=Tf,d.p=$6,d.q=p,d.r=vv,d.s=Fr,d.t=mf,d.u=ut,d.v=Le,d.w=qe,d.x=yc,d.y=function([a,i,l]){return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:a*Math.cos(i)*Math.sin(l),y:a*Math.sin(i)*Math.sin(l),z:a*Math.cos(l)}},d.z=ii}),s("worker",["./shared"],function(d){class c{constructor(U){this.keyCache={},U&&this.replace(U)}replace(U){this._layerConfigs={},this._layers={},this.update(U,[])}update(U,q){for(const H of U){this._layerConfigs[H.id]=H;const ee=this._layers[H.id]=d.aA(H);ee._featureFilter=d.a6(ee.filter),this.keyCache[H.id]&&delete this.keyCache[H.id]}for(const H of q)delete this.keyCache[H],delete this._layerConfigs[H],delete this._layers[H];this.familiesBySource={};const D=d.bi(Object.values(this._layerConfigs),this.keyCache);for(const H of D){const ee=H.map(Me=>this._layers[Me.id]),se=ee[0];if(se.visibility==="none")continue;const ge=se.source||"";let fe=this.familiesBySource[ge];fe||(fe=this.familiesBySource[ge]={});const _e=se.sourceLayer||"_geojsonTileLayer";let Pe=fe[_e];Pe||(Pe=fe[_e]=[]),Pe.push(ee)}}}class b{constructor(U){const q={},D=[];for(const ge in U){const fe=U[ge],_e=q[ge]={};for(const Pe in fe){const Me=fe[+Pe];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;const Te={x:0,y:0,w:Me.bitmap.width+2,h:Me.bitmap.height+2};D.push(Te),_e[Pe]={rect:Te,metrics:Me.metrics}}}const{w:H,h:ee}=d.p(D),se=new d.o({width:H||1,height:ee||1});for(const ge in U){const fe=U[ge];for(const _e in fe){const Pe=fe[+_e];if(!Pe||Pe.bitmap.width===0||Pe.bitmap.height===0)continue;const Me=q[ge][_e].rect;d.o.copy(Pe.bitmap,se,{x:0,y:0},{x:Me.x+1,y:Me.y+1},Pe.bitmap)}}this.image=se,this.positions=q}}d.bj("GlyphAtlas",b);class E{constructor(U){this.tileID=new d.Q(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId,this.inFlightDependencies=[]}parse(U,q,D,H){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=U,this.collisionBoxArray=new d.a4;const ee=new d.bk(Object.keys(U.layers).sort()),se=new d.bl(this.tileID,this.promoteId);se.bucketLayerIDs=[];const ge={},fe={featureIndex:se,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:D},_e=q.familiesBySource[this.source];for(const zt in _e){const yr=U.layers[zt];if(!yr)continue;yr.version===1&&d.w(`Vector tile source "${this.source}" layer "${zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const br=ee.encode(zt),yn=[];for(let Cn=0;Cn<yr.length;Cn++){const Br=yr.feature(Cn),er=se.getId(Br,zt);yn.push({feature:Br,id:er,index:Cn,sourceLayerIndex:br})}for(const Cn of _e[zt]){const Br=Cn[0];Br.source!==this.source&&d.w(`layer.source = ${Br.source} does not equal this.source = ${this.source}`),Br.minzoom&&this.zoom<Math.floor(Br.minzoom)||Br.maxzoom&&this.zoom>=Br.maxzoom||Br.visibility!=="none"&&(I(Cn,this.zoom,D),(ge[Br.id]=Br.createBucket({index:se.bucketLayerIDs.length,layers:Cn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:br,sourceID:this.source})).populate(yn,fe,this.tileID.canonical),se.bucketLayerIDs.push(Cn.map(er=>er.id)))}}const Pe=d.aF(fe.glyphDependencies,zt=>Object.keys(zt).map(Number));this.inFlightDependencies.forEach(zt=>zt==null?void 0:zt.abort()),this.inFlightDependencies=[];let Me=Promise.resolve({});if(Object.keys(Pe).length){const zt=new AbortController;this.inFlightDependencies.push(zt),Me=H.sendAsync({type:"GG",data:{stacks:Pe,source:this.source,tileID:this.tileID,type:"glyphs"}},zt)}const Te=Object.keys(fe.iconDependencies);let dt=Promise.resolve({});if(Te.length){const zt=new AbortController;this.inFlightDependencies.push(zt),dt=H.sendAsync({type:"GI",data:{icons:Te,source:this.source,tileID:this.tileID,type:"icons"}},zt)}const ct=Object.keys(fe.patternDependencies);let it=Promise.resolve({});if(ct.length){const zt=new AbortController;this.inFlightDependencies.push(zt),it=H.sendAsync({type:"GI",data:{icons:ct,source:this.source,tileID:this.tileID,type:"patterns"}},zt)}const[mt,Mt,sr]=yield Promise.all([Me,dt,it]),lr=new b(mt),Cr=new d.bm(Mt,sr);for(const zt in ge){const yr=ge[zt];yr instanceof d.a5?(I(yr.layers,this.zoom,D),d.bn({bucket:yr,glyphMap:mt,glyphPositions:lr.positions,imageMap:Mt,imagePositions:Cr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):yr.hasPattern&&(yr instanceof d.bo||yr instanceof d.bp||yr instanceof d.bq)&&(I(yr.layers,this.zoom,D),yr.addFeatures(fe,this.tileID.canonical,Cr.patternPositions))}return this.status="done",{buckets:Object.values(ge).filter(zt=>!zt.isEmpty()),featureIndex:se,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:lr.image,imageAtlas:Cr,glyphMap:this.returnDependencies?mt:null,iconMap:this.returnDependencies?Mt:null,glyphPositions:this.returnDependencies?lr.positions:null}})}}function I(he,U,q){const D=new d.a8(U);for(const H of he)H.recalculate(D,q)}class P{constructor(U,q,D){this.actor=U,this.layerIndex=q,this.availableImages=D,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(U,q){return d._(this,void 0,void 0,function*(){const D=yield d.l(U.request,q);try{return{vectorTile:new d.br.VectorTile(new d.bs(D.data)),rawData:D.data,cacheControl:D.cacheControl,expires:D.expires}}catch(H){const ee=new Uint8Array(D.data);let se=`Unable to parse the tile at ${U.request.url}, `;throw se+=ee[0]===31&&ee[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${H.messge}`,new Error(se)}})}loadTile(U){return d._(this,void 0,void 0,function*(){const q=U.uid,D=!!(U&&U.request&&U.request.collectResourceTiming)&&new d.bt(U.request),H=new E(U);this.loading[q]=H;const ee=new AbortController;H.abort=ee;try{const se=yield this.loadVectorTile(U,ee);if(delete this.loading[q],!se)return null;const ge=se.rawData,fe={};se.expires&&(fe.expires=se.expires),se.cacheControl&&(fe.cacheControl=se.cacheControl);const _e={};if(D){const Me=D.finish();Me&&(_e.resourceTiming=JSON.parse(JSON.stringify(Me)))}H.vectorTile=se.vectorTile;const Pe=H.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[q]=H,this.fetching[q]={rawTileData:ge,cacheControl:fe,resourceTiming:_e};try{const Me=yield Pe;return d.e({rawTileData:ge.slice(0)},Me,fe,_e)}finally{delete this.fetching[q]}}catch(se){throw delete this.loading[q],H.status="done",this.loaded[q]=H,se}})}reloadTile(U){return d._(this,void 0,void 0,function*(){const q=U.uid;if(!this.loaded||!this.loaded[q])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const D=this.loaded[q];if(D.showCollisionBoxes=U.showCollisionBoxes,D.status==="parsing"){const H=yield D.parse(D.vectorTile,this.layerIndex,this.availableImages,this.actor);let ee;if(this.fetching[q]){const{rawTileData:se,cacheControl:ge,resourceTiming:fe}=this.fetching[q];delete this.fetching[q],ee=d.e({rawTileData:se.slice(0)},H,ge,fe)}else ee=H;return ee}if(D.status==="done"&&D.vectorTile)return D.parse(D.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(U){return d._(this,void 0,void 0,function*(){const q=this.loading,D=U.uid;q&&q[D]&&q[D].abort&&(q[D].abort.abort(),delete q[D])})}removeTile(U){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[U.uid]&&delete this.loaded[U.uid]})}}class T{constructor(){this.loaded={}}loadTile(U){return d._(this,void 0,void 0,function*(){const{uid:q,encoding:D,rawImageData:H,redFactor:ee,greenFactor:se,blueFactor:ge,baseShift:fe}=U,_e=H.width+2,Pe=H.height+2,Me=d.b(H)?new d.R({width:_e,height:Pe},yield d.bu(H,-1,-1,_e,Pe)):H,Te=new d.bv(q,Me,D,ee,se,ge,fe);return this.loaded=this.loaded||{},this.loaded[q]=Te,Te})}removeTile(U){const q=this.loaded,D=U.uid;q&&q[D]&&delete q[D]}}function O(he,U){if(he.length!==0){j(he[0],U);for(var q=1;q<he.length;q++)j(he[q],!U)}}function j(he,U){for(var q=0,D=0,H=0,ee=he.length,se=ee-1;H<ee;se=H++){var ge=(he[H][0]-he[se][0])*(he[se][1]+he[H][1]),fe=q+ge;D+=Math.abs(q)>=Math.abs(ge)?q-fe+ge:ge-fe+q,q=fe}q+D>=0!=!!U&&he.reverse()}var V=d.bw(function he(U,q){var D,H=U&&U.type;if(H==="FeatureCollection")for(D=0;D<U.features.length;D++)he(U.features[D],q);else if(H==="GeometryCollection")for(D=0;D<U.geometries.length;D++)he(U.geometries[D],q);else if(H==="Feature")he(U.geometry,q);else if(H==="Polygon")O(U.coordinates,q);else if(H==="MultiPolygon")for(D=0;D<U.coordinates.length;D++)O(U.coordinates[D],q);return U});const re=d.br.VectorTileFeature.prototype.toGeoJSON;var W={exports:{}},Z=d.bx,K=d.br.VectorTileFeature,ie=de;function de(he,U){this.options=U||{},this.features=he,this.length=he.length}function ae(he,U){this.id=typeof he.id=="number"?he.id:void 0,this.type=he.type,this.rawGeometry=he.type===1?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=U||4096}de.prototype.feature=function(he){return new ae(this.features[he],this.options.extent)},ae.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var U=0;U<he.length;U++){for(var q=he[U],D=[],H=0;H<q.length;H++)D.push(new Z(q[H][0],q[H][1]));this.geometry.push(D)}return this.geometry},ae.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,U=1/0,q=-1/0,D=1/0,H=-1/0,ee=0;ee<he.length;ee++)for(var se=he[ee],ge=0;ge<se.length;ge++){var fe=se[ge];U=Math.min(U,fe.x),q=Math.max(q,fe.x),D=Math.min(D,fe.y),H=Math.max(H,fe.y)}return[U,D,q,H]},ae.prototype.toGeoJSON=K.prototype.toGeoJSON;var J=d.by,we=ie;function Re(he){var U=new J;return function(q,D){for(var H in q.layers)D.writeMessage(3,De,q.layers[H])}(he,U),U.finish()}function De(he,U){var q;U.writeVarintField(15,he.version||1),U.writeStringField(1,he.name||""),U.writeVarintField(5,he.extent||4096);var D={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<he.length;q++)D.feature=he.feature(q),U.writeMessage(2,Oe,D);var H=D.keys;for(q=0;q<H.length;q++)U.writeStringField(3,H[q]);var ee=D.values;for(q=0;q<ee.length;q++)U.writeMessage(4,Ve,ee[q])}function Oe(he,U){var q=he.feature;q.id!==void 0&&U.writeVarintField(1,q.id),U.writeMessage(2,Qe,he),U.writeVarintField(3,q.type),U.writeMessage(4,Fe,q)}function Qe(he,U){var q=he.feature,D=he.keys,H=he.values,ee=he.keycache,se=he.valuecache;for(var ge in q.properties){var fe=q.properties[ge],_e=ee[ge];if(fe!==null){_e===void 0&&(D.push(ge),ee[ge]=_e=D.length-1),U.writeVarint(_e);var Pe=typeof fe;Pe!=="string"&&Pe!=="boolean"&&Pe!=="number"&&(fe=JSON.stringify(fe));var Me=Pe+":"+fe,Te=se[Me];Te===void 0&&(H.push(fe),se[Me]=Te=H.length-1),U.writeVarint(Te)}}}function qe(he,U){return(U<<3)+(7&he)}function Ze(he){return he<<1^he>>31}function Fe(he,U){for(var q=he.loadGeometry(),D=he.type,H=0,ee=0,se=q.length,ge=0;ge<se;ge++){var fe=q[ge],_e=1;D===1&&(_e=fe.length),U.writeVarint(qe(1,_e));for(var Pe=D===3?fe.length-1:fe.length,Me=0;Me<Pe;Me++){Me===1&&D!==1&&U.writeVarint(qe(2,Pe-1));var Te=fe[Me].x-H,dt=fe[Me].y-ee;U.writeVarint(Ze(Te)),U.writeVarint(Ze(dt)),H+=Te,ee+=dt}D===3&&U.writeVarint(qe(7,1))}}function Ve(he,U){var q=typeof he;q==="string"?U.writeStringField(1,he):q==="boolean"?U.writeBooleanField(7,he):q==="number"&&(he%1!=0?U.writeDoubleField(3,he):he<0?U.writeSVarintField(6,he):U.writeVarintField(5,he))}W.exports=Re,W.exports.fromVectorTileJs=Re,W.exports.fromGeojsonVt=function(he,U){U=U||{};var q={};for(var D in he)q[D]=new we(he[D].features,U),q[D].name=D,q[D].version=U.version,q[D].extent=U.extent;return Re({layers:q})},W.exports.GeoJSONWrapper=we;var He=d.bw(W.exports);const Se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},Be=Math.fround||(tt=new Float32Array(1),he=>(tt[0]=+he,tt[0]));var tt;const ot=3,St=5,qt=6;class Tt{constructor(U){this.options=Object.assign(Object.create(Se),U),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(U){const{log:q,minZoom:D,maxZoom:H}=this.options;q&&console.time("total time");const ee=`prepare ${U.length} points`;q&&console.time(ee),this.points=U;const se=[];for(let fe=0;fe<U.length;fe++){const _e=U[fe];if(!_e.geometry)continue;const[Pe,Me]=_e.geometry.coordinates,Te=Be(Yt(Pe)),dt=Be(or(Me));se.push(Te,dt,1/0,fe,-1,1),this.options.reduce&&se.push(0)}let ge=this.trees[H+1]=this._createTree(se);q&&console.timeEnd(ee);for(let fe=H;fe>=D;fe--){const _e=+Date.now();ge=this.trees[fe]=this._createTree(this._cluster(ge,fe)),q&&console.log("z%d: %d clusters in %dms",fe,ge.numItems,+Date.now()-_e)}return q&&console.timeEnd("total time"),this}getClusters(U,q){let D=((U[0]+180)%360+360)%360-180;const H=Math.max(-90,Math.min(90,U[1]));let ee=U[2]===180?180:((U[2]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)D=-180,ee=180;else if(D>ee){const Me=this.getClusters([D,H,180,se],q),Te=this.getClusters([-180,H,ee,se],q);return Me.concat(Te)}const ge=this.trees[this._limitZoom(q)],fe=ge.range(Yt(D),or(se),Yt(ee),or(H)),_e=ge.data,Pe=[];for(const Me of fe){const Te=this.stride*Me;Pe.push(_e[Te+St]>1?kt(_e,Te,this.clusterProps):this.points[_e[Te+ot]])}return Pe}getChildren(U){const q=this._getOriginId(U),D=this._getOriginZoom(U),H="No cluster with the specified id.",ee=this.trees[D];if(!ee)throw new Error(H);const se=ee.data;if(q*this.stride>=se.length)throw new Error(H);const ge=this.options.radius/(this.options.extent*Math.pow(2,D-1)),fe=ee.within(se[q*this.stride],se[q*this.stride+1],ge),_e=[];for(const Pe of fe){const Me=Pe*this.stride;se[Me+4]===U&&_e.push(se[Me+St]>1?kt(se,Me,this.clusterProps):this.points[se[Me+ot]])}if(_e.length===0)throw new Error(H);return _e}getLeaves(U,q,D){const H=[];return this._appendLeaves(H,U,q=q||10,D=D||0,0),H}getTile(U,q,D){const H=this.trees[this._limitZoom(U)],ee=Math.pow(2,U),{extent:se,radius:ge}=this.options,fe=ge/se,_e=(D-fe)/ee,Pe=(D+1+fe)/ee,Me={features:[]};return this._addTileFeatures(H.range((q-fe)/ee,_e,(q+1+fe)/ee,Pe),H.data,q,D,ee,Me),q===0&&this._addTileFeatures(H.range(1-fe/ee,_e,1,Pe),H.data,ee,D,ee,Me),q===ee-1&&this._addTileFeatures(H.range(0,_e,fe/ee,Pe),H.data,-1,D,ee,Me),Me.features.length?Me:null}getClusterExpansionZoom(U){let q=this._getOriginZoom(U)-1;for(;q<=this.options.maxZoom;){const D=this.getChildren(U);if(q++,D.length!==1)break;U=D[0].properties.cluster_id}return q}_appendLeaves(U,q,D,H,ee){const se=this.getChildren(q);for(const ge of se){const fe=ge.properties;if(fe&&fe.cluster?ee+fe.point_count<=H?ee+=fe.point_count:ee=this._appendLeaves(U,fe.cluster_id,D,H,ee):ee<H?ee++:U.push(ge),U.length===D)break}return ee}_createTree(U){const q=new d.av(U.length/this.stride|0,this.options.nodeSize,Float32Array);for(let D=0;D<U.length;D+=this.stride)q.add(U[D],U[D+1]);return q.finish(),q.data=U,q}_addTileFeatures(U,q,D,H,ee,se){for(const ge of U){const fe=ge*this.stride,_e=q[fe+St]>1;let Pe,Me,Te;if(_e)Pe=Lt(q,fe,this.clusterProps),Me=q[fe],Te=q[fe+1];else{const it=this.points[q[fe+ot]];Pe=it.properties;const[mt,Mt]=it.geometry.coordinates;Me=Yt(mt),Te=or(Mt)}const dt={type:1,geometry:[[Math.round(this.options.extent*(Me*ee-D)),Math.round(this.options.extent*(Te*ee-H))]],tags:Pe};let ct;ct=_e||this.options.generateId?q[fe+ot]:this.points[q[fe+ot]].id,ct!==void 0&&(dt.id=ct),se.features.push(dt)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(Math.floor(+U),this.options.maxZoom+1))}_cluster(U,q){const{radius:D,extent:H,reduce:ee,minPoints:se}=this.options,ge=D/(H*Math.pow(2,q)),fe=U.data,_e=[],Pe=this.stride;for(let Me=0;Me<fe.length;Me+=Pe){if(fe[Me+2]<=q)continue;fe[Me+2]=q;const Te=fe[Me],dt=fe[Me+1],ct=U.within(fe[Me],fe[Me+1],ge),it=fe[Me+St];let mt=it;for(const Mt of ct){const sr=Mt*Pe;fe[sr+2]>q&&(mt+=fe[sr+St])}if(mt>it&&mt>=se){let Mt,sr=Te*it,lr=dt*it,Cr=-1;const zt=((Me/Pe|0)<<5)+(q+1)+this.points.length;for(const yr of ct){const br=yr*Pe;if(fe[br+2]<=q)continue;fe[br+2]=q;const yn=fe[br+St];sr+=fe[br]*yn,lr+=fe[br+1]*yn,fe[br+4]=zt,ee&&(Mt||(Mt=this._map(fe,Me,!0),Cr=this.clusterProps.length,this.clusterProps.push(Mt)),ee(Mt,this._map(fe,br)))}fe[Me+4]=zt,_e.push(sr/mt,lr/mt,1/0,zt,-1,mt),ee&&_e.push(Cr)}else{for(let Mt=0;Mt<Pe;Mt++)_e.push(fe[Me+Mt]);if(mt>1)for(const Mt of ct){const sr=Mt*Pe;if(!(fe[sr+2]<=q)){fe[sr+2]=q;for(let lr=0;lr<Pe;lr++)_e.push(fe[sr+lr])}}}}return _e}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,q,D){if(U[q+St]>1){const se=this.clusterProps[U[q+qt]];return D?Object.assign({},se):se}const H=this.points[U[q+ot]].properties,ee=this.options.map(H);return D&&ee===H?Object.assign({},ee):ee}}function kt(he,U,q){return{type:"Feature",id:he[U+ot],properties:Lt(he,U,q),geometry:{type:"Point",coordinates:[(D=he[U],360*(D-.5)),zr(he[U+1])]}};var D}function Lt(he,U,q){const D=he[U+St],H=D>=1e4?`${Math.round(D/1e3)}k`:D>=1e3?Math.round(D/100)/10+"k":D,ee=he[U+qt],se=ee===-1?{}:Object.assign({},q[ee]);return Object.assign(se,{cluster:!0,cluster_id:he[U+ot],point_count:D,point_count_abbreviated:H})}function Yt(he){return he/360+.5}function or(he){const U=Math.sin(he*Math.PI/180),q=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return q<0?0:q>1?1:q}function zr(he){const U=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function Fr(he,U,q,D){for(var H,ee=D,se=q-U>>1,ge=q-U,fe=he[U],_e=he[U+1],Pe=he[q],Me=he[q+1],Te=U+3;Te<q;Te+=3){var dt=ti(he[Te],he[Te+1],fe,_e,Pe,Me);if(dt>ee)H=Te,ee=dt;else if(dt===ee){var ct=Math.abs(Te-se);ct<ge&&(H=Te,ge=ct)}}ee>D&&(H-U>3&&Fr(he,U,H,D),he[H+2]=ee,q-H>3&&Fr(he,H,q,D))}function ti(he,U,q,D,H,ee){var se=H-q,ge=ee-D;if(se!==0||ge!==0){var fe=((he-q)*se+(U-D)*ge)/(se*se+ge*ge);fe>1?(q=H,D=ee):fe>0&&(q+=se*fe,D+=ge*fe)}return(se=he-q)*se+(ge=U-D)*ge}function ar(he,U,q,D){var H={id:he===void 0?null:he,type:U,geometry:q,tags:D,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ee){var se=ee.geometry,ge=ee.type;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")Jr(ee,se);else if(ge==="Polygon"||ge==="MultiLineString")for(var fe=0;fe<se.length;fe++)Jr(ee,se[fe]);else if(ge==="MultiPolygon")for(fe=0;fe<se.length;fe++)for(var _e=0;_e<se[fe].length;_e++)Jr(ee,se[fe][_e])}(H),H}function Jr(he,U){for(var q=0;q<U.length;q+=3)he.minX=Math.min(he.minX,U[q]),he.minY=Math.min(he.minY,U[q+1]),he.maxX=Math.max(he.maxX,U[q]),he.maxY=Math.max(he.maxY,U[q+1])}function Wt(he,U,q,D){if(U.geometry){var H=U.geometry.coordinates,ee=U.geometry.type,se=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),ge=[],fe=U.id;if(q.promoteId?fe=U.properties[q.promoteId]:q.generateId&&(fe=D||0),ee==="Point")ri(H,ge);else if(ee==="MultiPoint")for(var _e=0;_e<H.length;_e++)ri(H[_e],ge);else if(ee==="LineString")Le(H,ge,se,!1);else if(ee==="MultiLineString"){if(q.lineMetrics){for(_e=0;_e<H.length;_e++)Le(H[_e],ge=[],se,!1),he.push(ar(fe,"LineString",ge,U.properties));return}Sn(H,ge,se,!1)}else if(ee==="Polygon")Sn(H,ge,se,!0);else{if(ee!=="MultiPolygon"){if(ee==="GeometryCollection"){for(_e=0;_e<U.geometry.geometries.length;_e++)Wt(he,{id:fe,geometry:U.geometry.geometries[_e],properties:U.properties},q,D);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<H.length;_e++){var Pe=[];Sn(H[_e],Pe,se,!0),ge.push(Pe)}}he.push(ar(fe,ee,ge,U.properties))}}function ri(he,U){U.push(Rn(he[0])),U.push(nr(he[1])),U.push(0)}function Le(he,U,q,D){for(var H,ee,se=0,ge=0;ge<he.length;ge++){var fe=Rn(he[ge][0]),_e=nr(he[ge][1]);U.push(fe),U.push(_e),U.push(0),ge>0&&(se+=D?(H*_e-fe*ee)/2:Math.sqrt(Math.pow(fe-H,2)+Math.pow(_e-ee,2))),H=fe,ee=_e}var Pe=U.length-3;U[2]=1,Fr(U,0,Pe,q),U[Pe+2]=1,U.size=Math.abs(se),U.start=0,U.end=U.size}function Sn(he,U,q,D){for(var H=0;H<he.length;H++){var ee=[];Le(he[H],ee,q,D),U.push(ee)}}function Rn(he){return he/360+.5}function nr(he){var U=Math.sin(he*Math.PI/180),q=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return q<0?0:q>1?1:q}function dr(he,U,q,D,H,ee,se,ge){if(D/=U,ee>=(q/=U)&&se<D)return he;if(se<q||ee>=D)return null;for(var fe=[],_e=0;_e<he.length;_e++){var Pe=he[_e],Me=Pe.geometry,Te=Pe.type,dt=H===0?Pe.minX:Pe.minY,ct=H===0?Pe.maxX:Pe.maxY;if(dt>=q&&ct<D)fe.push(Pe);else if(!(ct<q||dt>=D)){var it=[];if(Te==="Point"||Te==="MultiPoint")kn(Me,it,q,D,H);else if(Te==="LineString")$t(Me,it,q,D,H,!1,ge.lineMetrics);else if(Te==="MultiLineString")Ii(Me,it,q,D,H,!1);else if(Te==="Polygon")Ii(Me,it,q,D,H,!0);else if(Te==="MultiPolygon")for(var mt=0;mt<Me.length;mt++){var Mt=[];Ii(Me[mt],Mt,q,D,H,!0),Mt.length&&it.push(Mt)}if(it.length){if(ge.lineMetrics&&Te==="LineString"){for(mt=0;mt<it.length;mt++)fe.push(ar(Pe.id,Te,it[mt],Pe.tags));continue}Te!=="LineString"&&Te!=="MultiLineString"||(it.length===1?(Te="LineString",it=it[0]):Te="MultiLineString"),Te!=="Point"&&Te!=="MultiPoint"||(Te=it.length===3?"Point":"MultiPoint"),fe.push(ar(Pe.id,Te,it,Pe.tags))}}}return fe.length?fe:null}function kn(he,U,q,D,H){for(var ee=0;ee<he.length;ee+=3){var se=he[ee+H];se>=q&&se<=D&&(U.push(he[ee]),U.push(he[ee+1]),U.push(he[ee+2]))}}function $t(he,U,q,D,H,ee,se){for(var ge,fe,_e=Vt(he),Pe=H===0?En:Ui,Me=he.start,Te=0;Te<he.length-3;Te+=3){var dt=he[Te],ct=he[Te+1],it=he[Te+2],mt=he[Te+3],Mt=he[Te+4],sr=H===0?dt:ct,lr=H===0?mt:Mt,Cr=!1;se&&(ge=Math.sqrt(Math.pow(dt-mt,2)+Math.pow(ct-Mt,2))),sr<q?lr>q&&(fe=Pe(_e,dt,ct,mt,Mt,q),se&&(_e.start=Me+ge*fe)):sr>D?lr<D&&(fe=Pe(_e,dt,ct,mt,Mt,D),se&&(_e.start=Me+ge*fe)):ur(_e,dt,ct,it),lr<q&&sr>=q&&(fe=Pe(_e,dt,ct,mt,Mt,q),Cr=!0),lr>D&&sr<=D&&(fe=Pe(_e,dt,ct,mt,Mt,D),Cr=!0),!ee&&Cr&&(se&&(_e.end=Me+ge*fe),U.push(_e),_e=Vt(he)),se&&(Me+=ge)}var zt=he.length-3;dt=he[zt],ct=he[zt+1],it=he[zt+2],(sr=H===0?dt:ct)>=q&&sr<=D&&ur(_e,dt,ct,it),zt=_e.length-3,ee&&zt>=3&&(_e[zt]!==_e[0]||_e[zt+1]!==_e[1])&&ur(_e,_e[0],_e[1],_e[2]),_e.length&&U.push(_e)}function Vt(he){var U=[];return U.size=he.size,U.start=he.start,U.end=he.end,U}function Ii(he,U,q,D,H,ee){for(var se=0;se<he.length;se++)$t(he[se],U,q,D,H,ee,!1)}function ur(he,U,q,D){he.push(U),he.push(q),he.push(D)}function En(he,U,q,D,H,ee){var se=(ee-U)/(D-U);return he.push(ee),he.push(q+(H-q)*se),he.push(1),se}function Ui(he,U,q,D,H,ee){var se=(ee-q)/(H-q);return he.push(U+(D-U)*se),he.push(ee),he.push(1),se}function Ye(he,U){for(var q=[],D=0;D<he.length;D++){var H,ee=he[D],se=ee.type;if(se==="Point"||se==="MultiPoint"||se==="LineString")H=gn(ee.geometry,U);else if(se==="MultiLineString"||se==="Polygon"){H=[];for(var ge=0;ge<ee.geometry.length;ge++)H.push(gn(ee.geometry[ge],U))}else if(se==="MultiPolygon")for(H=[],ge=0;ge<ee.geometry.length;ge++){for(var fe=[],_e=0;_e<ee.geometry[ge].length;_e++)fe.push(gn(ee.geometry[ge][_e],U));H.push(fe)}q.push(ar(ee.id,se,H,ee.tags))}return q}function gn(he,U){var q=[];q.size=he.size,he.start!==void 0&&(q.start=he.start,q.end=he.end);for(var D=0;D<he.length;D+=3)q.push(he[D]+U,he[D+1],he[D+2]);return q}function Nn(he,U){if(he.transformed)return he;var q,D,H,ee=1<<he.z,se=he.x,ge=he.y;for(q=0;q<he.features.length;q++){var fe=he.features[q],_e=fe.geometry,Pe=fe.type;if(fe.geometry=[],Pe===1)for(D=0;D<_e.length;D+=2)fe.geometry.push(ni(_e[D],_e[D+1],U,ee,se,ge));else for(D=0;D<_e.length;D++){var Me=[];for(H=0;H<_e[D].length;H+=2)Me.push(ni(_e[D][H],_e[D][H+1],U,ee,se,ge));fe.geometry.push(Me)}}return he.transformed=!0,he}function ni(he,U,q,D,H,ee){return[Math.round(q*(he*D-H)),Math.round(q*(U*D-ee))]}function Ro(he,U,q,D,H){for(var ee=U===H.maxZoom?0:H.tolerance/((1<<U)*H.extent),se={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:q,y:D,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ge=0;ge<he.length;ge++){se.numFeatures++,Xe(se,he[ge],ee,H);var fe=he[ge].minX,_e=he[ge].minY,Pe=he[ge].maxX,Me=he[ge].maxY;fe<se.minX&&(se.minX=fe),_e<se.minY&&(se.minY=_e),Pe>se.maxX&&(se.maxX=Pe),Me>se.maxY&&(se.maxY=Me)}return se}function Xe(he,U,q,D){var H=U.geometry,ee=U.type,se=[];if(ee==="Point"||ee==="MultiPoint")for(var ge=0;ge<H.length;ge+=3)se.push(H[ge]),se.push(H[ge+1]),he.numPoints++,he.numSimplified++;else if(ee==="LineString")Ut(se,H,he,q,!1,!1);else if(ee==="MultiLineString"||ee==="Polygon")for(ge=0;ge<H.length;ge++)Ut(se,H[ge],he,q,ee==="Polygon",ge===0);else if(ee==="MultiPolygon")for(var fe=0;fe<H.length;fe++){var _e=H[fe];for(ge=0;ge<_e.length;ge++)Ut(se,_e[ge],he,q,!0,ge===0)}if(se.length){var Pe=U.tags||null;if(ee==="LineString"&&D.lineMetrics){for(var Me in Pe={},U.tags)Pe[Me]=U.tags[Me];Pe.mapbox_clip_start=H.start/H.size,Pe.mapbox_clip_end=H.end/H.size}var Te={geometry:se,type:ee==="Polygon"||ee==="MultiPolygon"?3:ee==="LineString"||ee==="MultiLineString"?2:1,tags:Pe};U.id!==null&&(Te.id=U.id),he.features.push(Te)}}function Ut(he,U,q,D,H,ee){var se=D*D;if(D>0&&U.size<(H?se:D))q.numPoints+=U.length/3;else{for(var ge=[],fe=0;fe<U.length;fe+=3)(D===0||U[fe+2]>se)&&(q.numSimplified++,ge.push(U[fe]),ge.push(U[fe+1])),q.numPoints++;H&&function(_e,Pe){for(var Me=0,Te=0,dt=_e.length,ct=dt-2;Te<dt;ct=Te,Te+=2)Me+=(_e[Te]-_e[ct])*(_e[Te+1]+_e[ct+1]);if(Me>0===Pe)for(Te=0,dt=_e.length;Te<dt/2;Te+=2){var it=_e[Te],mt=_e[Te+1];_e[Te]=_e[dt-2-Te],_e[Te+1]=_e[dt-1-Te],_e[dt-2-Te]=it,_e[dt-1-Te]=mt}}(ge,ee),he.push(ge)}}function Bt(he,U){var q=(U=this.options=function(H,ee){for(var se in ee)H[se]=ee[se];return H}(Object.create(this.options),U)).debug;if(q&&console.time("preprocess data"),U.maxZoom<0||U.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(U.promoteId&&U.generateId)throw new Error("promoteId and generateId cannot be used together.");var D=function(H,ee){var se=[];if(H.type==="FeatureCollection")for(var ge=0;ge<H.features.length;ge++)Wt(se,H.features[ge],ee,ge);else Wt(se,H.type==="Feature"?H:{geometry:H},ee);return se}(he,U);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",U.indexMaxZoom,U.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),D=function(H,ee){var se=ee.buffer/ee.extent,ge=H,fe=dr(H,1,-1-se,se,0,-1,2,ee),_e=dr(H,1,1-se,2+se,0,-1,2,ee);return(fe||_e)&&(ge=dr(H,1,-se,1+se,0,-1,2,ee)||[],fe&&(ge=Ye(fe,1).concat(ge)),_e&&(ge=ge.concat(Ye(_e,-1)))),ge}(D,U),D.length&&this.splitTile(D,0,0,0),q&&(D.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function An(he,U,q){return 32*((1<<he)*q+U)+he}function cn(he,U){return U?he.properties[U]:he.id}function jt(he,U){if(he==null)return!0;if(he.type==="Feature")return cn(he,U)!=null;if(he.type==="FeatureCollection"){const q=new Set;for(const D of he.features){const H=cn(D,U);if(H==null||q.has(H))return!1;q.add(H)}return!0}return!1}function Mi(he,U){const q=new Map;if(he!=null)if(he.type==="Feature")q.set(cn(he,U),he);else for(const D of he.features)q.set(cn(D,U),D);return q}Bt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Bt.prototype.splitTile=function(he,U,q,D,H,ee,se){for(var ge=[he,U,q,D],fe=this.options,_e=fe.debug;ge.length;){D=ge.pop(),q=ge.pop(),U=ge.pop(),he=ge.pop();var Pe=1<<U,Me=An(U,q,D),Te=this.tiles[Me];if(!Te&&(_e>1&&console.time("creation"),Te=this.tiles[Me]=Ro(he,U,q,D,fe),this.tileCoords.push({z:U,x:q,y:D}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",U,q,D,Te.numFeatures,Te.numPoints,Te.numSimplified),console.timeEnd("creation"));var dt="z"+U;this.stats[dt]=(this.stats[dt]||0)+1,this.total++}if(Te.source=he,H){if(U===fe.maxZoom||U===H)continue;var ct=1<<H-U;if(q!==Math.floor(ee/ct)||D!==Math.floor(se/ct))continue}else if(U===fe.indexMaxZoom||Te.numPoints<=fe.indexMaxPoints)continue;if(Te.source=null,he.length!==0){_e>1&&console.time("clipping");var it,mt,Mt,sr,lr,Cr,zt=.5*fe.buffer/fe.extent,yr=.5-zt,br=.5+zt,yn=1+zt;it=mt=Mt=sr=null,lr=dr(he,Pe,q-zt,q+br,0,Te.minX,Te.maxX,fe),Cr=dr(he,Pe,q+yr,q+yn,0,Te.minX,Te.maxX,fe),he=null,lr&&(it=dr(lr,Pe,D-zt,D+br,1,Te.minY,Te.maxY,fe),mt=dr(lr,Pe,D+yr,D+yn,1,Te.minY,Te.maxY,fe),lr=null),Cr&&(Mt=dr(Cr,Pe,D-zt,D+br,1,Te.minY,Te.maxY,fe),sr=dr(Cr,Pe,D+yr,D+yn,1,Te.minY,Te.maxY,fe),Cr=null),_e>1&&console.timeEnd("clipping"),ge.push(it||[],U+1,2*q,2*D),ge.push(mt||[],U+1,2*q,2*D+1),ge.push(Mt||[],U+1,2*q+1,2*D),ge.push(sr||[],U+1,2*q+1,2*D+1)}}},Bt.prototype.getTile=function(he,U,q){var D=this.options,H=D.extent,ee=D.debug;if(he<0||he>24)return null;var se=1<<he,ge=An(he,U=(U%se+se)%se,q);if(this.tiles[ge])return Nn(this.tiles[ge],H);ee>1&&console.log("drilling down to z%d-%d-%d",he,U,q);for(var fe,_e=he,Pe=U,Me=q;!fe&&_e>0;)_e--,Pe=Math.floor(Pe/2),Me=Math.floor(Me/2),fe=this.tiles[An(_e,Pe,Me)];return fe&&fe.source?(ee>1&&console.log("found parent tile z%d-%d-%d",_e,Pe,Me),ee>1&&console.time("drilling down"),this.splitTile(fe.source,_e,Pe,Me,he,U,q),ee>1&&console.timeEnd("drilling down"),this.tiles[ge]?Nn(this.tiles[ge],H):null):null};class ro extends P{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(U,q){return d._(this,void 0,void 0,function*(){const D=U.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const H=this._geoJSONIndex.getTile(D.z,D.x,D.y);if(!H)return null;const ee=new class{constructor(ge){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.W,this.length=ge.length,this._features=ge}feature(ge){return new class{constructor(fe){this._feature=fe,this.extent=d.W,this.type=fe.type,this.properties=fe.tags,"id"in fe&&!isNaN(fe.id)&&(this.id=parseInt(fe.id,10))}loadGeometry(){if(this._feature.type===1){const fe=[];for(const _e of this._feature.geometry)fe.push([new d.P(_e[0],_e[1])]);return fe}{const fe=[];for(const _e of this._feature.geometry){const Pe=[];for(const Me of _e)Pe.push(new d.P(Me[0],Me[1]));fe.push(Pe)}return fe}}toGeoJSON(fe,_e,Pe){return re.call(this,fe,_e,Pe)}}(this._features[ge])}}(H.features);let se=He(ee);return se.byteOffset===0&&se.byteLength===se.buffer.byteLength||(se=new Uint8Array(se)),{vectorTile:ee,rawData:se.buffer}})}loadData(U){return d._(this,void 0,void 0,function*(){var q;(q=this._pendingRequest)===null||q===void 0||q.abort();const D=!!(U&&U.request&&U.request.collectResourceTiming)&&new d.bt(U.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(U,this._pendingRequest),this._geoJSONIndex=U.cluster?new Tt(function({superclusterOptions:ee,clusterProperties:se}){if(!se||!ee)return ee;const ge={},fe={},_e={accumulated:null,zoom:0},Pe={properties:null},Me=Object.keys(se);for(const Te of Me){const[dt,ct]=se[Te],it=d.bA(ct),mt=d.bA(typeof dt=="string"?[dt,["accumulated"],["get",Te]]:dt);ge[Te]=it.value,fe[Te]=mt.value}return ee.map=Te=>{Pe.properties=Te;const dt={};for(const ct of Me)dt[ct]=ge[ct].evaluate(_e,Pe);return dt},ee.reduce=(Te,dt)=>{Pe.properties=dt;for(const ct of Me)_e.accumulated=Te[ct],Te[ct]=fe[ct].evaluate(_e,Pe)},ee}(U)).load((yield this._pendingData).features):new Bt(yield this._pendingData,U.geojsonVtOptions),this.loaded={};const H={};if(D){const ee=D.finish();ee&&(H.resourceTiming={},H.resourceTiming[U.source]=JSON.parse(JSON.stringify(ee)))}return H}catch(H){if(delete this._pendingRequest,d.bz(H))return{abandoned:!0};throw H}})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(U){const q=this.loaded;return q&&q[U.uid]?super.reloadTile(U):this.loadTile(U)}loadAndProcessGeoJSON(U,q){return d._(this,void 0,void 0,function*(){let D=yield this.loadGeoJSON(U,q);if(delete this._pendingRequest,typeof D!="object")throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(V(D,!0),U.filter){const H=d.bA(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(H.result==="error")throw new Error(H.value.map(se=>`${se.key}: ${se.message}`).join(", "));D={type:"FeatureCollection",features:D.features.filter(se=>H.value.evaluate({zoom:0},se))}}return D})}loadGeoJSON(U,q){return d._(this,void 0,void 0,function*(){const{promoteId:D}=U;if(U.request){const H=yield d.h(U.request,q);return this._dataUpdateable=jt(H.data,D)?Mi(H.data,D):void 0,H.data}if(typeof U.data=="string")try{const H=JSON.parse(U.data);return this._dataUpdateable=jt(H,D)?Mi(H,D):void 0,H}catch{throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`)}if(!U.dataDiff)throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${U.source}`);return function(H,ee,se){var ge,fe,_e,Pe;if(ee.removeAll&&H.clear(),ee.remove)for(const Me of ee.remove)H.delete(Me);if(ee.add)for(const Me of ee.add){const Te=cn(Me,se);Te!=null&&H.set(Te,Me)}if(ee.update)for(const Me of ee.update){let Te=H.get(Me.id);if(Te==null)continue;const dt=!Me.removeAllProperties&&(((ge=Me.removeProperties)===null||ge===void 0?void 0:ge.length)>0||((fe=Me.addOrUpdateProperties)===null||fe===void 0?void 0:fe.length)>0);if((Me.newGeometry||Me.removeAllProperties||dt)&&(Te=Object.assign({},Te),H.set(Me.id,Te),dt&&(Te.properties=Object.assign({},Te.properties))),Me.newGeometry&&(Te.geometry=Me.newGeometry),Me.removeAllProperties)Te.properties={};else if(((_e=Me.removeProperties)===null||_e===void 0?void 0:_e.length)>0)for(const ct of Me.removeProperties)Object.prototype.hasOwnProperty.call(Te.properties,ct)&&delete Te.properties[ct];if(((Pe=Me.addOrUpdateProperties)===null||Pe===void 0?void 0:Pe.length)>0)for(const{key:ct,value:it}of Me.addOrUpdateProperties)Te.properties[ct]=it}}(this._dataUpdateable,U.dataDiff,D),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(U){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(U){return this._geoJSONIndex.getClusterExpansionZoom(U.clusterId)}getClusterChildren(U){return this._geoJSONIndex.getChildren(U.clusterId)}getClusterLeaves(U){return this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset)}}class Qr{constructor(U){this.self=U,this.actor=new d.C(U),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(q,D)=>{if(this.externalWorkerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.externalWorkerSourceTypes[q]=D},this.self.addProtocol=d.bg,this.self.removeProtocol=d.bh,this.self.registerRTLTextPlugin=q=>{if(d.bB.isParsed())throw new Error("RTL text plugin already registered.");d.bB.setMethods(q)},this.actor.registerMessageHandler("LDT",(q,D)=>this._getDEMWorkerSource(q,D.source).loadTile(D)),this.actor.registerMessageHandler("RDT",(q,D)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(q,D.source).removeTile(D)})),this.actor.registerMessageHandler("GCEZ",(q,D)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(q,D.type,D.source).getClusterExpansionZoom(D)})),this.actor.registerMessageHandler("GCC",(q,D)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(q,D.type,D.source).getClusterChildren(D)})),this.actor.registerMessageHandler("GCL",(q,D)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(q,D.type,D.source).getClusterLeaves(D)})),this.actor.registerMessageHandler("LD",(q,D)=>this._getWorkerSource(q,D.type,D.source).loadData(D)),this.actor.registerMessageHandler("GD",(q,D)=>this._getWorkerSource(q,D.type,D.source).getData()),this.actor.registerMessageHandler("LT",(q,D)=>this._getWorkerSource(q,D.type,D.source).loadTile(D)),this.actor.registerMessageHandler("RT",(q,D)=>this._getWorkerSource(q,D.type,D.source).reloadTile(D)),this.actor.registerMessageHandler("AT",(q,D)=>this._getWorkerSource(q,D.type,D.source).abortTile(D)),this.actor.registerMessageHandler("RMT",(q,D)=>this._getWorkerSource(q,D.type,D.source).removeTile(D)),this.actor.registerMessageHandler("RS",(q,D)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[q]||!this.workerSources[q][D.type]||!this.workerSources[q][D.type][D.source])return;const H=this.workerSources[q][D.type][D.source];delete this.workerSources[q][D.type][D.source],H.removeSource!==void 0&&H.removeSource(D)})),this.actor.registerMessageHandler("RM",q=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[q],delete this.availableImages[q],delete this.workerSources[q],delete this.demWorkerSources[q]})),this.actor.registerMessageHandler("SR",(q,D)=>d._(this,void 0,void 0,function*(){this.referrer=D})),this.actor.registerMessageHandler("SRPS",(q,D)=>this._syncRTLPluginState(q,D)),this.actor.registerMessageHandler("IS",(q,D)=>d._(this,void 0,void 0,function*(){this.self.importScripts(D)})),this.actor.registerMessageHandler("SI",(q,D)=>this._setImages(q,D)),this.actor.registerMessageHandler("UL",(q,D)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(q).update(D.layers,D.removedIds)})),this.actor.registerMessageHandler("SL",(q,D)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(q).replace(D)}))}_setImages(U,q){return d._(this,void 0,void 0,function*(){this.availableImages[U]=q;for(const D in this.workerSources[U]){const H=this.workerSources[U][D];for(const ee in H)H[ee].availableImages=q}})}_syncRTLPluginState(U,q){return d._(this,void 0,void 0,function*(){if(d.bB.isParsed())return d.bB.getState();if(q.pluginStatus!=="loading")return d.bB.setState(q),q;const D=q.pluginURL;if(this.self.importScripts(D),d.bB.isParsed()){const H={pluginStatus:"loaded",pluginURL:D};return d.bB.setState(H),H}throw d.bB.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${D}`)})}_getAvailableImages(U){let q=this.availableImages[U];return q||(q=[]),q}_getLayerIndex(U){let q=this.layerIndexes[U];return q||(q=this.layerIndexes[U]=new c),q}_getWorkerSource(U,q,D){if(this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][q]||(this.workerSources[U][q]={}),!this.workerSources[U][q][D]){const H={sendAsync:(ee,se)=>(ee.targetMapId=U,this.actor.sendAsync(ee,se))};switch(q){case"vector":this.workerSources[U][q][D]=new P(H,this._getLayerIndex(U),this._getAvailableImages(U));break;case"geojson":this.workerSources[U][q][D]=new ro(H,this._getLayerIndex(U),this._getAvailableImages(U));break;default:this.workerSources[U][q][D]=new this.externalWorkerSourceTypes[q](H,this._getLayerIndex(U),this._getAvailableImages(U))}}return this.workerSources[U][q][D]}_getDEMWorkerSource(U,q){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][q]||(this.demWorkerSources[U][q]=new T),this.demWorkerSources[U][q]}}return d.i(self)&&(self.worker=new Qr(self)),Qr}),s("index",["exports","./shared"],function(d,c){var b="4.3.2";let E,I;const P={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((o,u)=>{const p=requestAnimationFrame(o);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),u(c.c())})}),getImageData(y,o=0){return this.getImageCanvasContext(y).getImageData(-o,-o,y.width+2*o,y.height+2*o)},getImageCanvasContext(y){const o=window.document.createElement("canvas"),u=o.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return o.width=y.width,o.height=y.height,u.drawImage(y,0,0,y.width,y.height),u},resolveURL:y=>(E||(E=document.createElement("a")),E.href=y,E.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class T{static testProp(o){if(!T.docStyle)return o[0];for(let u=0;u<o.length;u++)if(o[u]in T.docStyle)return o[u];return o[0]}static create(o,u,p){const g=window.document.createElement(o);return u!==void 0&&(g.className=u),p&&p.appendChild(g),g}static createNS(o,u){return window.document.createElementNS(o,u)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(o,u){o.style[T.transformProp]=u}static addEventListener(o,u,p,g={}){o.addEventListener(u,p,"passive"in g?g:g.capture)}static removeEventListener(o,u,p,g={}){o.removeEventListener(u,p,"passive"in g?g:g.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(o){const u=o.getBoundingClientRect();return{x:u.width/o.offsetWidth||1,y:u.height/o.offsetHeight||1,boundingClientRect:u}}static getPoint(o,u,p){const g=u.boundingClientRect;return new c.P((p.clientX-g.left)/u.x-o.clientLeft,(p.clientY-g.top)/u.y-o.clientTop)}static mousePos(o,u){const p=T.getScale(o);return T.getPoint(o,p,u)}static touchPos(o,u){const p=[],g=T.getScale(o);for(let _=0;_<u.length;_++)p.push(T.getPoint(o,g,u[_]));return p}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const O={supported:!1,testSupport:function(y){!re&&V&&(W?Z(y):j=y)}};let j,V,re=!1,W=!1;function Z(y){const o=y.createTexture();y.bindTexture(y.TEXTURE_2D,o);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,V),y.isContextLost())return;O.supported=!0}catch{}y.deleteTexture(o),re=!0}var K;typeof document<"u"&&(V=document.createElement("img"),V.onload=()=>{j&&Z(j),j=null,W=!0},V.onerror=()=>{re=!0,j=null},V.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let o,u,p,g;y.resetRequestQueue=()=>{o=[],u=0,p=0,g={}},y.addThrottleControl=M=>{const k=p++;return g[k]=M,k},y.removeThrottleControl=M=>{delete g[M],S()},y.getImage=(M,k,B=!0)=>new Promise((F,X)=>{O.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),c.e(M,{type:"image"}),o.push({abortController:k,requestParameters:M,supportImageRefresh:B,state:"queued",onError:te=>{X(te)},onSuccess:te=>{F(te)}}),S()});const _=M=>c._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:k,supportImageRefresh:B,onError:F,onSuccess:X,abortController:te}=M,oe=B===!1&&!c.i(self)&&!c.g(k.url)&&(!k.headers||Object.keys(k.headers).reduce((ve,be)=>ve&&be==="accept",!0));u++;const me=oe?C(k,te):c.m(k,te);try{const ve=yield me;delete M.abortController,M.state="completed",ve.data instanceof HTMLImageElement||c.b(ve.data)?X(ve):ve.data&&X({data:yield(le=ve.data,typeof createImageBitmap=="function"?c.d(le):c.f(le)),cacheControl:ve.cacheControl,expires:ve.expires})}catch(ve){delete M.abortController,F(ve)}finally{u--,S()}var le}),S=()=>{const M=(()=>{for(const k of Object.keys(g))if(g[k]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let k=u;k<M&&o.length>0;k++){const B=o.shift();B.abortController.signal.aborted?k--:_(B)}},C=(M,k)=>new Promise((B,F)=>{const X=new Image,te=M.url,oe=M.credentials;oe&&oe==="include"?X.crossOrigin="use-credentials":(oe&&oe==="same-origin"||!c.s(te))&&(X.crossOrigin="anonymous"),k.signal.addEventListener("abort",()=>{X.src="",F(c.c())}),X.fetchPriority="high",X.onload=()=>{X.onerror=X.onload=null,B({data:X})},X.onerror=()=>{X.onerror=X.onload=null,k.signal.aborted||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},X.src=te})}(K||(K={})),K.resetRequestQueue();class ie{constructor(o){this._transformRequestFn=o}transformRequest(o,u){return this._transformRequestFn&&this._transformRequestFn(o,u)||{url:o}}setTransformRequest(o){this._transformRequestFn=o}}function de(y){var o=new c.A(3);return o[0]=y[0],o[1]=y[1],o[2]=y[2],o}var ae,J=function(y,o,u){return y[0]=o[0]-u[0],y[1]=o[1]-u[1],y[2]=o[2]-u[2],y};ae=new c.A(3),c.A!=Float32Array&&(ae[0]=0,ae[1]=0,ae[2]=0);var we=function(y){var o=y[0],u=y[1];return o*o+u*u};function Re(y){const o=[];if(typeof y=="string")o.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:p,url:g}of y){const _=`${p}${g}`;u.indexOf(_)===-1&&(u.push(_),o.push({id:p,url:g}))}}return o}function De(y,o,u){const p=y.split("?");return p[0]+=`${o}${u}`,p.join("?")}(function(){var y=new c.A(2);c.A!=Float32Array&&(y[0]=0,y[1]=0)})();class Oe{constructor(o,u,p,g){this.context=o,this.format=p,this.texture=o.gl.createTexture(),this.update(u,g)}update(o,u,p){const{width:g,height:_}=o,S=!(this.size&&this.size[0]===g&&this.size[1]===_||p),{context:C}=this,{gl:M}=C;if(this.useMipmap=!!(u&&u.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!u||u.premultiply!==!1)),S)this.size=[g,_],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||c.b(o)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,o):M.texImage2D(M.TEXTURE_2D,0,this.format,g,_,0,this.format,M.UNSIGNED_BYTE,o.data);else{const{x:k,y:B}=p||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||c.b(o)?M.texSubImage2D(M.TEXTURE_2D,0,k,B,M.RGBA,M.UNSIGNED_BYTE,o):M.texSubImage2D(M.TEXTURE_2D,0,k,B,g,_,M.RGBA,M.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(o,u,p){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),o!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,o),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||o),this.filter=o),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function Qe(y){const{userImage:o}=y;return!!(o&&o.render&&o.render())&&(y.data.replace(new Uint8Array(o.data.buffer)),!0)}class qe extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:u,promiseResolve:p}of this.requestors)p(this._getImagesForIds(u));this.requestors=[]}}getImage(o){const u=this.images[o];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new c.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(o,u){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,u)&&(this.images[o]=u)}_validate(o,u){let p=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new c.j(new Error(`Image "${o}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new c.j(new Error(`Image "${o}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new c.j(new Error(`Image "${o}" has invalid "content" value`))),p=!1),p}_validateStretch(o,u){if(!o)return!0;let p=0;for(const g of o){if(g[0]<p||g[1]<g[0]||u<g[1])return!1;p=g[1]}return!0}_validateContent(o,u){if(!o)return!0;if(o.length!==4)return!1;const p=u.spriteData,g=p&&p.width||u.data.width,_=p&&p.height||u.data.height;return!(o[0]<0||g<o[0]||o[1]<0||_<o[1]||o[2]<0||g<o[2]||o[3]<0||_<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,u,p=!0){const g=this.getImage(o);if(p&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[o]=u,this.updatedImages[o]=!0}removeImage(o){const u=this.images[o];delete this.images[o],delete this.patterns[o],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o){return new Promise((u,p)=>{let g=!0;if(!this.isLoaded())for(const _ of o)this.images[_]||(g=!1);this.isLoaded()||g?u(this._getImagesForIds(o)):this.requestors.push({ids:o,promiseResolve:u})})}_getImagesForIds(o){const u={};for(const p of o){let g=this.getImage(p);g||(this.fire(new c.k("styleimagemissing",{id:p})),g=this.getImage(p)),g?u[p]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:c.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:o,height:u}=this.atlasImage;return{width:o,height:u}}getPattern(o){const u=this.patterns[o],p=this.getImage(o);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new c.I(g,p);this.patterns[o]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const u=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Oe(o,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const _ in this.patterns)o.push(this.patterns[_].bin);const{w:u,h:p}=c.p(o),g=this.atlasImage;g.resize({width:u||1,height:p||1});for(const _ in this.patterns){const{bin:S}=this.patterns[_],C=S.x+1,M=S.y+1,k=this.getImage(_).data,B=k.width,F=k.height;c.R.copy(k,g,{x:0,y:0},{x:C,y:M},{width:B,height:F}),c.R.copy(k,g,{x:0,y:F-1},{x:C,y:M-1},{width:B,height:1}),c.R.copy(k,g,{x:0,y:0},{x:C,y:M+F},{width:B,height:1}),c.R.copy(k,g,{x:B-1,y:0},{x:C-1,y:M},{width:1,height:F}),c.R.copy(k,g,{x:0,y:0},{x:C+B,y:M},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const u of o){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||c.w(`Image with ID: "${u}" was not found`),Qe(p)&&this.updateImage(u,p)}}}const Ze=1e20;function Fe(y,o,u,p,g,_,S,C,M){for(let k=o;k<o+p;k++)Ve(y,u*_+k,_,g,S,C,M);for(let k=u;k<u+g;k++)Ve(y,k*_+o,1,p,S,C,M)}function Ve(y,o,u,p,g,_,S){_[0]=0,S[0]=-Ze,S[1]=Ze,g[0]=y[o];for(let C=1,M=0,k=0;C<p;C++){g[C]=y[o+C*u];const B=C*C;do{const F=_[M];k=(g[C]-g[F]+B-F*F)/(C-F)/2}while(k<=S[M]&&--M>-1);M++,_[M]=C,S[M]=k,S[M+1]=Ze}for(let C=0,M=0;C<p;C++){for(;S[M+1]<C;)M++;const k=_[M],B=C-k;y[o+C*u]=g[k]+B*B}}class He{constructor(o,u){this.requestManager=o,this.localIdeographFontFamily=u,this.entries={}}setURL(o){this.url=o}getGlyphs(o){return c._(this,void 0,void 0,function*(){const u=[];for(const _ in o)for(const S of o[_])u.push(this._getAndCacheGlyphsPromise(_,S));const p=yield Promise.all(u),g={};for(const{stack:_,id:S,glyph:C}of p)g[_]||(g[_]={}),g[_][S]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics};return g})}_getAndCacheGlyphsPromise(o,u){return c._(this,void 0,void 0,function*(){let p=this.entries[o];p||(p=this.entries[o]={glyphs:{},requests:{},ranges:{}});let g=p.glyphs[u];if(g!==void 0)return{stack:o,id:u,glyph:g};if(g=this._tinySDF(p,o,u),g)return p.glyphs[u]=g,{stack:o,id:u,glyph:g};const _=Math.floor(u/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[_])return{stack:o,id:u,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[_]){const C=He.loadGlyphRange(o,_,this.url,this.requestManager);p.requests[_]=C}const S=yield p.requests[_];for(const C in S)this._doesCharSupportLocalGlyph(+C)||(p.glyphs[+C]=S[+C]);return p.ranges[_]=!0,{stack:o,id:u,glyph:S[u]||null}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](o)||c.u["Hangul Syllables"](o)||c.u.Hiragana(o)||c.u.Katakana(o))}_tinySDF(o,u,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let _=o.tinySDF;if(!_){let C="400";/bold/i.test(u)?C="900":/medium/i.test(u)?C="500":/light/i.test(u)&&(C="200"),_=o.tinySDF=new He.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:C})}const S=_.draw(String.fromCharCode(p));return{id:p,bitmap:new c.o({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}He.loadGlyphRange=function(y,o,u,p){return c._(this,void 0,void 0,function*(){const g=256*o,_=g+255,S=p.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${g}-${_}`),"Glyphs"),C=yield c.l(S,new AbortController);if(!C||!C.data)throw new Error(`Could not load glyph range. range: ${o}, ${g}-${_}`);const M={};for(const k of c.n(C.data))M[k.id]=k;return M})},He.TinySDF=class{constructor({fontSize:y=24,buffer:o=3,radius:u=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:S="normal"}={}){this.buffer=o,this.cutoff=p,this.radius=u;const C=this.size=y+4*o,M=this._createCanvas(C),k=this.ctx=M.getContext("2d",{willReadFrequently:!0});k.font=`${S} ${_} ${y}px ${g}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(y){const o=document.createElement("canvas");return o.width=o.height=y,o}draw(y){const{width:o,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),S=Math.ceil(u),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),M=Math.min(this.size-this.buffer,S+Math.ceil(p)),k=C+2*this.buffer,B=M+2*this.buffer,F=Math.max(k*B,0),X=new Uint8ClampedArray(F),te={data:X,width:k,height:B,glyphWidth:C,glyphHeight:M,glyphTop:S,glyphLeft:0,glyphAdvance:o};if(C===0||M===0)return te;const{ctx:oe,buffer:me,gridInner:le,gridOuter:ve}=this;oe.clearRect(me,me,C,M),oe.fillText(y,me,me+S);const be=oe.getImageData(me,me,C,M);ve.fill(Ze,0,F),le.fill(0,0,F);for(let pe=0;pe<M;pe++)for(let Ee=0;Ee<C;Ee++){const Ie=be.data[4*(pe*C+Ee)+3]/255;if(Ie===0)continue;const ke=(pe+me)*k+Ee+me;if(Ie===1)ve[ke]=0,le[ke]=Ze;else{const Ne=.5-Ie;ve[ke]=Ne>0?Ne*Ne:0,le[ke]=Ne<0?Ne*Ne:0}}Fe(ve,0,0,k,B,k,this.f,this.v,this.z),Fe(le,me,me,C,M,k,this.f,this.v,this.z);for(let pe=0;pe<F;pe++){const Ee=Math.sqrt(ve[pe])-Math.sqrt(le[pe]);X[pe]=Math.round(255-255*(Ee/this.radius+this.cutoff))}return te}};class Se{constructor(){this.specification=c.v.light.position}possiblyEvaluate(o,u){return c.y(o.expression.evaluate(u))}interpolate(o,u,p){return{x:c.z.number(o.x,u.x,p),y:c.z.number(o.y,u.y,p),z:c.z.number(o.z,u.z,p)}}}let Be;class tt extends c.E{constructor(o){super(),Be=Be||new c.q({anchor:new c.D(c.v.light.anchor),position:new Se,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(Be),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,u={}){if(!this._validate(c.r,o,u))for(const p in o){const g=o[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,u,p){return(!p||p.validate!==!1)&&c.t(this,o.call(c.x,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}class ot{constructor(o,u){this.width=o,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,u){const p=o.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(o,u)),this.dashEntry[p]}getDashRanges(o,u,p){const g=[];let _=o.length%2==1?-o[o.length-1]*p:0,S=o[0]*p,C=!0;g.push({left:_,right:S,isDash:C,zeroLength:o[0]===0});let M=o[0];for(let k=1;k<o.length;k++){C=!C;const B=o[k];_=M*p,M+=B,S=M*p,g.push({left:_,right:S,isDash:C,zeroLength:B===0})}return g}addRoundDash(o,u,p){const g=u/2;for(let _=-p;_<=p;_++){const S=this.width*(this.nextRow+p+_);let C=0,M=o[C];for(let k=0;k<this.width;k++){k/M.right>1&&(M=o[++C]);const B=Math.abs(k-M.left),F=Math.abs(k-M.right),X=Math.min(B,F);let te;const oe=_/p*(g+1);if(M.isDash){const me=g-Math.abs(oe);te=Math.sqrt(X*X+me*me)}else te=g-Math.sqrt(X*X+oe*oe);this.data[S+k]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(o){for(let C=o.length-1;C>=0;--C){const M=o[C],k=o[C+1];M.zeroLength?o.splice(C,1):k&&k.isDash===M.isDash&&(k.left=M.left,o.splice(C,1))}const u=o[0],p=o[o.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,S=o[_];for(let C=0;C<this.width;C++){C/S.right>1&&(S=o[++_]);const M=Math.abs(C-S.left),k=Math.abs(C-S.right),B=Math.min(M,k);this.data[g+C]=Math.max(0,Math.min(255,(S.isDash?B:-B)+128))}}addDash(o,u){const p=u?7:0,g=2*p+1;if(this.nextRow+g>this.height)return c.w("LineAtlas out of space"),null;let _=0;for(let C=0;C<o.length;C++)_+=o[C];if(_!==0){const C=this.width/_,M=this.getDashRanges(o,this.width,C);u?this.addRoundDash(M,C,p):this.addRegularDash(M)}const S={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=g,this.dirty=!0,S}bind(o){const u=o.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const St="maplibre_preloaded_worker_pool";class qt{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<qt.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[St]}numActive(){return Object.keys(this.active).length}}const Tt=Math.floor(P.hardwareConcurrency/2);let kt,Lt;function Yt(){return kt||(kt=new qt),kt}qt.workerCount=c.B(globalThis)?Math.max(Math.min(Tt,3),1):1;class or{constructor(o,u){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=u;const p=this.workerPool.acquire(u);for(let g=0;g<p.length;g++){const _=new c.C(p[g],u);_.name=`Worker ${g}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,u){const p=[];for(const g of this.actors)p.push(g.sendAsync({type:o,data:u}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}registerMessageHandler(o,u){for(const p of this.actors)p.registerMessageHandler(o,u)}}function zr(){return Lt||(Lt=new or(Yt(),c.G),Lt.registerMessageHandler("GR",(y,o,u)=>c.m(o,u))),Lt}function Fr(y,o){const u=c.F();return c.H(u,u,[1,1,0]),c.J(u,u,[.5*y.width,.5*y.height,1]),c.K(u,u,y.calculatePosMatrix(o.toUnwrapped()))}function ti(y,o,u,p,g,_){const S=function(F,X,te){if(F)for(const oe of F){const me=X[oe];if(me&&me.source===te&&me.type==="fill-extrusion")return!0}else for(const oe in X){const me=X[oe];if(me.source===te&&me.type==="fill-extrusion")return!0}return!1}(g&&g.layers,o,y.id),C=_.maxPitchScaleFactor(),M=y.tilesIn(p,C,S);M.sort(ar);const k=[];for(const F of M)k.push({wrappedTileID:F.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(o,u,y._state,F.queryGeometry,F.cameraQueryGeometry,F.scale,g,_,C,Fr(y.transform,F.tileID))});const B=function(F){const X={},te={};for(const oe of F){const me=oe.queryResults,le=oe.wrappedTileID,ve=te[le]=te[le]||{};for(const be in me){const pe=me[be],Ee=ve[be]=ve[be]||{},Ie=X[be]=X[be]||[];for(const ke of pe)Ee[ke.featureIndex]||(Ee[ke.featureIndex]=!0,Ie.push(ke))}}return X}(k);for(const F in B)B[F].forEach(X=>{const te=X.feature,oe=y.getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=oe});return B}function ar(y,o){const u=y.tileID,p=o.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function Jr(y,o,u){return c._(this,void 0,void 0,function*(){let p=y;if(y.url?p=(yield c.h(o.transformRequest(y.url,"Source"),u)).data:yield P.frameAsync(u),!p)return null;const g=c.L(c.e(p,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(g.vectorLayerIds=p.vector_layers.map(_=>_.id)),g})}class Wt{constructor(o,u){o&&(u?this.setSouthWest(o).setNorthEast(u):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof c.M?new c.M(o.lng,o.lat):c.M.convert(o),this}setSouthWest(o){return this._sw=o instanceof c.M?new c.M(o.lng,o.lat):c.M.convert(o),this}extend(o){const u=this._sw,p=this._ne;let g,_;if(o instanceof c.M)g=o,_=o;else{if(!(o instanceof Wt))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Wt.convert(o)):this.extend(c.M.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(c.M.convert(o)):this;if(g=o._sw,_=o._ne,!g||!_)return this}return u||p?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new c.M(g.lng,g.lat),this._ne=new c.M(_.lng,_.lat)),this}getCenter(){return new c.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.M(this.getWest(),this.getNorth())}getSouthEast(){return new c.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:u,lat:p}=c.M.convert(o);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(o){return o instanceof Wt?o:o&&new Wt(o)}static fromLngLat(o,u=0){const p=360*u/40075017,g=p/Math.cos(Math.PI/180*o.lat);return new Wt(new c.M(o.lng-g,o.lat-p),new c.M(o.lng+g,o.lat+p))}}class ri{constructor(o,u,p){this.bounds=Wt.convert(this.validateBounds(o)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const u=Math.pow(2,o.z),p=Math.floor(c.N(this.bounds.getWest())*u),g=Math.floor(c.O(this.bounds.getNorth())*u),_=Math.ceil(c.N(this.bounds.getEast())*u),S=Math.ceil(c.O(this.bounds.getSouth())*u);return o.x>=p&&o.x<_&&o.y>=g&&o.y<S}}class Le extends c.E{constructor(o,u,p,g){if(super(),this.id=o,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.L(u,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield Jr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o&&(c.e(this,o),o.bounds&&(this.tileBounds=new ri(o.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this.fire(new c.j(o))}})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.abort(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(o){return c._(this,void 0,void 0,function*(){const u=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(u,"Tile"),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(o.actor&&o.state!=="expired"){if(o.state==="loading")return new Promise((_,S)=>{o.reloadPromise={resolve:_,reject:S}})}else o.actor=this.dispatcher.getActor(),g="LT";o.abortController=new AbortController;try{const _=yield o.actor.sendAsync({type:g,data:p},o.abortController);if(delete o.abortController,o.aborted)return;this._afterTileLoadWorkerResponse(o,_)}catch(_){if(delete o.abortController,o.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(o,null)}})}_afterTileLoadWorkerResponse(o,u){if(u&&u.resourceTiming&&(o.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&o.setExpiryData(u),o.loadVectorData(u,this.map.painter),o.reloadPromise){const p=o.reloadPromise;o.reloadPromise=null,this.loadTile(o).then(p.resolve).catch(p.reject)}}abortTile(o){return c._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.actor&&(yield o.actor.sendAsync({type:"AT",data:{uid:o.uid,type:this.type,source:this.id}}))})}unloadTile(o){return c._(this,void 0,void 0,function*(){o.unloadVectorData(),o.actor&&(yield o.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Sn extends c.E{constructor(o,u,p,g){super(),this.id=o,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.L(u,["url","scheme","tileSize"]))}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield Jr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(c.e(this,o),o.bounds&&(this.tileBounds=new ri(o.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this.fire(new c.j(o))}})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(o){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}serialize(){return c.e({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o){return c._(this,void 0,void 0,function*(){const u=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.abortController=new AbortController;try{const p=yield K.getImage(this.map._requestManager.transformRequest(u,"Tile"),o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&o.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const g=this.map.painter.context,_=g.gl,S=p.data;o.texture=this.map.painter.getTileTexture(S.width),o.texture?o.texture.update(S,{useMipmap:!0}):(o.texture=new Oe(g,S,_.RGBA,{useMipmap:!0}),o.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&_.texParameterf(_.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),o.state="loaded"}}catch(p){if(delete o.abortController,o.aborted)o.state="unloaded";else if(p)throw o.state="errored",p}})}abortTile(o){return c._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController)})}unloadTile(o){return c._(this,void 0,void 0,function*(){o.texture&&this.map.painter.saveTileTexture(o.texture)})}hasTransition(){return!1}}class Rn extends Sn{constructor(o,u,p,g){super(o,u,p,g),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(o){return c._(this,void 0,void 0,function*(){const u=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(u,"Tile");o.neighboringTiles=this._getNeighboringTiles(o.tileID),o.abortController=new AbortController;try{const g=yield K.getImage(p,o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(g&&g.data){const _=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&o.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const S=c.b(_)&&c.S()?_:yield this.readImageNow(_),C={type:this.type,uid:o.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!o.actor||o.state==="expired"){o.actor=this.dispatcher.getActor();const M=yield o.actor.sendAsync({type:"LDT",data:C});o.dem=M,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded"}}}catch(g){if(delete o.abortController,o.aborted)o.state="unloaded";else if(g)throw o.state="errored",g}})}readImageNow(o){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.U()){const u=o.width+2,p=o.height+2;try{return new c.R({width:u,height:p},yield c.V(o,-1,-1,u,p))}catch{}}return P.getImageData(o,1)})}_getNeighboringTiles(o){const u=o.canonical,p=Math.pow(2,u.z),g=(u.x-1+p)%p,_=u.x===0?o.wrap-1:o.wrap,S=(u.x+1+p)%p,C=u.x+1===p?o.wrap+1:o.wrap,M={};return M[new c.Q(o.overscaledZ,_,u.z,g,u.y).key]={backfilled:!1},M[new c.Q(o.overscaledZ,C,u.z,S,u.y).key]={backfilled:!1},u.y>0&&(M[new c.Q(o.overscaledZ,_,u.z,g,u.y-1).key]={backfilled:!1},M[new c.Q(o.overscaledZ,o.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},M[new c.Q(o.overscaledZ,C,u.z,S,u.y-1).key]={backfilled:!1}),u.y+1<p&&(M[new c.Q(o.overscaledZ,_,u.z,g,u.y+1).key]={backfilled:!1},M[new c.Q(o.overscaledZ,o.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},M[new c.Q(o.overscaledZ,C,u.z,S,u.y+1).key]={backfilled:!1}),M}unloadTile(o){return c._(this,void 0,void 0,function*(){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&(yield o.actor.sendAsync({type:"RDT",data:{type:this.type,uid:o.uid,source:this.id}}))})}}class nr extends c.E{constructor(o,u,p,g){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=u.data,this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=c.W/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:c.W,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.W,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return c._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData(),this}updateData(o){return this._updateWorkerData(o),this}getData(){return c._(this,void 0,void 0,function*(){const o=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:o})})}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=o.clusterRadius),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=o.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(o){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:o,source:this.id}})}getClusterChildren(o){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:o,source:this.id}})}getClusterLeaves(o,u,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:o,limit:u,offset:p}})}_updateWorkerData(o){return c._(this,void 0,void 0,function*(){const u=c.e({type:this.type},this.workerOptions);o?u.dataDiff=o:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(P.resolveURL(this._data),"Source"),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:u});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let g=null;p.resourceTiming&&p.resourceTiming[this.id]&&(g=p.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&c.e(_,{resourceTiming:g}),this.fire(new c.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new c.k("dataabort",{dataType:"source"}));this.fire(new c.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(o){return c._(this,void 0,void 0,function*(){const u=o.actor?"RT":"LT";o.actor=this.actor;const p={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.abortController=new AbortController;const g=yield this.actor.sendAsync({type:u,data:p},o.abortController);delete o.abortController,o.unloadVectorData(),o.aborted||o.loadVectorData(g,this.map.painter,u==="RT")})}abortTile(o){return c._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.aborted=!0})}unloadTile(o){return c._(this,void 0,void 0,function*(){o.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var dr=c.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class kn extends c.E{constructor(o,u,p,g){super(),this.id=o,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}load(o){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield K.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,o&&(this.coordinates=o),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new c.j(u))}})}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=o.url,this.load(o.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(o){this.coordinates=o;const u=o.map(c.Y.fromLngLat);this.tileID=function(g){let _=1/0,S=1/0,C=-1/0,M=-1/0;for(const X of g)_=Math.min(_,X.x),S=Math.min(S,X.y),C=Math.max(C,X.x),M=Math.max(M,X.y);const k=Math.max(C-_,M-S),B=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),F=Math.pow(2,B);return new c.a0(B,Math.floor((_+C)/2*F),Math.floor((S+M)/2*F))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new c.Z,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,c.W,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,c.W),this._boundsArray.emplaceBack(p[2].x,p[2].y,c.W,c.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,u=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,dr.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Oe(o,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(o){return c._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={}):o.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class $t extends kn{constructor(o,u,p,g){super(o,u,p,g),this.roundZoom=!0,this.type="video",this.options=u}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1;const o=this.options;this.urls=[];for(const u of o.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield c.a2(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new c.j(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const u=this.video.seekable;o<u.start(0)||o>u.end(0)?this.fire(new c.j(new c.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const o=this.map.painter.context,u=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,dr.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new Oe(o,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Vt extends kn{constructor(o,u,p,g){super(o,u,p,g),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(S=>typeof S!="number"))||this.fire(new c.j(new c.a1(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.a1(`sources.${o}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.j(new c.a1(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.a1(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.a1(`sources.${o}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return c._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,dr.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Oe(u,this.canvas,p.RGBA,{premultiply:!0});let g=!1;for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,g=!0)}g&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const Ii={},ur=y=>{switch(y){case"geojson":return nr;case"image":return kn;case"raster":return Sn;case"raster-dem":return Rn;case"vector":return Le;case"video":return $t;case"canvas":return Vt}return Ii[y]},En="RTLPluginLoaded";class Ui extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=zr()}_syncState(o){return this.status=o,this.dispatcher.broadcast("SRPS",{pluginStatus:o,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(o){return c._(this,arguments,void 0,function*(u,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return c._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.k(En))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ye=null;function gn(){return Ye||(Ye=new Ui),Ye}class Nn{constructor(o,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=c.a3(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const u=o+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(g,_){const S={};if(!_)return S;for(const C of g){const M=C.layerIds.map(k=>_.getLayer(k)).filter(Boolean);if(M.length!==0){C.layers=M,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(k=>M.filter(B=>B.id===k)[0]));for(const k of M)S[k.id]=C}}return S}(o.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a5){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a5&&_.hasRTLText){this.hasRTLText=!0,gn().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new c.a4}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(o)}const u=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Oe(o,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Oe(o,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,u,p,g,_,S,C,M,k,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:S,tileSize:this.tileSize,pixelPosMatrix:B,transform:M,params:C,queryPadding:this.queryPadding*k},o,u,p):{}}querySourceFeatures(o,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",S=g._geojsonTileLayer||g[_];if(!S)return;const C=c.a6(u&&u.filter),{z:M,x:k,y:B}=this.tileID.canonical,F={z:M,x:k,y:B};for(let X=0;X<S.length;X++){const te=S.feature(X);if(C.needGeometry){const le=c.a7(te,!0);if(!C.filter(new c.a8(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!C.filter(new c.a8(this.tileID.overscaledZ),te))continue;const oe=p.getId(te,_),me=new c.a9(te,M,k,B,oe);me.tile=F,o.push(me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const u=this.expirationTime;if(o.cacheControl){const p=c.aa(o.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=p+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const _=this.buckets[g],S=_.layers[0].sourceLayer||"_geojsonTileLayer",C=p[S],M=o[S];if(!C||!M||Object.keys(M).length===0)continue;_.update(M,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const k=u&&u.style&&u.style.getLayer(g);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<P.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=P.now()+o}setDependencies(o,u){const p={};for(const g of u)p[g]=!0;this.dependencies[o]=p}hasDependency(o,u){for(const p of o){const g=this.dependencies[p];if(g){for(const _ of u)if(g[_])return!0}}return!1}}class ni{constructor(o,u){this.max=o,this.onRemove=u,this.reset()}reset(){for(const o in this.data)for(const u of this.data[o])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(o,u,p){const g=o.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(o,_)},p)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const u=this.data[o].shift();return u.timeout&&clearTimeout(u.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),u.value}getByKey(o){const u=this.data[o];return u?u[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,u){if(!this.has(o))return this;const p=o.wrapped().key,g=u===void 0?0:this.data[p].indexOf(u),_=this.data[p][g];return this.data[p].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(o){const u=[];for(const p in this.data)for(const g of this.data[p])o(g.value)||u.push(g);for(const p of u)this.remove(p.value.tileID,p)}}class Ro{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,u,p){const g=String(u);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][g]=this.stateChanges[o][g]||{},c.e(this.stateChanges[o][g],p),this.deletedStates[o]===null){this.deletedStates[o]={};for(const _ in this.state[o])_!==g&&(this.deletedStates[o][_]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][g]===null){this.deletedStates[o][g]={};for(const _ in this.state[o][g])p[_]||(this.deletedStates[o][g][_]=null)}else for(const _ in p)this.deletedStates[o]&&this.deletedStates[o][g]&&this.deletedStates[o][g][_]===null&&delete this.deletedStates[o][g][_]}removeFeatureState(o,u,p){if(this.deletedStates[o]===null)return;const g=String(u);if(this.deletedStates[o]=this.deletedStates[o]||{},p&&u!==void 0)this.deletedStates[o][g]!==null&&(this.deletedStates[o][g]=this.deletedStates[o][g]||{},this.deletedStates[o][g][p]=null);else if(u!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][g])for(p in this.deletedStates[o][g]={},this.stateChanges[o][g])this.deletedStates[o][g][p]=null;else this.deletedStates[o][g]=null;else this.deletedStates[o]=null}getState(o,u){const p=String(u),g=c.e({},(this.state[o]||{})[p],(this.stateChanges[o]||{})[p]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const _=this.deletedStates[o][u];if(_===null)return{};for(const S in _)delete g[S]}return g}initializeTileState(o,u){o.setFeatureState(this.state,u)}coalesceChanges(o,u){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const S in this.stateChanges[g])this.state[g][S]||(this.state[g][S]={}),c.e(this.state[g][S],this.stateChanges[g][S]),_[S]=this.state[g][S];p[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const S in this.state[g])_[S]={},this.state[g][S]={};else for(const S in this.deletedStates[g]){if(this.deletedStates[g][S]===null)this.state[g][S]={};else for(const C of Object.keys(this.deletedStates[g][S]))delete this.state[g][S][C];_[S]=this.state[g][S]}p[g]=p[g]||{},c.e(p[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in o)o[g].setFeatureState(p,u)}}class Xe extends c.E{constructor(o,u,p){super(),this.id=o,this.dispatcher=p,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,S,C)=>{const M=new(ur(_.type))(g,_,S,C);if(M.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${M.id}`);return M})(o,u,p,this),this._tiles={},this._cache=new ni(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ro,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const o in this._tiles){const u=this._tiles[o];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,u,p){return c._(this,void 0,void 0,function*(){try{yield this._source.loadTile(o),this._tileLoaded(o,u,p)}catch(g){o.state="errored",g.status!==404?this._source.fire(new c.j(g,{tile:o})):this.update(this.transform,this.terrain)}})}_unloadTile(o){this._source.unloadTile&&this._source.unloadTile(o)}_abortTile(o){this._source.abortTile&&this._source.abortTile(o),this._source.fire(new c.k("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(o),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(Ut).map(o=>o.key)}getRenderableIds(o){const u=[];for(const p in this._tiles)this._isIdRenderable(p,o)&&u.push(this._tiles[p]);return o?u.sort((p,g)=>{const _=p.tileID,S=g.tileID,C=new c.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),M=new c.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-S.overscaledZ||M.y-C.y||M.x-C.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(Ut).map(p=>p.key)}hasRenderableParent(o){const u=this.findLoadedParent(o,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(o,u){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(u||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,u){return c._(this,void 0,void 0,function*(){const p=this._tiles[o];p&&(p.state!=="loading"&&(p.state=u),yield this._loadTile(p,o,u))})}_tileLoaded(o,u,p){o.timeAdded=P.now(),p==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(u,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(o.neighboringTiles&&o.neighboringTiles[_]){const S=this.getTileByID(_);p(o,S),p(S,o)}}function p(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let S=_.tileID.canonical.x-g.tileID.canonical.x;const C=_.tileID.canonical.y-g.tileID.canonical.y,M=Math.pow(2,g.tileID.canonical.z),k=_.tileID.key;S===0&&C===0||Math.abs(C)>1||(Math.abs(S)>1&&(Math.abs(S+M)===1?S+=M:Math.abs(S-M)===1&&(S-=M)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,S,C),g.neighboringTiles&&g.neighboringTiles[k]&&(g.neighboringTiles[k].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,u,p,g){for(const _ in this._tiles){let S=this._tiles[_];if(g[_]||!S.hasData()||S.tileID.overscaledZ<=u||S.tileID.overscaledZ>p)continue;let C=S.tileID;for(;S&&S.tileID.overscaledZ>u+1;){const k=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[k.key],S&&S.hasData()&&(C=k)}let M=C;for(;M.overscaledZ>u;)if(M=M.scaledTo(M.overscaledZ-1),o[M.key]){g[C.key]=C;break}}}findLoadedParent(o,u){if(o.key in this._loadedParentTiles){const p=this._loadedParentTiles[o.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=o.overscaledZ-1;p>=u;p--){const g=o.scaledTo(p),_=this._getLoadedTile(g);if(_)return _}}findLoadedSibling(o){return this._getLoadedTile(o)}_getLoadedTile(o){const u=this._tiles[o.key];return u&&u.hasData()?u:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const u=Math.ceil(o.width/this._source.tileSize)+1,p=Math.ceil(o.height/this._source.tileSize)+1,g=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(o){const u=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,u){const p={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),p[_.tileID.key]=_}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}_updateCoveredAndRetainedTiles(o,u,p,g,_,S){const C={},M={},k=Object.keys(o),B=P.now();for(const F of k){const X=o[F],te=this._tiles[F];if(!te||te.fadeEndTime!==0&&te.fadeEndTime<=B)continue;const oe=this.findLoadedParent(X,u),me=this.findLoadedSibling(X),le=oe||me||null;le&&(this._addTile(le.tileID),C[le.tileID.key]=le.tileID),M[F]=X}this._retainLoadedChildren(M,g,p,o);for(const F in C)o[F]||(this._coveredTiles[F]=!0,o[F]=C[F]);if(S){const F={},X={};for(const te of _)this._tiles[te.key].hasData()?F[te.key]=te:X[te.key]=te;for(const te in X){const oe=X[te].children(this._source.maxzoom);this._tiles[oe[0].key]&&this._tiles[oe[1].key]&&this._tiles[oe[2].key]&&this._tiles[oe[3].key]&&(F[oe[0].key]=o[oe[0].key]=oe[0],F[oe[1].key]=o[oe[1].key]=oe[1],F[oe[2].key]=o[oe[2].key]=oe[2],F[oe[3].key]=o[oe[3].key]=oe[3],delete X[te])}for(const te in X){const oe=X[te],me=this.findLoadedParent(oe,this._source.minzoom),le=this.findLoadedSibling(oe),ve=me||le||null;if(ve){F[ve.tileID.key]=o[ve.tileID.key]=ve.tileID;for(const be in F)F[be].isChildOf(ve.tileID)&&delete F[be]}}for(const te in this._tiles)F[te]||(this._coveredTiles[te]=!0)}}update(o,u){if(!this._sourceLoaded||this._paused)return;let p;this.transform=o,this.terrain=u,this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new c.Q(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(p=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(B=>this._source.hasTile(B)))):p=[];const g=o.coveringZoomLevel(this._source),_=Math.max(g-Xe.maxOverzooming,this._source.minzoom),S=Math.max(g+Xe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const B={};for(const F of p)if(F.canonical.z>this._source.minzoom){const X=F.scaledTo(F.canonical.z-1);B[X.key]=X;const te=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));B[te.key]=te}p=p.concat(Object.values(B))}const C=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(p,g);Bt(this._source.type)&&this._updateCoveredAndRetainedTiles(M,_,S,g,p,u);for(const B in M)this._tiles[B].clearFadeHold();const k=c.ab(this._tiles,M);for(const B of k){const F=this._tiles[B];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,u){var p;const g={},_={},S=Math.max(u-Xe.maxOverzooming,this._source.minzoom),C=Math.max(u+Xe.maxUnderzooming,this._source.minzoom),M={};for(const k of o){const B=this._addTile(k);g[k.key]=k,B.hasData()||u<this._source.maxzoom&&(M[k.key]=k)}this._retainLoadedChildren(M,u,C,g);for(const k of o){let B=this._tiles[k.key];if(B.hasData())continue;if(u+1>this._source.maxzoom){const X=k.children(this._source.maxzoom)[0],te=this.getTile(X);if(te&&te.hasData()){g[X.key]=X;continue}}else{const X=k.children(this._source.maxzoom);if(g[X[0].key]&&g[X[1].key]&&g[X[2].key]&&g[X[3].key])continue}let F=B.wasRequested();for(let X=k.overscaledZ-1;X>=S;--X){const te=k.scaledTo(X);if(_[te.key])break;if(_[te.key]=!0,B=this.getTile(te),!B&&F&&(B=this._addTile(te)),B){const oe=B.hasData();if((oe||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||F)&&(g[te.key]=te),F=B.wasRequested(),oe)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const u=[];let p,g=this._tiles[o].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;g=_}for(const _ of u)this._loadedParentTiles[_]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const o in this._tiles){const u=this._tiles[o].tileID,p=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=p}}_addTile(o){let u=this._tiles[o.key];if(u)return u;u=this._cache.getAndRemove(o),u&&(this._setTileReloadTimer(o.key,u),u.tileID=o,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,u)));const p=u;return u||(u=new Nn(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(u,o.key,u.state)),u.uses++,this._tiles[o.key]=u,p||this._source.fire(new c.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(o,u){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const p=u.getExpiryTimeout();p&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},p))}_removeTile(o){const u=this._tiles[o];u&&(u.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(o){const u=o.sourceDataType;o.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&o.dataType==="source"&&u==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,u,p){const g=[],_=this.transform;if(!_)return g;const S=p?_.getCameraQueryGeometry(o):o,C=o.map(oe=>_.pointCoordinate(oe,this.terrain)),M=S.map(oe=>_.pointCoordinate(oe,this.terrain)),k=this.getIds();let B=1/0,F=1/0,X=-1/0,te=-1/0;for(const oe of M)B=Math.min(B,oe.x),F=Math.min(F,oe.y),X=Math.max(X,oe.x),te=Math.max(te,oe.y);for(let oe=0;oe<k.length;oe++){const me=this._tiles[k[oe]];if(me.holdingForFade())continue;const le=me.tileID,ve=Math.pow(2,_.zoom-me.tileID.overscaledZ),be=u*me.queryPadding*c.W/me.tileSize/ve,pe=[le.getTilePoint(new c.Y(B,F)),le.getTilePoint(new c.Y(X,te))];if(pe[0].x-be<c.W&&pe[0].y-be<c.W&&pe[1].x+be>=0&&pe[1].y+be>=0){const Ee=C.map(ke=>le.getTilePoint(ke)),Ie=M.map(ke=>le.getTilePoint(ke));g.push({tile:me,tileID:le,queryGeometry:Ee,cameraQueryGeometry:Ie,scale:ve})}}return g}getVisibleCoordinates(o){const u=this.getRenderableIds(o).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Bt(this._source.type)){const o=P.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=o)return!0}return!1}setFeatureState(o,u,p){this._state.updateState(o=o||"_geojsonTileLayer",u,p)}removeFeatureState(o,u,p){this._state.removeFeatureState(o=o||"_geojsonTileLayer",u,p)}getFeatureState(o,u){return this._state.getState(o=o||"_geojsonTileLayer",u)}setDependencies(o,u,p){const g=this._tiles[o];g&&g.setDependencies(u,p)}reloadTilesForDependencies(o,u){for(const p in this._tiles)this._tiles[p].hasDependency(o,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(o,u))}}function Ut(y,o){const u=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*o.wrap)-+(o.wrap<0);return y.overscaledZ-o.overscaledZ||p-u||o.canonical.y-y.canonical.y||o.canonical.x-y.canonical.x}function Bt(y){return y==="raster"||y==="image"||y==="video"}Xe.maxOverzooming=10,Xe.maxUnderzooming=3;class An{constructor(o,u){this.reset(o,u)}reset(o,u){this.points=o||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=c.ac(o,0,1);let u=1,p=this._distances[u];const g=o*this.paddedLength+this.padding;for(;p<g&&u<this._distances.length;)p=this._distances[++u];const _=u-1,S=this._distances[_],C=p-S,M=C>0?(g-S)/C:0;return this.points[_].mult(1-M).add(this.points[u].mult(M))}}function cn(y,o){let u=!0;return y==="always"||y!=="never"&&o!=="never"||(u=!1),u}class jt{constructor(o,u,p){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(o/p),this.yCellCount=Math.ceil(u/p);for(let S=0;S<this.xCellCount*this.yCellCount;S++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=u,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,u,p,g,_){this._forEachCell(u,p,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(o,u,p,g){this._forEachCell(u-g,p-g,u+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(u),this.circles.push(p),this.circles.push(g)}_insertBoxCell(o,u,p,g,_,S){this.boxCells[_].push(S)}_insertCircleCell(o,u,p,g,_,S){this.circleCells[_].push(S)}_query(o,u,p,g,_,S,C){if(p<0||o>this.width||g<0||u>this.height)return[];const M=[];if(o<=0&&u<=0&&this.width<=p&&this.height<=g){if(_)return[{key:null,x1:o,y1:u,x2:p,y2:g}];for(let k=0;k<this.boxKeys.length;k++)M.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){const B=this.circles[3*k],F=this.circles[3*k+1],X=this.circles[3*k+2];M.push({key:this.circleKeys[k],x1:B-X,y1:F-X,x2:B+X,y2:F+X})}}else this._forEachCell(o,u,p,g,this._queryCell,M,{hitTest:_,overlapMode:S,seenUids:{box:{},circle:{}}},C);return M}query(o,u,p,g){return this._query(o,u,p,g,!1,null)}hitTest(o,u,p,g,_,S){return this._query(o,u,p,g,!0,_,S).length>0}hitTestCircle(o,u,p,g,_){const S=o-p,C=o+p,M=u-p,k=u+p;if(C<0||S>this.width||k<0||M>this.height)return!1;const B=[];return this._forEachCell(S,M,C,k,this._queryCellCircle,B,{hitTest:!0,overlapMode:g,circle:{x:o,y:u,radius:p},seenUids:{box:{},circle:{}}},_),B.length>0}_queryCell(o,u,p,g,_,S,C,M){const{seenUids:k,hitTest:B,overlapMode:F}=C,X=this.boxCells[_];if(X!==null){const oe=this.bboxes;for(const me of X)if(!k.box[me]){k.box[me]=!0;const le=4*me,ve=this.boxKeys[me];if(o<=oe[le+2]&&u<=oe[le+3]&&p>=oe[le+0]&&g>=oe[le+1]&&(!M||M(ve))&&(!B||!cn(F,ve.overlapMode))&&(S.push({key:ve,x1:oe[le],y1:oe[le+1],x2:oe[le+2],y2:oe[le+3]}),B))return!0}}const te=this.circleCells[_];if(te!==null){const oe=this.circles;for(const me of te)if(!k.circle[me]){k.circle[me]=!0;const le=3*me,ve=this.circleKeys[me];if(this._circleAndRectCollide(oe[le],oe[le+1],oe[le+2],o,u,p,g)&&(!M||M(ve))&&(!B||!cn(F,ve.overlapMode))){const be=oe[le],pe=oe[le+1],Ee=oe[le+2];if(S.push({key:ve,x1:be-Ee,y1:pe-Ee,x2:be+Ee,y2:pe+Ee}),B)return!0}}}return!1}_queryCellCircle(o,u,p,g,_,S,C,M){const{circle:k,seenUids:B,overlapMode:F}=C,X=this.boxCells[_];if(X!==null){const oe=this.bboxes;for(const me of X)if(!B.box[me]){B.box[me]=!0;const le=4*me,ve=this.boxKeys[me];if(this._circleAndRectCollide(k.x,k.y,k.radius,oe[le+0],oe[le+1],oe[le+2],oe[le+3])&&(!M||M(ve))&&!cn(F,ve.overlapMode))return S.push(!0),!0}}const te=this.circleCells[_];if(te!==null){const oe=this.circles;for(const me of te)if(!B.circle[me]){B.circle[me]=!0;const le=3*me,ve=this.circleKeys[me];if(this._circlesCollide(oe[le],oe[le+1],oe[le+2],k.x,k.y,k.radius)&&(!M||M(ve))&&!cn(F,ve.overlapMode))return S.push(!0),!0}}}_forEachCell(o,u,p,g,_,S,C,M){const k=this._convertToXCellCoord(o),B=this._convertToYCellCoord(u),F=this._convertToXCellCoord(p),X=this._convertToYCellCoord(g);for(let te=k;te<=F;te++)for(let oe=B;oe<=X;oe++)if(_.call(this,o,u,p,g,this.xCellCount*oe+te,S,C,M))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,u,p,g,_,S){const C=g-o,M=_-u,k=p+S;return k*k>C*C+M*M}_circleAndRectCollide(o,u,p,g,_,S,C){const M=(S-g)/2,k=Math.abs(o-(g+M));if(k>M+p)return!1;const B=(C-_)/2,F=Math.abs(u-(_+B));if(F>B+p)return!1;if(k<=M||F<=B)return!0;const X=k-M,te=F-B;return X*X+te*te<=p*p}}function Mi(y,o,u,p,g){const _=c.F();return o?(c.J(_,_,[1/g,1/g,1]),u||c.ad(_,_,p.angle)):c.K(_,p.labelPlaneMatrix,y),_}function ro(y,o,u,p,g){if(o){const _=c.ae(y);return c.J(_,_,[g,g,1]),u||c.ad(_,_,-p.angle),_}return p.glCoordMatrix}function Qr(y,o,u){let p;u?(p=[y.x,y.y,u(y.x,y.y),1],c.af(p,p,o)):(p=[y.x,y.y,0,1],function(_,S,C){const M=S[0],k=S[1];_[0]=C[0]*M+C[4]*k+C[12],_[1]=C[1]*M+C[5]*k+C[13],_[3]=C[3]*M+C[7]*k+C[15]}(p,p,o));const g=p[3];return{point:new c.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function he(y,o){return .5+y/o*.5}function U(y,o){return y.x>=-o[0]&&y.x<=o[0]&&y.y>=-o[1]&&y.y<=o[1]}function q(y,o,u,p,g,_,S,C,M,k,B,F,X,te,oe){const me=p?y.textSizeData:y.iconSizeData,le=c.ag(me,u.transform.zoom),ve=[256/u.width*2+1,256/u.height*2+1],be=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;be.clear();const pe=y.lineVertexArray,Ee=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,Ie=u.transform.width/u.transform.height;let ke=!1;for(let Ne=0;Ne<Ee.length;Ne++){const Ge=Ee.get(Ne);if(Ge.hidden||Ge.writingMode===c.ah.vertical&&!ke){dt(Ge.numGlyphs,be);continue}ke=!1;const ft=Qr(new c.P(Ge.anchorX,Ge.anchorY),o,oe);if(!U(ft.point,ve)){dt(Ge.numGlyphs,be);continue}const pt=he(u.transform.cameraToCenterDistance,ft.signedDistanceFromCamera),Ke=c.ai(me,le,Ge),Je=S?Ke/pt:Ke*pt,xt={getElevation:oe,labelPlaneMatrix:g,lineVertexArray:pe,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:k,tileAnchorPoint:new c.P(Ge.anchorX,Ge.anchorY),unwrappedTileID:B,width:F,height:X,translation:te},Ft=ee(xt,Ge,Je,!1,C,o,_,y.glyphOffsetArray,be,Ie,M);ke=Ft.useVertical,(Ft.notEnoughRoom||ke||Ft.needsFlipping&&ee(xt,Ge,Je,!0,C,o,_,y.glyphOffsetArray,be,Ie,M).notEnoughRoom)&&dt(Ge.numGlyphs,be)}p?y.text.dynamicLayoutVertexBuffer.updateData(be):y.icon.dynamicLayoutVertexBuffer.updateData(be)}function D(y,o,u,p,g,_,S,C){const M=_.glyphStartIndex+_.numGlyphs,k=_.lineStartIndex,B=_.lineStartIndex+_.lineLength,F=o.getoffsetX(_.glyphStartIndex),X=o.getoffsetX(M-1),te=Me(y*F,u,p,g,_.segment,k,B,C,S);if(!te)return null;const oe=Me(y*X,u,p,g,_.segment,k,B,C,S);return oe?C.projectionCache.anyProjectionOccluded?null:{first:te,last:oe}:null}function H(y,o,u,p){return y===c.ah.horizontal&&Math.abs(u.y-o.y)>Math.abs(u.x-o.x)*p?{useVertical:!0}:(y===c.ah.vertical?o.y<u.y:o.x>u.x)?{needsFlipping:!0}:null}function ee(y,o,u,p,g,_,S,C,M,k,B){const F=u/24,X=o.lineOffsetX*F,te=o.lineOffsetY*F;let oe;if(o.numGlyphs>1){const me=o.glyphStartIndex+o.numGlyphs,le=o.lineStartIndex,ve=o.lineStartIndex+o.lineLength,be=D(F,C,X,te,p,o,B,y);if(!be)return{notEnoughRoom:!0};const pe=Qr(be.first.point,S,y.getElevation).point,Ee=Qr(be.last.point,S,y.getElevation).point;if(g&&!p){const Ie=H(o.writingMode,pe,Ee,k);if(Ie)return Ie}oe=[be.first];for(let Ie=o.glyphStartIndex+1;Ie<me-1;Ie++)oe.push(Me(F*C.getoffsetX(Ie),X,te,p,o.segment,le,ve,y,B));oe.push(be.last)}else{if(g&&!p){const le=Qr(y.tileAnchorPoint,_,y.getElevation).point,ve=o.lineStartIndex+o.segment+1,be=new c.P(y.lineVertexArray.getx(ve),y.lineVertexArray.gety(ve)),pe=Qr(be,_,y.getElevation),Ee=pe.signedDistanceFromCamera>0?pe.point:function(ke,Ne,Ge,ft,pt,Ke){return se(ke,Ne,Ge,1,pt,Ke)}(y.tileAnchorPoint,be,le,0,_,y),Ie=H(o.writingMode,le,Ee,k);if(Ie)return Ie}const me=Me(F*C.getoffsetX(o.glyphStartIndex),X,te,p,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,y,B);if(!me||y.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};oe=[me]}for(const me of oe)c.aj(M,me.point,me.angle);return{}}function se(y,o,u,p,g,_){const S=y.add(y.sub(o)._unit()),C=g!==void 0?Qr(S,g,_.getElevation).point:fe(S.x,S.y,_).point,M=u.sub(C);return u.add(M._mult(p/M.mag()))}function ge(y,o,u){const p=o.projectionCache;if(p.projections[y])return p.projections[y];const g=new c.P(o.lineVertexArray.getx(y),o.lineVertexArray.gety(y)),_=fe(g.x,g.y,o);if(_.signedDistanceFromCamera>0)return p.projections[y]=_.point,p.anyProjectionOccluded=p.anyProjectionOccluded||_.isOccluded,_.point;const S=y-u.direction;return function(C,M,k,B,F){return se(C,M,k,B,void 0,F)}(u.distanceFromAnchor===0?o.tileAnchorPoint:new c.P(o.lineVertexArray.getx(S),o.lineVertexArray.gety(S)),g,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,o)}function fe(y,o,u){const p=y+u.translation[0],g=o+u.translation[1];let _;return!u.pitchWithMap&&u.projection.useSpecialProjectionForSymbols?(_=u.projection.projectTileCoordinates(p,g,u.unwrappedTileID,u.getElevation),_.point.x=(.5*_.point.x+.5)*u.width,_.point.y=(.5*-_.point.y+.5)*u.height):(_=Qr(new c.P(p,g),u.labelPlaneMatrix,u.getElevation),_.isOccluded=!1),_}function _e(y,o,u){return y._unit()._perp()._mult(o*u)}function Pe(y,o,u,p,g,_,S,C,M){if(C.projectionCache.offsets[y])return C.projectionCache.offsets[y];const k=u.add(o);if(y+M.direction<p||y+M.direction>=g)return C.projectionCache.offsets[y]=k,k;const B=ge(y+M.direction,C,M),F=_e(B.sub(u),S,M.direction),X=u.add(F),te=B.add(F);return C.projectionCache.offsets[y]=c.ak(_,k,X,te)||k,C.projectionCache.offsets[y]}function Me(y,o,u,p,g,_,S,C,M){const k=p?y-o:y+o;let B=k>0?1:-1,F=0;p&&(B*=-1,F=Math.PI),B<0&&(F+=Math.PI);let X,te=B>0?_+g:_+g+1;C.projectionCache.cachedAnchorPoint?X=C.projectionCache.cachedAnchorPoint:(X=fe(C.tileAnchorPoint.x,C.tileAnchorPoint.y,C).point,C.projectionCache.cachedAnchorPoint=X);let oe,me,le=X,ve=X,be=0,pe=0;const Ee=Math.abs(k),Ie=[];let ke;for(;be+pe<=Ee;){if(te+=B,te<_||te>=S)return null;be+=pe,ve=le,me=oe;const ft={absOffsetX:Ee,direction:B,distanceFromAnchor:be,previousVertex:ve};if(le=ge(te,C,ft),u===0)Ie.push(ve),ke=le.sub(ve);else{let pt;const Ke=le.sub(ve);pt=Ke.mag()===0?_e(ge(te+B,C,ft).sub(le),u,B):_e(Ke,u,B),me||(me=ve.add(pt)),oe=Pe(te,pt,le,_,S,me,u,C,ft),Ie.push(me),ke=oe.sub(me)}pe=ke.mag()}const Ne=ke._mult((Ee-be)/pe)._add(me||ve),Ge=F+Math.atan2(le.y-ve.y,le.x-ve.x);return Ie.push(Ne),{point:Ne,angle:M?Ge:0,path:Ie}}const Te=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function dt(y,o){for(let u=0;u<y;u++){const p=o.length;o.resize(p+4),o.float32.set(Te,3*p)}}const ct=100;class it{constructor(o,u,p=new jt(o.width+200,o.height+200,25),g=new jt(o.width+200,o.height+200,25)){this.transform=o,this.mapProjection=u,this.grid=p,this.ignoredGrid=g,this.pitchFactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+ct,this.screenBottomBoundary=o.height+ct,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,u,p,g,_,S,C,M,k,B,F){const X=o.anchorPointX+M[0],te=o.anchorPointY+M[1],oe=this.projectAndGetPerspectiveRatio(g,X,te,_,B),me=this._projectCollisionBox(o,p,g,_,S,C,M,oe,B,F),[le,ve,be,pe]=me.box;return this.mapProjection.useSpecialProjectionForSymbols&&(S?me.allPointsOccluded:this.mapProjection.isOccluded(X,te,_))||oe.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(le,ve,be,pe)||u!=="always"&&this.grid.hitTest(le,ve,be,pe,u,k)?{box:[le,ve,be,pe],placeable:!1,offscreen:!1}:{box:[le,ve,be,pe],placeable:!0,offscreen:this.isOffscreen(le,ve,be,pe)}}placeCollisionCircles(o,u,p,g,_,S,C,M,k,B,F,X,te,oe,me,le){const ve=[],be=new c.P(u.anchorX,u.anchorY),pe=this.getPerspectiveRatio(S,be.x,be.y,C,le),Ee=(F?_/pe:_*pe)/c.ap,Ie={getElevation:le,labelPlaneMatrix:M,lineVertexArray:p,pitchWithMap:F,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:be,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:me},ke=D(Ee,g,u.lineOffsetX*Ee,u.lineOffsetY*Ee,!1,u,!1,Ie);let Ne=!1,Ge=!1,ft=!0;if(ke){const pt=.5*te*pe+oe,Ke=new c.P(-100,-100),Je=new c.P(this.screenRightBoundary,this.screenBottomBoundary),xt=new An,Ft=ke.first,rt=ke.last;let at=[];for(let Gt=Ft.path.length-1;Gt>=1;Gt--)at.push(Ft.path[Gt]);for(let Gt=1;Gt<rt.path.length;Gt++)at.push(rt.path[Gt]);const Dt=2.5*pt;if(k){const Gt=this.projectPathToScreenSpace(at,Ie,k);at=Gt.some(ir=>ir.signedDistanceFromCamera<=0)?[]:Gt.map(ir=>ir.point)}let Mr=[];if(at.length>0){const Gt=at[0].clone(),ir=at[0].clone();for(let Rr=1;Rr<at.length;Rr++)Gt.x=Math.min(Gt.x,at[Rr].x),Gt.y=Math.min(Gt.y,at[Rr].y),ir.x=Math.max(ir.x,at[Rr].x),ir.y=Math.max(ir.y,at[Rr].y);Mr=Gt.x>=Ke.x&&ir.x<=Je.x&&Gt.y>=Ke.y&&ir.y<=Je.y?[at]:ir.x<Ke.x||Gt.x>Je.x||ir.y<Ke.y||Gt.y>Je.y?[]:c.al([at],Ke.x,Ke.y,Je.x,Je.y)}for(const Gt of Mr){xt.reset(Gt,.25*pt);let ir=0;ir=xt.length<=.5*pt?1:Math.ceil(xt.paddedLength/Dt)+1;for(let Rr=0;Rr<ir;Rr++){const Un=Rr/Math.max(ir-1,1),io=xt.lerp(Un),kr=io.x+ct,vi=io.y+ct;ve.push(kr,vi,pt,0);const oi=kr-pt,Zn=vi-pt,Hn=kr+pt,oo=vi+pt;if(ft=ft&&this.isOffscreen(oi,Zn,Hn,oo),Ge=Ge||this.isInsideGrid(oi,Zn,Hn,oo),o!=="always"&&this.grid.hitTestCircle(kr,vi,pt,o,X)&&(Ne=!0,!B))return{circles:[],offscreen:!1,collisionDetected:Ne}}}}return{circles:!B&&Ne||!Ge||pe<this.perspectiveRatioCutoff?[]:ve,offscreen:ft,collisionDetected:Ne}}projectPathToScreenSpace(o,u,p){return o.map(g=>Qr(g,p,u.getElevation))}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let p=1/0,g=1/0,_=-1/0,S=-1/0;for(const B of o){const F=new c.P(B.x+ct,B.y+ct);p=Math.min(p,F.x),g=Math.min(g,F.y),_=Math.max(_,F.x),S=Math.max(S,F.y),u.push(F)}const C=this.grid.query(p,g,_,S).concat(this.ignoredGrid.query(p,g,_,S)),M={},k={};for(const B of C){const F=B.key;if(M[F.bucketInstanceId]===void 0&&(M[F.bucketInstanceId]={}),M[F.bucketInstanceId][F.featureIndex])continue;const X=[new c.P(B.x1,B.y1),new c.P(B.x2,B.y1),new c.P(B.x2,B.y2),new c.P(B.x1,B.y2)];c.am(u,X)&&(M[F.bucketInstanceId][F.featureIndex]=!0,k[F.bucketInstanceId]===void 0&&(k[F.bucketInstanceId]=[]),k[F.bucketInstanceId].push(F.featureIndex))}return k}insertCollisionBox(o,u,p,g,_,S){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:S,overlapMode:u},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,u,p,g,_,S){const C=p?this.ignoredGrid:this.grid,M={bucketInstanceId:g,featureIndex:_,collisionGroupID:S,overlapMode:u};for(let k=0;k<o.length;k+=4)C.insertCircle(M,o[k],o[k+1],o[k+2])}projectAndGetPerspectiveRatio(o,u,p,g,_){const S=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(u,p,g,_):Qr(new c.P(u,p),o,_);return{point:new c.P((S.point.x+1)/2*this.transform.width+ct,(1-S.point.y)/2*this.transform.height+ct),perspectiveRatio:.5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5,isOccluded:S.isOccluded,signedDistanceFromCamera:S.signedDistanceFromCamera}}getPerspectiveRatio(o,u,p,g,_){const S=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(u,p,g,_):Qr(new c.P(u,p),o,_);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(o,u,p,g){return p<ct||o>=this.screenRightBoundary||g<ct||u>this.screenBottomBoundary}isInsideGrid(o,u,p,g){return p>=0&&o<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const o=c.an([]);return c.H(o,o,[-100,-100,0]),o}_projectCollisionBox(o,u,p,g,_,S,C,M,k,B){const F=u*M.perspectiveRatio;let X=new c.P(1,0),te=new c.P(0,1);const oe=new c.P(o.anchorPointX+C[0],o.anchorPointY+C[1]);if(S&&!_){const pt=this.projectAndGetPerspectiveRatio(p,oe.x+1,oe.y,g,k).point.sub(M.point).unit(),Ke=Math.atan(pt.y/pt.x)+(pt.x<0?Math.PI:0),Je=Math.sin(Ke),xt=Math.cos(Ke);X=new c.P(xt,Je),te=new c.P(-Je,xt)}else if(!S&&_){const pt=-this.transform.angle,Ke=Math.sin(pt),Je=Math.cos(pt);X=new c.P(Je,Ke),te=new c.P(-Ke,Je)}let me=M.point,le=F;if(_){me=oe;const pt=this.transform.zoom-Math.floor(this.transform.zoom);le=Math.pow(2,-pt),le*=this.mapProjection.getPitchedTextCorrection(this.transform,oe,g),B||(le*=c.ac(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}B&&(me=me.add(X.mult(B.x*le)).add(te.mult(B.y*le)));const ve=o.x1*le,be=o.x2*le,pe=(ve+be)/2,Ee=o.y1*le,Ie=o.y2*le,ke=(Ee+Ie)/2,Ne=[{offsetX:ve,offsetY:Ee},{offsetX:pe,offsetY:Ee},{offsetX:be,offsetY:Ee},{offsetX:be,offsetY:ke},{offsetX:be,offsetY:Ie},{offsetX:pe,offsetY:Ie},{offsetX:ve,offsetY:Ie},{offsetX:ve,offsetY:ke}];let Ge=[];for(const{offsetX:pt,offsetY:Ke}of Ne)Ge.push(new c.P(me.x+X.x*pt+te.x*Ke,me.y+X.y*pt+te.y*Ke));let ft=!1;if(_){const pt=Ge.map(Ke=>this.projectAndGetPerspectiveRatio(p,Ke.x,Ke.y,g,k));ft=pt.some(Ke=>!Ke.isOccluded),Ge=pt.map(Ke=>Ke.point)}else ft=!0;return{box:c.ao(Ge),allPointsOccluded:!ft}}}function mt(y,o,u){return o*(c.W/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class Mt{constructor(o,u,p,g){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?u:-u))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class sr{constructor(o,u,p,g,_){this.text=new Mt(o?o.text:null,u,p,_),this.icon=new Mt(o?o.icon:null,u,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class lr{constructor(o,u,p){this.text=o,this.icon=u,this.skipFade=p}}class Cr{constructor(){this.invProjMatrix=c.F(),this.viewportMatrix=c.F(),this.circles=[]}}class zt{constructor(o,u,p,g,_){this.bucketInstanceId=o,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=_}}class yr{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const u=++this.maxGroupID;this.collisionGroups[o]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[o]}}function br(y,o,u,p,g){const{horizontalAlign:_,verticalAlign:S}=c.au(y);return new c.P(-(_-.5)*o+p[0]*g,-(S-.5)*u+p[1]*g)}class yn{constructor(o,u,p,g,_,S){this.transform=o.clone(),this.terrain=p,this.collisionIndex=new it(this.transform,u),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new yr(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(o){const u=this.terrain;return u?(p,g)=>u.getElevation(o,p,g):null}getBucketParts(o,u,p,g){const _=p.getBucket(u),S=p.latestFeatureIndex;if(!_||!S||u.id!==_.layerIds[0])return;const C=p.collisionBoxArray,M=_.layers[0].layout,k=_.layers[0].paint,B=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),F=p.tileSize/c.W,X=p.tileID.toUnwrapped(),te=this.transform.calculatePosMatrix(X),oe=M.get("text-pitch-alignment")==="map",me=M.get("text-rotation-alignment")==="map",le=mt(p,1,this.transform.zoom),ve=this.collisionIndex.mapProjection.translatePosition(this.transform,p,k.get("text-translate"),k.get("text-translate-anchor")),be=this.collisionIndex.mapProjection.translatePosition(this.transform,p,k.get("icon-translate"),k.get("icon-translate-anchor")),pe=Mi(te,oe,me,this.transform,le);let Ee=null;if(oe){const ke=ro(te,oe,me,this.transform,le);Ee=c.K([],this.transform.labelPlaneMatrix,ke)}this.retainedQueryData[_.bucketInstanceId]=new zt(_.bucketInstanceId,S,_.sourceLayerIndex,_.index,p.tileID);const Ie={bucket:_,layout:M,translationText:ve,translationIcon:be,posMatrix:te,unwrappedTileID:X,textLabelPlaneMatrix:pe,labelToScreenMatrix:Ee,scale:B,textPixelRatio:F,holdingForFade:p.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:c.ag(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const ke of _.sortKeyRanges){const{sortKey:Ne,symbolInstanceStart:Ge,symbolInstanceEnd:ft}=ke;o.push({sortKey:Ne,symbolInstanceStart:Ge,symbolInstanceEnd:ft,parameters:Ie})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Ie})}attemptAnchorPlacement(o,u,p,g,_,S,C,M,k,B,F,X,te,oe,me,le,ve,be,pe){const Ee=c.aq[o.textAnchor],Ie=[o.textOffset0,o.textOffset1],ke=br(Ee,p,g,Ie,_),Ne=this.collisionIndex.placeCollisionBox(u,X,M,k,B,C,S,le,F.predicate,pe,ke);if((!be||this.collisionIndex.placeCollisionBox(be,X,M,k,B,C,S,ve,F.predicate,pe,ke).placeable)&&Ne.placeable){let Ge;if(this.prevPlacement&&this.prevPlacement.variableOffsets[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID].text&&(Ge=this.prevPlacement.variableOffsets[te.crossTileID].anchor),te.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[te.crossTileID]={textOffset:Ie,width:p,height:g,anchor:Ee,textBoxScale:_,prevAnchor:Ge},this.markUsedJustification(oe,Ee,te,me),oe.allowVerticalPlacement&&(this.markUsedOrientation(oe,me,te),this.placedOrientations[te.crossTileID]=me),{shift:ke,placedGlyphBoxes:Ne}}}placeLayerBucketPart(o,u,p){const{bucket:g,layout:_,translationText:S,translationIcon:C,posMatrix:M,unwrappedTileID:k,textLabelPlaneMatrix:B,labelToScreenMatrix:F,textPixelRatio:X,holdingForFade:te,collisionBoxArray:oe,partiallyEvaluatedTextSize:me,collisionGroup:le}=o.parameters,ve=_.get("text-optional"),be=_.get("icon-optional"),pe=c.ar(_,"text-overlap","text-allow-overlap"),Ee=pe==="always",Ie=c.ar(_,"icon-overlap","icon-allow-overlap"),ke=Ie==="always",Ne=_.get("text-rotation-alignment")==="map",Ge=_.get("text-pitch-alignment")==="map",ft=_.get("icon-text-fit")!=="none",pt=_.get("symbol-z-order")==="viewport-y",Ke=Ee&&(ke||!g.hasIconData()||be),Je=ke&&(Ee||!g.hasTextData()||ve);!g.collisionArrays&&oe&&g.deserializeCollisionBoxes(oe);const xt=this._getTerrainElevationFunc(this.retainedQueryData[g.bucketInstanceId].tileID),Ft=(rt,at,Dt)=>{var Mr,Gt;if(u[rt.crossTileID])return;if(te)return void(this.placements[rt.crossTileID]=new lr(!1,!1,!1));let ir=!1,Rr=!1,Un=!0,io=null,kr={box:null,placeable:!1,offscreen:null},vi={box:null,placeable:!1,offscreen:null},oi=null,Zn=null,Hn=null,oo=0,ms=0,Wu=0;at.textFeatureIndex?oo=at.textFeatureIndex:rt.useRuntimeCollisionCircles&&(oo=rt.featureIndex),at.verticalTextFeatureIndex&&(ms=at.verticalTextFeatureIndex);const il=at.textBox;if(il){const Dn=Wn=>{let Gn=c.ah.horizontal;if(g.allowVerticalPlacement&&!Wn&&this.prevPlacement){const Pn=this.prevPlacement.placedOrientations[rt.crossTileID];Pn&&(this.placedOrientations[rt.crossTileID]=Pn,Gn=Pn,this.markUsedOrientation(g,Gn,rt))}return Gn},ao=(Wn,Gn)=>{if(g.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&at.verticalTextBox){for(const Pn of g.writingModes)if(Pn===c.ah.vertical?(kr=Gn(),vi=kr):kr=Wn(),kr&&kr.placeable)break}else kr=Wn()},Na=rt.textAnchorOffsetStartIndex,ol=rt.textAnchorOffsetEndIndex;if(ol===Na){const Wn=(Gn,Pn)=>{const jr=this.collisionIndex.placeCollisionBox(Gn,pe,X,M,k,Ge,Ne,S,le.predicate,xt);return jr&&jr.placeable&&(this.markUsedOrientation(g,Pn,rt),this.placedOrientations[rt.crossTileID]=Pn),jr};ao(()=>Wn(il,c.ah.horizontal),()=>{const Gn=at.verticalTextBox;return g.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&Gn?Wn(Gn,c.ah.vertical):{box:null,offscreen:null}}),Dn(kr&&kr.placeable)}else{let Wn=c.aq[(Gt=(Mr=this.prevPlacement)===null||Mr===void 0?void 0:Mr.variableOffsets[rt.crossTileID])===null||Gt===void 0?void 0:Gt.anchor];const Gn=(jr,al,bf)=>{const vn=jr.x2-jr.x1,y0=jr.y2-jr.y1,qu=rt.textBoxScale,Ku=ft&&Ie==="never"?al:null;let ja=null,v0=pe==="never"?1:2,wf="never";Wn&&v0++;for(let Sf=0;Sf<v0;Sf++){for(let Ef=Na;Ef<ol;Ef++){const Xu=g.textAnchorOffsets.get(Ef);if(Wn&&Xu.textAnchor!==Wn)continue;const sl=this.attemptAnchorPlacement(Xu,jr,vn,y0,qu,Ne,Ge,X,M,k,le,wf,rt,g,bf,S,C,Ku,xt);if(sl&&(ja=sl.placedGlyphBoxes,ja&&ja.placeable))return ir=!0,io=sl.shift,ja}Wn?Wn=null:wf=pe}return p&&!ja&&(ja={box:this.collisionIndex.placeCollisionBox(il,"always",X,M,k,Ge,Ne,S,le.predicate,xt,new c.P(0,0)).box,offscreen:!1,placeable:!1}),ja};ao(()=>Gn(il,at.iconBox,c.ah.horizontal),()=>{const jr=at.verticalTextBox;return g.allowVerticalPlacement&&(!kr||!kr.placeable)&&rt.numVerticalGlyphVertices>0&&jr?Gn(jr,at.verticalIconBox,c.ah.vertical):{box:null,occluded:!0,offscreen:null}}),kr&&(ir=kr.placeable,Un=kr.offscreen);const Pn=Dn(kr&&kr.placeable);if(!ir&&this.prevPlacement){const jr=this.prevPlacement.variableOffsets[rt.crossTileID];jr&&(this.variableOffsets[rt.crossTileID]=jr,this.markUsedJustification(g,jr.anchor,rt,Pn))}}}if(oi=kr,ir=oi&&oi.placeable,Un=oi&&oi.offscreen,rt.useRuntimeCollisionCircles){const Dn=g.text.placedSymbolArray.get(rt.centerJustifiedTextSymbolIndex),ao=c.ai(g.textSizeData,me,Dn),Na=_.get("text-padding");Zn=this.collisionIndex.placeCollisionCircles(pe,Dn,g.lineVertexArray,g.glyphOffsetArray,ao,M,k,B,F,p,Ge,le.predicate,rt.collisionCircleDiameter,Na,S,xt),Zn.circles.length&&Zn.collisionDetected&&!p&&c.w("Collisions detected, but collision boxes are not shown"),ir=Ee||Zn.circles.length>0&&!Zn.collisionDetected,Un=Un&&Zn.offscreen}if(at.iconFeatureIndex&&(Wu=at.iconFeatureIndex),at.iconBox){const Dn=ao=>this.collisionIndex.placeCollisionBox(ao,Ie,X,M,k,Ge,Ne,C,le.predicate,xt,ft&&io?io:void 0);vi&&vi.placeable&&at.verticalIconBox?(Hn=Dn(at.verticalIconBox),Rr=Hn.placeable):(Hn=Dn(at.iconBox),Rr=Hn.placeable),Un=Un&&Hn.offscreen}const gs=ve||rt.numHorizontalGlyphVertices===0&&rt.numVerticalGlyphVertices===0,Gu=be||rt.numIconVertices===0;gs||Gu?Gu?gs||(Rr=Rr&&ir):ir=Rr&&ir:Rr=ir=Rr&&ir;const xf=Rr&&Hn.placeable;if(ir&&oi.placeable&&this.collisionIndex.insertCollisionBox(oi.box,pe,_.get("text-ignore-placement"),g.bucketInstanceId,vi&&vi.placeable&&ms?ms:oo,le.ID),xf&&this.collisionIndex.insertCollisionBox(Hn.box,Ie,_.get("icon-ignore-placement"),g.bucketInstanceId,Wu,le.ID),Zn&&ir&&this.collisionIndex.insertCollisionCircles(Zn.circles,pe,_.get("text-ignore-placement"),g.bucketInstanceId,oo,le.ID),p&&this.storeCollisionData(g.bucketInstanceId,Dt,at,oi,Hn,Zn),rt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[rt.crossTileID]=new lr(ir||Ke,Rr||Je,Un||g.justReloaded),u[rt.crossTileID]=!0};if(pt){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const rt=g.getSortedSymbolIndexes(this.transform.angle);for(let at=rt.length-1;at>=0;--at){const Dt=rt[at];Ft(g.symbolInstances.get(Dt),g.collisionArrays[Dt],Dt)}}else for(let rt=o.symbolInstanceStart;rt<o.symbolInstanceEnd;rt++)Ft(g.symbolInstances.get(rt),g.collisionArrays[rt],rt);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const rt=this.collisionCircleArrays[g.bucketInstanceId];c.as(rt.invProjMatrix,M),rt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}storeCollisionData(o,u,p,g,_,S){if(p.textBox||p.iconBox){let C,M;this.collisionBoxArrays.has(o)?C=this.collisionBoxArrays.get(o):(C=new Map,this.collisionBoxArrays.set(o,C)),C.has(u)?M=C.get(u):(M={text:null,icon:null},C.set(u,M)),p.textBox&&(M.text=g.box),p.iconBox&&(M.icon=_.box)}if(S){let C=this.collisionCircleArrays[o];C===void 0&&(C=this.collisionCircleArrays[o]=new Cr);for(let M=0;M<S.circles.length;M+=4)C.circles.push(S.circles[M+0]),C.circles.push(S.circles[M+1]),C.circles.push(S.circles[M+2]),C.circles.push(S.collisionDetected?1:0)}}markUsedJustification(o,u,p,g){let _;_=g===c.ah.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[c.at(u)];const S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const C of S)C>=0&&(o.text.placedSymbolArray.get(C).crossTileID=_>=0&&C!==_?0:p.crossTileID)}markUsedOrientation(o,u,p){const g=u===c.ah.horizontal||u===c.ah.horizontalOnly?u:0,_=u===c.ah.vertical?u:0,S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const C of S)o.text.placedSymbolArray.get(C).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(o):1,_=u?u.opacities:{},S=u?u.variableOffsets:{},C=u?u.placedOrientations:{};for(const M in this.placements){const k=this.placements[M],B=_[M];B?(this.opacities[M]=new sr(B,g,k.text,k.icon),p=p||k.text!==B.text.placed||k.icon!==B.icon.placed):(this.opacities[M]=new sr(null,g,k.text,k.icon,k.skipFade),p=p||k.text||k.icon)}for(const M in _){const k=_[M];if(!this.opacities[M]){const B=new sr(k,g,!1,!1);B.isHidden()||(this.opacities[M]=B,p=p||k.text.placed||k.icon.placed)}}for(const M in S)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=S[M]);for(const M in C)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=C[M]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:o)}updateLayerOpacities(o,u){const p={};for(const g of u){const _=g.getBucket(o);_&&g.latestFeatureIndex&&o.id===_.layerIds[0]&&this.updateBucketOpacities(_,g.tileID,p,g.collisionBoxArray)}}updateBucketOpacities(o,u,p,g){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const _=o.layers[0],S=_.layout,C=new sr(null,0,!1,!1,!0),M=S.get("text-allow-overlap"),k=S.get("icon-allow-overlap"),B=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=S.get("text-rotation-alignment")==="map",X=S.get("text-pitch-alignment")==="map",te=S.get("icon-text-fit")!=="none",oe=new sr(null,0,M&&(k||!o.hasIconData()||S.get("icon-optional")),k&&(M||!o.hasTextData()||S.get("text-optional")),!0);!o.collisionArrays&&g&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(g);const me=(ve,be,pe)=>{for(let Ee=0;Ee<be/4;Ee++)ve.opacityVertexArray.emplaceBack(pe);ve.hasVisibleVertices=ve.hasVisibleVertices||pe!==tc},le=this.collisionBoxArrays.get(o.bucketInstanceId);for(let ve=0;ve<o.symbolInstances.length;ve++){const be=o.symbolInstances.get(ve),{numHorizontalGlyphVertices:pe,numVerticalGlyphVertices:Ee,crossTileID:Ie}=be;let ke=this.opacities[Ie];p[Ie]?ke=C:ke||(ke=oe,this.opacities[Ie]=ke),p[Ie]=!0;const Ne=be.numIconVertices>0,Ge=this.placedOrientations[be.crossTileID],ft=Ge===c.ah.vertical,pt=Ge===c.ah.horizontal||Ge===c.ah.horizontalOnly;if(pe>0||Ee>0){const Je=$n(ke.text);me(o.text,pe,ft?tc:Je),me(o.text,Ee,pt?tc:Je);const xt=ke.text.isHidden();[be.rightJustifiedTextSymbolIndex,be.centerJustifiedTextSymbolIndex,be.leftJustifiedTextSymbolIndex].forEach(at=>{at>=0&&(o.text.placedSymbolArray.get(at).hidden=xt||ft?1:0)}),be.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(be.verticalPlacedTextSymbolIndex).hidden=xt||pt?1:0);const Ft=this.variableOffsets[be.crossTileID];Ft&&this.markUsedJustification(o,Ft.anchor,be,Ge);const rt=this.placedOrientations[be.crossTileID];rt&&(this.markUsedJustification(o,"left",be,rt),this.markUsedOrientation(o,rt,be))}if(Ne){const Je=$n(ke.icon),xt=!(te&&be.verticalPlacedIconSymbolIndex&&ft);be.placedIconSymbolIndex>=0&&(me(o.icon,be.numIconVertices,xt?Je:tc),o.icon.placedSymbolArray.get(be.placedIconSymbolIndex).hidden=ke.icon.isHidden()),be.verticalPlacedIconSymbolIndex>=0&&(me(o.icon,be.numVerticalIconVertices,xt?tc:Je),o.icon.placedSymbolArray.get(be.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}const Ke=le&&le.has(ve)?le.get(ve):{text:null,icon:null};if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Je=o.collisionArrays[ve];if(Je){let xt=new c.P(0,0);if(Je.textBox||Je.verticalTextBox){let Ft=!0;if(B){const rt=this.variableOffsets[Ie];rt?(xt=br(rt.anchor,rt.width,rt.height,rt.textOffset,rt.textBoxScale),F&&xt._rotate(X?this.transform.angle:-this.transform.angle)):Ft=!1}if(Je.textBox||Je.verticalTextBox){let rt;Je.textBox&&(rt=ft),Je.verticalTextBox&&(rt=pt),Cn(o.textCollisionBox.collisionVertexArray,ke.text.placed,!Ft||rt,Ke.text,xt.x,xt.y)}}if(Je.iconBox||Je.verticalIconBox){const Ft=!!(!pt&&Je.verticalIconBox);let rt;Je.iconBox&&(rt=Ft),Je.verticalIconBox&&(rt=!Ft),Cn(o.iconCollisionBox.collisionVertexArray,ke.icon.placed,rt,Ke.icon,te?xt.x:0,te?xt.y:0)}}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){const ve=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=ve.invProjMatrix,o.placementViewportMatrix=ve.viewportMatrix,o.collisionCircleArray=ve.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>o}setStale(){this.stale=!0}}function Cn(y,o,u,p,g,_){p&&p.length!==0||(p=[0,0,0,0]);const S=p[0]-ct,C=p[1]-ct,M=p[2]-ct,k=p[3]-ct;y.emplaceBack(o?1:0,u?1:0,g||0,_||0,S,C),y.emplaceBack(o?1:0,u?1:0,g||0,_||0,M,C),y.emplaceBack(o?1:0,u?1:0,g||0,_||0,M,k),y.emplaceBack(o?1:0,u?1:0,g||0,_||0,S,k)}const Br=Math.pow(2,25),er=Math.pow(2,24),Ln=Math.pow(2,17),Kt=Math.pow(2,16),en=Math.pow(2,9),ia=Math.pow(2,8),jn=Math.pow(2,1);function $n(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const o=y.placed?1:0,u=Math.floor(127*y.opacity);return u*Br+o*er+u*Ln+o*Kt+u*en+o*ia+u*jn+o}const tc=0;function gi(){return{isOccluded:(y,o,u)=>!1,getPitchedTextCorrection:(y,o,u)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(y,o,u,p){throw new Error("Not implemented.")},translatePosition:(y,o,u,p)=>function(g,_,S,C,M=!1){if(!S[0]&&!S[1])return[0,0];const k=M?C==="map"?g.angle:0:C==="viewport"?-g.angle:0;if(k){const B=Math.sin(k),F=Math.cos(k);S=[S[0]*F-S[1]*B,S[0]*B+S[1]*F]}return[M?S[0]:mt(_,S[0],g.zoom),M?S[1]:mt(_,S[1],g.zoom)]}(y,o,u,p),getCircleRadiusCorrection:y=>1}}class Zi{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,u,p,g,_){const S=this._bucketParts;for(;this._currentTileIndex<o.length;)if(u.getBucketParts(S,g,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((C,M)=>C.sortKey-M.sortKey));this._currentPartIndex<S.length;)if(u.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class Dm{constructor(o,u,p,g,_,S,C,M){this.placement=new yn(o,gi(),u,S,C,M),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(o,u,p){const g=P.now(),_=()=>!this._forceFullPlacement&&P.now()-g>2;for(;this._currentPlacementIndex>=0;){const S=u[o[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=C)&&(!S.maxzoom||S.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Zi(S)),this._inProgressLayer.continuePlacement(p[S.source],this.placement,this._showCollisionBoxes,S,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const oa=512/c.W/2;class un{constructor(o,u,p){this.tileID=o,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let _=0;_<u.length;_++){const S=u.get(_),C=S.key,M=g.get(C);M?M.push(S):g.set(C,[S])}for(const[_,S]of g){const C={positions:S.map(M=>({x:Math.floor(M.anchorX*oa),y:Math.floor(M.anchorY*oa)})),crossTileIDs:S.map(M=>M.crossTileID)};if(C.positions.length>128){const M=new c.av(C.positions.length,16,Uint16Array);for(const{x:k,y:B}of C.positions)M.add(k,B);M.finish(),delete C.positions,C.index=M}this._symbolsByKey[_]=C}}getScaledCoordinates(o,u){const{x:p,y:g,z:_}=this.tileID.canonical,{x:S,y:C,z:M}=u.canonical,k=oa/Math.pow(2,M-_),B=(C*c.W+o.anchorY)*k,F=g*c.W*oa;return{x:Math.floor((S*c.W+o.anchorX)*k-p*c.W*oa),y:Math.floor(B-F)}}findMatches(o,u,p){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<o.length;_++){const S=o.get(_);if(S.crossTileID)continue;const C=this._symbolsByKey[S.key];if(!C)continue;const M=this.getScaledCoordinates(S,u);if(C.index){const k=C.index.range(M.x-g,M.y-g,M.x+g,M.y+g).sort();for(const B of k){const F=C.crossTileIDs[B];if(!p[F]){p[F]=!0,S.crossTileID=F;break}}}else if(C.positions)for(let k=0;k<C.positions.length;k++){const B=C.positions[k],F=C.crossTileIDs[k];if(Math.abs(B.x-M.x)<=g&&Math.abs(B.y-M.y)<=g&&!p[F]){p[F]=!0,S.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class rc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class os{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const u=Math.round((o-this.lng)/360);if(u!==0)for(const p in this.indexes){const g=this.indexes[p],_={};for(const S in g){const C=g[S];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+u),_[C.tileID.key]=C}this.indexes[p]=_}this.lng=o}addBucket(o,u,p){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const g=this.usedCrossTileIDs[o.overscaledZ];for(const _ in this.indexes){const S=this.indexes[_];if(Number(_)>o.overscaledZ)for(const C in S){const M=S[C];M.tileID.isChildOf(o)&&M.findMatches(u.symbolInstances,o,g)}else{const C=S[o.scaledTo(Number(_)).key];C&&C.findMatches(u.symbolInstances,o,g)}}for(let _=0;_<u.symbolInstances.length;_++){const S=u.symbolInstances.get(_);S.crossTileID||(S.crossTileID=p.generate(),g[S.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new un(o,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(o,u){for(const p of u.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[o][g]}removeStaleBuckets(o){let u=!1;for(const p in this.indexes){const g=this.indexes[p];for(const _ in g)o[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[_]),delete g[_],u=!0)}return u}}class Gr{constructor(){this.layerIndexes={},this.crossTileIDs=new rc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,u,p){let g=this.layerIndexes[o.id];g===void 0&&(g=this.layerIndexes[o.id]=new os);let _=!1;const S={};g.handleWrapJump(p);for(const C of u){const M=C.getBucket(o);M&&o.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(C.tileID,M,this.crossTileIDs)&&(_=!0),S[M.bucketInstanceId]=!0)}return g.removeStaleBuckets(S)&&(_=!0),_}pruneUnusedLayers(o){const u={};o.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const as=(y,o)=>c.t(y,o&&o.filter(u=>u.identifier!=="source.canvas")),no=c.aw();class pu extends c.E{constructor(o,u={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const g=this.sourceCaches[p].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[p].reload()}},this.map=o,this.dispatcher=new or(Yt(),o._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,g)=>this.getGlyphs(p,g)),this.dispatcher.registerMessageHandler("GI",(p,g)=>this.getImages(p,g)),this.imageManager=new qe,this.imageManager.setEventedParent(this),this.glyphManager=new He(o._requestManager,u.localIdeographFontFamily),this.lineAtlas=new ot(256,512),this.crossTileSymbolIndex=new Gr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",c.ay()),gn().on(En,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const g=this.sourceCaches[p.sourceId];if(!g)return;const _=g.getSource();if(_&&_.vectorLayerIds)for(const S in this._layers){const C=this._layers[S];C.source===_.id&&this._validateLayer(C)}})}loadURL(o,u={},p){this.fire(new c.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(o,"Style");this._loadStyleRequest=new AbortController,c.h(g,this._loadStyleRequest).then(_=>{this._loadStyleRequest=null,this._load(_.data,u,p)}).catch(_=>{this._loadStyleRequest=null,_&&this.fire(new c.j(_))})}loadJSON(o,u={},p){this.fire(new c.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(o,u,p)}).catch(()=>{})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(no,{validate:!1})}_load(o,u,p){var g;const _=u.transformStyle?u.transformStyle(p,o):o;if(!u.validate||!as(this,c.x(_))){this._loaded=!0,this.stylesheet=_;for(const S in _.sources)this.addSource(S,_.sources[S],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new tt(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const o=c.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",o),this._order=o.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of o){const p=c.aA(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(o,u=!1,p=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,S,C,M){return c._(this,void 0,void 0,function*(){const k=Re(_),B=C>1?"@2x":"",F={},X={};for(const{id:te,url:oe}of k){const me=S.transformRequest(De(oe,B,".json"),"SpriteJSON");F[te]=c.h(me,M);const le=S.transformRequest(De(oe,B,".png"),"SpriteImage");X[te]=K.getImage(le,M)}return yield Promise.all([...Object.values(F),...Object.values(X)]),function(te,oe){return c._(this,void 0,void 0,function*(){const me={};for(const le in te){me[le]={};const ve=P.getImageCanvasContext((yield oe[le]).data),be=(yield te[le]).data;for(const pe in be){const{width:Ee,height:Ie,x:ke,y:Ne,sdf:Ge,pixelRatio:ft,stretchX:pt,stretchY:Ke,content:Je,textFitWidth:xt,textFitHeight:Ft}=be[pe];me[le][pe]={data:null,pixelRatio:ft,sdf:Ge,stretchX:pt,stretchY:Ke,content:Je,textFitWidth:xt,textFitHeight:Ft,spriteData:{width:Ee,height:Ie,x:ke,y:Ne,context:ve}}}}return me})}(F,X)})}(o,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const S in _){this._spritesImagesIds[S]=[];const C=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(M=>!(M in _)):[];for(const M of C)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in _[S]){const k=S==="default"?M:`${S}:${M}`;this._spritesImagesIds[S].push(k),k in this.imageManager.images?this.imageManager.updateImage(k,_[S][M],!1):this.imageManager.addImage(k,_[S][M]),u&&(this._changedImages[k]=!0)}}}).catch(_=>{this._spriteRequest=null,g=_,this.fire(new c.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(o){const u=this.sourceCaches[o.source];if(!u)return;const p=o.sourceLayer;if(!p)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new c.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o){const u=this._serializedAllLayers();if(!o||o.length===0)return Object.values(u);const p=[];for(const g of o)u[g]&&p.push(u[g]);return p}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const g=this._layers[p];g.type!=="custom"&&(o[p]=g.serialize())}return o}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const u=this._changed;if(u){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const S in this._updatedSources){const C=this._updatedSources[S];if(C==="reload")this._reloadSource(S);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];p[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(o,this._availableImages),!_.isHidden(o.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in p){const _=this.sourceCaches[g];!!p[g]!=!!_.used&&_.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(o),this.z=o.zoom,u&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(o),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,u={}){var p;this._checkLoaded();const g=this.serialize();if(o=u.transformStyle?u.transformStyle(g,o):o,((p=u.validate)===null||p===void 0||p)&&as(this,c.x(o)))return!1;(o=c.aB(o)).layers=c.az(o.layers);const _=c.aC(g,o),S=this._getOperationsToPerform(_);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const C of S.operations)C();return this.stylesheet=o,this._serializedLayers=null,!0}_getOperationsToPerform(o){const u=[],p=[];for(const g of o)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":u.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":u.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,g.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":u.push(()=>{});break;default:p.push(g.command)}return{operations:u,unimplemented:p}}addImage(o,u){if(this.getImage(o))return this.fire(new c.j(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,u),this._afterImageUpdated(o)}updateImage(o,u){this.imageManager.updateImage(o,u)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new c.j(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,u,p={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.x.source,`sources.${o}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[o]=new Xe(o,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:o})),g.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===o)return this.fire(new c.j(new Error(`Source "${o}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],u.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,u){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const p=this.sourceCaches[o].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,u,p={}){this._checkLoaded();const g=o.id;if(this.getLayer(g))return void this.fire(new c.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(o.type==="custom"){if(as(this,c.aD(o)))return;_=c.aA(o)}else{if("source"in o&&typeof o.source=="object"&&(this.addSource(g,o.source),o=c.aB(o),o=c.e(o,{source:g})),this._validate(c.x.layer,`layers.${g}`,o,{arrayIndex:-1},p))return;_=c.aA(o),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const S=u?this._order.indexOf(u):this._order.length;if(u&&S===-1)this.fire(new c.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(S,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const C=this._removedLayers[g];delete this._removedLayers[g],C.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(o,u){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new c.j(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===u)return;const p=this._order.indexOf(o);this._order.splice(p,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new c.j(new Error(`Cannot move layer "${o}" before non-existing layer "${u}".`))):(this._order.splice(g,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const u=this._layers[o];if(!u)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${o}".`)));u.setEventedParent(null);const p=this._order.indexOf(o);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=u,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],u.onRemove&&u.onRemove(this.map)}getLayer(o){return this._layers[o]}getLayersOrder(){return[...this._order]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,u,p){this._checkLoaded();const g=this.getLayer(o);g?g.minzoom===u&&g.maxzoom===p||(u!=null&&(g.minzoom=u),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,u,p={}){this._checkLoaded();const g=this.getLayer(o);if(g){if(!c.aE(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(c.x.filter,`layers.${g.id}.filter`,u,null,p)||(g.filter=c.aB(u),this._updateLayer(g)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return c.aB(this.getLayer(o).filter)}setLayoutProperty(o,u,p,g={}){this._checkLoaded();const _=this.getLayer(o);_?c.aE(_.getLayoutProperty(u),p)||(_.setLayoutProperty(u,p,g),this._updateLayer(_)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,u){const p=this.getLayer(o);if(p)return p.getLayoutProperty(u);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,u,p,g={}){this._checkLoaded();const _=this.getLayer(o);_?c.aE(_.getPaintProperty(u),p)||(_.setPaintProperty(u,p,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[o]=!0,this._serializedLayers=null):this.fire(new c.j(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,u){return this.getLayer(o).getPaintProperty(u)}setFeatureState(o,u){this._checkLoaded();const p=o.source,g=o.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new c.j(new Error(`The source '${p}' does not exist in the map's style.`)));const S=_.getSource().type;S==="geojson"&&g?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||g?(o.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,o.id,u)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,u){this._checkLoaded();const p=o.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new c.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=g.getSource().type,S=_==="vector"?o.sourceLayer:void 0;_!=="vector"||S?u&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(S,o.id,u):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const u=o.source,p=o.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||p?(o.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,o.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const o=c.aF(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return c.aG({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:o,layers:u,terrain:p},_=>_!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){const u=S=>this._layers[S].type==="fill-extrusion",p={},g=[];for(let S=this._order.length-1;S>=0;S--){const C=this._order[S];if(u(C)){p[C]=S;for(const M of o){const k=M[C];if(k)for(const B of k)g.push(B)}}}g.sort((S,C)=>C.intersectionZ-S.intersectionZ);const _=[];for(let S=this._order.length-1;S>=0;S--){const C=this._order[S];if(u(C))for(let M=g.length-1;M>=0;M--){const k=g[M].feature;if(p[k.layer.id]<S)break;_.push(k),g.pop()}else for(const M of o){const k=M[C];if(k)for(const B of k)_.push(B.feature)}}return _}queryRenderedFeatures(o,u,p){u&&u.filter&&this._validate(c.x.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const C of u.layers){const M=this._layers[C];if(!M)return this.fire(new c.j(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];g[M.source]=!0}}const _=[];u.availableImages=this._availableImages;const S=this._serializedAllLayers();for(const C in this.sourceCaches)u.layers&&!g[C]||_.push(ti(this.sourceCaches[C],this._layers,S,o,u,p));return this.placement&&_.push(function(C,M,k,B,F,X,te){const oe={},me=X.queryRenderedSymbols(B),le=[];for(const ve of Object.keys(me).map(Number))le.push(te[ve]);le.sort(ar);for(const ve of le){const be=ve.featureIndex.lookupSymbolFeatures(me[ve.bucketInstanceId],M,ve.bucketIndex,ve.sourceLayerIndex,F.filter,F.layers,F.availableImages,C);for(const pe in be){const Ee=oe[pe]=oe[pe]||[],Ie=be[pe];Ie.sort((ke,Ne)=>{const Ge=ve.featureSortOrder;if(Ge){const ft=Ge.indexOf(ke.featureIndex);return Ge.indexOf(Ne.featureIndex)-ft}return Ne.featureIndex-ke.featureIndex});for(const ke of Ie)Ee.push(ke)}}for(const ve in oe)oe[ve].forEach(be=>{const pe=be.feature,Ee=k[C[ve].source].getFeatureState(pe.layer["source-layer"],pe.id);pe.source=pe.layer.source,pe.layer["source-layer"]&&(pe.sourceLayer=pe.layer["source-layer"]),pe.state=Ee});return oe}(this._layers,S,this.sourceCaches,o,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(o,u){u&&u.filter&&this._validate(c.x.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[o];return p?function(g,_){const S=g.getRenderableIds().map(k=>g.getTileByID(k)),C=[],M={};for(let k=0;k<S.length;k++){const B=S[k],F=B.tileID.canonical.key;M[F]||(M[F]=!0,B.querySourceFeatures(C,_))}return C}(p,u):[]}getLight(){return this.light.getLight()}setLight(o,u={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const S in o)if(!c.aE(o[S],p[S])){g=!0;break}if(!g)return;const _={now:P.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,u),this.light.updateTransitions(_)}_validate(o,u,p,g,_={}){return(!_||_.validate!==!1)&&as(this,o.call(c.x,c.e({key:u,style:this.serialize(),value:p,styleSpec:c.v},g)))}_remove(o=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),gn().off(En,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),o&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const u in this.sourceCaches)this.sourceCaches[u].update(o,this.map.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,u,p,g,_=!1){let S=!1,C=!1;const M={};for(const k of this._order){const B=this._layers[k];if(B.type!=="symbol")continue;if(!M[B.source]){const X=this.sourceCaches[B.source];M[B.source]=X.getRenderableIds(!0).map(te=>X.getTileByID(te)).sort((te,oe)=>oe.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(oe.tileID)?-1:1))}const F=this.crossTileSymbolIndex.addLayer(B,M[B.source],o.center.lng);S=S||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(P.now(),o.zoom))&&(this.pauseablePlacement=new Dm(o,this.map.terrain,this._order,_,u,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(P.now()),C=!0),S&&this.pauseablePlacement.placement.setStale()),C||S)for(const k of this._order){const B=this._layers[k];B.type==="symbol"&&this.placement.updateLayerOpacities(B,M[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(P.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,u){return c._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];return g&&g.setDependencies(u.tileID.key,u.type,u.icons),p})}getGlyphs(o,u){return c._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(u.stacks),g=this.sourceCaches[u.source];return g&&g.setDependencies(u.tileID.key,u.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,u={}){this._checkLoaded(),o&&this._validate(c.x.glyphs,"glyphs",o,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,u,p={},g){this._checkLoaded();const _=[{id:o,url:u}],S=[...Re(this.stylesheet.sprite),..._];this._validate(c.x.sprite,"sprite",S,null,p)||(this.stylesheet.sprite=S,this._loadSprite(_,!0,g))}removeSprite(o){this._checkLoaded();const u=Re(this.stylesheet.sprite);if(u.find(p=>p.id===o)){if(this._spritesImagesIds[o])for(const p of this._spritesImagesIds[o])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===o),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return Re(this.stylesheet.sprite)}setSprite(o,u={},p){this._checkLoaded(),o&&this._validate(c.x.sprite,"sprite",o,null,u)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,p):(this._unloadSprite(),p&&p(null)))}}var ko=c.X([{name:"a_pos",type:"Int16",components:2}]),Dd="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ws={prelude:mr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:mr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:mr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:mr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:mr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:mr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:mr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:mr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:mr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:mr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:mr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:mr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:mr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:mr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:mr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:mr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:mr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:mr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:mr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:mr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:mr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:mr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:mr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Dd),terrainDepth:mr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Dd),terrainCoords:mr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Dd)};function mr(y,o){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=o.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=_?_.concat(g):g,C={};return{fragmentSource:y=y.replace(u,(M,k,B,F,X)=>(C[X]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${B} ${F} ${X};
#else
uniform ${B} ${F} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${B} ${F} ${X} = u_${X};
#endif
`)),vertexSource:o=o.replace(u,(M,k,B,F,X)=>{const te=F==="float"?"vec2":"vec4",oe=X.match(/color/)?"color":te;return C[X]?k==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${B} ${te} a_${X};
varying ${B} ${F} ${X};
#else
uniform ${B} ${F} u_${X};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${B} ${F} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${oe}(a_${X}, u_${X}_t);
#else
    ${B} ${F} ${X} = u_${X};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${B} ${te} a_${X};
#else
uniform ${B} ${F} u_${X};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${B} ${F} ${X} = a_${X};
#else
    ${B} ${F} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${B} ${F} ${X} = unpack_mix_${oe}(a_${X}, u_${X}_t);
#else
    ${B} ${F} ${X} = u_${X};
#endif
`}),staticAttributes:p,staticUniforms:S}}class mu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,u,p,g,_,S,C,M,k){this.context=o;let B=this.boundPaintVertexBuffers.length!==g.length;for(let F=0;!B&&F<g.length;F++)this.boundPaintVertexBuffers[F]!==g[F]&&(B=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||B||this.boundIndexBuffer!==_||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==k?this.freshBind(u,p,g,_,S,C,M,k):(o.bindVertexArray.set(this.vao),C&&C.bind(),_&&_.dynamicDraw&&_.bind(),M&&M.bind(),k&&k.bind())}freshBind(o,u,p,g,_,S,C,M){const k=o.numAttributes,B=this.context,F=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=M,u.enableAttributes(F,o);for(const X of p)X.enableAttributes(F,o);S&&S.enableAttributes(F,o),C&&C.enableAttributes(F,o),M&&M.enableAttributes(F,o),u.bind(),u.setVertexAttribPointers(F,o,_);for(const X of p)X.bind(),X.setVertexAttribPointers(F,o,_);S&&(S.bind(),S.setVertexAttribPointers(F,o,_)),g&&g.bind(),C&&(C.bind(),C.setVertexAttribPointers(F,o,_)),M&&(M.bind(),M.setVertexAttribPointers(F,o,_)),B.currentNumAttributes=k}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Gs(y){const o=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const p=y[u].split(" ");o.push(p.pop())}return o}class Od{constructor(o,u,p,g,_,S){const C=o.gl;this.program=C.createProgram();const M=Gs(u.staticAttributes),k=p?p.getBinderAttributes():[],B=M.concat(k),F=Ws.prelude.staticUniforms?Gs(Ws.prelude.staticUniforms):[],X=u.staticUniforms?Gs(u.staticUniforms):[],te=p?p.getBinderUniforms():[],oe=F.concat(X).concat(te),me=[];for(const ke of oe)me.indexOf(ke)<0&&me.push(ke);const le=p?p.defines():[];_&&le.push("#define OVERDRAW_INSPECTOR;"),S&&le.push("#define TERRAIN3D;");const ve=le.concat(Ws.prelude.fragmentSource,u.fragmentSource).join(`
`),be=le.concat(Ws.prelude.vertexSource,u.vertexSource).join(`
`),pe=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(pe,ve),C.compileShader(pe),!C.getShaderParameter(pe,C.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${C.getShaderInfoLog(pe)}`);C.attachShader(this.program,pe);const Ee=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(Ee,be),C.compileShader(Ee),!C.getShaderParameter(Ee,C.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${C.getShaderInfoLog(Ee)}`);C.attachShader(this.program,Ee),this.attributes={};const Ie={};this.numAttributes=B.length;for(let ke=0;ke<this.numAttributes;ke++)B[ke]&&(C.bindAttribLocation(this.program,ke,B[ke]),this.attributes[B[ke]]=ke);if(C.linkProgram(this.program),!C.getProgramParameter(this.program,C.LINK_STATUS))throw new Error(`Program failed to link: ${C.getProgramInfoLog(this.program)}`);C.deleteShader(Ee),C.deleteShader(pe);for(let ke=0;ke<me.length;ke++){const Ne=me[ke];if(Ne&&!Ie[Ne]){const Ge=C.getUniformLocation(this.program,Ne);Ge&&(Ie[Ne]=Ge)}}this.fixedUniforms=g(o,Ie),this.terrainUniforms=((ke,Ne)=>({u_depth:new c.aH(ke,Ne.u_depth),u_terrain:new c.aH(ke,Ne.u_terrain),u_terrain_dim:new c.aI(ke,Ne.u_terrain_dim),u_terrain_matrix:new c.aJ(ke,Ne.u_terrain_matrix),u_terrain_unpack:new c.aK(ke,Ne.u_terrain_unpack),u_terrain_exaggeration:new c.aI(ke,Ne.u_terrain_exaggeration)}))(o,Ie),this.binderUniforms=p?p.getUniforms(o,Ie):[]}draw(o,u,p,g,_,S,C,M,k,B,F,X,te,oe,me,le,ve,be){const pe=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(p),o.setStencilMode(g),o.setColorMode(_),o.setCullFace(S),M){o.activeTexture.set(pe.TEXTURE2),pe.bindTexture(pe.TEXTURE_2D,M.depthTexture),o.activeTexture.set(pe.TEXTURE3),pe.bindTexture(pe.TEXTURE_2D,M.texture);for(const Ie in this.terrainUniforms)this.terrainUniforms[Ie].set(M[Ie])}for(const Ie in this.fixedUniforms)this.fixedUniforms[Ie].set(C[Ie]);me&&me.setUniforms(o,this.binderUniforms,te,{zoom:oe});let Ee=0;switch(u){case pe.LINES:Ee=2;break;case pe.TRIANGLES:Ee=3;break;case pe.LINE_STRIP:Ee=1}for(const Ie of X.get()){const ke=Ie.vaos||(Ie.vaos={});(ke[k]||(ke[k]=new mu)).bind(o,this,B,me?me.getPaintVertexBuffers():[],F,Ie.vertexOffset,le,ve,be),pe.drawElements(u,Ie.primitiveLength*Ee,pe.UNSIGNED_SHORT,Ie.primitiveOffset*Ee*2)}}}function gu(y,o,u){const p=1/mt(u,1,o.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,o.transform.tileZoom)/g,S=_*(u.tileID.canonical.x+u.tileID.wrap*g),C=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[S>>16,C>>16],u_pixel_coord_lower:[65535&S,65535&C]}}const nc=(y,o,u,p)=>{const g=o.style.light,_=g.properties.get("position"),S=[_.x,_.y,_.z],C=function(){var k=new c.A(9);return c.A!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}();g.properties.get("anchor")==="viewport"&&function(k,B){var F=Math.sin(B),X=Math.cos(B);k[0]=X,k[1]=F,k[2]=0,k[3]=-F,k[4]=X,k[5]=0,k[6]=0,k[7]=0,k[8]=1}(C,-o.transform.angle),function(k,B,F){var X=B[0],te=B[1],oe=B[2];k[0]=X*F[0]+te*F[3]+oe*F[6],k[1]=X*F[1]+te*F[4]+oe*F[7],k[2]=X*F[2]+te*F[5]+oe*F[8]}(S,S,C);const M=g.properties.get("color");return{u_matrix:y,u_lightpos:S,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+u,u_opacity:p}},zd=(y,o,u,p,g,_,S)=>c.e(nc(y,o,u,p),gu(_,o,S),{u_height_factor:-Math.pow(2,g.overscaledZ)/S.tileSize/8}),yu=y=>({u_matrix:y}),ic=(y,o,u,p)=>c.e(yu(y),gu(u,o,p)),vu=(y,o)=>({u_matrix:y,u_world:o}),oc=(y,o,u,p,g)=>c.e(ic(y,o,u,p),{u_world:g}),ev=(y,o,u,p)=>{const g=y.transform;let _,S;if(p.paint.get("circle-pitch-alignment")==="map"){const C=mt(u,1,g.zoom);_=!0,S=[C,C]}else _=!1,S=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(o.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:S}},tv=(y,o,u)=>({u_matrix:y,u_inv_matrix:o,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}),Fd=(y,o,u=1)=>({u_matrix:y,u_color:o,u_overlay:0,u_overlay_scale:u}),Om=y=>({u_matrix:y}),ss=(y,o,u,p)=>({u_matrix:y,u_extrude_scale:mt(o,1,u),u_intensity:p});function _u(y,o){const u=Math.pow(2,o.canonical.z),p=o.canonical.y;return[new c.Y(0,p/u).toLngLat().lat,new c.Y(0,(p+1)/u).toLngLat().lat]}const ii=(y,o,u,p)=>{const g=y.transform;return{u_matrix:jd(y,o,u,p),u_ratio:1/mt(o,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Ri=(y,o,u,p,g)=>c.e(ii(y,o,u,g),{u_image:0,u_image_height:p}),Bd=(y,o,u,p,g)=>{const _=y.transform,S=Nd(o,_);return{u_matrix:jd(y,o,u,g),u_texsize:o.imageAtlasTexture.size,u_ratio:1/mt(o,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[S,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},xu=(y,o,u,p,g,_)=>{const S=y.lineAtlas,C=Nd(o,y.transform),M=u.layout.get("line-cap")==="round",k=S.getDash(p.from,M),B=S.getDash(p.to,M),F=k.width*g.fromScale,X=B.width*g.toScale;return c.e(ii(y,o,u,_),{u_patternscale_a:[C/F,-k.height/2],u_patternscale_b:[C/X,-B.height/2],u_sdfgamma:S.width/(256*Math.min(F,X)*y.pixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:B.y,u_mix:g.t})};function Nd(y,o){return 1/mt(y,1,o.tileZoom)}function jd(y,o,u,p){return y.translatePosMatrix(p?p.posMatrix:o.tileID.posMatrix,o,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const qs=(y,o,u,p,g)=>{return{u_matrix:y,u_tl_parent:o,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(S=g.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:rv(g.paint.get("raster-hue-rotate"))};var _,S};function rv(y){y*=Math.PI/180;const o=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*o-u+1)/3,(Math.sqrt(3)*o-u+1)/3]}const zm=(y,o,u,p,g,_,S,C,M,k,B,F,X,te)=>{const oe=S.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:oe.cameraToCenterDistance,u_pitch:oe.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:oe.width/oe.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:M,u_coord_matrix:k,u_is_text:+F,u_pitch_with_map:+p,u_is_along_line:g,u_is_variable_anchor:_,u_texsize:X,u_texture:0,u_translation:B,u_pitched_scale:te}},Fm=(y,o,u,p,g,_,S,C,M,k,B,F,X,te,oe)=>{const me=S.transform;return c.e(zm(y,o,u,p,g,_,S,C,M,k,B,F,X,oe),{u_gamma_scale:p?Math.cos(me._pitch)*me.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:+te})},nv=(y,o,u,p,g,_,S,C,M,k,B,F,X,te)=>c.e(Fm(y,o,u,p,g,_,S,C,M,k,B,!0,F,!0,te),{u_texsize_icon:X,u_texture_icon:1}),iv=(y,o,u)=>({u_matrix:y,u_opacity:o,u_color:u}),ov=(y,o,u,p,g,_)=>c.e(function(S,C,M,k){const B=M.imageManager.getPattern(S.from.toString()),F=M.imageManager.getPattern(S.to.toString()),{width:X,height:te}=M.imageManager.getPixelSize(),oe=Math.pow(2,k.tileID.overscaledZ),me=k.tileSize*Math.pow(2,M.transform.tileZoom)/oe,le=me*(k.tileID.canonical.x+k.tileID.wrap*oe),ve=me*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:F.tl,u_pattern_br_b:F.br,u_texsize:[X,te],u_mix:C.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:F.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/mt(k,1,M.transform.tileZoom),u_pixel_coord_upper:[le>>16,ve>>16],u_pixel_coord_lower:[65535&le,65535&ve]}}(p,_,u,g),{u_matrix:y,u_opacity:o}),bu={fillExtrusion:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_lightpos:new c.aL(y,o.u_lightpos),u_lightintensity:new c.aI(y,o.u_lightintensity),u_lightcolor:new c.aL(y,o.u_lightcolor),u_vertical_gradient:new c.aI(y,o.u_vertical_gradient),u_opacity:new c.aI(y,o.u_opacity)}),fillExtrusionPattern:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_lightpos:new c.aL(y,o.u_lightpos),u_lightintensity:new c.aI(y,o.u_lightintensity),u_lightcolor:new c.aL(y,o.u_lightcolor),u_vertical_gradient:new c.aI(y,o.u_vertical_gradient),u_height_factor:new c.aI(y,o.u_height_factor),u_image:new c.aH(y,o.u_image),u_texsize:new c.aM(y,o.u_texsize),u_pixel_coord_upper:new c.aM(y,o.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(y,o.u_pixel_coord_lower),u_scale:new c.aL(y,o.u_scale),u_fade:new c.aI(y,o.u_fade),u_opacity:new c.aI(y,o.u_opacity)}),fill:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix)}),fillPattern:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_image:new c.aH(y,o.u_image),u_texsize:new c.aM(y,o.u_texsize),u_pixel_coord_upper:new c.aM(y,o.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(y,o.u_pixel_coord_lower),u_scale:new c.aL(y,o.u_scale),u_fade:new c.aI(y,o.u_fade)}),fillOutline:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_world:new c.aM(y,o.u_world)}),fillOutlinePattern:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_world:new c.aM(y,o.u_world),u_image:new c.aH(y,o.u_image),u_texsize:new c.aM(y,o.u_texsize),u_pixel_coord_upper:new c.aM(y,o.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(y,o.u_pixel_coord_lower),u_scale:new c.aL(y,o.u_scale),u_fade:new c.aI(y,o.u_fade)}),circle:(y,o)=>({u_camera_to_center_distance:new c.aI(y,o.u_camera_to_center_distance),u_scale_with_map:new c.aH(y,o.u_scale_with_map),u_pitch_with_map:new c.aH(y,o.u_pitch_with_map),u_extrude_scale:new c.aM(y,o.u_extrude_scale),u_device_pixel_ratio:new c.aI(y,o.u_device_pixel_ratio),u_matrix:new c.aJ(y,o.u_matrix)}),collisionBox:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_pixel_extrude_scale:new c.aM(y,o.u_pixel_extrude_scale)}),collisionCircle:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_inv_matrix:new c.aJ(y,o.u_inv_matrix),u_camera_to_center_distance:new c.aI(y,o.u_camera_to_center_distance),u_viewport_size:new c.aM(y,o.u_viewport_size)}),debug:(y,o)=>({u_color:new c.aN(y,o.u_color),u_matrix:new c.aJ(y,o.u_matrix),u_overlay:new c.aH(y,o.u_overlay),u_overlay_scale:new c.aI(y,o.u_overlay_scale)}),clippingMask:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix)}),heatmap:(y,o)=>({u_extrude_scale:new c.aI(y,o.u_extrude_scale),u_intensity:new c.aI(y,o.u_intensity),u_matrix:new c.aJ(y,o.u_matrix)}),heatmapTexture:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_world:new c.aM(y,o.u_world),u_image:new c.aH(y,o.u_image),u_color_ramp:new c.aH(y,o.u_color_ramp),u_opacity:new c.aI(y,o.u_opacity)}),hillshade:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_image:new c.aH(y,o.u_image),u_latrange:new c.aM(y,o.u_latrange),u_light:new c.aM(y,o.u_light),u_shadow:new c.aN(y,o.u_shadow),u_highlight:new c.aN(y,o.u_highlight),u_accent:new c.aN(y,o.u_accent)}),hillshadePrepare:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_image:new c.aH(y,o.u_image),u_dimension:new c.aM(y,o.u_dimension),u_zoom:new c.aI(y,o.u_zoom),u_unpack:new c.aK(y,o.u_unpack)}),line:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_ratio:new c.aI(y,o.u_ratio),u_device_pixel_ratio:new c.aI(y,o.u_device_pixel_ratio),u_units_to_pixels:new c.aM(y,o.u_units_to_pixels)}),lineGradient:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_ratio:new c.aI(y,o.u_ratio),u_device_pixel_ratio:new c.aI(y,o.u_device_pixel_ratio),u_units_to_pixels:new c.aM(y,o.u_units_to_pixels),u_image:new c.aH(y,o.u_image),u_image_height:new c.aI(y,o.u_image_height)}),linePattern:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_texsize:new c.aM(y,o.u_texsize),u_ratio:new c.aI(y,o.u_ratio),u_device_pixel_ratio:new c.aI(y,o.u_device_pixel_ratio),u_image:new c.aH(y,o.u_image),u_units_to_pixels:new c.aM(y,o.u_units_to_pixels),u_scale:new c.aL(y,o.u_scale),u_fade:new c.aI(y,o.u_fade)}),lineSDF:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_ratio:new c.aI(y,o.u_ratio),u_device_pixel_ratio:new c.aI(y,o.u_device_pixel_ratio),u_units_to_pixels:new c.aM(y,o.u_units_to_pixels),u_patternscale_a:new c.aM(y,o.u_patternscale_a),u_patternscale_b:new c.aM(y,o.u_patternscale_b),u_sdfgamma:new c.aI(y,o.u_sdfgamma),u_image:new c.aH(y,o.u_image),u_tex_y_a:new c.aI(y,o.u_tex_y_a),u_tex_y_b:new c.aI(y,o.u_tex_y_b),u_mix:new c.aI(y,o.u_mix)}),raster:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_tl_parent:new c.aM(y,o.u_tl_parent),u_scale_parent:new c.aI(y,o.u_scale_parent),u_buffer_scale:new c.aI(y,o.u_buffer_scale),u_fade_t:new c.aI(y,o.u_fade_t),u_opacity:new c.aI(y,o.u_opacity),u_image0:new c.aH(y,o.u_image0),u_image1:new c.aH(y,o.u_image1),u_brightness_low:new c.aI(y,o.u_brightness_low),u_brightness_high:new c.aI(y,o.u_brightness_high),u_saturation_factor:new c.aI(y,o.u_saturation_factor),u_contrast_factor:new c.aI(y,o.u_contrast_factor),u_spin_weights:new c.aL(y,o.u_spin_weights)}),symbolIcon:(y,o)=>({u_is_size_zoom_constant:new c.aH(y,o.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(y,o.u_is_size_feature_constant),u_size_t:new c.aI(y,o.u_size_t),u_size:new c.aI(y,o.u_size),u_camera_to_center_distance:new c.aI(y,o.u_camera_to_center_distance),u_pitch:new c.aI(y,o.u_pitch),u_rotate_symbol:new c.aH(y,o.u_rotate_symbol),u_aspect_ratio:new c.aI(y,o.u_aspect_ratio),u_fade_change:new c.aI(y,o.u_fade_change),u_matrix:new c.aJ(y,o.u_matrix),u_label_plane_matrix:new c.aJ(y,o.u_label_plane_matrix),u_coord_matrix:new c.aJ(y,o.u_coord_matrix),u_is_text:new c.aH(y,o.u_is_text),u_pitch_with_map:new c.aH(y,o.u_pitch_with_map),u_is_along_line:new c.aH(y,o.u_is_along_line),u_is_variable_anchor:new c.aH(y,o.u_is_variable_anchor),u_texsize:new c.aM(y,o.u_texsize),u_texture:new c.aH(y,o.u_texture),u_translation:new c.aM(y,o.u_translation),u_pitched_scale:new c.aI(y,o.u_pitched_scale)}),symbolSDF:(y,o)=>({u_is_size_zoom_constant:new c.aH(y,o.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(y,o.u_is_size_feature_constant),u_size_t:new c.aI(y,o.u_size_t),u_size:new c.aI(y,o.u_size),u_camera_to_center_distance:new c.aI(y,o.u_camera_to_center_distance),u_pitch:new c.aI(y,o.u_pitch),u_rotate_symbol:new c.aH(y,o.u_rotate_symbol),u_aspect_ratio:new c.aI(y,o.u_aspect_ratio),u_fade_change:new c.aI(y,o.u_fade_change),u_matrix:new c.aJ(y,o.u_matrix),u_label_plane_matrix:new c.aJ(y,o.u_label_plane_matrix),u_coord_matrix:new c.aJ(y,o.u_coord_matrix),u_is_text:new c.aH(y,o.u_is_text),u_pitch_with_map:new c.aH(y,o.u_pitch_with_map),u_is_along_line:new c.aH(y,o.u_is_along_line),u_is_variable_anchor:new c.aH(y,o.u_is_variable_anchor),u_texsize:new c.aM(y,o.u_texsize),u_texture:new c.aH(y,o.u_texture),u_gamma_scale:new c.aI(y,o.u_gamma_scale),u_device_pixel_ratio:new c.aI(y,o.u_device_pixel_ratio),u_is_halo:new c.aH(y,o.u_is_halo),u_translation:new c.aM(y,o.u_translation),u_pitched_scale:new c.aI(y,o.u_pitched_scale)}),symbolTextAndIcon:(y,o)=>({u_is_size_zoom_constant:new c.aH(y,o.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(y,o.u_is_size_feature_constant),u_size_t:new c.aI(y,o.u_size_t),u_size:new c.aI(y,o.u_size),u_camera_to_center_distance:new c.aI(y,o.u_camera_to_center_distance),u_pitch:new c.aI(y,o.u_pitch),u_rotate_symbol:new c.aH(y,o.u_rotate_symbol),u_aspect_ratio:new c.aI(y,o.u_aspect_ratio),u_fade_change:new c.aI(y,o.u_fade_change),u_matrix:new c.aJ(y,o.u_matrix),u_label_plane_matrix:new c.aJ(y,o.u_label_plane_matrix),u_coord_matrix:new c.aJ(y,o.u_coord_matrix),u_is_text:new c.aH(y,o.u_is_text),u_pitch_with_map:new c.aH(y,o.u_pitch_with_map),u_is_along_line:new c.aH(y,o.u_is_along_line),u_is_variable_anchor:new c.aH(y,o.u_is_variable_anchor),u_texsize:new c.aM(y,o.u_texsize),u_texsize_icon:new c.aM(y,o.u_texsize_icon),u_texture:new c.aH(y,o.u_texture),u_texture_icon:new c.aH(y,o.u_texture_icon),u_gamma_scale:new c.aI(y,o.u_gamma_scale),u_device_pixel_ratio:new c.aI(y,o.u_device_pixel_ratio),u_is_halo:new c.aH(y,o.u_is_halo),u_translation:new c.aM(y,o.u_translation),u_pitched_scale:new c.aI(y,o.u_pitched_scale)}),background:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_opacity:new c.aI(y,o.u_opacity),u_color:new c.aN(y,o.u_color)}),backgroundPattern:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_opacity:new c.aI(y,o.u_opacity),u_image:new c.aH(y,o.u_image),u_pattern_tl_a:new c.aM(y,o.u_pattern_tl_a),u_pattern_br_a:new c.aM(y,o.u_pattern_br_a),u_pattern_tl_b:new c.aM(y,o.u_pattern_tl_b),u_pattern_br_b:new c.aM(y,o.u_pattern_br_b),u_texsize:new c.aM(y,o.u_texsize),u_mix:new c.aI(y,o.u_mix),u_pattern_size_a:new c.aM(y,o.u_pattern_size_a),u_pattern_size_b:new c.aM(y,o.u_pattern_size_b),u_scale_a:new c.aI(y,o.u_scale_a),u_scale_b:new c.aI(y,o.u_scale_b),u_pixel_coord_upper:new c.aM(y,o.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(y,o.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aI(y,o.u_tile_units_to_pixels)}),terrain:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_texture:new c.aH(y,o.u_texture),u_ele_delta:new c.aI(y,o.u_ele_delta)}),terrainDepth:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_ele_delta:new c.aI(y,o.u_ele_delta)}),terrainCoords:(y,o)=>({u_matrix:new c.aJ(y,o.u_matrix),u_texture:new c.aH(y,o.u_texture),u_terrain_coords_id:new c.aI(y,o.u_terrain_coords_id),u_ele_delta:new c.aI(y,o.u_ele_delta)})};class $d{constructor(o,u,p){this.context=o;const g=o.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const wu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Vd{constructor(o,u,p,g){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=o;const _=o.gl;this.buffer=_.createBuffer(),o.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,u){for(let p=0;p<this.attributes.length;p++){const g=u.attributes[this.attributes[p].name];g!==void 0&&o.enableVertexAttribArray(g)}}setVertexAttribPointers(o,u,p){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],S=u.attributes[_.name];S!==void 0&&o.vertexAttribPointer(S,_.components,o[wu[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ac=new WeakMap;function ki(y){var o;if(ac.has(y))return ac.get(y);{const u=(o=y.getParameter(y.VERSION))===null||o===void 0?void 0:o.startsWith("WebGL 2.0");return ac.set(y,u),u}}class gr{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ud extends gr{getDefault(){return c.aP.transparent}set(o){const u=this.current;(o.r!==u.r||o.g!==u.g||o.b!==u.b||o.a!==u.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class sc extends gr{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class lc extends gr{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class av extends gr{getDefault(){return[!0,!0,!0,!0]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||o[3]!==u[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Su extends gr{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class sv extends gr{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Ks extends gr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const u=this.current;(o.func!==u.func||o.ref!==u.ref||o.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class lv extends gr{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Bm extends gr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=o,this.dirty=!1}}class cv extends gr{getDefault(){return[0,1]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class Nm extends gr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=o,this.dirty=!1}}class Zd extends gr{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class jm extends gr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.BLEND):u.disable(u.BLEND),this.current=o,this.dirty=!1}}class $m extends gr{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class Vm extends gr{getDefault(){return c.aP.transparent}set(o){const u=this.current;(o.r!==u.r||o.g!==u.g||o.b!==u.b||o.a!==u.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Um extends gr{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class ls extends gr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=o,this.dirty=!1}}class Zm extends gr{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class uv extends gr{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class hv extends gr{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class Hm extends gr{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class cc extends gr{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||o[3]!==u[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class dv extends gr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Eu extends gr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class fv extends gr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class pv extends gr{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Wm extends gr{getDefault(){return null}set(o){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Gm extends gr{getDefault(){return null}set(o){var u;if(o===this.current&&!this.dirty)return;const p=this.gl;ki(p)?p.bindVertexArray(o):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class qm extends gr{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Hd extends gr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Km extends gr{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Xs extends gr{constructor(o,u){super(o),this.context=o,this.parent=u}getDefault(){return null}}class aa extends Xs{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Wd extends Xs{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Gd extends Xs{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class qd{constructor(o,u,p,g,_){this.context=o,this.width=u,this.height=p;const S=o.gl,C=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new aa(o,C),g)this.depthAttachment=_?new Gd(o,C):new Wd(o,C);else if(_)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const o=this.context.gl,u=this.colorAttachment.get();if(u&&o.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&o.deleteRenderbuffer(p)}o.deleteFramebuffer(this.framebuffer)}}class qr{constructor(o,u,p){this.blendFunction=o,this.blendColor=u,this.mask=p}}qr.Replace=[1,0],qr.disabled=new qr(qr.Replace,c.aP.transparent,[!1,!1,!1,!1]),qr.unblended=new qr(qr.Replace,c.aP.transparent,[!0,!0,!0,!0]),qr.alphaBlended=new qr([1,771],c.aP.transparent,[!0,!0,!0,!0]);class Kd{constructor(o){var u,p;if(this.gl=o,this.clearColor=new Ud(this),this.clearDepth=new sc(this),this.clearStencil=new lc(this),this.colorMask=new av(this),this.depthMask=new Su(this),this.stencilMask=new sv(this),this.stencilFunc=new Ks(this),this.stencilOp=new lv(this),this.stencilTest=new Bm(this),this.depthRange=new cv(this),this.depthTest=new Nm(this),this.depthFunc=new Zd(this),this.blend=new jm(this),this.blendFunc=new $m(this),this.blendColor=new Vm(this),this.blendEquation=new Um(this),this.cullFace=new ls(this),this.cullFaceSide=new Zm(this),this.frontFace=new uv(this),this.program=new hv(this),this.activeTexture=new Hm(this),this.viewport=new cc(this),this.bindFramebuffer=new dv(this),this.bindRenderbuffer=new Eu(this),this.bindTexture=new fv(this),this.bindVertexBuffer=new pv(this),this.bindElementBuffer=new Wm(this),this.bindVertexArray=new Gm(this),this.pixelStoreUnpack=new qm(this),this.pixelStoreUnpackPremultiplyAlpha=new Hd(this),this.pixelStoreUnpackFlipY=new Km(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),ki(o)){this.HALF_FLOAT=o.HALF_FLOAT;const g=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=o.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=o.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");const g=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,u){return new $d(this,o,u)}createVertexBuffer(o,u,p){return new Vd(this,o,u,p)}createRenderbuffer(o,u,p){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,o,u,p),this.bindRenderbuffer.set(null),_}createFramebuffer(o,u,p,g){return new qd(this,o,u,p,g)}clear({color:o,depth:u,stencil:p}){const g=this.gl;let _=0;o&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(_)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){c.aE(o.blendFunction,qr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return ki(this.gl)?this.gl.createVertexArray():(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var u;return ki(this.gl)?this.gl.deleteVertexArray(o):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}class Xt{constructor(o,u,p){this.func=o,this.mask=u,this.range=p}}Xt.ReadOnly=!1,Xt.ReadWrite=!0,Xt.disabled=new Xt(519,Xt.ReadOnly,[0,1]);const uc=7680;class Nr{constructor(o,u,p,g,_,S){this.test=o,this.ref=u,this.mask=p,this.fail=g,this.depthFail=_,this.pass=S}}Nr.disabled=new Nr({func:519,mask:0},0,0,uc,uc,uc);class Dr{constructor(o,u,p){this.enable=o,this.mode=u,this.frontFace=p}}let Au;function Xm(y,o,u,p,g){const _=y.context,S=_.gl,C=y.useProgram("collisionBox"),M=[];let k=0,B=0;for(let ve=0;ve<p.length;ve++){const be=p[ve],pe=o.getTile(be).getBucket(u);if(!pe)continue;const Ee=g?pe.textCollisionBox:pe.iconCollisionBox,Ie=pe.collisionCircleArray;if(Ie.length>0){const ke=c.F();c.aQ(ke,pe.placementInvProjMatrix,y.transform.glCoordMatrix),c.aQ(ke,ke,pe.placementViewportMatrix),M.push({circleArray:Ie,circleOffset:B,transform:be.posMatrix,invTransform:ke,coord:be}),k+=Ie.length/4,B=k}Ee&&C.draw(_,S.LINES,Xt.disabled,Nr.disabled,y.colorModeForRenderPass(),Dr.disabled,{u_matrix:be.posMatrix,u_pixel_extrude_scale:[1/(F=y.transform).width,1/F.height]},y.style.map.terrain&&y.style.map.terrain.getTerrainData(be),u.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,null,y.transform.zoom,null,null,Ee.collisionVertexBuffer)}var F;if(!g||!M.length)return;const X=y.useProgram("collisionCircle"),te=new c.aR;te.resize(4*k),te._trim();let oe=0;for(const ve of M)for(let be=0;be<ve.circleArray.length/4;be++){const pe=4*be,Ee=ve.circleArray[pe+0],Ie=ve.circleArray[pe+1],ke=ve.circleArray[pe+2],Ne=ve.circleArray[pe+3];te.emplace(oe++,Ee,Ie,ke,Ne,0),te.emplace(oe++,Ee,Ie,ke,Ne,1),te.emplace(oe++,Ee,Ie,ke,Ne,2),te.emplace(oe++,Ee,Ie,ke,Ne,3)}(!Au||Au.length<2*k)&&(Au=function(ve){const be=2*ve,pe=new c.aT;pe.resize(be),pe._trim();for(let Ee=0;Ee<be;Ee++){const Ie=6*Ee;pe.uint16[Ie+0]=4*Ee+0,pe.uint16[Ie+1]=4*Ee+1,pe.uint16[Ie+2]=4*Ee+2,pe.uint16[Ie+3]=4*Ee+2,pe.uint16[Ie+4]=4*Ee+3,pe.uint16[Ie+5]=4*Ee+0}return pe}(k));const me=_.createIndexBuffer(Au,!0),le=_.createVertexBuffer(te,c.aS.members,!0);for(const ve of M){const be=tv(ve.transform,ve.invTransform,y.transform);X.draw(_,S.TRIANGLES,Xt.disabled,Nr.disabled,y.colorModeForRenderPass(),Dr.disabled,be,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ve.coord),u.id,le,me,c.$.simpleSegment(0,2*ve.circleOffset,ve.circleArray.length,ve.circleArray.length/2),null,y.transform.zoom,null,null,null)}le.destroy(),me.destroy()}Dr.disabled=new Dr(!1,1029,2305),Dr.backCCW=new Dr(!0,1029,2305);const Xd=c.an(new Float32Array(16));function mv(y,o,u,p,g,_){const{horizontalAlign:S,verticalAlign:C}=c.au(y);return new c.P((-(S-.5)*o/g+p[0])*_,(-(C-.5)*u/g+p[1])*_)}function Ym(y,o,u,p,g,_){const S=o.tileAnchorPoint.add(new c.P(o.translation[0],o.translation[1]));if(o.pitchWithMap){let C=p.mult(_);return u||(C=C.rotate(-g)),Qr(S.add(C),o.labelPlaneMatrix,o.getElevation).point}if(u){const C=fe(o.tileAnchorPoint.x+1,o.tileAnchorPoint.y,o).point.sub(y),M=Math.atan(C.y/C.x)+(C.x<0?Math.PI:0);return y.add(p.rotate(M))}return y.add(p)}function Cu(y,o,u,p,g,_,S,C,M,k,B,F,X,te){const oe=y.text.placedSymbolArray,me=y.text.dynamicLayoutVertexArray,le=y.icon.dynamicLayoutVertexArray,ve={};me.clear();for(let be=0;be<oe.length;be++){const pe=oe.get(be),Ee=pe.hidden||!pe.crossTileID||y.allowVerticalPlacement&&!pe.placedOrientation?null:p[pe.crossTileID];if(Ee){const Ie=new c.P(pe.anchorX,pe.anchorY),ke={getElevation:te,width:g.width,height:g.height,labelPlaneMatrix:_,lineVertexArray:null,pitchWithMap:u,projection:B,projectionCache:null,tileAnchorPoint:Ie,translation:F,unwrappedTileID:X},Ne=u?Qr(Ie,S,te):fe(Ie.x,Ie.y,ke),Ge=he(g.cameraToCenterDistance,Ne.signedDistanceFromCamera);let ft=c.ai(y.textSizeData,M,pe)*Ge/c.ap;u&&(ft*=y.tilePixelRatio/C);const{width:pt,height:Ke,anchor:Je,textOffset:xt,textBoxScale:Ft}=Ee,rt=mv(Je,pt,Ke,xt,Ft,ft),at=B.getPitchedTextCorrection(g,Ie.add(new c.P(F[0],F[1])),X),Dt=Ym(Ne.point,ke,o,rt,g.angle,at),Mr=y.allowVerticalPlacement&&pe.placedOrientation===c.ah.vertical?Math.PI/2:0;for(let Gt=0;Gt<pe.numGlyphs;Gt++)c.aj(me,Dt,Mr);k&&pe.associatedIconIndex>=0&&(ve[pe.associatedIconIndex]={shiftedAnchor:Dt,angle:Mr})}else dt(pe.numGlyphs,me)}if(k){le.clear();const be=y.icon.placedSymbolArray;for(let pe=0;pe<be.length;pe++){const Ee=be.get(pe);if(Ee.hidden)dt(Ee.numGlyphs,le);else{const Ie=ve[pe];if(Ie)for(let ke=0;ke<Ee.numGlyphs;ke++)c.aj(le,Ie.shiftedAnchor,Ie.angle);else dt(Ee.numGlyphs,le)}}y.icon.dynamicLayoutVertexBuffer.updateData(le)}y.text.dynamicLayoutVertexBuffer.updateData(me)}function Pu(y,o,u){return u.iconsInText&&o?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function hc(y,o,u,p,g,_,S,C,M,k,B,F){const X=y.context,te=X.gl,oe=y.transform,me=gi(),le=C==="map",ve=M==="map",be=C!=="viewport"&&u.layout.get("symbol-placement")!=="point",pe=le&&!ve&&!be,Ee=!ve&&be,Ie=!u.layout.get("symbol-sort-key").isConstant();let ke=!1;const Ne=y.depthModeForSublayer(0,Xt.ReadOnly),Ge=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ft=[],pt=me.getCircleRadiusCorrection(oe);for(const Ke of p){const Je=o.getTile(Ke),xt=Je.getBucket(u);if(!xt)continue;const Ft=g?xt.text:xt.icon;if(!Ft||!Ft.segments.get().length||!Ft.hasVisibleVertices)continue;const rt=Ft.programConfigurations.get(u.id),at=g||xt.sdfIcons,Dt=g?xt.textSizeData:xt.iconSizeData,Mr=ve||oe.pitch!==0,Gt=y.useProgram(Pu(at,g,xt),rt),ir=c.ag(Dt,oe.zoom),Rr=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke);let Un,io,kr,vi,oi=[0,0],Zn=null;if(g)io=Je.glyphAtlasTexture,kr=te.LINEAR,Un=Je.glyphAtlasTexture.size,xt.iconsInText&&(oi=Je.imageAtlasTexture.size,Zn=Je.imageAtlasTexture,vi=Mr||y.options.rotating||y.options.zooming||Dt.kind==="composite"||Dt.kind==="camera"?te.LINEAR:te.NEAREST);else{const jr=u.layout.get("icon-size").constantOr(0)!==1||xt.iconsNeedLinear;io=Je.imageAtlasTexture,kr=at||y.options.rotating||y.options.zooming||jr||Mr?te.LINEAR:te.NEAREST,Un=Je.imageAtlasTexture.size}const Hn=mt(Je,1,y.transform.zoom),oo=Ee?Ke.posMatrix:Xd,ms=Mi(oo,ve,le,y.transform,Hn),Wu=ro(oo,ve,le,y.transform,Hn),il=ro(Ke.posMatrix,ve,le,y.transform,Hn),gs=me.translatePosition(y.transform,Je,_,S),Gu=Ge&&xt.hasTextData(),xf=u.layout.get("icon-text-fit")!=="none"&&Gu&&xt.hasIconData();if(be){const jr=y.style.map.terrain?(bf,vn)=>y.style.map.terrain.getElevation(Ke,bf,vn):null,al=u.layout.get("text-rotation-alignment")==="map";q(xt,Ke.posMatrix,y,g,ms,il,ve,k,al,me,Ke.toUnwrapped(),oe.width,oe.height,gs,jr)}const Dn=Ke.posMatrix,ao=g&&Ge||xf,Na=be||ao?Xd:ms,ol=Wu,Wn=at&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Gn;Gn=at?xt.iconsInText?nv(Dt.kind,ir,pe,ve,be,ao,y,Dn,Na,ol,gs,Un,oi,pt):Fm(Dt.kind,ir,pe,ve,be,ao,y,Dn,Na,ol,gs,g,Un,!0,pt):zm(Dt.kind,ir,pe,ve,be,ao,y,Dn,Na,ol,gs,g,Un,pt);const Pn={program:Gt,buffers:Ft,uniformValues:Gn,atlasTexture:io,atlasTextureIcon:Zn,atlasInterpolation:kr,atlasInterpolationIcon:vi,isSDF:at,hasHalo:Wn};if(Ie&&xt.canOverlap){ke=!0;const jr=Ft.segments.get();for(const al of jr)ft.push({segments:new c.$([al]),sortKey:al.sortKey,state:Pn,terrainData:Rr})}else ft.push({segments:Ft.segments,sortKey:0,state:Pn,terrainData:Rr})}ke&&ft.sort((Ke,Je)=>Ke.sortKey-Je.sortKey);for(const Ke of ft){const Je=Ke.state;if(X.activeTexture.set(te.TEXTURE0),Je.atlasTexture.bind(Je.atlasInterpolation,te.CLAMP_TO_EDGE),Je.atlasTextureIcon&&(X.activeTexture.set(te.TEXTURE1),Je.atlasTextureIcon&&Je.atlasTextureIcon.bind(Je.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),Je.isSDF){const xt=Je.uniformValues;Je.hasHalo&&(xt.u_is_halo=1,Tu(Je.buffers,Ke.segments,u,y,Je.program,Ne,B,F,xt,Ke.terrainData)),xt.u_is_halo=0}Tu(Je.buffers,Ke.segments,u,y,Je.program,Ne,B,F,Je.uniformValues,Ke.terrainData)}}function Tu(y,o,u,p,g,_,S,C,M,k){const B=p.context;g.draw(B,B.gl.TRIANGLES,_,S,C,Dr.disabled,M,k,u.id,y.layoutVertexBuffer,y.indexBuffer,o,u.paint,p.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Da(y,o,u,p,g){if(!u||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let S=_[u.to.toString()],C=_[u.from.toString()];if(!S&&C&&(S=C),!C&&S&&(C=S),!S||!C){const M=g.getPaintProperty(o);S=_[M],C=_[M]}S&&C&&y.setConstantPatternPositions(S,C)}function cs(y,o,u,p,g,_,S){const C=y.context.gl,M="fill-pattern",k=u.paint.get(M),B=k&&k.constantOr(1),F=u.getCrossfadeParameters();let X,te,oe,me,le;S?(te=B&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=C.LINES):(te=B?"fillPattern":"fill",X=C.TRIANGLES);const ve=k.constantOr(null);for(const be of p){const pe=o.getTile(be);if(B&&!pe.patternsLoaded())continue;const Ee=pe.getBucket(u);if(!Ee)continue;const Ie=Ee.programConfigurations.get(u.id),ke=y.useProgram(te,Ie),Ne=y.style.map.terrain&&y.style.map.terrain.getTerrainData(be);B&&(y.context.activeTexture.set(C.TEXTURE0),pe.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Ie.updatePaintBuffers(F)),Da(Ie,M,ve,pe,u);const Ge=Ne?be:null,ft=y.translatePosMatrix(Ge?Ge.posMatrix:be.posMatrix,pe,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(S){me=Ee.indexBuffer2,le=Ee.segments2;const pt=[C.drawingBufferWidth,C.drawingBufferHeight];oe=te==="fillOutlinePattern"&&B?oc(ft,y,F,pe,pt):vu(ft,pt)}else me=Ee.indexBuffer,le=Ee.segments,oe=B?ic(ft,y,F,pe):yu(ft);ke.draw(y.context,X,g,y.stencilModeForClipping(be),_,Dr.disabled,oe,Ne,u.id,Ee.layoutVertexBuffer,me,le,u.paint,y.transform.zoom,Ie)}}function yi(y,o,u,p,g,_,S){const C=y.context,M=C.gl,k="fill-extrusion-pattern",B=u.paint.get(k),F=B.constantOr(1),X=u.getCrossfadeParameters(),te=u.paint.get("fill-extrusion-opacity"),oe=B.constantOr(null);for(const me of p){const le=o.getTile(me),ve=le.getBucket(u);if(!ve)continue;const be=y.style.map.terrain&&y.style.map.terrain.getTerrainData(me),pe=ve.programConfigurations.get(u.id),Ee=y.useProgram(F?"fillExtrusionPattern":"fillExtrusion",pe);F&&(y.context.activeTexture.set(M.TEXTURE0),le.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),pe.updatePaintBuffers(X)),Da(pe,k,oe,le,u);const Ie=y.translatePosMatrix(me.posMatrix,le,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),ke=u.paint.get("fill-extrusion-vertical-gradient"),Ne=F?zd(Ie,y,ke,te,me,X,le):nc(Ie,y,ke,te);Ee.draw(C,C.gl.TRIANGLES,g,_,S,Dr.backCCW,Ne,be,u.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,u.paint,y.transform.zoom,pe,y.style.map.terrain&&ve.centroidVertexBuffer)}}function Jm(y,o,u,p,g,_,S){const C=y.context,M=C.gl,k=u.fbo;if(!k)return;const B=y.useProgram("hillshade"),F=y.style.map.terrain&&y.style.map.terrain.getTerrainData(o);C.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,k.colorAttachment.get()),B.draw(C,M.TRIANGLES,g,_,S,Dr.disabled,((X,te,oe,me)=>{const le=oe.paint.get("hillshade-shadow-color"),ve=oe.paint.get("hillshade-highlight-color"),be=oe.paint.get("hillshade-accent-color");let pe=oe.paint.get("hillshade-illumination-direction")*(Math.PI/180);oe.paint.get("hillshade-illumination-anchor")==="viewport"&&(pe-=X.transform.angle);const Ee=!X.options.moving;return{u_matrix:me?me.posMatrix:X.transform.calculatePosMatrix(te.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:_u(0,te.tileID),u_light:[oe.paint.get("hillshade-exaggeration"),pe],u_shadow:le,u_highlight:ve,u_accent:be}})(y,u,p,F?o:null),F,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Qm(y,o,u,p,g,_){const S=y.context,C=S.gl,M=o.dem;if(M&&M.data){const k=M.dim,B=M.stride,F=M.getPixels();if(S.activeTexture.set(C.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||y.getTileTexture(B),o.demTexture){const te=o.demTexture;te.update(F,{premultiply:!1}),te.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else o.demTexture=new Oe(S,F,C.RGBA,{premultiply:!1}),o.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);S.activeTexture.set(C.TEXTURE0);let X=o.fbo;if(!X){const te=new Oe(S,{width:k,height:k,data:null},C.RGBA);te.bind(C.LINEAR,C.CLAMP_TO_EDGE),X=o.fbo=S.createFramebuffer(k,k,!0,!1),X.colorAttachment.set(te.texture)}S.bindFramebuffer.set(X.framebuffer),S.viewport.set([0,0,k,k]),y.useProgram("hillshadePrepare").draw(S,C.TRIANGLES,p,g,_,Dr.disabled,((te,oe)=>{const me=oe.stride,le=c.F();return c.aO(le,0,c.W,-c.W,0,0,1),c.H(le,le,[0,-c.W,0]),{u_matrix:le,u_image:1,u_dimension:[me,me],u_zoom:te.overscaledZ,u_unpack:oe.getUnpackVector()}})(o.tileID,M),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function Yd(y,o,u,p,g,_){const S=p.paint.get("raster-fade-duration");if(!_&&S>0){const C=P.now(),M=(C-y.timeAdded)/S,k=o?(C-o.timeAdded)/S:-1,B=u.getSource(),F=g.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),X=!o||Math.abs(o.tileID.overscaledZ-F)>Math.abs(y.tileID.overscaledZ-F),te=X&&y.refreshedUponExpiration?1:c.ac(X?M:1-k,0,1);return y.refreshedUponExpiration&&M>=1&&(y.refreshedUponExpiration=!1),o?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const us=new c.aP(1,0,0,1),Iu=new c.aP(0,1,0,1),Mu=new c.aP(0,0,1,1),dc=new c.aP(1,0,1,1),Ru=new c.aP(0,1,1,1);function Jd(y,o,u,p){sa(y,0,o+u/2,y.transform.width,u,p)}function hs(y,o,u,p){sa(y,o-u/2,0,u,y.transform.height,p)}function sa(y,o,u,p,g,_){const S=y.context,C=S.gl;C.enable(C.SCISSOR_TEST),C.scissor(o*y.pixelRatio,u*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),S.clear({color:_}),C.disable(C.SCISSOR_TEST)}function e0(y,o,u){const p=y.context,g=p.gl,_=u.posMatrix,S=y.useProgram("debug"),C=Xt.disabled,M=Nr.disabled,k=y.colorModeForRenderPass(),B="$debug",F=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);p.activeTexture.set(g.TEXTURE0);const X=o.getTileByID(u.key).latestRawTileData,te=Math.floor((X&&X.byteLength||0)/1024),oe=o.getTile(u).tileSize,me=512/Math.min(oe,512)*(u.overscaledZ/y.transform.zoom)*.5;let le=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(le+=` => ${u.overscaledZ}`),function(ve,be){ve.initDebugOverlayCanvas();const pe=ve.debugOverlayCanvas,Ee=ve.context.gl,Ie=ve.debugOverlayCanvas.getContext("2d");Ie.clearRect(0,0,pe.width,pe.height),Ie.shadowColor="white",Ie.shadowBlur=2,Ie.lineWidth=1.5,Ie.strokeStyle="white",Ie.textBaseline="top",Ie.font="bold 36px Open Sans, sans-serif",Ie.fillText(be,5,5),Ie.strokeText(be,5,5),ve.debugOverlayTexture.update(pe),ve.debugOverlayTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE)}(y,`${le} ${te}kB`),S.draw(p,g.TRIANGLES,C,M,qr.alphaBlended,Dr.disabled,Fd(_,c.aP.transparent,me),null,B,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),S.draw(p,g.LINE_STRIP,C,M,k,Dr.disabled,Fd(_,c.aP.red),F,B,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function ku(y,o,u){const p=y.context,g=p.gl,_=y.colorModeForRenderPass(),S=new Xt(g.LEQUAL,Xt.ReadWrite,y.depthRangeFor3D),C=y.useProgram("terrain"),M=o.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const k of u){const B=y.renderToTexture.getTexture(k),F=o.getTerrainData(k.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,B.texture);const X={u_matrix:y.transform.calculatePosMatrix(k.tileID.toUnwrapped()),u_texture:0,u_ele_delta:o.getMeshFrameDelta(y.transform.zoom)};C.draw(p,g.TRIANGLES,S,Nr.disabled,_,Dr.backCCW,X,F,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class fr{constructor(o,u){this.context=new Kd(o),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Xe.maxUnderzooming+Xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Gr}resize(o,u,p){if(this.width=Math.floor(o*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const o=this.context,u=new c.aW;u.emplaceBack(0,0),u.emplaceBack(c.W,0),u.emplaceBack(0,c.W),u.emplaceBack(c.W,c.W),this.tileExtentBuffer=o.createVertexBuffer(u,ko.members),this.tileExtentSegments=c.$.simpleSegment(0,0,4,2);const p=new c.aW;p.emplaceBack(0,0),p.emplaceBack(c.W,0),p.emplaceBack(0,c.W),p.emplaceBack(c.W,c.W),this.debugBuffer=o.createVertexBuffer(p,ko.members),this.debugSegments=c.$.simpleSegment(0,0,4,5);const g=new c.Z;g.emplaceBack(0,0,0,0),g.emplaceBack(c.W,0,c.W,0),g.emplaceBack(0,c.W,0,c.W),g.emplaceBack(c.W,c.W,c.W,c.W),this.rasterBoundsBuffer=o.createVertexBuffer(g,dr.members),this.rasterBoundsSegments=c.$.simpleSegment(0,0,4,2);const _=new c.aW;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(_,ko.members),this.viewportSegments=c.$.simpleSegment(0,0,4,2);const S=new c.aX;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(S);const C=new c.aY;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(C);const M=this.context.gl;this.stencilClearMode=new Nr({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const o=this.context,u=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=c.F();c.aO(p,0,this.width,this.height,0,0,1),c.J(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,u.TRIANGLES,Xt.disabled,this.stencilClearMode,qr.disabled,Dr.disabled,Om(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,u){if(this.currentStencilSource===o.source||!o.isTileClipped()||!u||!u.length)return;this.currentStencilSource=o.source;const p=this.context,g=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(qr.disabled),p.setDepthMode(Xt.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of u){const C=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);_.draw(p,g.TRIANGLES,Xt.disabled,new Nr({func:g.ALWAYS,mask:0},C,255,g.KEEP,g.KEEP,g.REPLACE),qr.disabled,Dr.disabled,Om(S.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,u=this.context.gl;return new Nr({func:u.NOTEQUAL,mask:255},o,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(o){const u=this.context.gl;return new Nr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(o){const u=this.context.gl,p=o.sort((S,C)=>C.overscaledZ-S.overscaledZ),g=p[p.length-1].overscaledZ,_=p[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const S={};for(let C=0;C<_;C++)S[C+g]=new Nr({func:u.GEQUAL,mask:255},C+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[S,p]}return[{[g]:Nr.disabled},p]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new qr([o.CONSTANT_COLOR,o.ONE],new c.aP(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?qr.unblended:qr.alphaBlended}depthModeForSublayer(o,u,p){if(!this.opaquePassEnabledForLayer())return Xt.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Xt(p||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,u){this.style=o,this.options=u,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(P.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,_={},S={},C={};for(const M in g){const k=g[M];k.used&&k.prepare(this.context),_[M]=k.getVisibleCoordinates(),S[M]=_[M].slice().reverse(),C[M]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<p.length;M++)if(this.style._layers[p[M]].is3D()){this.opaquePassCutoff=M;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const M of p){const k=this.style._layers[M];if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;const B=S[k.source];(k.type==="custom"||B.length)&&this.renderLayer(this,g[k.source],k,B)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.aP.black:c.aP.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[p[this.currentLayer]],k=g[M.source],B=_[M.source];this._renderTileClippingMasks(M,B),this.renderLayer(this,k,M,B)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const M=this.style._layers[p[this.currentLayer]],k=g[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const B=(M.type==="symbol"?C:S)[M.source];this._renderTileClippingMasks(M,_[M.source]),this.renderLayer(this,k,M,B)}if(this.options.showTileBoundaries){const M=function(k,B){let F=null;const X=Object.values(k._layers).flatMap(le=>le.source&&!le.isHidden(B)?[k.sourceCaches[le.source]]:[]),te=X.filter(le=>le.getSource().type==="vector"),oe=X.filter(le=>le.getSource().type!=="vector"),me=le=>{(!F||F.getSource().maxzoom<le.getSource().maxzoom)&&(F=le)};return te.forEach(le=>me(le)),F||oe.forEach(le=>me(le)),F}(this.style,this.transform.zoom);M&&function(k,B,F){for(let X=0;X<F.length;X++)e0(k,B,F[X])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const k=M.transform.padding;Jd(M,M.transform.height-(k.top||0),3,us),Jd(M,k.bottom||0,3,Iu),hs(M,k.left||0,3,Mu),hs(M,M.transform.width-(k.right||0),3,dc);const B=M.transform.centerPoint;(function(F,X,te,oe){sa(F,X-1,te-10,2,20,oe),sa(F,X-10,te-1,20,2,oe)})(M,B.x,M.transform.height-B.y,Ru)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(o){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,p=this.transform.projMatrix;let g=this.terrainFacilitator.dirty;g||(g=o?!c.aZ(u,p):!c.a_(u,p)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(c.a$(u,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,S){const C=_.context,M=C.gl,k=qr.unblended,B=new Xt(M.LEQUAL,Xt.ReadWrite,[0,1]),F=S.getTerrainMesh(),X=S.sourceCache.getRenderableTiles(),te=_.useProgram("terrainDepth");C.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),C.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),C.clear({color:c.aP.transparent,depth:1});for(const oe of X){const me=S.getTerrainData(oe.tileID),le={u_matrix:_.transform.calculatePosMatrix(oe.tileID.toUnwrapped()),u_ele_delta:S.getMeshFrameDelta(_.transform.zoom)};te.draw(C,M.TRIANGLES,B,Nr.disabled,k,Dr.backCCW,le,me,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}C.bindFramebuffer.set(null),C.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,S){const C=_.context,M=C.gl,k=qr.unblended,B=new Xt(M.LEQUAL,Xt.ReadWrite,[0,1]),F=S.getTerrainMesh(),X=S.getCoordsTexture(),te=S.sourceCache.getRenderableTiles(),oe=_.useProgram("terrainCoords");C.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),C.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),C.clear({color:c.aP.transparent,depth:1}),S.coordsIndex=[];for(const me of te){const le=S.getTerrainData(me.tileID);C.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,X.texture);const ve={u_matrix:_.transform.calculatePosMatrix(me.tileID.toUnwrapped()),u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(_.transform.zoom)};oe.draw(C,M.TRIANGLES,B,Nr.disabled,k,Dr.backCCW,ve,le,"terrain",F.vertexBuffer,F.indexBuffer,F.segments),S.coordsIndex.push(me.tileID.key)}C.bindFramebuffer.set(null),C.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(o,u,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,S,C,M,k){if(_.renderPass!=="translucent")return;const B=Nr.disabled,F=_.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,te,oe,me,le,ve,be,pe,Ee){const Ie=te.transform,ke=gi(),Ne=le==="map",Ge=ve==="map";for(const ft of X){const pt=me.getTile(ft),Ke=pt.getBucket(oe);if(!Ke||!Ke.text||!Ke.text.segments.get().length)continue;const Je=c.ag(Ke.textSizeData,Ie.zoom),xt=mt(pt,1,te.transform.zoom),Ft=Mi(ft.posMatrix,Ge,Ne,te.transform,xt),rt=oe.layout.get("icon-text-fit")!=="none"&&Ke.hasIconData();if(Je){const at=Math.pow(2,Ie.zoom-pt.tileID.overscaledZ),Dt=te.style.map.terrain?(Gt,ir)=>te.style.map.terrain.getElevation(ft,Gt,ir):null,Mr=ke.translatePosition(Ie,pt,be,pe);Cu(Ke,Ne,Ge,Ee,Ie,Ft,ft.posMatrix,at,Je,rt,ke,Mr,ft.toUnwrapped(),Dt)}}}(M,_,C,S,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),k),C.paint.get("icon-opacity").constantOr(1)!==0&&hc(_,S,C,M,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),B,F),C.paint.get("text-opacity").constantOr(1)!==0&&hc(_,S,C,M,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),B,F),S.map.showCollisionBoxes&&(Xm(_,S,C,M,!0),Xm(_,S,C,M,!1))})(o,u,p,g,this.style.placement.variableOffsets);break;case"circle":(function(_,S,C,M){if(_.renderPass!=="translucent")return;const k=C.paint.get("circle-opacity"),B=C.paint.get("circle-stroke-width"),F=C.paint.get("circle-stroke-opacity"),X=!C.layout.get("circle-sort-key").isConstant();if(k.constantOr(1)===0&&(B.constantOr(1)===0||F.constantOr(1)===0))return;const te=_.context,oe=te.gl,me=_.depthModeForSublayer(0,Xt.ReadOnly),le=Nr.disabled,ve=_.colorModeForRenderPass(),be=[];for(let pe=0;pe<M.length;pe++){const Ee=M[pe],Ie=S.getTile(Ee),ke=Ie.getBucket(C);if(!ke)continue;const Ne=ke.programConfigurations.get(C.id),Ge=_.useProgram("circle",Ne),ft=ke.layoutVertexBuffer,pt=ke.indexBuffer,Ke=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ee),Je={programConfiguration:Ne,program:Ge,layoutVertexBuffer:ft,indexBuffer:pt,uniformValues:ev(_,Ee,Ie,C),terrainData:Ke};if(X){const xt=ke.segments.get();for(const Ft of xt)be.push({segments:new c.$([Ft]),sortKey:Ft.sortKey,state:Je})}else be.push({segments:ke.segments,sortKey:0,state:Je})}X&&be.sort((pe,Ee)=>pe.sortKey-Ee.sortKey);for(const pe of be){const{programConfiguration:Ee,program:Ie,layoutVertexBuffer:ke,indexBuffer:Ne,uniformValues:Ge,terrainData:ft}=pe.state;Ie.draw(te,oe.TRIANGLES,me,le,ve,Dr.disabled,Ge,ft,C.id,ke,Ne,pe.segments,C.paint,_.transform.zoom,Ee)}})(o,u,p,g);break;case"heatmap":(function(_,S,C,M){if(C.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const k=_.context,B=k.gl,F=Nr.disabled,X=new qr([B.ONE,B.ONE],c.aP.transparent,[!0,!0,!0,!0]);(function(te,oe,me){const le=te.gl;te.activeTexture.set(le.TEXTURE1),te.viewport.set([0,0,oe.width/4,oe.height/4]);let ve=me.heatmapFbo;if(ve)le.bindTexture(le.TEXTURE_2D,ve.colorAttachment.get()),te.bindFramebuffer.set(ve.framebuffer);else{const be=le.createTexture();le.bindTexture(le.TEXTURE_2D,be),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.LINEAR),ve=me.heatmapFbo=te.createFramebuffer(oe.width/4,oe.height/4,!1,!1),function(pe,Ee,Ie,ke){var Ne,Ge;const ft=pe.gl,pt=(Ne=pe.HALF_FLOAT)!==null&&Ne!==void 0?Ne:ft.UNSIGNED_BYTE,Ke=(Ge=pe.RGBA16F)!==null&&Ge!==void 0?Ge:ft.RGBA;ft.texImage2D(ft.TEXTURE_2D,0,Ke,Ee.width/4,Ee.height/4,0,ft.RGBA,pt,null),ke.colorAttachment.set(Ie)}(te,oe,be,ve)}})(k,_,C),k.clear({color:c.aP.transparent});for(let te=0;te<M.length;te++){const oe=M[te];if(S.hasRenderableParent(oe))continue;const me=S.getTile(oe),le=me.getBucket(C);if(!le)continue;const ve=le.programConfigurations.get(C.id),be=_.useProgram("heatmap",ve),{zoom:pe}=_.transform;be.draw(k,B.TRIANGLES,Xt.disabled,F,X,Dr.disabled,ss(oe.posMatrix,me,pe,C.paint.get("heatmap-intensity")),null,C.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,C.paint,_.transform.zoom,ve)}k.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(k,B){const F=k.context,X=F.gl,te=B.heatmapFbo;if(!te)return;F.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,te.colorAttachment.get()),F.activeTexture.set(X.TEXTURE1);let oe=B.colorRampTexture;oe||(oe=B.colorRampTexture=new Oe(F,B.colorRamp,X.RGBA)),oe.bind(X.LINEAR,X.CLAMP_TO_EDGE),k.useProgram("heatmapTexture").draw(F,X.TRIANGLES,Xt.disabled,Nr.disabled,k.colorModeForRenderPass(),Dr.disabled,((me,le,ve,be)=>{const pe=c.F();c.aO(pe,0,me.width,me.height,0,0,1);const Ee=me.context.gl;return{u_matrix:pe,u_world:[Ee.drawingBufferWidth,Ee.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:le.paint.get("heatmap-opacity")}})(k,B),null,B.id,k.viewportBuffer,k.quadTriangleIndexBuffer,k.viewportSegments,B.paint,k.transform.zoom)}(_,C))})(o,u,p,g);break;case"line":(function(_,S,C,M){if(_.renderPass!=="translucent")return;const k=C.paint.get("line-opacity"),B=C.paint.get("line-width");if(k.constantOr(1)===0||B.constantOr(1)===0)return;const F=_.depthModeForSublayer(0,Xt.ReadOnly),X=_.colorModeForRenderPass(),te=C.paint.get("line-dasharray"),oe=C.paint.get("line-pattern"),me=oe.constantOr(1),le=C.paint.get("line-gradient"),ve=C.getCrossfadeParameters(),be=me?"linePattern":te?"lineSDF":le?"lineGradient":"line",pe=_.context,Ee=pe.gl;let Ie=!0;for(const ke of M){const Ne=S.getTile(ke);if(me&&!Ne.patternsLoaded())continue;const Ge=Ne.getBucket(C);if(!Ge)continue;const ft=Ge.programConfigurations.get(C.id),pt=_.context.program.get(),Ke=_.useProgram(be,ft),Je=Ie||Ke.program!==pt,xt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ke),Ft=oe.constantOr(null);if(Ft&&Ne.imageAtlas){const Dt=Ne.imageAtlas,Mr=Dt.patternPositions[Ft.to.toString()],Gt=Dt.patternPositions[Ft.from.toString()];Mr&&Gt&&ft.setConstantPatternPositions(Mr,Gt)}const rt=xt?ke:null,at=me?Bd(_,Ne,C,ve,rt):te?xu(_,Ne,C,te,ve,rt):le?Ri(_,Ne,C,Ge.lineClipsArray.length,rt):ii(_,Ne,C,rt);if(me)pe.activeTexture.set(Ee.TEXTURE0),Ne.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),ft.updatePaintBuffers(ve);else if(te&&(Je||_.lineAtlas.dirty))pe.activeTexture.set(Ee.TEXTURE0),_.lineAtlas.bind(pe);else if(le){const Dt=Ge.gradients[C.id];let Mr=Dt.texture;if(C.gradientVersion!==Dt.version){let Gt=256;if(C.stepInterpolant){const ir=S.getSource().maxzoom,Rr=ke.canonical.z===ir?Math.ceil(1<<_.transform.maxZoom-ke.canonical.z):1;Gt=c.ac(c.aU(Ge.maxLineLength/c.W*1024*Rr),256,pe.maxTextureSize)}Dt.gradient=c.aV({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:Gt,image:Dt.gradient||void 0,clips:Ge.lineClipsArray}),Dt.texture?Dt.texture.update(Dt.gradient):Dt.texture=new Oe(pe,Dt.gradient,Ee.RGBA),Dt.version=C.gradientVersion,Mr=Dt.texture}pe.activeTexture.set(Ee.TEXTURE0),Mr.bind(C.stepInterpolant?Ee.NEAREST:Ee.LINEAR,Ee.CLAMP_TO_EDGE)}Ke.draw(pe,Ee.TRIANGLES,F,_.stencilModeForClipping(ke),X,Dr.disabled,at,xt,C.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,C.paint,_.transform.zoom,ft,Ge.layoutVertexBuffer2),Ie=!1}})(o,u,p,g);break;case"fill":(function(_,S,C,M){const k=C.paint.get("fill-color"),B=C.paint.get("fill-opacity");if(B.constantOr(1)===0)return;const F=_.colorModeForRenderPass(),X=C.paint.get("fill-pattern"),te=_.opaquePassEnabledForLayer()&&!X.constantOr(1)&&k.constantOr(c.aP.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===te){const oe=_.depthModeForSublayer(1,_.renderPass==="opaque"?Xt.ReadWrite:Xt.ReadOnly);cs(_,S,C,M,oe,F,!1)}if(_.renderPass==="translucent"&&C.paint.get("fill-antialias")){const oe=_.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,Xt.ReadOnly);cs(_,S,C,M,oe,F,!0)}})(o,u,p,g);break;case"fill-extrusion":(function(_,S,C,M){const k=C.paint.get("fill-extrusion-opacity");if(k!==0&&_.renderPass==="translucent"){const B=new Xt(_.context.gl.LEQUAL,Xt.ReadWrite,_.depthRangeFor3D);if(k!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))yi(_,S,C,M,B,Nr.disabled,qr.disabled),yi(_,S,C,M,B,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const F=_.colorModeForRenderPass();yi(_,S,C,M,B,Nr.disabled,F)}}})(o,u,p,g);break;case"hillshade":(function(_,S,C,M){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const k=_.context,B=_.depthModeForSublayer(0,Xt.ReadOnly),F=_.colorModeForRenderPass(),[X,te]=_.renderPass==="translucent"?_.stencilConfigForOverlap(M):[{},M];for(const oe of te){const me=S.getTile(oe);me.needsHillshadePrepare!==void 0&&me.needsHillshadePrepare&&_.renderPass==="offscreen"?Qm(_,me,C,B,Nr.disabled,F):_.renderPass==="translucent"&&Jm(_,oe,me,C,B,X[oe.overscaledZ],F)}k.viewport.set([0,0,_.width,_.height])})(o,u,p,g);break;case"raster":(function(_,S,C,M){if(_.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!M.length)return;const k=_.context,B=k.gl,F=S.getSource(),X=_.useProgram("raster"),te=_.colorModeForRenderPass(),[oe,me]=F instanceof kn?[{},M]:_.stencilConfigForOverlap(M),le=me[me.length-1].overscaledZ,ve=!_.options.moving;for(const be of me){const pe=_.depthModeForSublayer(be.overscaledZ-le,C.paint.get("raster-opacity")===1?Xt.ReadWrite:Xt.ReadOnly,B.LESS),Ee=S.getTile(be);Ee.registerFadeDuration(C.paint.get("raster-fade-duration"));const Ie=S.findLoadedParent(be,0),ke=S.findLoadedSibling(be),Ne=Yd(Ee,Ie||ke||null,S,C,_.transform,_.style.map.terrain);let Ge,ft;const pt=C.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR;k.activeTexture.set(B.TEXTURE0),Ee.texture.bind(pt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(B.TEXTURE1),Ie?(Ie.texture.bind(pt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),Ge=Math.pow(2,Ie.tileID.overscaledZ-Ee.tileID.overscaledZ),ft=[Ee.tileID.canonical.x*Ge%1,Ee.tileID.canonical.y*Ge%1]):Ee.texture.bind(pt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const Ke=_.style.map.terrain&&_.style.map.terrain.getTerrainData(be),Je=Ke?be:null,xt=Je?Je.posMatrix:_.transform.calculatePosMatrix(be.toUnwrapped(),ve),Ft=qs(xt,ft||[0,0],Ge||1,Ne,C);F instanceof kn?X.draw(k,B.TRIANGLES,pe,Nr.disabled,te,Dr.disabled,Ft,Ke,C.id,F.boundsBuffer,_.quadTriangleIndexBuffer,F.boundsSegments):X.draw(k,B.TRIANGLES,pe,oe[be.overscaledZ],te,Dr.disabled,Ft,Ke,C.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(o,u,p,g);break;case"background":(function(_,S,C,M){const k=C.paint.get("background-color"),B=C.paint.get("background-opacity");if(B===0)return;const F=_.context,X=F.gl,te=_.transform,oe=te.tileSize,me=C.paint.get("background-pattern");if(_.isPatternMissing(me))return;const le=!me&&k.a===1&&B===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==le)return;const ve=Nr.disabled,be=_.depthModeForSublayer(0,le==="opaque"?Xt.ReadWrite:Xt.ReadOnly),pe=_.colorModeForRenderPass(),Ee=_.useProgram(me?"backgroundPattern":"background"),Ie=M||te.coveringTiles({tileSize:oe,terrain:_.style.map.terrain});me&&(F.activeTexture.set(X.TEXTURE0),_.imageManager.bind(_.context));const ke=C.getCrossfadeParameters();for(const Ne of Ie){const Ge=M?Ne.posMatrix:_.transform.calculatePosMatrix(Ne.toUnwrapped()),ft=me?ov(Ge,B,_,me,{tileID:Ne,tileSize:oe},ke):iv(Ge,B,k),pt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ne);Ee.draw(F,X.TRIANGLES,be,ve,pe,Dr.disabled,ft,pt,C.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(o,0,p,g);break;case"custom":(function(_,S,C){const M=_.context,k=C.implementation;if(_.renderPass==="offscreen"){const B=k.prerender;B&&(_.setCustomLayerDefaults(),M.setColorMode(_.colorModeForRenderPass()),B.call(k,M.gl,_.transform.customLayerMatrix()),M.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),M.setColorMode(_.colorModeForRenderPass()),M.setStencilMode(Nr.disabled);const B=k.renderingMode==="3d"?new Xt(_.context.gl.LEQUAL,Xt.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Xt.ReadOnly);M.setDepthMode(B),k.render(M.gl,_.transform.customLayerMatrix()),M.setDirty(),_.setBaseState(),M.bindFramebuffer.set(null)}})(o,0,p)}}translatePosMatrix(o,u,p,g,_){if(!p[0]&&!p[1])return o;const S=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(S){const k=Math.sin(S),B=Math.cos(S);p=[p[0]*B-p[1]*k,p[0]*k+p[1]*B]}const C=[_?p[0]:mt(u,p[0],this.transform.zoom),_?p[1]:mt(u,p[1],this.transform.zoom),0],M=new Float32Array(16);return c.H(M,o,C),M}saveTileTexture(o){const u=this._tileTextures[o.size[0]];u?u.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const u=this._tileTextures[o];return u&&u.length>0?u.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const u=this.imageManager.getPattern(o.from.toString()),p=this.imageManager.getPattern(o.to.toString());return!u||!p}useProgram(o,u){this.cache=this.cache||{};const p=o+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Od(this.context,Ws[o],u,bu[o],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Oe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:o,drawingBufferHeight:u}=this.context.gl;return this.width!==o||this.height!==u}}class Ys{constructor(o,u){this.points=o,this.planes=u}static fromInvProjectionMatrix(o,u,p){const g=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const M=1/(C=c.af([],C,o))[3]/u*g;return c.b0(C,C,[M,M,1/C[3],M])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const M=function(X,te){var oe=te[0],me=te[1],le=te[2],ve=oe*oe+me*me+le*le;return ve>0&&(ve=1/Math.sqrt(ve)),X[0]=te[0]*ve,X[1]=te[1]*ve,X[2]=te[2]*ve,X}([],function(X,te,oe){var me=te[0],le=te[1],ve=te[2],be=oe[0],pe=oe[1],Ee=oe[2];return X[0]=le*Ee-ve*pe,X[1]=ve*be-me*Ee,X[2]=me*pe-le*be,X}([],J([],_[C[0]],_[C[1]]),J([],_[C[2]],_[C[1]]))),k=-((B=M)[0]*(F=_[C[1]])[0]+B[1]*F[1]+B[2]*F[2]);var B,F;return M.concat(k)});return new Ys(_,S)}}class Lu{constructor(o,u){this.min=o,this.max=u,this.center=function(p,g,_){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,_){return p[0]=g[0]+_[0],p[1]=g[1]+_[1],p[2]=g[2]+_[2],p}([],this.min,this.max))}quadrant(o){const u=[o%2==0,o<2],p=de(this.min),g=de(this.max);for(let _=0;_<u.length;_++)p[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Lu(p,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<o.planes.length;g++){const _=o.planes[g];let S=0;for(let C=0;C<u.length;C++)c.b1(_,u[C])>=0&&S++;if(S===0)return 0;S!==u.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let C=0;C<o.points.length;C++){const M=o.points[C][g]-this.min[g];_=Math.min(_,M),S=Math.max(S,M)}if(S<0||_>this.max[g]-this.min[g])return 0}return 1}}class fc{constructor(o=0,u=0,p=0,g=0){if(isNaN(o)||o<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=u,this.left=p,this.right=g}interpolate(o,u,p){return u.top!=null&&o.top!=null&&(this.top=c.z.number(o.top,u.top,p)),u.bottom!=null&&o.bottom!=null&&(this.bottom=c.z.number(o.bottom,u.bottom,p)),u.left!=null&&o.left!=null&&(this.left=c.z.number(o.left,u.left,p)),u.right!=null&&o.right!=null&&(this.right=c.z.number(o.right,u.right,p)),this}getCenter(o,u){const p=c.ac((this.left+o-this.right)/2,0,o),g=c.ac((this.top+u-this.bottom)/2,0,u);return new c.P(p,g)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new fc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Js=85.051129;class Qd{constructor(o,u,p,g,_){this.tileSize=512,this._renderWorldCopies=_===void 0||!!_,this._minZoom=o||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fc,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const o=new Qd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.apply(this),o}apply(o){this.tileSize=o.tileSize,this.latRange=o.latRange,this.width=o.width,this.height=o.height,this._center=o._center,this._elevation=o._elevation,this.minElevationForCurrentTile=o.minElevationForCurrentTile,this.zoom=o.zoom,this.angle=o.angle,this._fov=o._fov,this._pitch=o._pitch,this._unmodified=o._unmodified,this._edgeInsets=o._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){const u=-c.b2(o,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new c.A(4);return c.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,_){var S=g[0],C=g[1],M=g[2],k=g[3],B=Math.sin(_),F=Math.cos(_);p[0]=S*F+M*B,p[1]=C*F+k*B,p[2]=S*-B+M*F,p[3]=C*-B+k*F}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const u=c.ac(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){const u=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,u,p){this._unmodified=!1,this._edgeInsets.interpolate(o,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const u=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(o){const u=[new c.b3(0,o)];if(this._renderWorldCopies){const p=this.pointCoordinate(new c.P(0,0)),g=this.pointCoordinate(new c.P(this.width,0)),_=this.pointCoordinate(new c.P(this.width,this.height)),S=this.pointCoordinate(new c.P(0,this.height)),C=Math.floor(Math.min(p.x,g.x,_.x,S.x)),M=Math.floor(Math.max(p.x,g.x,_.x,S.x)),k=1;for(let B=C-k;B<=M+k;B++)B!==0&&u.push(new c.b3(B,o))}return u}coveringTiles(o){var u,p;let g=this.coveringZoomLevel(o);const _=g;if(o.minzoom!==void 0&&g<o.minzoom)return[];o.maxzoom!==void 0&&g>o.maxzoom&&(g=o.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),C=c.Y.fromLngLat(this.center),M=Math.pow(2,g),k=[M*S.x,M*S.y,0],B=[M*C.x,M*C.y,0],F=Ys.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let X=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=g);const te=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,oe=pe=>({aabb:new Lu([pe*M,0,0],[(pe+1)*M,M,0]),zoom:0,x:0,y:0,wrap:pe,fullyVisible:!1}),me=[],le=[],ve=g,be=o.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let pe=1;pe<=3;pe++)me.push(oe(-pe)),me.push(oe(pe));for(me.push(oe(0));me.length>0;){const pe=me.pop(),Ee=pe.x,Ie=pe.y;let ke=pe.fullyVisible;if(!ke){const Ke=pe.aabb.intersects(F);if(Ke===0)continue;ke=Ke===2}const Ne=o.terrain?k:B,Ge=pe.aabb.distanceX(Ne),ft=pe.aabb.distanceY(Ne),pt=Math.max(Math.abs(Ge),Math.abs(ft));if(pe.zoom===ve||pt>te+(1<<ve-pe.zoom)-2&&pe.zoom>=X){const Ke=ve-pe.zoom,Je=k[0]-.5-(Ee<<Ke),xt=k[1]-.5-(Ie<<Ke);le.push({tileID:new c.Q(pe.zoom===ve?be:pe.zoom,pe.wrap,pe.zoom,Ee,Ie),distanceSq:we([B[0]-.5-Ee,B[1]-.5-Ie]),tileDistanceToCamera:Math.sqrt(Je*Je+xt*xt)})}else for(let Ke=0;Ke<4;Ke++){const Je=(Ee<<1)+Ke%2,xt=(Ie<<1)+(Ke>>1),Ft=pe.zoom+1;let rt=pe.aabb.quadrant(Ke);if(o.terrain){const at=new c.Q(Ft,pe.wrap,Ft,Je,xt),Dt=o.terrain.getMinMaxElevation(at),Mr=(u=Dt.minElevation)!==null&&u!==void 0?u:this.elevation,Gt=(p=Dt.maxElevation)!==null&&p!==void 0?p:this.elevation;rt=new Lu([rt.min[0],rt.min[1],Mr],[rt.max[0],rt.max[1],Gt])}me.push({aabb:rt,zoom:Ft,x:Je,y:xt,wrap:pe.wrap,fullyVisible:ke})}}return le.sort((pe,Ee)=>pe.distanceSq-Ee.distanceSq).map(pe=>pe.tileID)}resize(o,u){this.width=o,this.height=u,this.pixelsToGLUnits=[2/o,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const u=c.ac(o.lat,-85.051129,Js);return new c.P(c.N(o.lng)*this.worldSize,c.O(u)*this.worldSize)}unproject(o){return new c.Y(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){const u=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,o),_=o.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-_))return;const S=p+u-_,C=Math.cos(this._pitch)*this.cameraToCenterDistance/S/c.b4(1,g.lat),M=this.scaleZoom(C/this.tileSize);this._elevation=_,this._center=g,this.zoom=M}setLocationAtPoint(o,u){const p=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(o),S=new c.Y(_.x-(p.x-g.x),_.y-(p.y-g.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,u){return u?this.coordinatePoint(this.locationCoordinate(o),u.getElevationForLngLatZoom(o,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,u){return this.coordinateLocation(this.pointCoordinate(o,u))}locationCoordinate(o){return c.Y.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,u){if(u){const X=u.pointCoordinate(o);if(X!=null)return X}const p=[o.x,o.y,0,1],g=[o.x,o.y,1,1];c.af(p,p,this.pixelMatrixInverse),c.af(g,g,this.pixelMatrixInverse);const _=p[3],S=g[3],C=p[1]/_,M=g[1]/S,k=p[2]/_,B=g[2]/S,F=k===B?0:(0-k)/(B-k);return new c.Y(c.z.number(p[0]/_,g[0]/S,F)/this.worldSize,c.z.number(C,M,F)/this.worldSize)}coordinatePoint(o,u=0,p=this.pixelMatrix){const g=[o.x*this.worldSize,o.y*this.worldSize,u,1];return c.af(g,g,p),new c.P(g[0]/g[3],g[1]/g[3])}getBounds(){const o=Math.max(0,this.height/2-this.getHorizon());return new Wt().extend(this.pointLocation(new c.P(0,o))).extend(this.pointLocation(new c.P(this.width,o))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Wt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Js])}calculatePosMatrix(o,u=!1){const p=o.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const _=o.canonical,S=this.worldSize/this.zoomScale(_.z),C=_.x+Math.pow(2,_.z)*o.wrap,M=c.an(new Float64Array(16));return c.H(M,M,[C*S,_.y*S,0]),c.J(M,M,[S/c.W,S/c.W,1]),c.K(M,u?this.alignedProjMatrix:this.projMatrix,M),g[p]=new Float32Array(M),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(o,u){u=c.ac(+u,this.minZoom,this.maxZoom);const p={center:new c.M(o.lng,o.lat),zoom:u};let g=this.lngRange;if(!this._renderWorldCopies&&g===null){const pe=179.9999999999;g=[-pe,pe]}const _=this.tileSize*this.zoomScale(p.zoom);let S=0,C=_,M=0,k=_,B=0,F=0;const{x:X,y:te}=this.size;if(this.latRange){const pe=this.latRange;S=c.O(pe[1])*_,C=c.O(pe[0])*_,C-S<te&&(B=te/(C-S))}g&&(M=c.b2(c.N(g[0])*_,0,_),k=c.b2(c.N(g[1])*_,0,_),k<M&&(k+=_),k-M<X&&(F=X/(k-M)));const{x:oe,y:me}=this.project.call({worldSize:_},o);let le,ve;const be=Math.max(F||0,B||0);if(be){const pe=new c.P(F?(k+M)/2:oe,B?(C+S)/2:me);return p.center=this.unproject.call({worldSize:_},pe).wrap(),p.zoom+=this.scaleZoom(be),p}if(this.latRange){const pe=te/2;me-pe<S&&(ve=S+pe),me+pe>C&&(ve=C-pe)}if(g){const pe=(M+k)/2;let Ee=oe;this._renderWorldCopies&&(Ee=c.b2(oe,pe-_/2,pe+_/2));const Ie=X/2;Ee-Ie<M&&(le=M+Ie),Ee+Ie>k&&(le=k-Ie)}if(le!==void 0||ve!==void 0){const pe=new c.P(le??oe,ve??me);p.center=this.unproject.call({worldSize:_},pe).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o=this._unmodified,{center:u,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=u,this.zoom=p,this._unmodified=o,this._constraining=!1}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b4(1,this.center.lat)*this.worldSize;let g=c.an(new Float64Array(16));c.J(g,g,[this.width/2,-this.height/2,1]),c.H(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=c.an(new Float64Array(16)),c.J(g,g,[1,-1,1]),c.H(g,g,[-1,-1,0]),c.J(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this.minElevationForCurrentTile),C=_-S*this._pixelPerMeter/Math.cos(this._pitch),M=S<0?C:_,k=Math.PI/2+this._pitch,B=this._fov*(.5+o.y/this.height),F=Math.sin(B)*M/Math.sin(c.ac(Math.PI-k-B,.01,Math.PI-.01)),X=this.getHorizon(),te=2*Math.atan(X/this.cameraToCenterDistance)*(.5+o.y/(2*X)),oe=Math.sin(te)*M/Math.sin(c.ac(Math.PI-k-te,.01,Math.PI-.01)),me=Math.min(F,oe),le=1.01*(Math.cos(Math.PI/2-this._pitch)*me+M),ve=this.height/50;g=new Float64Array(16),c.b5(g,this._fov,this.width/this.height,ve,le),g[8]=2*-o.x/this.width,g[9]=2*o.y/this.height,c.J(g,g,[1,-1,1]),c.H(g,g,[0,0,-this.cameraToCenterDistance]),c.b6(g,g,this._pitch),c.ad(g,g,this.angle),c.H(g,g,[-u,-p,0]),this.mercatorMatrix=c.J([],g,[this.worldSize,this.worldSize,this.worldSize]),c.J(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.K(new Float64Array(16),this.labelPlaneMatrix,g),c.H(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=c.as([],g),this.pixelMatrix3D=c.K(new Float64Array(16),this.labelPlaneMatrix,g);const be=this.width%2/2,pe=this.height%2/2,Ee=Math.cos(this.angle),Ie=Math.sin(this.angle),ke=u-Math.round(u)+Ee*be+Ie*pe,Ne=p-Math.round(p)+Ee*pe+Ie*be,Ge=new Float64Array(g);if(c.H(Ge,Ge,[ke>.5?ke-1:ke,Ne>.5?Ne-1:Ne,0]),this.alignedProjMatrix=Ge,g=c.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const o=this.pointCoordinate(new c.P(0,0)),u=[o.x*this.worldSize,o.y*this.worldSize,0,1];return c.af(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,o))}getCameraQueryGeometry(o){const u=this.getCameraPoint();if(o.length===1)return[o[0],u];{let p=u.x,g=u.y,_=u.x,S=u.y;for(const C of o)p=Math.min(p,C.x),g=Math.min(g,C.y),_=Math.max(_,C.x),S=Math.max(S,C.y);return[new c.P(p,g),new c.P(_,g),new c.P(_,S),new c.P(p,S),new c.P(p,g)]}}lngLatToCameraDepth(o,u){const p=this.locationCoordinate(o),g=[p.x*this.worldSize,p.y*this.worldSize,u,1];return c.af(g,g,this.projMatrix),g[2]/g[3]}}function t0(y,o){let u,p=!1,g=null,_=null;const S=()=>{g=null,p&&(y.apply(_,u),g=setTimeout(S,o),p=!1)};return(...C)=>(p=!0,_=this,u=C,g||S(),g)}class ef{constructor(o){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=t0(this._updateHashUnthrottled,300),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(o){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),S=Math.round(u.lng*_)/_,C=Math.round(u.lat*_)/_,M=this._map.getBearing(),k=this._map.getPitch();let B="";if(B+=o?`/${S}/${C}/${p}`:`${p}/${C}/${S}`,(M||k)&&(B+="/"+Math.round(10*M)/10),k&&(B+=`/${Math.round(k)}`),this._hashName){const F=this._hashName;let X=!1;const te=window.location.hash.slice(1).split("&").map(oe=>{const me=oe.split("=")[0];return me===F?(X=!0,`${me}=${B}`):oe}).filter(oe=>oe);return X||te.push(`${F}=${B}`),`#${te.join("&")}`}return`#${B}`}}const Du={linearity:.3,easing:c.b7(0,0,.3,1)},tf=c.e({deceleration:2500,maxSpeed:1400},Du),Ou=c.e({deceleration:20,maxSpeed:1400},Du),zu=c.e({deceleration:1e3,maxSpeed:360},Du),rf=c.e({deceleration:1e3,maxSpeed:90},Du);class nf{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:P.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,u=P.now();for(;o.length>0&&u-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const _=ds(u.pan.mag(),p,c.e({},tf,o||{}));g.offset=u.pan.mult(_.amount/u.pan.mag()),g.center=this._map.transform.center,pc(g,_)}if(u.zoom){const _=ds(u.zoom,p,Ou);g.zoom=this._map.transform.zoom+_.amount,pc(g,_)}if(u.bearing){const _=ds(u.bearing,p,zu);g.bearing=this._map.transform.bearing+c.ac(_.amount,-179,179),pc(g,_)}if(u.pitch){const _=ds(u.pitch,p,rf);g.pitch=this._map.transform.pitch+_.amount,pc(g,_)}if(g.zoom||g.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),c.e(g,{noMoveStart:!0})}}function pc(y,o){(!y.duration||y.duration<o.duration)&&(y.duration=o.duration,y.easing=o.easing)}function ds(y,o,u){const{maxSpeed:p,linearity:g,deceleration:_}=u,S=c.ac(y*g/(o/1e3),-p,p),C=Math.abs(S)/(_*g);return{easing:u.easing,duration:1e3*C,amount:S*(C/2)}}class Vn extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,u,p,g={}){const _=T.mousePos(u.getCanvas(),p),S=u.unproject(_);super(o,c.e({point:_,lngLat:S,originalEvent:p},g)),this._defaultPrevented=!1,this.target=u}}class fs extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,u,p){const g=o==="touchend"?p.changedTouches:p.touches,_=T.touchPos(u.getCanvasContainer(),g),S=_.map(M=>u.unproject(M)),C=_.reduce((M,k,B,F)=>M.add(k.div(F.length)),new c.P(0,0));super(o,{points:_,point:C,lngLats:S,lngLat:u.unproject(C),originalEvent:p}),this._defaultPrevented=!1}}class r0 extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,u,p){super(o,{originalEvent:p}),this._defaultPrevented=!1}}class of{constructor(o,u){this._map=o,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new r0(o.type,this._map,o))}mousedown(o,u){return this._mousedownPos=u,this._firePreventable(new Vn(o.type,this._map,o))}mouseup(o){this._map.fire(new Vn(o.type,this._map,o))}click(o,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Vn(o.type,this._map,o))}dblclick(o){return this._firePreventable(new Vn(o.type,this._map,o))}mouseover(o){this._map.fire(new Vn(o.type,this._map,o))}mouseout(o){this._map.fire(new Vn(o.type,this._map,o))}touchstart(o){return this._firePreventable(new fs(o.type,this._map,o))}touchmove(o){this._map.fire(new fs(o.type,this._map,o))}touchend(o){this._map.fire(new fs(o.type,this._map,o))}touchcancel(o){this._map.fire(new fs(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gv{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new Vn(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Vn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new Vn(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qs{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.pointLocation(c.P.convert(o),this._map.terrain)}}class mc{constructor(o,u){this._map=o,this._tr=new Qs(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,u){this.isEnabled()&&o.shiftKey&&o.button===0&&(T.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(o,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));const _=Math.min(g.x,p.x),S=Math.max(g.x,p.x),C=Math.min(g.y,p.y),M=Math.max(g.y,p.y);T.setTransform(this._box,`translate(${_}px,${C}px)`),this._box.style.width=S-_+"px",this._box.style.height=M-C+"px"}mouseupWindow(o,u){if(!this._active||o.button!==0)return;const p=this._startPos,g=u;if(this.reset(),T.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:o})),{cameraAnimation:_=>_.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,u){return this._map.fire(new c.k(o,{originalEvent:u}))}}function gc(y,o){if(y.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${o.length}`);const u={};for(let p=0;p<y.length;p++)u[y[p].identifier]=o[p];return u}class n0{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const _=new c.P(0,0);for(const S of g)_._add(S);return _.div(g.length)}(u),this.touches=gc(p,u)))}touchmove(o,u,p){if(this.aborted||!this.centroid)return;const g=gc(p,u);for(const _ in this.touches){const S=g[_];(!S||S.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(o,u,p){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Fu{constructor(o){this.singleTap=new n0(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,u,p){this.singleTap.touchstart(o,u,p)}touchmove(o,u,p){this.singleTap.touchmove(o,u,p)}touchend(o,u,p){const g=this.singleTap.touchend(o,u,p);if(g){const _=o.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(g)<30;if(_&&S||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Bu{constructor(o){this._tr=new Qs(o),this._zoomIn=new Fu({numTouches:1,numTaps:2}),this._zoomOut=new Fu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,u,p){this._zoomIn.touchstart(o,u,p),this._zoomOut.touchstart(o,u,p)}touchmove(o,u,p){this._zoomIn.touchmove(o,u,p),this._zoomOut.touchmove(o,u,p)}touchend(o,u,p){const g=this._zoomIn.touchend(o,u,p),_=this._zoomOut.touchend(o,u,p),S=this._tr;return g?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(g)},{originalEvent:o})}):_?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(_)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ps{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){const u=this._moveFunction(...o);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(o,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);const g=u.length?u[0]:u;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&T.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const yv={0:1,2:2};class Nu{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){const u=T.mouseButton(o);this._eventButton=u}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(u,p){const g=yv[p];return u.buttons===void 0||(u.buttons&g)!==g}(o,this._eventButton)}isValidEndEvent(o){return T.mouseButton(o)===this._eventButton}}class Ur{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}const la=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=o=>{o.preventDefault()}},Li=({enable:y,clickTolerance:o,bearingDegreesPerPixelMoved:u=.8})=>{const p=new Nu({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new ps({clickTolerance:o,move:(g,_)=>({bearingDelta:(_.x-g.x)*u}),moveStateManager:p,enable:y,assignEvents:la})},ju=({enable:y,clickTolerance:o,pitchDegreesPerPixelMoved:u=-.5})=>{const p=new Nu({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new ps({clickTolerance:o,move:(g,_)=>({pitchDelta:(_.y-g.y)*u}),moveStateManager:p,enable:y,assignEvents:la})};class af{constructor(o,u){this._clickTolerance=o.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(o,u,p){return this._calculateTransform(o,u,p)}touchmove(o,u,p){if(this._active&&!(p.length<this.minTouchs()))return o.preventDefault(),this._calculateTransform(o,u,p)}touchend(o,u,p){this._calculateTransform(o,u,p),this._active&&p.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,u,p){p.length>0&&(this._active=!0);const g=gc(p,u),_=new c.P(0,0),S=new c.P(0,0);let C=0;for(const k in g){const B=g[k],F=this._touches[k];F&&(_._add(B),S._add(B.sub(F)),C++,g[k]=B)}if(this._touches=g,C<this.minTouchs()||!S.mag())return;const M=S.div(C);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(C),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $u{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(o,u,p){if(!this._firstTwoTouches)return;o.preventDefault();const[g,_]=this._firstTwoTouches,S=ca(p,u,g),C=ca(p,u,_);if(!S||!C)return;const M=this._aroundCenter?null:S.add(C).div(2);return this._move([S,C],M,o)}touchend(o,u,p){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,S=ca(p,u,g),C=ca(p,u,_);S&&C||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ca(y,o,u){for(let p=0;p<y.length;p++)if(y[p].identifier===u)return o[p]}function el(y,o){return Math.log(y/o)/Math.LN2}class Vu extends $u{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,u){const p=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(el(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:el(this._distance,p),pinchAround:u}}}function sf(y,o){return 180*y.angleWith(o)/Math.PI}class lf extends $u{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,u,p){const g=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:sf(this._vector,g),pinchAround:u}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const u=25/(Math.PI*this._minDiameter)*360,p=sf(o,this._startVector);return Math.abs(p)<u}}function Uu(y){return Math.abs(y.y)>Math.abs(y.x)}class cf extends $u{constructor(o){super(),this._currentTouchCount=0,this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,u,p){super.touchstart(o,u,p),this._currentTouchCount=p.length}_start(o){this._lastPoints=o,Uu(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,u,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=o[0].sub(this._lastPoints[0]),_=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,p.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(o,u,p){if(this._valid!==void 0)return this._valid;const g=o.mag()>=2,_=u.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const S=o.y>0==u.y>0;return Uu(o)&&Uu(u)&&S}}const i0={panStep:100,bearingStep:15,pitchStep:10};class Oa{constructor(o){this._tr=new Qs(o);const u=i0;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let u=0,p=0,g=0,_=0,S=0;switch(o.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:o.shiftKey?p=-1:(o.preventDefault(),_=-1);break;case 39:o.shiftKey?p=1:(o.preventDefault(),_=1);break;case 38:o.shiftKey?g=1:(o.preventDefault(),S=-1);break;case 40:o.shiftKey?g=-1:(o.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:C=>{const M=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:o0,zoom:u?Math.round(M.zoom)+u*(o.shiftKey?2:1):M.zoom,bearing:M.bearing+p*this._bearingStep,pitch:M.pitch+g*this._pitchStep,offset:[-_*this._panStep,-S*this._panStep],center:M.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function o0(y){return y*(2-y)}const uf=4.000244140625;class hf{constructor(o,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=o,this._tr=new Qs(o),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(o){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!o[this._map.cooperativeGestures._bypassKey])return;let u=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const p=P.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%uf==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),o.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=o,this._delta-=u,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=T.mousePos(this._map.getCanvas(),o),p=this._tr;this._around=u.y>p.transform.height/2-p.transform.getHorizon()?c.M.convert(this._aroundCenter?p.center:p.unproject(u)):c.M.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._tr.transform;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>uf?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&M!==0&&(M=1/M);const k=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(k*M))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,p=this._startZoom,g=this._easing;let _,S=!1;if(this._type==="wheel"&&p&&g){const C=Math.min((P.now()-this._lastWheelEventTime)/200,1),M=g(C);_=c.z.number(p,u,M),C<1?this._frameId||(this._frameId=!0):S=!0}else _=u,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:_-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let u=c.b8;if(this._prevEase){const p=this._prevEase,g=(P.now()-p.start)/p.duration,_=p.easing(g+.01)-p.easing(g),S=.27/Math.sqrt(_*_+1e-4)*.01,C=Math.sqrt(.0729-S*S);u=c.b7(S,C,.25,1)}return this._prevEase={start:P.now(),duration:o,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class df{constructor(o,u){this._clickZoom=o,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class a0{constructor(o){this._tr=new Qs(o),this.reset()}reset(){this._active=!1}dblclick(o,u){return o.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class s0{constructor(){this._tap=new Fu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,u,p){if(!this._swipePoint)if(this._tapTime){const g=u[0],_=o.timeStamp-this._tapTime<500,S=this._tapPoint.dist(g)<30;_&&S?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(o,u,p)}touchmove(o,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=u[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,o.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(o,u,p)}touchend(o,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(o,u,p);g&&(this._tapTime=o.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ff{constructor(o,u,p){this._el=o,this._mousePan=u,this._touchPan=p}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class tl{constructor(o,u,p){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class pf{constructor(o,u,p,g){this._el=o,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Hi{constructor(o,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=o,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const o=this._map.getCanvasContainer();o.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",o);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=u,this._container.appendChild(g);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=p,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(o){this._onCooperativeGesture(o.touches.length===1)}wheel(o){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!o[this._bypassKey])}_onCooperativeGesture(o){this._enabled&&o&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Di=y=>y.zoom||y.drag||y.pitch||y.rotate;class l0 extends c.k{}function Wi(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class yc{constructor(o,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=g.type==="renderFrame"?void 0:g,C={needsRenderFrame:!1},M={},k={},B=g.touches,F=B?this._getMapTouches(B):void 0,X=F?T.touchPos(this._map.getCanvas(),F):T.mousePos(this._map.getCanvas(),g);for(const{handlerName:me,handler:le,allowed:ve}of this._handlers){if(!le.isEnabled())continue;let be;this._blockedByActive(k,ve,me)?le.reset():le[_||g.type]&&(be=le[_||g.type](g,X,F),this.mergeHandlerResult(C,M,be,me,S),be&&be.needsRenderFrame&&this._triggerRenderFrame()),(be||le.isActive())&&(k[me]=le)}const te={};for(const me in this._previousActiveHandlers)k[me]||(te[me]=S);this._previousActiveHandlers=k,(Object.keys(te).length||Wi(C))&&(this._changes.push([C,M,te]),this._triggerRenderFrame()),(Object.keys(k).length||Wi(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:oe}=C;oe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],oe(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new nf(o),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,S]of this._listeners)T.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[o,u,p]of this._listeners)T.removeEventListener(o,u,o===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(o){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new of(u,o));const g=u.boxZoom=new mc(u,o);this._add("boxZoom",g),o.interactive&&o.boxZoom&&g.enable();const _=u.cooperativeGestures=new Hi(u,o.cooperativeGestures);this._add("cooperativeGestures",_),o.cooperativeGestures&&_.enable();const S=new Bu(u),C=new a0(u);u.doubleClickZoom=new df(C,S),this._add("tapZoom",S),this._add("clickZoom",C),o.interactive&&o.doubleClickZoom&&u.doubleClickZoom.enable();const M=new s0;this._add("tapDragZoom",M);const k=u.touchPitch=new cf(u);this._add("touchPitch",k),o.interactive&&o.touchPitch&&u.touchPitch.enable(o.touchPitch);const B=Li(o),F=ju(o);u.dragRotate=new tl(o,B,F),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]),o.interactive&&o.dragRotate&&u.dragRotate.enable();const X=(({enable:be,clickTolerance:pe})=>{const Ee=new Nu({checkCorrectEvent:Ie=>T.mouseButton(Ie)===0&&!Ie.ctrlKey});return new ps({clickTolerance:pe,move:(Ie,ke)=>({around:ke,panDelta:ke.sub(Ie)}),activateOnStart:!0,moveStateManager:Ee,enable:be,assignEvents:la})})(o),te=new af(o,u);u.dragPan=new ff(p,X,te),this._add("mousePan",X),this._add("touchPan",te,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&u.dragPan.enable(o.dragPan);const oe=new lf,me=new Vu;u.touchZoomRotate=new pf(p,me,oe,M),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",me,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&u.touchZoomRotate.enable(o.touchZoomRotate);const le=u.scrollZoom=new hf(u,()=>this._triggerRenderFrame());this._add("scrollZoom",le,["mousePan"]),o.interactive&&o.scrollZoom&&u.scrollZoom.enable(o.scrollZoom);const ve=u.keyboard=new Oa(u);this._add("keyboard",ve),o.interactive&&o.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new gv(u))}_add(o,u,p){this._handlers.push({handlerName:o,handler:u,allowed:p}),this._handlersById[o]=u}stop(o){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Di(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,u,p){for(const g in o)if(g!==p&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(o){const u=[];for(const p of o)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(o,u,p,g,_){if(!p)return;c.e(o,p);const S={handlerName:g,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(u.zoom=S),p.panDelta!==void 0&&(u.drag=S),p.pitchDelta!==void 0&&(u.pitch=S),p.bearingDelta!==void 0&&(u.rotate=S)}_applyChanges(){const o={},u={},p={};for(const[g,_,S]of this._changes)g.panDelta&&(o.panDelta=(o.panDelta||new c.P(0,0))._add(g.panDelta)),g.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(o.around=g.around),g.pinchAround!==void 0&&(o.pinchAround=g.pinchAround),g.noInertia&&(o.noInertia=g.noInertia),c.e(u,_),c.e(p,S);this._updateMapTransform(o,u,p),this._changes=[]}_updateMapTransform(o,u,p){const g=this._map,_=g._getTransformForUpdate(),S=g.terrain;if(!(Wi(o)||S&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:C,zoomDelta:M,bearingDelta:k,pitchDelta:B,around:F,pinchAround:X}=o;X!==void 0&&(F=X),g._stop(!0),F=F||g.transform.centerPoint;const te=_.pointLocation(C?F.sub(C):F);k&&(_.bearing+=k),B&&(_.pitch+=B),M&&(_.zoom+=M),S?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(C)):_.setLocationAtPoint(te,F):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(te,F)):_.setLocationAtPoint(te,F),g._applyUpdatedTransform(_),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(u,p,!0)}_fireEvents(o,u,p){const g=Di(this._eventsInProgress),_=Di(o),S={};for(const F in o){const{originalEvent:X}=o[F];this._eventsInProgress[F]||(S[`${F}start`]=X),this._eventsInProgress[F]=o[F]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const F in S)this._fireEvent(F,S[F]);_&&this._fireEvent("move",_.originalEvent);for(const F in o){const{originalEvent:X}=o[F];this._fireEvent(F,X)}const C={};let M;for(const F in this._eventsInProgress){const{handlerName:X,originalEvent:te}=this._eventsInProgress[F];this._handlersById[X].isActive()||(delete this._eventsInProgress[F],M=u[X]||te,C[`${F}end`]=M)}for(const F in C)this._fireEvent(F,C[F]);const k=Di(this._eventsInProgress),B=(g||_)&&!k;if(B&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),p&&B){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;!F||!F.essential&&P.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:M})),X(this._map.getBearing())&&this._map.resetNorth()):(X(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(o,u){this._map.fire(new c.k(o,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new l0("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class vv extends c.E{constructor(o,u){super(),this._renderFrameCallback=()=>{const p=Math.min((P.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.M(this.transform.center.lng,this.transform.center.lat)}setCenter(o,u){return this.jumpTo({center:o},u)}panBy(o,u,p){return o=c.P.convert(o).mult(-1),this.panTo(this.transform.center,c.e({offset:o},u),p)}panTo(o,u,p){return this.easeTo(c.e({center:o},u),p)}getZoom(){return this.transform.zoom}setZoom(o,u){return this.jumpTo({zoom:o},u),this}zoomTo(o,u,p){return this.easeTo(c.e({zoom:o},u),p)}zoomIn(o,u){return this.zoomTo(this.getZoom()+1,o,u),this}zoomOut(o,u){return this.zoomTo(this.getZoom()-1,o,u),this}getBearing(){return this.transform.bearing}setBearing(o,u){return this.jumpTo({bearing:o},u),this}getPadding(){return this.transform.padding}setPadding(o,u){return this.jumpTo({padding:o},u),this}rotateTo(o,u,p){return this.easeTo(c.e({bearing:o},u),p)}resetNorth(o,u){return this.rotateTo(0,c.e({duration:1e3},o),u),this}resetNorthPitch(o,u){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},o),u),this}snapToNorth(o,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,u):this}getPitch(){return this.transform.pitch}setPitch(o,u){return this.jumpTo({pitch:o},u),this}cameraForBounds(o,u){o=Wt.convert(o);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),p,u)}_cameraForBoxAndBearing(o,u,p,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=c.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Ke=g.padding;g.padding={top:Ke,bottom:Ke,right:Ke,left:Ke}}g.padding=c.e(_,g.padding);const S=this.transform,C=S.padding,M=new Wt(o,u),k=S.project(M.getNorthWest()),B=S.project(M.getNorthEast()),F=S.project(M.getSouthEast()),X=S.project(M.getSouthWest()),te=c.b9(-p),oe=k.rotate(te),me=B.rotate(te),le=F.rotate(te),ve=X.rotate(te),be=new c.P(Math.max(oe.x,me.x,ve.x,le.x),Math.max(oe.y,me.y,ve.y,le.y)),pe=new c.P(Math.min(oe.x,me.x,ve.x,le.x),Math.min(oe.y,me.y,ve.y,le.y)),Ee=be.sub(pe),Ie=(S.width-(C.left+C.right+g.padding.left+g.padding.right))/Ee.x,ke=(S.height-(C.top+C.bottom+g.padding.top+g.padding.bottom))/Ee.y;if(ke<0||Ie<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ne=Math.min(S.scaleZoom(S.scale*Math.min(Ie,ke)),g.maxZoom),Ge=c.P.convert(g.offset),ft=new c.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(c.b9(p)),pt=Ge.add(ft).mult(S.scale/S.zoomScale(Ne));return{center:S.unproject(k.add(F).div(2).sub(pt)),zoom:Ne,bearing:p}}fitBounds(o,u,p){return this._fitInternal(this.cameraForBounds(o,u),u,p)}fitScreenCoordinates(o,u,p,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(o)),this.transform.pointLocation(c.P.convert(u)),p,g),g,_)}_fitInternal(o,u,p){return o?(delete(u=c.e(o,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(o,u){this.stop();const p=this._getTransformForUpdate();let g=!1,_=!1,S=!1;return"zoom"in o&&p.zoom!==+o.zoom&&(g=!0,p.zoom=+o.zoom),o.center!==void 0&&(p.center=c.M.convert(o.center)),"bearing"in o&&p.bearing!==+o.bearing&&(_=!0,p.bearing=+o.bearing),"pitch"in o&&p.pitch!==+o.pitch&&(S=!0,p.pitch=+o.pitch),o.padding==null||p.isPaddingEqual(o.padding)||(p.padding=o.padding),this._applyUpdatedTransform(p),this.fire(new c.k("movestart",u)).fire(new c.k("move",u)),g&&this.fire(new c.k("zoomstart",u)).fire(new c.k("zoom",u)).fire(new c.k("zoomend",u)),_&&this.fire(new c.k("rotatestart",u)).fire(new c.k("rotate",u)).fire(new c.k("rotateend",u)),S&&this.fire(new c.k("pitchstart",u)).fire(new c.k("pitch",u)).fire(new c.k("pitchend",u)),this.fire(new c.k("moveend",u))}calculateCameraOptionsFromTo(o,u,p,g=0){const _=c.Y.fromLngLat(o,u),S=c.Y.fromLngLat(p,g),C=S.x-_.x,M=S.y-_.y,k=S.z-_.z,B=Math.hypot(C,M,k);if(B===0)throw new Error("Can't calculate camera options with same From and To");const F=Math.hypot(C,M),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/B/this.transform.tileSize),te=180*Math.atan2(C,-M)/Math.PI;let oe=180*Math.acos(F/B)/Math.PI;return oe=k<0?90-oe:90+oe,{center:S.toLngLat(),zoom:X,pitch:oe,bearing:te}}easeTo(o,u){var p;this._stop(!1,o.easeId),((o=c.e({offset:[0,0],duration:500,easing:c.b8},o)).animate===!1||!o.essential&&P.prefersReducedMotion)&&(o.duration=0);const g=this._getTransformForUpdate(),_=this.getZoom(),S=this.getBearing(),C=this.getPitch(),M=this.getPadding(),k="bearing"in o?this._normalizeBearing(o.bearing,S):S,B="pitch"in o?+o.pitch:C,F="padding"in o?o.padding:g.padding,X=c.P.convert(o.offset);let te=g.centerPoint.add(X);const oe=g.pointLocation(te),{center:me,zoom:le}=g.getConstrained(c.M.convert(o.center||oe),(p=o.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(me);const ve=g.project(oe),be=g.project(me).sub(ve),pe=g.zoomScale(le-_);let Ee,Ie;o.around&&(Ee=c.M.convert(o.around),Ie=g.locationPoint(Ee));const ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||le!==_,this._rotating=this._rotating||S!==k,this._pitching=this._pitching||B!==C,this._padding=!g.isPaddingEqual(F),this._easeId=o.easeId,this._prepareEase(u,o.noMoveStart,ke),this.terrain&&this._prepareElevation(me),this._ease(Ne=>{if(this._zooming&&(g.zoom=c.z.number(_,le,Ne)),this._rotating&&(g.bearing=c.z.number(S,k,Ne)),this._pitching&&(g.pitch=c.z.number(C,B,Ne)),this._padding&&(g.interpolatePadding(M,F,Ne),te=g.centerPoint.add(X)),this.terrain&&!o.freezeElevation&&this._updateElevation(Ne),Ee)g.setLocationAtPoint(Ee,Ie);else{const Ge=g.zoomScale(g.zoom-_),ft=le>_?Math.min(2,pe):Math.max(.5,pe),pt=Math.pow(ft,1-Ne),Ke=g.unproject(ve.add(be.mult(Ne*pt)).mult(Ge));g.setLocationAtPoint(g.renderWorldCopies?Ke.wrap():Ke,te)}this._applyUpdatedTransform(g),this._fireMoveEvents(u)},Ne=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(u,Ne)},o),this}_prepareEase(o,u,p={}){this._moving=!0,u||p.moving||this.fire(new c.k("movestart",o)),this._zooming&&!p.zooming&&this.fire(new c.k("zoomstart",o)),this._rotating&&!p.rotating&&this.fire(new c.k("rotatestart",o)),this._pitching&&!p.pitching&&this.fire(new c.k("pitchstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(p-(u-(p*o+this._elevationStart))/(1-o)),this._elevationTarget=u}this.transform.elevation=c.z.number(this._elevationStart,this._elevationTarget,o)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(o){if(!this.transformCameraUpdate)return;const u=o.clone(),{center:p,zoom:g,pitch:_,bearing:S,elevation:C}=this.transformCameraUpdate(u);p&&(u.center=p),g!==void 0&&(u.zoom=g),_!==void 0&&(u.pitch=_),S!==void 0&&(u.bearing=S),C!==void 0&&(u.elevation=C),this.transform.apply(u)}_fireMoveEvents(o){this.fire(new c.k("move",o)),this._zooming&&this.fire(new c.k("zoom",o)),this._rotating&&this.fire(new c.k("rotate",o)),this._pitching&&this.fire(new c.k("pitch",o))}_afterEase(o,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new c.k("zoomend",o)),g&&this.fire(new c.k("rotateend",o)),_&&this.fire(new c.k("pitchend",o)),this.fire(new c.k("moveend",o))}flyTo(o,u){var p;if(!o.essential&&P.prefersReducedMotion){const at=c.L(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(at,u)}this.stop(),o=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.b8},o);const g=this._getTransformForUpdate(),_=this.getZoom(),S=this.getBearing(),C=this.getPitch(),M=this.getPadding(),k="bearing"in o?this._normalizeBearing(o.bearing,S):S,B="pitch"in o?+o.pitch:C,F="padding"in o?o.padding:g.padding,X=c.P.convert(o.offset);let te=g.centerPoint.add(X);const oe=g.pointLocation(te),{center:me,zoom:le}=g.getConstrained(c.M.convert(o.center||oe),(p=o.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(me);const ve=g.zoomScale(le-_),be=g.project(oe),pe=g.project(me).sub(be);let Ee=o.curve;const Ie=Math.max(g.width,g.height),ke=Ie/ve,Ne=pe.mag();if("minZoom"in o){const at=c.ac(Math.min(o.minZoom,_,le),g.minZoom,g.maxZoom),Dt=Ie/g.zoomScale(at-_);Ee=Math.sqrt(Dt/Ne*2)}const Ge=Ee*Ee;function ft(at){const Dt=(ke*ke-Ie*Ie+(at?-1:1)*Ge*Ge*Ne*Ne)/(2*(at?ke:Ie)*Ge*Ne);return Math.log(Math.sqrt(Dt*Dt+1)-Dt)}function pt(at){return(Math.exp(at)-Math.exp(-at))/2}function Ke(at){return(Math.exp(at)+Math.exp(-at))/2}const Je=ft(!1);let xt=function(at){return Ke(Je)/Ke(Je+Ee*at)},Ft=function(at){return Ie*((Ke(Je)*(pt(Dt=Je+Ee*at)/Ke(Dt))-pt(Je))/Ge)/Ne;var Dt},rt=(ft(!0)-Je)/Ee;if(Math.abs(Ne)<1e-6||!isFinite(rt)){if(Math.abs(Ie-ke)<1e-6)return this.easeTo(o,u);const at=ke<Ie?-1:1;rt=Math.abs(Math.log(ke/Ie))/Ee,Ft=()=>0,xt=Dt=>Math.exp(at*Ee*Dt)}return o.duration="duration"in o?+o.duration:1e3*rt/("screenSpeed"in o?+o.screenSpeed/Ee:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=S!==k,this._pitching=B!==C,this._padding=!g.isPaddingEqual(F),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(me),this._ease(at=>{const Dt=at*rt,Mr=1/xt(Dt);g.zoom=at===1?le:_+g.scaleZoom(Mr),this._rotating&&(g.bearing=c.z.number(S,k,at)),this._pitching&&(g.pitch=c.z.number(C,B,at)),this._padding&&(g.interpolatePadding(M,F,at),te=g.centerPoint.add(X)),this.terrain&&!o.freezeElevation&&this._updateElevation(at);const Gt=at===1?me:g.unproject(be.add(pe.mult(Ft(Dt))).mult(Mr));g.setLocationAtPoint(g.renderWorldCopies?Gt.wrap():Gt,te),this._applyUpdatedTransform(g),this._fireMoveEvents(u)},()=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,u){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,u)}return o||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(o,u,p){p.animate===!1||p.duration===0?(o(1),u()):(this._easeStart=P.now(),this._easeOptions=p,this._onEaseFrame=o,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,u){o=c.b2(o,-180,180);const p=Math.abs(o-u);return Math.abs(o-360-u)<p&&(o-=360),Math.abs(o+360-u)<p&&(o+=360),o}_normalizeCenter(o){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=o.lng-u.center.lng;o.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(c.M.convert(o),this.transform.tileZoom)-this.transform.elevation:null}}const c0={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class u0{constructor(o=c0){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,u){const p=this._map._getUIString(`AttributionControl.${u}`);o.title=p,o.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const _=u[g];if(_.used||_.usedForTerrain){const S=_.getSource();S.attribution&&o.indexOf(S.attribution)<0&&o.push(S.attribution)}}o=o.filter(g=>String(g).trim()),o.sort((g,_)=>g.length-_.length),o=o.filter((g,_)=>{for(let S=_+1;S<o.length;S++)if(o[S].indexOf(g)>=0)return!1;return!0});const p=o.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,o.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class mf{constructor(o={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const u=T.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class vc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const u=++this._id;return this._queue.push({callback:o,id:u,cancelled:!1}),u}remove(o){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const g of p)if(g.id===o)return void(g.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var za=c.X([{name:"a_pos3d",type:"Int16",components:3}]);class yt extends c.E{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,o.usedForTerrain=!0,o.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,u){this.sourceCache.update(o,u),this._renderableTilesKeys=[];const p={};for(const g of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),c.aO(g.posMatrix,0,c.W,0,c.W,0,1),this._tiles[g.key]=new Nn(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(o){for(const u in this._tiles){const p=this._tiles[u];(!o||p.tileID.equals(o)||p.tileID.isChildOf(o)||o.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){const u={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(o.canonical)){const _=o.clone();_.posMatrix=new Float64Array(16),c.aO(_.posMatrix,0,c.W,0,c.W,0,1),u[p]=_}else if(g.canonical.isChildOf(o.canonical)){const _=o.clone();_.posMatrix=new Float64Array(16);const S=g.canonical.z-o.canonical.z,C=g.canonical.x-(g.canonical.x>>S<<S),M=g.canonical.y-(g.canonical.y>>S<<S),k=c.W>>S;c.aO(_.posMatrix,0,k,0,k,0,1),c.H(_.posMatrix,_.posMatrix,[-C*k,-M*k,0]),u[p]=_}else if(o.canonical.isChildOf(g.canonical)){const _=o.clone();_.posMatrix=new Float64Array(16);const S=o.canonical.z-g.canonical.z,C=o.canonical.x-(o.canonical.x>>S<<S),M=o.canonical.y-(o.canonical.y>>S<<S),k=c.W>>S;c.aO(_.posMatrix,0,c.W,0,c.W,0,1),c.H(_.posMatrix,_.posMatrix,[C*k,M*k,0]),c.J(_.posMatrix,_.posMatrix,[1/2**S,1/2**S,0]),u[p]=_}}return u}getSourceTile(o,u){const p=this.sourceCache._source;let g=o.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!_||!_.dem)&&u)for(;g>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(o.scaledTo(g--).key);return _}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=o)}}class h0{constructor(o,u,p){this.painter=o,this.sourceCache=new yt(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,u,p,g=c.W){var _;if(!(u>=0&&u<g&&p>=0&&p<g))return 0;const S=this.getTerrainData(o),C=(_=S.tile)===null||_===void 0?void 0:_.dem;if(!C)return 0;const M=function(oe,me,le){var ve=me[0],be=me[1];return oe[0]=le[0]*ve+le[4]*be+le[12],oe[1]=le[1]*ve+le[5]*be+le[13],oe}([],[u/g*c.W,p/g*c.W],S.u_terrain_matrix),k=[M[0]*C.dim,M[1]*C.dim],B=Math.floor(k[0]),F=Math.floor(k[1]),X=k[0]-B,te=k[1]-F;return C.get(B,F)*(1-X)*(1-te)+C.get(B+1,F)*X*(1-te)+C.get(B,F+1)*(1-X)*te+C.get(B+1,F+1)*X*te}getElevationForLngLatZoom(o,u){const{tileID:p,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(o,u);return this.getElevation(p,g%c.W,_%c.W,c.W)}getElevation(o,u,p,g=c.W){return this.getDEMElevation(o,u,p,g)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const g=this.painter.context,_=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Oe(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Oe(g,new c.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.an([])}const u=this.sourceCache.getSourceTile(o,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new Oe(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+o.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=o.canonical.z-u.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=g?_=o.canonical.z-g:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=o.canonical.x-(o.canonical.x>>_<<_),C=o.canonical.y-(o.canonical.y>>_<<_),M=c.ba(new Float64Array(16),[1/(c.W<<_),1/(c.W<<_),0]);c.H(M,M,[S*c.W,C*c.W,0]),this._demMatrixCache[o.key]={matrix:M,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(o){const u=this.painter,p=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Oe(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Oe(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,S=0;_<this._coordsTextureSize;_++)for(let C=0;C<this._coordsTextureSize;C++,S+=4)u[S+0]=255&C,u[S+1]=255&_,u[S+2]=C>>8<<4|_>>8,u[S+3]=0;const p=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new Oe(o,p,o.gl.RGBA,{premultiply:!1});return g.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(o){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),p=this.painter.context,g=p.gl,_=Math.round(o.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(o.y*this.painter.pixelRatio/devicePixelRatio),C=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(_,C-S-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const M=u[0]+(u[2]>>4<<8),k=u[1]+((15&u[2])<<8),B=this.coordsIndex[255-u[3]],F=B&&this.sourceCache.getTileByID(B);if(!F)return null;const X=this._coordsTextureSize,te=(1<<F.tileID.canonical.z)*X;return new c.Y((F.tileID.canonical.x*X+M)/te+F.tileID.wrap,(F.tileID.canonical.y*X+k)/te,this.getElevation(F.tileID,M,k,X))}depthAtPoint(o){const u=new Uint8Array(4),p=this.painter.context,g=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const o=this.painter.context,u=new c.bb,p=new c.aY,g=this.meshSize,_=c.W/g,S=g*g;for(let F=0;F<=g;F++)for(let X=0;X<=g;X++)u.emplaceBack(X*_,F*_,0);for(let F=0;F<S;F+=g+1)for(let X=0;X<g;X++)p.emplaceBack(X+F,g+X+F+1,g+X+F+2),p.emplaceBack(X+F,g+X+F+2,X+F+1);const C=u.length,M=C+2*(g+1);for(const F of[0,1])for(let X=0;X<=g;X++)for(const te of[0,1])u.emplaceBack(X*_,F*c.W,te);for(let F=0;F<2*g;F+=2)p.emplaceBack(M+F,M+F+1,M+F+3),p.emplaceBack(M+F,M+F+3,M+F+2),p.emplaceBack(C+F,C+F+3,C+F+1),p.emplaceBack(C+F,C+F+2,C+F+3);const k=u.length,B=k+2*(g+1);for(const F of[0,1])for(let X=0;X<=g;X++)for(const te of[0,1])u.emplaceBack(F*c.W,X*_,te);for(let F=0;F<2*g;F+=2)p.emplaceBack(k+F,k+F+1,k+F+3),p.emplaceBack(k+F,k+F+3,k+F+2),p.emplaceBack(B+F,B+F+3,B+F+1),p.emplaceBack(B+F,B+F+2,B+F+3);return this._mesh={indexBuffer:o.createIndexBuffer(p),vertexBuffer:o.createVertexBuffer(u,za.members),segments:c.$.simpleSegment(0,0,u.length,p.length)},this._mesh}getMeshFrameDelta(o){return 2*Math.PI*c.bc/Math.pow(2,o)/5}getMinTileElevationForLngLatZoom(o,u){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(o,u);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(o){const u=this.getTerrainData(o).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(o,u){const p=c.Y.fromLngLat(o.wrap()),g=(1<<u)*c.W,_=p.x*g,S=p.y*g,C=Math.floor(_/c.W),M=Math.floor(S/c.W);return{tileID:new c.Q(u,0,u,C,M),mercatorX:_,mercatorY:S}}}class _c{constructor(o,u,p){this._context=o,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new Oe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:o,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>o.id!==u),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(const o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}const Lo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class d0{constructor(o,u){this.painter=o,this.terrain=u,this.pool=new _c(o.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(p=>!o._layers[p].isHidden(u)),this._coordsDescendingInv={};for(const p in o.sourceCaches){this._coordsDescendingInv[p]={};const g=o.sourceCaches[p].getVisibleCoordinates();for(const _ of g){const S=this.terrain.sourceCache.getTerrainCoords(_);for(const C in S)this._coordsDescendingInv[p][C]||(this._coordsDescendingInv[p][C]=[]),this._coordsDescendingInv[p][C].push(S[C])}}this._coordsDescendingInvStr={};for(const p of o._order){const g=o._layers[p],_=g.source;if(Lo[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const S in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][S]=this._coordsDescendingInv[_][S].map(C=>C.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][p.tileID.key];_&&_!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(o){if(o.isHidden(this.painter.transform.zoom))return!1;const u=o.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(Lo[u]&&(this._prevType&&Lo[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(o.id),!g))return!0;if(Lo[this._prevType]||Lo[u]&&g){this._prevType=u;const _=this._stacks.length-1,S=this._stacks[_]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(ku(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[_]){const k=this.pool.getObjectForId(C.rtt[_].id);if(k.stamp===C.rtt[_].stamp){this.pool.useObject(k);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),C.rtt[_]={id:M.id,stamp:M.stamp},p.context.bindFramebuffer.set(M.fbo.framebuffer),p.context.clear({color:c.aP.transparent,stencil:0}),p.currentStencilSource=void 0;for(let k=0;k<S.length;k++){const B=p.style._layers[S[k]],F=B.source?this._coordsDescendingInv[B.source][C.tileID.key]:[C.tileID];p.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),p._renderTileClippingMasks(B,F),p.renderLayer(p,p.style.sourceCaches[B.source],B,F),B.source&&(C.rttCoords[B.source]=this._coordsDescendingInvStr[B.source][C.tileID.key])}}return ku(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Lo[u]}return!1}}const ut={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},gf=b,_v={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:c0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},f0=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},yf={showCompass:!0,showZoom:!0,visualizePitch:!1};class p0{constructor(o,u,p=!1){this.mousedown=S=>{this.startMouse(c.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),T.mousePos(this.element,S)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,T.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=o.dragRotate._mouseRotate.getClickTolerance(),_=o.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Li({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:C,bearingDegreesPerPixelMoved:M=.8})=>{const k=new Ur;return new ps({clickTolerance:C,move:(B,F)=>({bearingDelta:(F.x-B.x)*M}),moveStateManager:k,enable:S,assignEvents:f0})})({clickTolerance:g,enable:!0}),this.map=o,p&&(this.mousePitch=ju({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:C,pitchDegreesPerPixelMoved:M=-.5})=>{const k=new Ur;return new ps({clickTolerance:C,move:(B,F)=>({pitchDelta:(F.y-B.y)*M}),moveStateManager:k,enable:S,assignEvents:f0})})({clickTolerance:_,enable:!0})),T.addEventListener(u,"mousedown",this.mousedown),T.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(u,"touchcancel",this.reset)}startMouse(o,u){this.mouseRotate.dragStart(o,u),this.mousePitch&&this.mousePitch.dragStart(o,u),T.disableDrag()}startTouch(o,u){this.touchRotate.dragStart(o,u),this.touchPitch&&this.touchPitch.dragStart(o,u),T.disableDrag()}moveMouse(o,u){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(o,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(o,u)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(o,u){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(o,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(o,u)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const o=this.element;T.removeEventListener(o,"mousedown",this.mousedown),T.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let Fa;function m0(y,o,u){const p=new c.M(y.lng,y.lat);if(y=new c.M(y.lng,y.lat),o){const g=new c.M(y.lng-360,y.lat),_=new c.M(y.lng+360,y.lat),S=u.locationPoint(y).distSqr(o);u.locationPoint(g).distSqr(o)<S?y=g:u.locationPoint(_).distSqr(o)<S&&(y=_)}for(;Math.abs(y.lng-u.center.lng)>180;){const g=u.locationPoint(y);if(g.x>=0&&g.y>=0&&g.x<=u.width&&g.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y.lng!==p.lng&&u.locationPoint(y).y>u.height/2-u.getHorizon()?y:p}const vf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ba(y,o,u){const p=y.classList;for(const g in vf)p.remove(`maplibregl-${u}-anchor-${g}`);p.add(`maplibregl-${u}-anchor-${o}`)}class Pr extends c.E{constructor(o){if(super(),this._onKeyPress=u=>{const p=u.code,g=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=u=>{var p;if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?m0(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${vf[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${_}`),P.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(o==null?void 0:o.opacity,o==null?void 0:o.opacityWhenCovered),o&&o.element)this._element=o.element,this._offset=c.P.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");const u=T.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const _=T.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const S=T.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const C=T.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ve of M){const be=T.createNS("http://www.w3.org/2000/svg","ellipse");be.setAttributeNS(null,"opacity","0.04"),be.setAttributeNS(null,"cx","10.5"),be.setAttributeNS(null,"cy","5.80029008"),be.setAttributeNS(null,"rx",ve.rx),be.setAttributeNS(null,"ry",ve.ry),C.appendChild(be)}const k=T.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill",this._color);const B=T.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),k.appendChild(B);const F=T.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");const X=T.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(X);const te=T.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),te.setAttributeNS(null,"fill","#FFFFFF");const oe=T.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const me=T.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");const le=T.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#FFFFFF"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962"),oe.appendChild(me),oe.appendChild(le),S.appendChild(C),S.appendChild(k),S.appendChild(F),S.appendChild(te),S.appendChild(oe),u.appendChild(S),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Ba(this._element,this._anchor,"marker"),o&&o.className)for(const u of o.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),o.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=c.M.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const g=Math.abs(13.5)/Math.SQRT2;o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const o=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:o?(o.isOpen()?o.remove():(o.setLngLat(this._lngLat),o.addTo(this._map)),this):this}_updateOpacity(o=!1){var u,p;if(!(!((u=this._map)===null||u===void 0)&&u.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(o)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const g=this._map,_=g.terrain.depthAtPoint(this._pos),S=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,S)-_<.006)return void(this._element.style.opacity=this._opacity);const C=-this._offset.y/g.transform._pixelPerMeter,M=Math.sin(g.getPitch()*Math.PI/180)*C,k=g.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),B=g.transform.lngLatToCameraDepth(this._lngLat,S+M)-k>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&B&&this._popup.remove(),this._element.style.opacity=B?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(o){return this._offset=c.P.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(o,u){return o===void 0&&u===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),o!==void 0&&(this._opacity=o),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const Zu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let rl=0,nl=!1;const g0={maxWidth:100,unit:"metric"};function _f(y,o,u){const p=u&&u.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),S=y.unproject([p,g]),C=_.distanceTo(S);if(u&&u.unit==="imperial"){const M=3.2808*C;M>5280?xc(o,p,M/5280,y._getUIString("ScaleControl.Miles")):xc(o,p,M,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?xc(o,p,C/1852,y._getUIString("ScaleControl.NauticalMiles")):C>=1e3?xc(o,p,C/1e3,y._getUIString("ScaleControl.Kilometers")):xc(o,p,C,y._getUIString("ScaleControl.Meters"))}function xc(y,o,u,p){const g=function(_){const S=Math.pow(10,`${Math.floor(_)}`.length-1);let C=_/S;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(M){const k=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*k)/k}(C),S*C}(u);y.style.width=o*(g/u)+"px",y.innerHTML=`${g}&nbsp;${p}`}const Do={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Hu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Et(y){if(y){if(typeof y=="number"){const o=Math.round(Math.abs(y)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,y),"top-left":new c.P(o,o),"top-right":new c.P(-o,o),bottom:new c.P(0,-y),"bottom-left":new c.P(o,-o),"bottom-right":new c.P(-o,-o),left:new c.P(y,0),right:new c.P(-y,0)}}if(y instanceof c.P||Array.isArray(y)){const o=c.P.convert(y);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:c.P.convert(y.center||[0,0]),top:c.P.convert(y.top||[0,0]),"top-left":c.P.convert(y["top-left"]||[0,0]),"top-right":c.P.convert(y["top-right"]||[0,0]),bottom:c.P.convert(y.bottom||[0,0]),"bottom-left":c.P.convert(y["bottom-left"]||[0,0]),"bottom-right":c.P.convert(y["bottom-right"]||[0,0]),left:c.P.convert(y.left||[0,0]),right:c.P.convert(y.right||[0,0])}}return Et(new c.P(0,0))}const It=b;d.AJAXError=c.bf,d.Evented=c.E,d.LngLat=c.M,d.MercatorCoordinate=c.Y,d.Point=c.P,d.addProtocol=c.bg,d.config=c.a,d.removeProtocol=c.bh,d.AttributionControl=u0,d.BoxZoomHandler=mc,d.CanvasSource=Vt,d.CooperativeGesturesHandler=Hi,d.DoubleClickZoomHandler=df,d.DragPanHandler=ff,d.DragRotateHandler=tl,d.EdgeInsets=fc,d.FullscreenControl=class extends c.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var o;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((o=u==null?void 0:u.shadowRoot)===null||o===void 0)&&o.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=nr,d.GeolocateControl=class extends c.E{constructor(y){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",o)),this._finish()}},this._updateCamera=o=>{const u=new c.M(o.coords.longitude,o.coords.latitude),p=o.coords.accuracy,g=this._map.getBearing(),_=c.e({bearing:g},this.options.fitBoundsOptions),S=Wt.fromLngLat(u,p);this._map.fitBounds(S,_,{geolocateSource:!0})},this._updateMarker=o=>{if(o){const u=new c.M(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=o=>{if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&nl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=o=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",o===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Pr({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Pr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")))})}},this.options=c.e({},Zu,y)}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return c._(this,arguments,void 0,function*(o=!1){if(Fa!==void 0&&!o)return Fa;if(window.navigator.permissions===void 0)return Fa=!!window.navigator.geolocation,Fa;try{Fa=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Fa=!!window.navigator.geolocation}return Fa})}().then(o=>this._setupUI(o)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,rl=0,nl=!1}_isOutOfMapMaxBounds(y){const o=this._map.getMaxBounds(),u=y.coords;return o&&(u.longitude<o.getWest()||u.longitude>o.getEast()||u.latitude<o.getSouth()||u.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),o=y.getSouthEast(),u=y.getNorthEast(),p=o.distanceTo(u),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":rl--,nl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),rl++,rl>1?(y={maximumAge:6e5,timeout:0},nl=!0):(y=this.options.positionOptions,nl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.Hash=ef,d.ImageSource=kn,d.KeyboardHandler=Oa,d.LngLatBounds=Wt,d.LogoControl=mf,d.Map=class extends vv{constructor(y){if(c.bd.mark(c.be.create),(y=c.e({},_v,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Qd(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._contextLost=o=>{o.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.k("webglcontextlost",{originalEvent:o}))},this._contextRestored=o=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:o}))},this._onMapScroll=o=>{if(o.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new vc,this._controls=[],this._mapId=c.a3(),this._locale=c.e({},ut,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=K.addThrottleControl(()=>this.isMoving()),this._requestManager=new ie(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let o=!1;const u=t0(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{o?u(p):o=!0}),this._resizeObserver.observe(this._container)}this.handlers=new yc(this,y),this._hash=y.hash&&new ef(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,c.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new u0(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new mf,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new c.k(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new c.k(`${o.dataType}dataloading`,o))}),this.on("dataabort",o=>{this.fire(new c.k("sourcedataabort",o))})}_getMapId(){return this._mapId}addControl(y,o){if(o===void 0&&(o=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[o];return o.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(y);return o>-1&&this._controls.splice(o,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,o,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,o,u,p)}resize(y){var o;const u=this._containerDimensions(),p=u[0],g=u[1],_=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,_),this.painter.resize(p,g,_),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const M=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,M),this.painter.resize(p,g,M)}this.transform.resize(p,g),(o=this._requestedCameraState)===null||o===void 0||o.resize(p,g);const S=!this._moving;return S&&(this.stop(),this.fire(new c.k("movestart",y)).fire(new c.k("move",y))),this.fire(new c.k("resize",y)),S&&this.fire(new c.k("moveend",y)),this}_getClampedPixelRatio(y,o){const{0:u,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,S=o*g;return Math.min(_>u?u/_:1,S>p?p/S:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Wt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(c.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(c.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,o,u){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:o,listener:u,delegates:{mousemove:_=>{const S=this.getLayer(o)?this.queryRenderedFeatures(_.point,{layers:[o]}):[];S.length?p||(p=!0,u.call(this,new Vn(y,this,_.originalEvent,{features:S}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:o,listener:u,delegates:{mousemove:S=>{(this.getLayer(o)?this.queryRenderedFeatures(S.point,{layers:[o]}):[]).length?p=!0:p&&(p=!1,u.call(this,new Vn(y,this,S.originalEvent)))},mouseout:S=>{p&&(p=!1,u.call(this,new Vn(y,this,S.originalEvent)))}}}}{const p=g=>{const _=this.getLayer(o)?this.queryRenderedFeatures(g.point,{layers:[o]}):[];_.length&&(g.features=_,u.call(this,g),delete g.features)};return{layer:o,listener:u,delegates:{[y]:p}}}}on(y,o,u){if(u===void 0)return super.on(y,o);const p=this._createDelegatedListener(y,o,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,o,u){if(u===void 0)return super.once(y,o);const p=this._createDelegatedListener(y,o,u);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,o,u){return u===void 0?super.off(y,o):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const S=g[_];if(S.layer===o&&S.listener===u){for(const C in S.delegates)this.off(C,S.delegates[C]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,o){if(!this.style)return[];let u;const p=y instanceof c.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(p?{}:y)||{},g instanceof c.P||typeof g[0]=="number")u=[c.P.convert(g)];else{const _=c.P.convert(g[0]),S=c.P.convert(g[1]);u=[_,new c.P(S.x,_.y),S,new c.P(_.x,S.y),_]}return this.style.queryRenderedFeatures(u,o,this.transform)}querySourceFeatures(y,o){return this.style.querySourceFeatures(y,o)}setStyle(y,o){return(o=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(y,o))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const o=this._locale[y];if(o==null)throw new Error(`Missing UI string '${y}'`);return o}_updateStyle(y,o){if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,o));const u=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new pu(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,o,u):this.style.loadJSON(y,o,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new pu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,o){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,"Style");c.h(u,new AbortController).then(p=>{this._updateDiff(p.data,o)}).catch(p=>{p&&this.fire(new c.j(p))})}else typeof y=="object"&&this._updateDiff(y,o)}_updateDiff(y,o){try{this.style.setState(y,o)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(y,o){return this._lazyInitEmptyStyle(),this.style.addSource(y,o),this._update(!0)}isSourceLoaded(y){const o=this.style&&this.style.sourceCaches[y];if(o!==void 0)return o.loaded();this.fire(new c.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const o=this.style.sourceCaches[y.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&o.reload();for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===y.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new h0(this.painter,o,y),this.painter.renderToTexture=new d0(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:y})),this}getTerrain(){var y,o;return(o=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&o!==void 0?o:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const o in y){const u=y[o]._tiles;for(const p in u){const g=u[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,o,u={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:_,stretchY:S,content:C,textFitWidth:M,textFitHeight:k}=u;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||c.b(o))){if(o.width===void 0||o.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:F,data:X}=o,te=o;return this.style.addImage(y,{data:new c.R({width:B,height:F},new Uint8Array(X)),pixelRatio:p,stretchX:_,stretchY:S,content:C,textFitWidth:M,textFitHeight:k,sdf:g,version:0,userImage:te}),te.onAdd&&te.onAdd(this,y),this}}{const{width:B,height:F,data:X}=P.getImageData(o);this.style.addImage(y,{data:new c.R({width:B,height:F},X),pixelRatio:p,stretchX:_,stretchY:S,content:C,textFitWidth:M,textFitHeight:k,sdf:g,version:0})}}updateImage(y,o){const u=this.style.getImage(y);if(!u)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=o instanceof HTMLImageElement||c.b(o)?P.getImageData(o):o,{width:g,height:_,data:S}=p;if(g===void 0||_===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||_!==u.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(o instanceof HTMLImageElement||c.b(o));return u.data.replace(S,C),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return K.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,o){return this._lazyInitEmptyStyle(),this.style.addLayer(y,o),this._update(!0)}moveLayer(y,o){return this.style.moveLayer(y,o),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,o,u){return this.style.setLayerZoomRange(y,o,u),this._update(!0)}setFilter(y,o,u={}){return this.style.setFilter(y,o,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,o,u,p={}){return this.style.setPaintProperty(y,o,u,p),this._update(!0)}getPaintProperty(y,o){return this.style.getPaintProperty(y,o)}setLayoutProperty(y,o,u,p={}){return this.style.setLayoutProperty(y,o,u,p),this._update(!0)}getLayoutProperty(y,o){return this.style.getLayoutProperty(y,o)}setGlyphs(y,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,o,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,o,u,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,o,u=>{u||this._update(!0)}),this}setLight(y,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,o),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,o){return this.style.setFeatureState(y,o),this._update()}removeFeatureState(y,o){return this.style.removeFeatureState(y,o),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,o=0;return this._container&&(y=this._container.clientWidth||400,o=this._container.clientHeight||300),[y,o]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const o=this._canvasContainer=T.create("div","maplibregl-canvas-container",y);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const g=this._controlContainer=T.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{_[S]=T.create("div",`maplibregl-ctrl-${S} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,o,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*o),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let o=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{o={requestedAttributes:y},p&&(o.statusMessage=p.statusMessage,o.type=p.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const p="Failed to initialize WebGL";throw o?(o.message=p,new Error(JSON.stringify(o))):new Error(p)}this.painter=new fr(u,this.transform),O.testSupport(u)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const o=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=P.now();this.style.zoomHistory.update(g,_);const S=new c.a8(g,{now:_,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=S.crossFadingFactor();C===1&&C===this._crossFadingFactor||(u=!0,this._crossFadingFactor=C),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bd.mark(c.be.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,c.bd.mark(c.be.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),K.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),c.bd.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then(y=>{c.bd.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return gf}getCameraTargetElevation(){return this.transform.elevation}},d.MapMouseEvent=Vn,d.MapTouchEvent=fs,d.MapWheelEvent=r0,d.Marker=Pr,d.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const o=this._map.getZoom(),u=o===this._map.getMaxZoom(),p=o===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=o},this._setButtonTitle=(o,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);o.title=p,o.setAttribute("aria-label",p)},this.options=c.e({},yf,y),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new p0(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,o){const u=T.create("button",y,this._container);return u.type="button",u.addEventListener("click",o),u}},d.Popup=class extends c.E{constructor(y){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.k("close"))),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{var u;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?m0(this._lngLat,this._flatPos,this._map.transform):(u=this._lngLat)===null||u===void 0?void 0:u.wrap(),this._trackPointer&&!o)return;const p=this._flatPos=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&o?o:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor;const _=Et(this.options.offset);if(!g){const C=this._container.offsetWidth,M=this._container.offsetHeight;let k;k=p.y+_.bottom.y<M?["top"]:p.y>this._map.transform.height-M?["bottom"]:[],p.x<C/2?k.push("left"):p.x>this._map.transform.width-C/2&&k.push("right"),g=k.length===0?"bottom":k.join("-")}let S=p.add(_[g]);this.options.subpixelPositioning||(S=S.round()),T.setTransform(this._container,`${vf[g]} translate(${S.x}px,${S.y}px)`),Ba(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Do),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=c.M.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const o=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=y;p=u.firstChild,p;)o.appendChild(p);return this.setDOMContent(o)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Hu);y&&y.focus()}},d.RasterDEMTileSource=Rn,d.RasterTileSource=Sn,d.ScaleControl=class{constructor(y){this._onMove=()=>{_f(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,_f(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},g0),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=hf,d.Style=pu,d.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=cf,d.TwoFingersTouchRotateHandler=lf,d.TwoFingersTouchZoomHandler=Vu,d.TwoFingersTouchZoomRotateHandler=pf,d.VectorTileSource=Le,d.VideoSource=$t,d.addSourceType=(y,o)=>c._(void 0,void 0,void 0,function*(){if(ur(y))throw new Error(`A source type called "${y}" already exists.`);((u,p)=>{Ii[u]=p})(y,o)}),d.clearPrewarmedResources=function(){const y=kt;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(St),kt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return gn().getRTLTextPluginStatus()},d.getVersion=function(){return It},d.getWorkerCount=function(){return qt.workerCount},d.getWorkerUrl=function(){return c.a.WORKER_URL},d.importScriptInWorkers=function(y){return zr().broadcast("IS",y)},d.prewarm=function(){Yt().acquire(St)},d.setMaxParallelImageRequests=function(y){c.a.MAX_PARALLEL_IMAGE_REQUESTS=y},d.setRTLTextPlugin=function(y,o){return gn().setRTLTextPlugin(y,o)},d.setWorkerCount=function(y){qt.workerCount=y},d.setWorkerUrl=function(y){c.a.WORKER_URL=y}});var h=r;return h})})(B8);var QF=B8.exports;const Rt=um(QF),j8="3.7.7",e9=j8,bd=typeof Buffer=="function",cA=typeof TextDecoder=="function"?new TextDecoder:void 0,uA=typeof TextEncoder=="function"?new TextEncoder:void 0,t9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",sp=Array.prototype.slice.call(t9),og=(e=>{let t={};return e.forEach((r,n)=>t[r]=n),t})(sp),r9=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,di=String.fromCharCode.bind(String),hA=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),$8=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),V8=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),U8=e=>{let t,r,n,s,h="";const d=e.length%3;for(let c=0;c<e.length;){if((r=e.charCodeAt(c++))>255||(n=e.charCodeAt(c++))>255||(s=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|s,h+=sp[t>>18&63]+sp[t>>12&63]+sp[t>>6&63]+sp[t&63]}return d?h.slice(0,d-3)+"===".substring(d):h},Tw=typeof btoa=="function"?e=>btoa(e):bd?e=>Buffer.from(e,"binary").toString("base64"):U8,Ab=bd?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let n=0,s=e.length;n<s;n+=4096)r.push(di.apply(null,e.subarray(n,n+4096)));return Tw(r.join(""))},Dg=(e,t=!1)=>t?$8(Ab(e)):Ab(e),n9=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?di(192|t>>>6)+di(128|t&63):di(224|t>>>12&15)+di(128|t>>>6&63)+di(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return di(240|t>>>18&7)+di(128|t>>>12&63)+di(128|t>>>6&63)+di(128|t&63)}},i9=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Z8=e=>e.replace(i9,n9),dA=bd?e=>Buffer.from(e,"utf8").toString("base64"):uA?e=>Ab(uA.encode(e)):e=>Tw(Z8(e)),Wh=(e,t=!1)=>t?$8(dA(e)):dA(e),fA=e=>Wh(e,!0),o9=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,a9=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return di((r>>>10)+55296)+di((r&1023)+56320);case 3:return di((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return di((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},H8=e=>e.replace(o9,a9),W8=e=>{if(e=e.replace(/\s+/g,""),!r9.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r="",n,s;for(let h=0;h<e.length;)t=og[e.charAt(h++)]<<18|og[e.charAt(h++)]<<12|(n=og[e.charAt(h++)])<<6|(s=og[e.charAt(h++)]),r+=n===64?di(t>>16&255):s===64?di(t>>16&255,t>>8&255):di(t>>16&255,t>>8&255,t&255);return r},Iw=typeof atob=="function"?e=>atob(V8(e)):bd?e=>Buffer.from(e,"base64").toString("binary"):W8,G8=bd?e=>hA(Buffer.from(e,"base64")):e=>hA(Iw(e).split("").map(t=>t.charCodeAt(0))),q8=e=>G8(K8(e)),s9=bd?e=>Buffer.from(e,"base64").toString("utf8"):cA?e=>cA.decode(G8(e)):e=>H8(Iw(e)),K8=e=>V8(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Cb=e=>s9(K8(e)),l9=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},X8=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),Y8=function(){const e=(t,r)=>Object.defineProperty(String.prototype,t,X8(r));e("fromBase64",function(){return Cb(this)}),e("toBase64",function(t){return Wh(this,t)}),e("toBase64URI",function(){return Wh(this,!0)}),e("toBase64URL",function(){return Wh(this,!0)}),e("toUint8Array",function(){return q8(this)})},J8=function(){const e=(t,r)=>Object.defineProperty(Uint8Array.prototype,t,X8(r));e("toBase64",function(t){return Dg(this,t)}),e("toBase64URI",function(){return Dg(this,!0)}),e("toBase64URL",function(){return Dg(this,!0)})},c9=()=>{Y8(),J8()},u9={version:j8,VERSION:e9,atob:Iw,atobPolyfill:W8,btoa:Tw,btoaPolyfill:U8,fromBase64:Cb,toBase64:Wh,encode:Wh,encodeURI:fA,encodeURL:fA,utob:Z8,btou:H8,decode:Cb,isValid:l9,fromUint8Array:Dg,toUint8Array:q8,extendString:Y8,extendUint8Array:J8,extendBuiltins:c9};var Mw={exports:{}},Gh=typeof Reflect=="object"?Reflect:null,pA=Gh&&typeof Gh.apply=="function"?Gh.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Og;Gh&&typeof Gh.ownKeys=="function"?Og=Gh.ownKeys:Object.getOwnPropertySymbols?Og=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Og=function(t){return Object.getOwnPropertyNames(t)};function h9(e){console&&console.warn&&console.warn(e)}var Q8=Number.isNaN||function(t){return t!==t};function Lr(){Lr.init.call(this)}Mw.exports=Lr;Mw.exports.once=m9;Lr.EventEmitter=Lr;Lr.prototype._events=void 0;Lr.prototype._eventsCount=0;Lr.prototype._maxListeners=void 0;var mA=10;function s1(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Lr,"defaultMaxListeners",{enumerable:!0,get:function(){return mA},set:function(e){if(typeof e!="number"||e<0||Q8(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");mA=e}});Lr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Lr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Q8(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function eI(e){return e._maxListeners===void 0?Lr.defaultMaxListeners:e._maxListeners}Lr.prototype.getMaxListeners=function(){return eI(this)};Lr.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=t==="error",h=this._events;if(h!==void 0)s=s&&h.error===void 0;else if(!s)return!1;if(s){var d;if(r.length>0&&(d=r[0]),d instanceof Error)throw d;var c=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw c.context=d,c}var b=h[t];if(b===void 0)return!1;if(typeof b=="function")pA(b,this,r);else for(var E=b.length,I=oI(b,E),n=0;n<E;++n)pA(I[n],this,r);return!0};function tI(e,t,r,n){var s,h,d;if(s1(r),h=e._events,h===void 0?(h=e._events=Object.create(null),e._eventsCount=0):(h.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),h=e._events),d=h[t]),d===void 0)d=h[t]=r,++e._eventsCount;else if(typeof d=="function"?d=h[t]=n?[r,d]:[d,r]:n?d.unshift(r):d.push(r),s=eI(e),s>0&&d.length>s&&!d.warned){d.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=d.length,h9(c)}return e}Lr.prototype.addListener=function(t,r){return tI(this,t,r,!1)};Lr.prototype.on=Lr.prototype.addListener;Lr.prototype.prependListener=function(t,r){return tI(this,t,r,!0)};function d9(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function rI(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=d9.bind(n);return s.listener=r,n.wrapFn=s,s}Lr.prototype.once=function(t,r){return s1(r),this.on(t,rI(this,t,r)),this};Lr.prototype.prependOnceListener=function(t,r){return s1(r),this.prependListener(t,rI(this,t,r)),this};Lr.prototype.removeListener=function(t,r){var n,s,h,d,c;if(s1(r),s=this._events,s===void 0)return this;if(n=s[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(h=-1,d=n.length-1;d>=0;d--)if(n[d]===r||n[d].listener===r){c=n[d].listener,h=d;break}if(h<0)return this;h===0?n.shift():f9(n,h),n.length===1&&(s[t]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",t,c||r)}return this};Lr.prototype.off=Lr.prototype.removeListener;Lr.prototype.removeAllListeners=function(t){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var h=Object.keys(n),d;for(s=0;s<h.length;++s)d=h[s],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(t,r[s]);return this};function nI(e,t,r){var n=e._events;if(n===void 0)return[];var s=n[t];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?p9(s):oI(s,s.length)}Lr.prototype.listeners=function(t){return nI(this,t,!0)};Lr.prototype.rawListeners=function(t){return nI(this,t,!1)};Lr.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):iI.call(e,t)};Lr.prototype.listenerCount=iI;function iI(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Lr.prototype.eventNames=function(){return this._eventsCount>0?Og(this._events):[]};function oI(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function f9(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function p9(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function m9(e,t){return new Promise(function(r,n){function s(d){e.removeListener(t,h),n(d)}function h(){typeof e.removeListener=="function"&&e.removeListener("error",s),r([].slice.call(arguments))}aI(e,t,h,{once:!0}),t!=="error"&&g9(e,s,{once:!0})})}function g9(e,t,r){typeof e.on=="function"&&aI(e,"error",t,r)}function aI(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(h){n.once&&e.removeEventListener(t,s),r(h)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var y9=Mw.exports;const v9=um(y9);function _9(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class x9{constructor(){this._apiKey="",this._fetch=_9(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const qh=new x9,b9={AUTO:"auto",ALBANIAN:"sq",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HUNGARIAN:"hu",ICELANDIC:"is",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALTESE:"mt",NORWEGIAN:"no",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"};new Set(Object.values(b9));async function w9(e,t={}){if(qh.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return qh.fetch(e,t)}const sI={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(sI);class S9 extends Error{constructor(t,r=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${r}`),this.res=t}}const gA={403:"Key is missing, invalid or restricted"};async function E9(e={}){const t=new URL("geolocation/ip.json",sI.maptilerApiURL);t.searchParams.set("key",e.apiKey??qh.apiKey);const r=t.toString(),n=await w9(r);if(!n.ok)throw new S9(n,n.status in gA?gA[n.status]:"");return await n.json()}const yA={info:E9};function lI(e){const t=/^maptiler:\/\/(.*)/;let r;const n=e.trim();let s;return n.startsWith("http://")||n.startsWith("https://")?s=n:(r=t.exec(n))!==null?s=`https://api.maptiler.com/maps/${r[1]}/style.json`:s=`https://api.maptiler.com/maps/${n}/style.json`,s}class cI{constructor(t,r,n,s,h,d){this.name=t,this.variantType=r,this.id=n,this.referenceStyle=s,this.description=h,this.imageURL=d}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return lI(this.getId())}}class uI{constructor(t,r){this.name=t,this.id=r,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const Pb=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function A9(e){return new Proxy(e,{get(t,r,n){return t.hasVariant(r)?t.getVariant(r):r.toString().toUpperCase()===r?e.getDefaultVariant():Reflect.get(t,r,n)}})}function C9(){const e={};for(let t=0;t<Pb.length;t+=1){const r=Pb[t],n=A9(new uI(r.name,r.referenceStyleID));for(let s=0;s<r.variants.length;s+=1){const h=r.variants[s],d=new cI(h.name,h.variantType,h.id,n,h.description,h.imageURL);n.addVariant(d)}e[r.referenceStyleID]=n}return e}const P9=C9();let ag;const T9=new Uint8Array(16);function I9(){if(!ag&&(ag=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ag))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ag(T9)}const ui=[];for(let e=0;e<256;++e)ui.push((e+256).toString(16).slice(1));function M9(e,t=0){return ui[e[t+0]]+ui[e[t+1]]+ui[e[t+2]]+ui[e[t+3]]+"-"+ui[e[t+4]]+ui[e[t+5]]+"-"+ui[e[t+6]]+ui[e[t+7]]+"-"+ui[e[t+8]]+ui[e[t+9]]+"-"+ui[e[t+10]]+ui[e[t+11]]+ui[e[t+12]]+ui[e[t+13]]+ui[e[t+14]]+ui[e[t+15]]}const R9=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vA={randomUUID:R9};function k9(e,t,r){if(vA.randomUUID&&!t&&!e)return vA.randomUUID();e=e||{};const n=e.random||(e.rng||I9)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,M9(n)}const vr={VISITOR:"visitor",VISITOR_ENGLISH:"visitor_en",STYLE:"style",AUTO:"auto",STYLE_LOCK:"style_lock",LATIN:"name:latin",NON_LATIN:"name:nonlatin",LOCAL:"name",INTERNATIONAL:"name_int",ALBANIAN:"name:sq",AMHARIC:"name:am",ARABIC:"name:ar",ARMENIAN:"name:hy",AZERBAIJANI:"name:az",BASQUE:"name:eu",BELORUSSIAN:"name:be",BENGALI:"name:bn",BOSNIAN:"name:bs",BRETON:"name:br",BULGARIAN:"name:bg",CATALAN:"name:ca",CHINESE:"name:zh",TRADITIONAL_CHINESE:"name:zh-Hant",SIMPLIFIED_CHINESE:"name:zh-Hans",CORSICAN:"name:co",CROATIAN:"name:hr",CZECH:"name:cs",DANISH:"name:da",DUTCH:"name:nl",ENGLISH:"name:en",ESPERANTO:"name:eo",ESTONIAN:"name:et",FINNISH:"name:fi",FRENCH:"name:fr",FRISIAN:"name:fy",GEORGIAN:"name:ka",GERMAN:"name:de",GREEK:"name:el",HEBREW:"name:he",HINDI:"name:hi",HUNGARIAN:"name:hu",ICELANDIC:"name:is",INDONESIAN:"name:id",IRISH:"name:ga",ITALIAN:"name:it",JAPANESE:"name:ja",JAPANESE_HIRAGANA:"name:ja-Hira",JAPANESE_KANA:"name:ja_kana",JAPANESE_LATIN:"name:ja_rm",JAPANESE_2018:"name:ja-Latn",KANNADA:"name:kn",KAZAKH:"name:kk",KOREAN:"name:ko",KOREAN_LATIN:"name:ko-Latn",KURDISH:"name:ku",ROMAN_LATIN:"name:la",LATVIAN:"name:lv",LITHUANIAN:"name:lt",LUXEMBOURGISH:"name:lb",MACEDONIAN:"name:mk",MALAYALAM:"name:ml",MALTESE:"name:mt",NORWEGIAN:"name:no",OCCITAN:"name:oc",PERSIAN:"name:fa",POLISH:"name:pl",PORTUGUESE:"name:pt",PUNJABI:"name:pa",WESTERN_PUNJABI:"name:pnb",ROMANIAN:"name:ro",ROMANSH:"name:rm",RUSSIAN:"name:ru",SCOTTISH_GAELIC:"name:gd",SERBIAN_CYRILLIC:"name:sr",SERBIAN_LATIN:"name:sr-Latn",SLOVAK:"name:sk",SLOVENE:"name:sl",SPANISH:"name:es",SWEDISH:"name:sv",TAMIL:"name:ta",TELUGU:"name:te",THAI:"name:th",TURKISH:"name:tr",UKRAINIAN:"name:uk",URDU:"name:ur",VIETNAMIAN_LATIN:"name:vi",WELSH:"name:cy"},L9=new Set(Object.values(vr));function _A(e){return L9.has(e)}const D9=new Set(Object.values(vr));function xA(){if(typeof navigator>"u")return`name:${Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0]}`;const e=Array.from(new Set(navigator.languages.map(t=>`name:${t.split("-")[0]}`))).filter(t=>D9.has(t));return e.length?e[0]:vr.LOCAL}const Gi={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:vr.STYLE,secondaryLanguage:vr.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(Gi);var O9=Object.defineProperty,z9=(e,t,r)=>t in e?O9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uh=(e,t,r)=>(z9(e,typeof t!="symbol"?t+"":t,r),r);const hI=k9();class F9 extends v9{constructor(){super(),uh(this,"primaryLanguage",Gi.primaryLanguage),uh(this,"secondaryLanguage"),uh(this,"session",!0),uh(this,"caching",!0),uh(this,"_unit","metric"),uh(this,"_apiKey","")}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,qh.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){qh.fetch=t}get fetch(){return qh.fetch}}const vo=new F9;class B9 extends Rt.LogoControl{onAdd(t){return super.onAdd(t)}}var N9=Object.defineProperty,j9=(e,t,r)=>t in e?N9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bA=(e,t,r)=>(j9(e,typeof t!="symbol"?t+"":t,r),r);class wA extends B9{constructor(t={}){var r,n;super(t),bA(this,"logoURL",""),bA(this,"linkURL",""),this.logoURL=(r=t.logoURL)!=null?r:Gi.maptilerLogoURL,this.linkURL=(n=t.linkURL)!=null?n:Gi.maptilerURL}onAdd(t){var r;this._map=t,this._compact=(r=this.options.compact)!=null?r:!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const n=window.document.createElement("a");return n.style.backgroundRepeat="no-repeat",n.style.cursor="pointer",n.style.display="block",n.style.height="23px",n.style.margin="0 0 -4px -4px",n.style.overflow="hidden",n.style.width="88px",n.style.backgroundImage=`url(${this.logoURL})`,n.style.backgroundSize="100px 30px",n.style.width="100px",n.style.height="30px",n.target="_blank",n.rel="noopener",n.href=this.linkURL,n.setAttribute("aria-label","MapTiler logo"),n.setAttribute("rel","noopener"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}var Ap=(e,t,r)=>new Promise((n,s)=>{var h=b=>{try{c(r.next(b))}catch(E){s(E)}},d=b=>{try{c(r.throw(b))}catch(E){s(E)}},c=b=>b.done?n(b.value):Promise.resolve(b.value).then(h,d);c((r=r.apply(e,t)).next())});const Tb="localcache_source",Ib="localcache",$9="maptiler_sdk",V9=1e3,U9=100;function Z9(e,t){if(vo.caching&&vo.session&&e.host===Gi.maptilerApiHost){if(t=="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${Tb}://`);if(t=="Tile"||t=="Glyphs")return e.href.replace("https://",`${Ib}://`)}return e.href}let N_;function dI(){return Ap(this,null,function*(){return N_||(N_=yield caches.open($9)),N_})}let SA=0;function H9(){return Ap(this,null,function*(){const e=yield dI(),t=yield e.keys(),r=t.slice(0,Math.max(t.length-V9,0));for(const n of r)e.delete(n)})}function W9(){FA(Tb,(e,t)=>Ap(this,null,function*(){if(!e.url)throw new Error("");e.url=e.url.replace(`${Tb}://`,"https://");const r=e;r.signal=t.signal;const n=yield fetch(e.url,r),s=yield n.json();return s.tiles&&s.tiles.length>0&&(s.tiles[0]+="&last-modified="+n.headers.get("Last-Modified")),{data:s,cacheControl:n.headers.get("Cache-Control"),expires:n.headers.get("Expires")}})),FA(Ib,(e,t)=>Ap(this,null,function*(){if(!e.url)throw new Error("");e.url=e.url.replace(`${Ib}://`,"https://");const r=new URL(e.url),n=new URL(r);n.searchParams.delete("mtsid"),n.searchParams.delete("key");const s=n.toString(),h=new URL(r);h.searchParams.delete("last-modified");const d=h.toString(),c=I=>Ap(this,null,function*(){return{data:yield I.arrayBuffer(),cacheControl:I.headers.get("Cache-Control"),expires:I.headers.get("Expires")}}),b=yield dI(),E=yield b.match(s);if(E)return c(E);{const I=e;I.signal=t.signal;const P=yield fetch(d,I);return P.status>=200&&P.status<300&&(b.put(s,P.clone()).catch(()=>{}),++SA>U9&&(H9(),SA=0)),c(P)}}))}var G9=Object.defineProperty,EA=Object.getOwnPropertySymbols,q9=Object.prototype.hasOwnProperty,K9=Object.prototype.propertyIsEnumerable,AA=(e,t,r)=>t in e?G9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,CA=(e,t)=>{for(var r in t||(t={}))q9.call(t,r)&&AA(e,r,t[r]);if(EA)for(var r of EA(t))K9.call(t,r)&&AA(e,r,t[r]);return e};function X9(){Rt.getRTLTextPluginStatus()==="unavailable"&&Rt.setRTLTextPlugin(Gi.rtlPluginURL,e=>{e&&console.error(e)},!0)}function Y9(e,t){e.forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})}function Cl(e,t,r){const n=window.document.createElement(e);return t!==void 0&&(n.className=t),r&&r.appendChild(n),n}function fI(e){e.parentNode&&e.parentNode.removeChild(e)}function PA(e,t){let r=null;try{r=new URL(e)}catch{return{url:e}}return r.host===Gi.maptilerApiHost&&(r.searchParams.has("key")||r.searchParams.append("key",vo.apiKey),vo.session&&r.searchParams.append("mtsid",hI)),{url:Z9(r,t)}}function TA(e){return function(t,r){var n;if(e!==void 0){const s=e(t,r),h=PA((n=s==null?void 0:s.url)!=null?n:"",r);return CA(CA({},s),h)}else return PA(t,r)}}function IA(e){return e?typeof e=="string"||e instanceof String?!e.startsWith("http")&&e.toLowerCase().includes(".json")?e:lI(e):e instanceof cI?e.getExpandedStyleURL():e instanceof uI?e.getDefaultVariant().getExpandedStyleURL():e:P9[Pb[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL()}var J9=Object.defineProperty,Q9=(e,t,r)=>t in e?J9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,j_=(e,t,r)=>(Q9(e,typeof t!="symbol"?t+"":t,r),r);class eB{constructor(){j_(this,"_map"),j_(this,"_container"),j_(this,"_terrainButton"),Y9(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=Cl("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Cl("button","maplibregl-ctrl-terrain",this._container),Cl("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){fI(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class tB extends Rt.NavigationControl{onAdd(t){return super.onAdd(t)}}var rB=Object.defineProperty,nB=(e,t,r)=>t in e?rB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,iB=(e,t,r)=>(nB(e,t+"",r),r);class oB extends tB{constructor(){super({showCompass:!0,showZoom:!0,visualizePitch:!0}),iB(this,"_rotateCompassArrow",()=>{const t=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5))}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}),this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",t=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})}_createButton(t,r){const n=super._createButton(t,r);return n.clickFunction=r,n}}class aB extends Rt.GeolocateControl{onAdd(t){return super.onAdd(t)}}var sB=Object.defineProperty,lB=Object.defineProperties,cB=Object.getOwnPropertyDescriptors,MA=Object.getOwnPropertySymbols,uB=Object.prototype.hasOwnProperty,hB=Object.prototype.propertyIsEnumerable,Mb=(e,t,r)=>t in e?sB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dB=(e,t)=>{for(var r in t||(t={}))uB.call(t,r)&&Mb(e,r,t[r]);if(MA)for(var r of MA(t))hB.call(t,r)&&Mb(e,r,t[r]);return e},fB=(e,t)=>lB(e,cB(t)),sg=(e,t,r)=>(Mb(e,typeof t!="symbol"?t+"":t,r),r);const RA=Rt.Marker,kA=Rt.LngLat,pB=Rt.LngLatBounds;class mB extends aB{constructor(){super(...arguments),sg(this,"lastUpdatedCenter",new kA(0,0)),sg(this,"_updateCamera",t=>{var r,n,s;const h=new kA(t.coords.longitude,t.coords.latitude),d=t.coords.accuracy,c=this._map.getBearing(),b=fB(dB({bearing:c},this.options.fitBoundsOptions),{linear:!0}),E=this._map.getZoom();E>((s=(n=(r=this.options)==null?void 0:r.fitBoundsOptions)==null?void 0:n.maxZoom)!=null?s:30)&&(b.zoom=E),this._map.fitBounds(pB.fromLngLat(h,d),b,{geolocateSource:!0});let I=!1;const P=()=>{I=!0};this._map.once("click",P),this._map.once("dblclick",P),this._map.once("dragstart",P),this._map.once("mousedown",P),this._map.once("touchstart",P),this._map.once("wheel",P),this._map.once("moveend",()=>{this._map.off("click",P),this._map.off("dblclick",P),this._map.off("dragstart",P),this._map.off("mousedown",P),this._map.off("touchstart",P),this._map.off("wheel",P),!I&&(this.lastUpdatedCenter=this._map.getCenter())})}),sg(this,"_setupUI",t=>{if(this.lastUpdatedCenter=this._map.getCenter(),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=Cl("button","maplibregl-ctrl-geolocate",this._container),Cl("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",t===!1){const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Cl("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new RA({element:this._dotElement}),this._circleElement=Cl("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new RA({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",r=>{const n=r.originalEvent&&r.originalEvent.type==="resize",s=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!r.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!n&&s>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}),sg(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],r=this._map.project(t),n=this._map.unproject([r.x,r.y]),s=this._map.unproject([r.x+20,r.y]),h=n.distanceTo(s)/20,d=Math.ceil(2*this._accuracy/h);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}}class gB extends Rt.ScaleControl{onAdd(t){return super.onAdd(t)}}class yB extends Rt.FullscreenControl{onAdd(t){return super.onAdd(t)}}var vB=Object.defineProperty,_B=Object.defineProperties,xB=Object.getOwnPropertyDescriptors,LA=Object.getOwnPropertySymbols,bB=Object.prototype.hasOwnProperty,wB=Object.prototype.propertyIsEnumerable,Rb=(e,t,r)=>t in e?vB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Kh=(e,t)=>{for(var r in t||(t={}))bB.call(t,r)&&Rb(e,r,t[r]);if(LA)for(var r of LA(t))wB.call(t,r)&&Rb(e,r,t[r]);return e},DA=(e,t)=>_B(e,xB(t)),SB=(e,t,r)=>(Rb(e,t+"",r),r),Rw=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},pr=(e,t,r)=>(Rw(e,t,"read from private field"),r?r.call(e):t.get(e)),Za=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},_h=(e,t,r,n)=>(Rw(e,t,"write to private field"),t.set(e,r),r),po=(e,t,r)=>(Rw(e,t,"access private method"),r),mo,Xa,Mc,pI,Vc,Fo,zg,kb,mI,go,Bo,Lb,gI;class $_{constructor(t,r){Za(this,kb),Za(this,go),Za(this,Lb),Za(this,mo,void 0),SB(this,"map"),Za(this,Xa,void 0),Za(this,Mc,void 0),Za(this,pI,void 0),Za(this,Vc,void 0),Za(this,Fo,!1),Za(this,zg,void 0);var n;t.style!==void 0&&_h(this,Fo,!0),_h(this,mo,DA(Kh(DA(Kh({zoomAdjust:-4,position:"top-right"},r),{forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1}),t),{containerStyle:Kh({border:"1px solid #000",width:"400px",height:"300px"},(n=t.containerStyle)!=null?n:{})})),t.lockZoom!==void 0&&(pr(this,mo).minZoom=t.lockZoom,pr(this,mo).maxZoom=t.lockZoom)}setStyle(t,r){pr(this,Fo)||this.map.setStyle(t,r),po(this,go,Bo).call(this)}addLayer(t,r){return pr(this,Fo)||this.map.addLayer(t,r),po(this,go,Bo).call(this),this.map}moveLayer(t,r){return pr(this,Fo)||this.map.moveLayer(t,r),po(this,go,Bo).call(this),this.map}removeLayer(t){return pr(this,Fo)||this.map.removeLayer(t),po(this,go,Bo).call(this),this}setLayerZoomRange(t,r,n){return pr(this,Fo)||this.map.setLayerZoomRange(t,r,n),po(this,go,Bo).call(this),this}setFilter(t,r,n){return pr(this,Fo)||this.map.setFilter(t,r,n),po(this,go,Bo).call(this),this}setPaintProperty(t,r,n,s){return pr(this,Fo)||this.map.setPaintProperty(t,r,n,s),po(this,go,Bo).call(this),this}setLayoutProperty(t,r,n,s){return pr(this,Fo)||this.map.setLayoutProperty(t,r,n,s),po(this,go,Bo).call(this),this}setGlyphs(t,r){return pr(this,Fo)||this.map.setGlyphs(t,r),po(this,go,Bo).call(this),this}onAdd(t){_h(this,Xa,t),_h(this,Mc,Cl("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[r,n]of Object.entries(pr(this,mo).containerStyle))pr(this,Mc).style.setProperty(r,n);return pr(this,mo).container=pr(this,Mc),pr(this,mo).zoom=t.getZoom()+pr(this,mo).zoomAdjust,this.map=new yI(pr(this,mo)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{po(this,kb,mI).call(this,pr(this,mo).parentRect),_h(this,zg,po(this,Lb,gI).call(this))}),pr(this,Mc)}onRemove(){var t;(t=pr(this,zg))==null||t.call(this),fI(pr(this,Mc))}}mo=new WeakMap;Xa=new WeakMap;Mc=new WeakMap;pI=new WeakMap;Vc=new WeakMap;Fo=new WeakMap;zg=new WeakMap;kb=new WeakSet;mI=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(_h(this,Vc,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:pr(this,Vc)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:Kh({},e.lineLayout),paint:Kh({"line-color":"#FFF","line-width":1,"line-opacity":.85},e.linePaint)}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:Kh({"fill-color":"#08F","fill-opacity":.135},e.fillPaint)}),po(this,go,Bo).call(this))};go=new WeakSet;Bo=function(){if(pr(this,Vc)===void 0)return;const{devicePixelRatio:e}=window,t=pr(this,Xa).getCanvas(),r=t.width/e,n=t.height/e,s=pr(this,Xa).unproject.bind(pr(this,Xa)),h=s([0,0]),d=s([r,0]),c=s([0,n]),b=s([r,n]);pr(this,Vc).geometry.coordinates=[[c.toArray(),b.toArray(),d.toArray(),h.toArray(),c.toArray()]],this.map.getSource("parentRect").setData(pr(this,Vc))};Lb=new WeakSet;gI=function(){const{pitchAdjust:e}=pr(this,mo),t=()=>{h("parent")},r=()=>{h("minimap")},n=()=>{pr(this,Xa).on("move",t),this.map.on("move",r)},s=()=>{pr(this,Xa).off("move",t),this.map.off("move",r)},h=d=>{var c;s();const b=d==="parent"?pr(this,Xa):this.map,E=d==="parent"?this.map:pr(this,Xa),I=b.getCenter(),P=b.getZoom()+((c=pr(this,mo).zoomAdjust)!=null?c:-4)*(d==="parent"?1:-1),T=b.getBearing(),O=b.getPitch();E.jumpTo({center:I,zoom:P,bearing:T,pitch:e?O:0}),po(this,go,Bo).call(this),n()};return n(),()=>{s()}};var EB=Object.defineProperty,AB=Object.defineProperties,CB=Object.getOwnPropertyDescriptors,OA=Object.getOwnPropertySymbols,PB=Object.prototype.hasOwnProperty,TB=Object.prototype.propertyIsEnumerable,Db=(e,t,r)=>t in e?EB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V_=(e,t)=>{for(var r in t||(t={}))PB.call(t,r)&&Db(e,r,t[r]);if(OA)for(var r of OA(t))TB.call(t,r)&&Db(e,r,t[r]);return e},IB=(e,t)=>AB(e,CB(t)),ws=(e,t,r)=>(Db(e,typeof t!="symbol"?t+"":t,r),r),Ss=(e,t,r)=>new Promise((n,s)=>{var h=b=>{try{c(r.next(b))}catch(E){s(E)}},d=b=>{try{c(r.throw(b))}catch(E){s(E)}},c=b=>b.done?n(b.value):Promise.resolve(b.value).then(h,d);c((r=r.apply(e,t)).next())});const MB={POINT:"POINT",COUNTRY:"COUNTRY"};let yI=class extends Rt.Map{constructor(t){var r,n,s;t.apiKey&&(vo.apiKey=t.apiKey);const h=IA(t.style),d=location.hash;vo.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");let c={compact:!1};t.customAttribution?c.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(c=V_(V_({},c),t.attributionControl)),super(IB(V_({},t),{style:h,maplibreLogo:!1,transformRequest:TA(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:c})),ws(this,"isTerrainEnabled",!1),ws(this,"terrainExaggeration",1),ws(this,"primaryLanguage"),ws(this,"terrainGrowing",!1),ws(this,"terrainFlattening",!1),ws(this,"minimap"),ws(this,"forceLanguageUpdate"),ws(this,"languageAlwaysBeenStyle"),ws(this,"isReady",!1),vo.caching&&W9(),this.primaryLanguage=(r=t.language)!=null?r:vo.primaryLanguage,this.forceLanguageUpdate=!(this.primaryLanguage===vr.STYLE||this.primaryLanguage===vr.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===vr.STYLE,this.terrainExaggeration=(n=t.terrainExaggeration)!=null?n:this.terrainExaggeration,this.once("styledata",()=>Ss(this,null,function*(){if(!t.geolocate||t.center||t.hash&&d)return;try{if(t.geolocate===MB.COUNTRY){yield this.fitToIpBounds();return}}catch(j){console.warn(j.message)}let T;try{yield this.centerOnIpPoint(t.zoom),T=this.getCameraHash()}catch(j){console.warn(j.message)}(yield navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(j=>{T===this.getCameraHash()&&(this.terrain?this.easeTo({center:[j.coords.longitude,j.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[j.coords.longitude,j.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})})),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",()=>Ss(this,null,function*(){X9()})),this.once("load",()=>Ss(this,null,function*(){let T={logo:null};try{const O=Object.keys(this.style.sourceCaches).map(re=>this.getSource(re)).filter(re=>re&&"url"in re&&typeof re.url=="string"&&(re==null?void 0:re.url.includes("tiles.json"))),j=new URL(O[0].url);j.searchParams.has("key")||j.searchParams.append("key",vo.apiKey),T=yield(yield fetch(j.href)).json()}catch{}if(t.forceNoAttributionControl!==!0)if("logo"in T&&T.logo){const O=T.logo;this.addControl(new wA({logoURL:O}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new wA,t.logoPosition);if(t.scaleControl){const O=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,j=new gB({unit:vo.unit});this.addControl(j,O),vo.on("unit",V=>{j.setUnit(V)})}if(t.navigationControl!==!1){const O=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new oB,O)}if(t.geolocateControl!==!1){const O=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new mB({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),O)}if(t.terrainControl){const O=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new eB,O)}if(t.fullscreenControl){const O=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new yB({}),O)}this.isReady=!0,this.fire("ready",{target:this})}));let b=!1,E=!1,I;this.once("ready",()=>{b=!0,E&&this.fire("loadWithTerrain",I)}),this.once("style.load",()=>{var T;const{minimap:O}=t;if(typeof O=="object"){const{zoom:j,center:V,style:re,language:W,apiKey:Z,maptilerLogo:K,antialias:ie,refreshExpiredTiles:de,maxBounds:ae,scrollZoom:J,minZoom:we,maxZoom:Re,boxZoom:De,locale:Oe,fadeDuration:Qe,crossSourceCollisions:qe,clickTolerance:Ze,bounds:Fe,fitBoundsOptions:Ve,pixelRatio:He,validateStyle:Se}=t;this.minimap=new $_(O,{zoom:j,center:V,style:re,language:W,apiKey:Z,container:"null",maptilerLogo:K,antialias:ie,refreshExpiredTiles:de,maxBounds:ae,scrollZoom:J,minZoom:we,maxZoom:Re,boxZoom:De,locale:Oe,fadeDuration:Qe,crossSourceCollisions:qe,clickTolerance:Ze,bounds:Fe,fitBoundsOptions:Ve,pixelRatio:He,validateStyle:Se}),this.addControl(this.minimap,(T=O.position)!=null?T:"bottom-left")}else O===!0?(this.minimap=new $_({},t),this.addControl(this.minimap,"bottom-left")):O!==void 0&&O!==!1&&(this.minimap=new $_({},t),this.addControl(this.minimap,O))});const P=T=>{T.terrain&&(E=!0,I={type:"loadWithTerrain",target:this,terrain:T.terrain},this.off("terrain",P),b&&this.fire("loadWithTerrain",I))};this.on("terrain",P),t.terrain&&this.enableTerrain((s=t.terrainExaggeration)!=null?s:this.terrainExaggeration)}onLoadAsync(){return Ss(this,null,function*(){return new Promise(t=>{if(this.loaded())return t(this);this.once("load",()=>{t(this)})})})}onReadyAsync(){return Ss(this,null,function*(){return new Promise(t=>{if(this.isReady)return t(this);this.once("ready",()=>{t(this)})})})}onLoadWithTerrainAsync(){return Ss(this,null,function*(){return new Promise(t=>{if(this.isReady&&this.terrain)return t(this);this.once("loadWithTerrain",()=>{t(this)})})})}setStyle(t,r){var n;return(n=this.minimap)==null||n.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1}),super.setStyle(IA(t),r)}addLayer(t,r){var n;return(n=this.minimap)==null||n.addLayer(t,r),super.addLayer(t,r)}moveLayer(t,r){var n;return(n=this.minimap)==null||n.moveLayer(t,r),super.moveLayer(t,r)}removeLayer(t){var r;return(r=this.minimap)==null||r.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,r,n){var s;return(s=this.minimap)==null||s.setLayerZoomRange(t,r,n),super.setLayerZoomRange(t,r,n)}setFilter(t,r,n){var s;return(s=this.minimap)==null||s.setFilter(t,r,n),super.setFilter(t,r,n)}setPaintProperty(t,r,n,s){var h;return(h=this.minimap)==null||h.setPaintProperty(t,r,n,s),super.setPaintProperty(t,r,n,s)}setLayoutProperty(t,r,n,s){var h;return(h=this.minimap)==null||h.setLayoutProperty(t,r,n,s),super.setLayoutProperty(t,r,n,s)}setGlyphs(t,r){var n;return(n=this.minimap)==null||n.setGlyphs(t,r),super.setGlyphs(t,r)}getStyleLanguage(){return!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?this.style.stylesheet.metadata["maptiler:language"]:null}setLanguage(t){var r,n;(n=(r=this.minimap)==null?void 0:r.map)==null||n.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const r=this.getStyleLanguage();if(!(t===vr.STYLE&&(r===vr.AUTO||r===vr.VISITOR))&&(t!==vr.STYLE&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===t&&!this.forceLanguageUpdate))return;if(!_A(t)){console.warn(`The language "${t}" is not supported.`);return}if(this.primaryLanguage===vr.STYLE_LOCK){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=t;let n=t;if(t===vr.STYLE){if(!r){console.warn("The style has no default languages.");return}if(!_A(r)){console.warn("The language defined in the style is not valid.");return}n=r}let s=vr.LOCAL,h=`{${s}}`;n==vr.VISITOR?(s=xA(),h=["case",["all",["has",s],["has",vr.LOCAL]],["case",["==",["get",s],["get",vr.LOCAL]],["get",vr.LOCAL],["format",["get",s],{"font-scale":.8},`
`,["get",vr.LOCAL],{"font-scale":1.1}]],["get",vr.LOCAL]]):n==vr.VISITOR_ENGLISH?(s=vr.ENGLISH,h=["case",["all",["has",s],["has",vr.LOCAL]],["case",["==",["get",s],["get",vr.LOCAL]],["get",vr.LOCAL],["format",["get",s],{"font-scale":.8},`
`,["get",vr.LOCAL],{"font-scale":1.1}]],["get",vr.LOCAL]]):n===vr.AUTO?(s=xA(),h=["case",["has",s],["get",s],["get",vr.LOCAL]]):n===vr.LOCAL?(s=vr.LOCAL,h=`{${s}}`):(s=n,h=["case",["has",s],["get",s],["get",vr.LOCAL]]);const{layers:d}=this.getStyle();for(const c of d){if(c.type!=="symbol")continue;const b=c,E=this.getSource(b.source);if(!E||!("url"in E&&typeof E.url=="string")||new URL(E.url).host!==Gi.maptilerApiHost)continue;const{id:P,layout:T}=b;if(!T||!("text-field"in T))continue;const O=this.getLayoutProperty(P,"text-field");typeof O=="string"&&(O.toLowerCase().includes("ref")||O.toLowerCase().includes("housenumber"))||this.setLayoutProperty(P,"text-field",h)}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t,r=1e3){if(!this.terrain)return;const n=performance.now(),s=this.terrain.exaggeration,h=t-s,d=()=>{if(!this.terrain||this.terrainFlattening)return;const c=(performance.now()-n)/r;if(c<.99){const b=1-Math.pow(1-c,4),E=s+b*h;this.terrain.exaggeration=E,requestAnimationFrame(d)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t;this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(d)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const r=s=>Ss(this,null,function*(){!this.terrain||s.type!=="data"||s.dataType!=="source"||!("source"in s)||s.sourceId!=="maptiler-terrain"||s.source.type!=="raster-dem"||s.isSourceLoaded&&(this.off("data",r),this.growTerrain(t))}),n=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",r),this.addSource(Gi.terrainSourceId,{type:"raster-dem",url:Gi.terrainSourceURL}),this.setTerrain({source:Gi.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?n():this.once("load",()=>{this.getTerrain()&&this.getSource(Gi.terrainSourceId)||n()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=1*1e3,r=performance.now(),n=this.terrain.exaggeration,s=()=>{if(!this.terrain||this.terrainGrowing)return;const h=(performance.now()-r)/t;if(h<.99){const d=Math.pow(1-h,4),c=n*d;this.terrain.exaggeration=c,requestAnimationFrame(s)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(Gi.terrainSourceId)&&this.removeSource(Gi.terrainSourceId);this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(s)}setTerrainExaggeration(t,r=!0){!r&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}fitToIpBounds(){return Ss(this,null,function*(){const t=yield yA.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})})}centerOnIpPoint(t){return Ss(this,null,function*(){var r,n;const s=yield yA.info();this.jumpTo({center:[(r=s==null?void 0:s.longitude)!=null?r:0,(n=s==null?void 0:s.latitude)!=null?n:0],zoom:t||11})})}getCameraHash(){const t=new Float32Array(5),r=this.getCenter();return t[0]=r.lng,t[1]=r.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),u9.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return vo}getMaptilerSessionId(){return hI}setTransformRequest(t){return super.setTransformRequest(TA(t)),this}};class gJ extends Rt.Marker{addTo(t){return super.addTo(t)}}class yJ extends Rt.Popup{addTo(t){return super.addTo(t)}}let vJ=class extends Rt.Style{constructor(t,r={}){super(t,r)}};class xJ extends Rt.CanvasSource{onAdd(t){super.onAdd(t)}}class bJ extends Rt.GeoJSONSource{onAdd(t){super.onAdd(t)}}class wJ extends Rt.ImageSource{onAdd(t){super.onAdd(t)}}class SJ extends Rt.RasterTileSource{onAdd(t){super.onAdd(t)}}class EJ extends Rt.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class AJ extends Rt.VectorTileSource{onAdd(t){super.onAdd(t)}}class CJ extends Rt.VideoSource{onAdd(t){super.onAdd(t)}}class PJ extends Rt.AttributionControl{onAdd(t){return super.onAdd(t)}}class TJ extends Rt.TerrainControl{onAdd(t){return super.onAdd(t)}}class IJ extends Rt.BoxZoomHandler{constructor(t,r){super(t,r)}}class MJ extends Rt.ScrollZoomHandler{constructor(t,r){super(t,r)}}class RJ extends Rt.CooperativeGesturesHandler{constructor(t,r){super(t,r)}}class kJ extends Rt.KeyboardHandler{constructor(t){super(t)}}class LJ extends Rt.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class DJ extends Rt.MapWheelEvent{constructor(t,r,n){super(t,r,n)}}class OJ extends Rt.MapTouchEvent{constructor(t,r,n){super(t,r,n)}}class zJ extends Rt.MapMouseEvent{constructor(t,r,n,s={}){super(t,r,n,s)}}var RB=Object.defineProperty,kB=(e,t,r)=>t in e?RB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zA=(e,t,r)=>(kB(e,typeof t!="symbol"?t+"":t,r),r);function lg(e){const t=e.toString(16);return t.length==1?"0"+t:t}function LB(e){return"#"+lg(e[0])+lg(e[1])+lg(e[2])+(e.length===4?lg(e[3]):"")}class Ot extends Array{constructor(t={}){super(),zA(this,"min",0),zA(this,"max",1),"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new Ot({stops:t.map(r=>({value:r[0],color:r[1]}))})}setStops(t,r={clone:!0}){const n=r.clone?this.clone():this;n.length=0;let s=1/0,h=-1/0;for(let d=0;d<t.length;d+=1)s=Math.min(s,t[d].value),h=Math.max(h,t[d].value),n.push({value:t[d].value,color:t[d].color.slice()});return n.sort((d,c)=>d.value<c.value?-1:1),this.min=s,this.max=h,n}scale(t,r,n={clone:!0}){const s=n.clone,h=this[0].value,c=this.at(-1).value-h,b=r-t,E=[];for(let I=0;I<this.length;I+=1){const O=(this[I].value-h)/c*b+t;s?E.push({value:O,color:this[I].color.slice()}):this[I].value=O}return s?new Ot({stops:E}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new Ot({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let r=0;r<this.length;r+=1)t.push({value:this[r].value,color:this[r].color});return t}reverse(t={clone:!0}){const r=t.clone?this.clone():this;for(let n=0;n<~~(r.length/2);n+=1){const s=r[n].color;r[n].color=r.at(-(n+1)).color,r.at(-(n+1)).color=s}return r}getBounds(){return{min:this.min,max:this.max}}getColor(t,r={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let n=0;n<this.length-1;n+=1){if(t>this[n+1].value)continue;const s=this[n].color;if(!r.smooth)return s.slice();const h=this[n].value,d=this[n+1].value,c=this[n+1].color,b=(d-t)/(d-h);return s.map((E,I)=>Math.round(E*b+c[I]*(1-b)))}return[0,0,0]}getColorHex(t,r={smooth:!0,withAlpha:!1}){return LB(this.getColor(t,r))}getColorRelative(t,r={smooth:!0}){const n=this.getBounds();return this.getColor(n.min+t*(n.max-n.min),r)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const r=document.createElement("canvas");r.width=t.horizontal?t.size:1,r.height=t.horizontal?1:t.size;const n=r.getContext("2d");if(!n)throw new Error("Canvs context is missing");const s=n.getImageData(0,0,r.width,r.height),h=s.data,d=t.size,c=this[0].value,I=(this.at(-1).value-c)/d;for(let P=0;P<d;P+=1){const T=this.getColor(c+P*I,{smooth:t.smooth});h[P*4]=T[0],h[P*4+1]=T[1],h[P*4+2]=T[2],h[P*4+3]=T.length>3?T[3]:255}return n.putImageData(s,0,0),r}resample(t,r=15){const n=this.getBounds(),s=this.scale(0,1),h=1/(r-1);let d;if(t==="ease-in-square")d=Array.from({length:r},(E,I)=>{const P=I*h,T=Math.pow(P,2),O=s.getColor(T);return{value:P,color:O}});else if(t==="ease-out-square")d=Array.from({length:r},(E,I)=>{const P=I*h,T=1-Math.pow(1-P,2),O=s.getColor(T);return{value:P,color:O}});else if(t==="ease-out-sqrt")d=Array.from({length:r},(E,I)=>{const P=I*h,T=Math.pow(P,.5),O=s.getColor(T);return{value:P,color:O}});else if(t==="ease-in-sqrt")d=Array.from({length:r},(E,I)=>{const P=I*h,T=1-Math.pow(1-P,.5),O=s.getColor(T);return{value:P,color:O}});else if(t==="ease-out-exp")d=Array.from({length:r},(E,I)=>{const P=I*h,T=1-Math.pow(2,-10*P),O=s.getColor(T);return{value:P,color:O}});else if(t==="ease-in-exp")d=Array.from({length:r},(E,I)=>{const P=I*h,T=Math.pow(2,10*P-10),O=s.getColor(T);return{value:P,color:O}});else throw new Error("Invalid ressampling method.");return new Ot({stops:d}).scale(n.min,n.max)}transparentStart(){const t=this.getRawColorStops();return t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001,t.forEach(r=>{r.color.length===3&&r.color.push(255)}),t[0].color[3]=0,new Ot({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}new Ot({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Ot({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),new Ot({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),new Ot({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),new Ot({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),new Ot({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),new Ot({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Ot({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),new Ot({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),new Ot({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),new Ot({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),new Ot({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),new Ot({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),new Ot({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),new Ot({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),new Ot({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),new Ot({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),new Ot({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),new Ot({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),new Ot({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),new Ot({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),new Ot({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),new Ot({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),new Ot({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),new Ot({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),new Ot({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),new Ot({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),new Ot({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),new Ot({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),new Ot({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),new Ot({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),new Ot({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),new Ot({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),new Ot({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),new Ot({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),new Ot({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),new Ot({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),new Ot({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),new Ot({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),new Ot({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),new Ot({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]});const{setRTLTextPlugin:FJ,getRTLTextPluginStatus:BJ,LngLat:NJ,LngLatBounds:jJ,MercatorCoordinate:$J,Evented:VJ,AJAXError:UJ,prewarm:ZJ,clearPrewarmedResources:HJ,addProtocol:FA,removeProtocol:WJ,Hash:GJ,Point:qJ,config:KJ,EdgeInsets:XJ,DragRotateHandler:YJ,DragPanHandler:JJ,TwoFingersTouchZoomRotateHandler:QJ,DoubleClickZoomHandler:eQ,TwoFingersTouchZoomHandler:tQ,TwoFingersTouchRotateHandler:rQ,getWorkerCount:nQ,setWorkerCount:iQ,getMaxParallelImageRequests:oQ,setMaxParallelImageRequests:aQ,getWorkerUrl:sQ,setWorkerUrl:lQ,addSourceType:cQ,importScriptInWorkers:uQ}=Rt;Rt.Map;Rt.Marker;Rt.Popup;Rt.Style;Rt.CanvasSource;Rt.GeoJSONSource;Rt.ImageSource;Rt.RasterTileSource;Rt.RasterDEMTileSource;Rt.VectorTileSource;Rt.VideoSource;Rt.NavigationControl;Rt.GeolocateControl;Rt.AttributionControl;Rt.LogoControl;Rt.ScaleControl;Rt.FullscreenControl;Rt.TerrainControl;Rt.BoxZoomHandler;Rt.ScrollZoomHandler;Rt.CooperativeGesturesHandler;Rt.KeyboardHandler;Rt.TwoFingersTouchPitchHandler;Rt.MapWheelEvent;Rt.MapTouchEvent;Rt.MapMouseEvent;var Ga=function(){return Ga=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(t[h]=r[h])}return t},Ga.apply(this,arguments)};function vI(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function DB(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,h;n<s;n++)(h||!(n in t))&&(h||(h=Array.prototype.slice.call(t,0,n)),h[n]=t[n]);return e.concat(h||Array.prototype.slice.call(t))}var Fg="right-scroll-bar-position",Bg="width-before-scroll-bar",OB="with-scroll-bars-hidden",zB="--removed-body-scroll-bar-size";function U_(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function FB(e,t){var r=$.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var BB=typeof window<"u"?$.useLayoutEffect:$.useEffect,BA=new WeakMap;function NB(e,t){var r=FB(null,function(n){return e.forEach(function(s){return U_(s,n)})});return BB(function(){var n=BA.get(r);if(n){var s=new Set(n),h=new Set(e),d=r.current;s.forEach(function(c){h.has(c)||U_(c,null)}),h.forEach(function(c){s.has(c)||U_(c,d)})}BA.set(r,e)},[e]),r}function jB(e){return e}function $B(e,t){t===void 0&&(t=jB);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(h){var d=t(h,n);return r.push(d),function(){r=r.filter(function(c){return c!==d})}},assignSyncMedium:function(h){for(n=!0;r.length;){var d=r;r=[],d.forEach(h)}r={push:function(c){return h(c)},filter:function(){return r}}},assignMedium:function(h){n=!0;var d=[];if(r.length){var c=r;r=[],c.forEach(h),d=r}var b=function(){var I=d;d=[],I.forEach(h)},E=function(){return Promise.resolve().then(b)};E(),r={push:function(I){d.push(I),E()},filter:function(I){return d=d.filter(I),r}}}};return s}function VB(e){e===void 0&&(e={});var t=$B(null);return t.options=Ga({async:!0,ssr:!1},e),t}var _I=function(e){var t=e.sideCar,r=vI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return $.createElement(n,Ga({},r))};_I.isSideCarExport=!0;function UB(e,t){return e.useMedium(t),_I}var xI=VB(),Z_=function(){},l1=$.forwardRef(function(e,t){var r=$.useRef(null),n=$.useState({onScrollCapture:Z_,onWheelCapture:Z_,onTouchMoveCapture:Z_}),s=n[0],h=n[1],d=e.forwardProps,c=e.children,b=e.className,E=e.removeScrollBar,I=e.enabled,P=e.shards,T=e.sideCar,O=e.noIsolation,j=e.inert,V=e.allowPinchZoom,re=e.as,W=re===void 0?"div":re,Z=e.gapMode,K=vI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),ie=T,de=NB([r,t]),ae=Ga(Ga({},K),s);return $.createElement($.Fragment,null,I&&$.createElement(ie,{sideCar:xI,removeScrollBar:E,shards:P,noIsolation:O,inert:j,setCallbacks:h,allowPinchZoom:!!V,lockRef:r,gapMode:Z}),d?$.cloneElement($.Children.only(c),Ga(Ga({},ae),{ref:de})):$.createElement(W,Ga({},ae,{className:b,ref:de}),c))});l1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};l1.classNames={fullWidth:Bg,zeroRight:Fg};var ZB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function HB(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ZB();return t&&e.setAttribute("nonce",t),e}function WB(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function GB(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var qB=function(){var e=0,t=null;return{add:function(r){e==0&&(t=HB())&&(WB(t,r),GB(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},KB=function(){var e=qB();return function(t,r){$.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},bI=function(){var e=KB(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},XB={left:0,top:0,right:0,gap:0},H_=function(e){return parseInt(e||"",10)||0},YB=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[H_(r),H_(n),H_(s)]},JB=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return XB;var t=YB(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},QB=bI(),Xh="data-scroll-locked",eN=function(e,t,r,n){var s=e.left,h=e.top,d=e.right,c=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(OB,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(Xh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(h,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Fg,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Bg,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Fg," .").concat(Fg,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Bg," .").concat(Bg,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Xh,`] {
    `).concat(zB,": ").concat(c,`px;
  }
`)},NA=function(){var e=parseInt(document.body.getAttribute(Xh)||"0",10);return isFinite(e)?e:0},tN=function(){$.useEffect(function(){return document.body.setAttribute(Xh,(NA()+1).toString()),function(){var e=NA()-1;e<=0?document.body.removeAttribute(Xh):document.body.setAttribute(Xh,e.toString())}},[])},rN=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;tN();var h=$.useMemo(function(){return JB(s)},[s]);return $.createElement(QB,{styles:eN(h,!t,s,r?"":"!important")})},Ob=!1;if(typeof window<"u")try{var cg=Object.defineProperty({},"passive",{get:function(){return Ob=!0,!0}});window.addEventListener("test",cg,cg),window.removeEventListener("test",cg,cg)}catch{Ob=!1}var hh=Ob?{passive:!1}:!1,nN=function(e){return e.tagName==="TEXTAREA"},wI=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!nN(e)&&r[t]==="visible")},iN=function(e){return wI(e,"overflowY")},oN=function(e){return wI(e,"overflowX")},jA=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=SI(e,n);if(s){var h=EI(e,n),d=h[1],c=h[2];if(d>c)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},aN=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},sN=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},SI=function(e,t){return e==="v"?iN(t):oN(t)},EI=function(e,t){return e==="v"?aN(t):sN(t)},lN=function(e,t){return e==="h"&&t==="rtl"?-1:1},cN=function(e,t,r,n,s){var h=lN(e,window.getComputedStyle(t).direction),d=h*n,c=r.target,b=t.contains(c),E=!1,I=d>0,P=0,T=0;do{var O=EI(e,c),j=O[0],V=O[1],re=O[2],W=V-re-h*j;(j||W)&&SI(e,c)&&(P+=W,T+=j),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!b&&c!==document.body||b&&(t.contains(c)||t===c));return(I&&(Math.abs(P)<1||!s)||!I&&(Math.abs(T)<1||!s))&&(E=!0),E},ug=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$A=function(e){return[e.deltaX,e.deltaY]},VA=function(e){return e&&"current"in e?e.current:e},uN=function(e,t){return e[0]===t[0]&&e[1]===t[1]},hN=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},dN=0,dh=[];function fN(e){var t=$.useRef([]),r=$.useRef([0,0]),n=$.useRef(),s=$.useState(dN++)[0],h=$.useState(bI)[0],d=$.useRef(e);$.useEffect(function(){d.current=e},[e]),$.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var V=DB([e.lockRef.current],(e.shards||[]).map(VA),!0).filter(Boolean);return V.forEach(function(re){return re.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),V.forEach(function(re){return re.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var c=$.useCallback(function(V,re){if("touches"in V&&V.touches.length===2)return!d.current.allowPinchZoom;var W=ug(V),Z=r.current,K="deltaX"in V?V.deltaX:Z[0]-W[0],ie="deltaY"in V?V.deltaY:Z[1]-W[1],de,ae=V.target,J=Math.abs(K)>Math.abs(ie)?"h":"v";if("touches"in V&&J==="h"&&ae.type==="range")return!1;var we=jA(J,ae);if(!we)return!0;if(we?de=J:(de=J==="v"?"h":"v",we=jA(J,ae)),!we)return!1;if(!n.current&&"changedTouches"in V&&(K||ie)&&(n.current=de),!de)return!0;var Re=n.current||de;return cN(Re,re,V,Re==="h"?K:ie,!0)},[]),b=$.useCallback(function(V){var re=V;if(!(!dh.length||dh[dh.length-1]!==h)){var W="deltaY"in re?$A(re):ug(re),Z=t.current.filter(function(de){return de.name===re.type&&(de.target===re.target||re.target===de.shadowParent)&&uN(de.delta,W)})[0];if(Z&&Z.should){re.cancelable&&re.preventDefault();return}if(!Z){var K=(d.current.shards||[]).map(VA).filter(Boolean).filter(function(de){return de.contains(re.target)}),ie=K.length>0?c(re,K[0]):!d.current.noIsolation;ie&&re.cancelable&&re.preventDefault()}}},[]),E=$.useCallback(function(V,re,W,Z){var K={name:V,delta:re,target:W,should:Z,shadowParent:pN(W)};t.current.push(K),setTimeout(function(){t.current=t.current.filter(function(ie){return ie!==K})},1)},[]),I=$.useCallback(function(V){r.current=ug(V),n.current=void 0},[]),P=$.useCallback(function(V){E(V.type,$A(V),V.target,c(V,e.lockRef.current))},[]),T=$.useCallback(function(V){E(V.type,ug(V),V.target,c(V,e.lockRef.current))},[]);$.useEffect(function(){return dh.push(h),e.setCallbacks({onScrollCapture:P,onWheelCapture:P,onTouchMoveCapture:T}),document.addEventListener("wheel",b,hh),document.addEventListener("touchmove",b,hh),document.addEventListener("touchstart",I,hh),function(){dh=dh.filter(function(V){return V!==h}),document.removeEventListener("wheel",b,hh),document.removeEventListener("touchmove",b,hh),document.removeEventListener("touchstart",I,hh)}},[]);var O=e.removeScrollBar,j=e.inert;return $.createElement($.Fragment,null,j?$.createElement(h,{styles:hN(s)}):null,O?$.createElement(rN,{gapMode:e.gapMode}):null)}function pN(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const mN=UB(xI,fN);var AI=$.forwardRef(function(e,t){return $.createElement(l1,Ga({},e,{ref:t,sideCar:mN}))});AI.classNames=l1.classNames;function es(e){return Object.keys(e)}function W_(e){return e&&typeof e=="object"&&!Array.isArray(e)}function kw(e,t){const r={...e},n=t;return W_(e)&&W_(t)&&Object.keys(t).forEach(s=>{W_(n[s])&&s in e?r[s]=kw(r[s],n[s]):r[s]=n[s]}),r}function gN(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function yN(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function vN(e){const t=yN(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function G_(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function CI(e,{shouldScale:t=!1}={}){function r(n){if(n===0||n==="0")return`0${e}`;if(typeof n=="number"){const s=`${n/16}${e}`;return t?G_(s):s}if(typeof n=="string"){if(n===""||n.startsWith("calc(")||n.startsWith("clamp(")||n.includes("rgba("))return n;if(n.includes(","))return n.split(",").map(h=>r(h)).join(",");if(n.includes(" "))return n.split(" ").map(h=>r(h)).join(" ");if(n.includes(e))return t?G_(n):n;const s=n.replace("px","");if(!Number.isNaN(Number(s))){const h=`${Number(s)/16}${e}`;return t?G_(h):h}}return n}return r}const We=CI("rem",{shouldScale:!0}),UA=CI("em");function Lw(e){return Object.keys(e).reduce((t,r)=>(e[r]!==void 0&&(t[r]=e[r]),t),{})}function PI(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Kl(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==$.Fragment:!1}function Xl(e){const t=$.createContext(null);return[({children:s,value:h})=>Q.jsx(t.Provider,{value:h,children:s}),()=>{const s=$.useContext(t);if(s===null)throw new Error(e);return s}]}function Dw(e=null){const t=$.createContext(e);return[({children:s,value:h})=>Q.jsx(t.Provider,{value:h,children:s}),()=>$.useContext(t)]}function vy(e,t){let r=e;for(;(r=r.parentElement)&&!r.matches(t););return r}function _N(e,t,r){for(let n=e-1;n>=0;n-=1)if(!t[n].disabled)return n;if(r){for(let n=t.length-1;n>-1;n-=1)if(!t[n].disabled)return n}return e}function xN(e,t,r){for(let n=e+1;n<t.length;n+=1)if(!t[n].disabled)return n;if(r){for(let n=0;n<t.length;n+=1)if(!t[n].disabled)return n}return e}function bN(e,t,r){return vy(e,r)===vy(t,r)}function wN({parentSelector:e,siblingSelector:t,onKeyDown:r,loop:n=!0,activateOnFocus:s=!1,dir:h="rtl",orientation:d}){return c=>{var j;r==null||r(c);const b=Array.from(((j=vy(c.currentTarget,e))==null?void 0:j.querySelectorAll(t))||[]).filter(V=>bN(c.currentTarget,V,e)),E=b.findIndex(V=>c.currentTarget===V),I=xN(E,b,n),P=_N(E,b,n),T=h==="rtl"?P:I,O=h==="rtl"?I:P;switch(c.key){case"ArrowRight":{d==="horizontal"&&(c.stopPropagation(),c.preventDefault(),b[T].focus(),s&&b[T].click());break}case"ArrowLeft":{d==="horizontal"&&(c.stopPropagation(),c.preventDefault(),b[O].focus(),s&&b[O].click());break}case"ArrowUp":{d==="vertical"&&(c.stopPropagation(),c.preventDefault(),b[P].focus(),s&&b[P].click());break}case"ArrowDown":{d==="vertical"&&(c.stopPropagation(),c.preventDefault(),b[I].focus(),s&&b[I].click());break}case"Home":{c.stopPropagation(),c.preventDefault(),!b[0].disabled&&b[0].focus();break}case"End":{c.stopPropagation(),c.preventDefault();const V=b.length-1;!b[V].disabled&&b[V].focus();break}}}}const SN={app:100,modal:200,popover:300,overlay:400,max:9999};function Yl(e){return SN[e]}const EN=()=>{};function AN(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||EN:r=>{var n;r.key==="Escape"&&(e(r),(n=t.onTrigger)==null||n.call(t))}}function Bn(e,t="size",r=!0){if(e!==void 0)return PI(e)?r?We(e):e:`var(--${t}-${e})`}function CN(e){return Bn(e,"mantine-spacing")}function ea(e){return e===void 0?"var(--mantine-radius-default)":Bn(e,"mantine-radius")}function Ea(e){return Bn(e,"mantine-font-size")}function Ow(e){if(e)return Bn(e,"mantine-shadow",!1)}function Ms(e,t){return r=>{e==null||e(r),t==null||t(r)}}function PN(e,t,r){var n;return r?Array.from(((n=vy(r,t))==null?void 0:n.querySelectorAll(e))||[]).findIndex(s=>s===r):null}function TN(){const[e,t]=$.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function ZA(e,t,r){return Math.min(Math.max(e,t),r)}function TI(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Rc(e){const t=$.useRef(e);return $.useEffect(()=>{t.current=e}),$.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function c1(e,t){const r=Rc(e),n=$.useRef(0);return $.useEffect(()=>()=>window.clearTimeout(n.current),[]),$.useCallback((...s)=>{window.clearTimeout(n.current),n.current=window.setTimeout(()=>r(...s),t)},[r,t])}const HA=["mousedown","touchstart"];function IN(e,t,r){const n=$.useRef();return $.useEffect(()=>{const s=h=>{const{target:d}=h??{};if(Array.isArray(r)){const c=(d==null?void 0:d.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(d)&&d.tagName!=="HTML";r.every(E=>!!E&&!h.composedPath().includes(E))&&!c&&e()}else n.current&&!n.current.contains(d)&&e()};return(t||HA).forEach(h=>document.addEventListener(h,s)),()=>{(t||HA).forEach(h=>document.removeEventListener(h,s))}},[n,e,r]),n}function MN(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function RN(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function kN(e,t,{getInitialValueInEffect:r}={getInitialValueInEffect:!0}){const[n,s]=$.useState(r?t:RN(e)),h=$.useRef();return $.useEffect(()=>{if("matchMedia"in window)return h.current=window.matchMedia(e),s(h.current.matches),MN(h.current,d=>s(d.matches))},[e]),n}const vm=typeof document<"u"?$.useLayoutEffect:$.useEffect;function jl(e,t){const r=$.useRef(!1);$.useEffect(()=>()=>{r.current=!1},[]),$.useEffect(()=>{if(r.current)return e();r.current=!0},t)}function II({opened:e,shouldReturnFocus:t=!0}){const r=$.useRef(),n=()=>{var s;r.current&&"focus"in r.current&&typeof r.current.focus=="function"&&((s=r.current)==null||s.focus({preventScroll:!0}))};return jl(()=>{let s=-1;const h=d=>{d.key==="Tab"&&window.clearTimeout(s)};return document.addEventListener("keydown",h),e?r.current=document.activeElement:t&&(s=window.setTimeout(n,10)),()=>{window.clearTimeout(s),document.removeEventListener("keydown",h)}},[e,t]),n}function LN(e,t="body > :not(script)"){const r=TI(),n=Array.from(document.querySelectorAll(t)).map(s=>{var b;if((b=s==null?void 0:s.shadowRoot)!=null&&b.contains(e)||s.contains(e))return;const h=s.getAttribute("aria-hidden"),d=s.getAttribute("data-hidden"),c=s.getAttribute("data-focus-id");return s.setAttribute("data-focus-id",r),h===null||h==="false"?s.setAttribute("aria-hidden","true"):!d&&!c&&s.setAttribute("data-hidden",h),{node:s,ariaHidden:d||null}});return()=>{n.forEach(s=>{!s||r!==s.node.getAttribute("data-focus-id")||(s.ariaHidden===null?s.node.removeAttribute("aria-hidden"):s.node.setAttribute("aria-hidden",s.ariaHidden),s.node.removeAttribute("data-focus-id"),s.node.removeAttribute("data-hidden"))})}}const DN=/input|select|textarea|button|object/,MI="a, input, select, textarea, button, object, [tabindex]";function ON(e){return e.style.display==="none"}function zN(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let r=e;for(;r&&!(r===document.body||r.nodeType===11);){if(ON(r))return!1;r=r.parentNode}return!0}function RI(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function zb(e){const t=e.nodeName.toLowerCase(),r=!Number.isNaN(RI(e));return(DN.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||r)&&zN(e)}function kI(e){const t=RI(e);return(Number.isNaN(t)||t>=0)&&zb(e)}function FN(e){return Array.from(e.querySelectorAll(MI)).filter(kI)}function BN(e,t){const r=FN(e);if(!r.length){t.preventDefault();return}const n=r[t.shiftKey?0:r.length-1],s=e.getRootNode();let h=n===s.activeElement||e===s.activeElement;const d=s.activeElement;if(d.tagName==="INPUT"&&d.getAttribute("type")==="radio"&&(h=r.filter(I=>I.getAttribute("type")==="radio"&&I.getAttribute("name")===d.getAttribute("name")).includes(n)),!h)return;t.preventDefault();const b=r[t.shiftKey?r.length-1:0];b&&b.focus()}function NN(e=!0){const t=$.useRef(),r=$.useRef(null),n=h=>{let d=h.querySelector("[data-autofocus]");if(!d){const c=Array.from(h.querySelectorAll(MI));d=c.find(kI)||c.find(zb)||null,!d&&zb(h)&&(d=h)}d&&d.focus({preventScroll:!0})},s=$.useCallback(h=>{if(e){if(h===null){r.current&&(r.current(),r.current=null);return}r.current=LN(h),t.current!==h&&(h?(setTimeout(()=>{h.getRootNode()&&n(h)}),t.current=h):t.current=null)}},[e]);return $.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const h=d=>{d.key==="Tab"&&t.current&&BN(t.current,d)};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h),r.current&&r.current()}},[e]),s}const jN=ue.useId||(()=>{});function $N(){const e=jN();return e?`mantine-${e.replace(/:/g,"")}`:""}function wd(e){const t=$N(),[r,n]=$.useState(t);return vm(()=>{n(TI())},[]),typeof e=="string"?e:typeof window>"u"?t:r}function VN(e,t,r){$.useEffect(()=>(window.addEventListener(e,t,r),()=>window.removeEventListener(e,t,r)),[e,t])}function LI(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function UN(...e){return t=>{e.forEach(r=>LI(r,t))}}function Ti(...e){return $.useCallback(UN(...e),e)}function ZN(e,t,r="ltr"){const n=$.useRef(null),s=$.useRef(!1),h=$.useRef(!1),d=$.useRef(0),[c,b]=$.useState(!1);return $.useEffect(()=>{s.current=!0},[]),$.useEffect(()=>{var Z,K;const E=({x:ie,y:de})=>{cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>{if(s.current&&n.current){n.current.style.userSelect="none";const ae=n.current.getBoundingClientRect();if(ae.width&&ae.height){const J=ZA((ie-ae.left)/ae.width,0,1);e({x:r==="ltr"?J:1-J,y:ZA((de-ae.top)/ae.height,0,1)})}}})},I=()=>{document.addEventListener("mousemove",V),document.addEventListener("mouseup",O),document.addEventListener("touchmove",W),document.addEventListener("touchend",O)},P=()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",O),document.removeEventListener("touchmove",W),document.removeEventListener("touchend",O)},T=()=>{!h.current&&s.current&&(h.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),b(!0),I())},O=()=>{h.current&&s.current&&(h.current=!1,b(!1),P(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},j=ie=>{T(),ie.preventDefault(),V(ie)},V=ie=>E({x:ie.clientX,y:ie.clientY}),re=ie=>{ie.cancelable&&ie.preventDefault(),T(),W(ie)},W=ie=>{ie.cancelable&&ie.preventDefault(),E({x:ie.changedTouches[0].clientX,y:ie.changedTouches[0].clientY})};return(Z=n.current)==null||Z.addEventListener("mousedown",j),(K=n.current)==null||K.addEventListener("touchstart",re,{passive:!1}),()=>{n.current&&(n.current.removeEventListener("mousedown",j),n.current.removeEventListener("touchstart",re))}},[r,e]),{ref:n,active:c}}function _m({value:e,defaultValue:t,finalValue:r,onChange:n=()=>{}}){const[s,h]=$.useState(t!==void 0?t:r),d=(c,...b)=>{h(c),n==null||n(c,...b)};return e!==void 0?[e,n,!0]:[s,d,!1]}function DI(e,t){return kN("(prefers-reduced-motion: reduce)",e,t)}function OI(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=OI(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Pi(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=OI(e))&&(n&&(n+=" "),n+=t);return n}const HN={};function WN(e){const t={};return e.forEach(r=>{Object.entries(r).forEach(([n,s])=>{t[n]?t[n]=Pi(t[n],s):t[n]=s})}),t}function u1({theme:e,classNames:t,props:r,stylesCtx:n}){const h=(Array.isArray(t)?t:[t]).map(d=>typeof d=="function"?d(e,r,n):d||HN);return WN(h)}function _y({theme:e,styles:t,props:r,stylesCtx:n}){return(Array.isArray(t)?t:[t]).reduce((h,d)=>typeof d=="function"?{...h,...d(e,r,n)}:{...h,...d},{})}const zI=$.createContext(null);function lu(){const e=$.useContext(zI);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function GN(){return lu().cssVariablesResolver}function qN(){return lu().classNamesPrefix}function zw(){return lu().getStyleNonce}function KN(){return lu().withStaticClasses}function XN(){return lu().headless}function YN(){var e;return(e=lu().stylesTransform)==null?void 0:e.sx}function JN(){var e;return(e=lu().stylesTransform)==null?void 0:e.styles}function QN(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function e7(e){let t=e.replace("#","");if(t.length===3){const d=t.split("");t=[d[0],d[0],d[1],d[1],d[2],d[2]].join("")}if(t.length===8){const d=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:d}}const r=parseInt(t,16),n=r>>16&255,s=r>>8&255,h=r&255;return{r:n,g:s,b:h,a:1}}function t7(e){const[t,r,n,s]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:r,b:n,a:s||1}}function r7(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,r=e.match(t);if(!r)return{r:0,g:0,b:0,a:1};const n=parseInt(r[1],10),s=parseInt(r[2],10)/100,h=parseInt(r[3],10)/100,d=r[5]?parseFloat(r[5]):void 0,c=(1-Math.abs(2*h-1))*s,b=n/60,E=c*(1-Math.abs(b%2-1)),I=h-c/2;let P,T,O;return b>=0&&b<1?(P=c,T=E,O=0):b>=1&&b<2?(P=E,T=c,O=0):b>=2&&b<3?(P=0,T=c,O=E):b>=3&&b<4?(P=0,T=E,O=c):b>=4&&b<5?(P=E,T=0,O=c):(P=c,T=0,O=E),{r:Math.round((P+I)*255),g:Math.round((T+I)*255),b:Math.round((O+I)*255),a:d||1}}function Fw(e){return QN(e)?e7(e):e.startsWith("rgb")?t7(e):e.startsWith("hsl")?r7(e):{r:0,g:0,b:0,a:1}}function hg(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r,g:n,b:s,a:h}=Fw(e),d=1-t,c=b=>Math.round(b*d);return`rgba(${c(r)}, ${c(n)}, ${c(s)}, ${h})`}function Kp(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function q_(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function n7(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function i7(e){if(e.startsWith("oklch("))return(n7(e)||0)/100;const{r:t,g:r,b:n}=Fw(e),s=t/255,h=r/255,d=n/255,c=q_(s),b=q_(h),E=q_(d);return .2126*c+.7152*b+.0722*E}function Qf(e,t=.179){return e.startsWith("var(")?!1:i7(e)>t}function $l({color:e,theme:t,colorScheme:r}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:r==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:Qf(r==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:r==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Qf(r==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:Qf(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[n,s]=e.split("."),h=s?Number(s):void 0,d=n in t.colors;if(d){const c=h!==void 0?t.colors[n][h]:t.colors[n][Kp(t,r||"light")];return{color:n,value:c,shade:h,isThemeColor:d,isLight:Qf(c,t.luminanceThreshold),variable:s?`--mantine-color-${n}-${h}`:`--mantine-color-${n}-filled`}}return{color:e,value:e,isThemeColor:d,isLight:Qf(e,t.luminanceThreshold),shade:h,variable:void 0}}function Yc(e,t){const r=$l({color:e||t.primaryColor,theme:t});return r.variable?`var(${r.variable})`:e}function WA(e,t){const r={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},n=Yc(r.from,t),s=Yc(r.to,t);return`linear-gradient(${r.deg}deg, ${n} 0%, ${s} 100%)`}function jo(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const h=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${h}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r,g:n,b:s}=Fw(e);return`rgba(${r}, ${n}, ${s}, ${t})`}const fh=jo,o7=({color:e,theme:t,variant:r,gradient:n,autoContrast:s})=>{const h=$l({color:e,theme:t}),d=typeof s=="boolean"?s:t.autoContrast;if(r==="filled"){const c=d&&h.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return h.isThemeColor?h.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:c,border:`${We(1)} solid transparent`}:{background:`var(--mantine-color-${h.color}-${h.shade})`,hover:`var(--mantine-color-${h.color}-${h.shade===9?8:h.shade+1})`,color:c,border:`${We(1)} solid transparent`}:{background:e,hover:hg(e,.1),color:c,border:`${We(1)} solid transparent`}}if(r==="light"){if(h.isThemeColor){if(h.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${We(1)} solid transparent`};const c=t.colors[h.color][h.shade];return{background:jo(c,.1),hover:jo(c,.12),color:`var(--mantine-color-${h.color}-${Math.min(h.shade,6)})`,border:`${We(1)} solid transparent`}}return{background:jo(e,.1),hover:jo(e,.12),color:e,border:`${We(1)} solid transparent`}}if(r==="outline")return h.isThemeColor?h.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${We(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:jo(t.colors[h.color][h.shade],.05),color:`var(--mantine-color-${h.color}-${h.shade})`,border:`${We(1)} solid var(--mantine-color-${h.color}-${h.shade})`}:{background:"transparent",hover:jo(e,.05),color:e,border:`${We(1)} solid ${e}`};if(r==="subtle"){if(h.isThemeColor){if(h.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${We(1)} solid transparent`};const c=t.colors[h.color][h.shade];return{background:"transparent",hover:jo(c,.12),color:`var(--mantine-color-${h.color}-${Math.min(h.shade,6)})`,border:`${We(1)} solid transparent`}}return{background:"transparent",hover:jo(e,.12),color:e,border:`${We(1)} solid transparent`}}return r==="transparent"?h.isThemeColor?h.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${We(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${h.color}-${Math.min(h.shade,6)})`,border:`${We(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${We(1)} solid transparent`}:r==="white"?h.isThemeColor?h.shade===void 0?{background:"var(--mantine-color-white)",hover:hg(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${We(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:hg(t.white,.01),color:`var(--mantine-color-${h.color}-${h.shade})`,border:`${We(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:hg(t.white,.01),color:e,border:`${We(1)} solid transparent`}:r==="gradient"?{background:WA(n,t),hover:WA(n,t),color:"var(--mantine-color-white)",border:"none"}:r==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${We(1)} solid var(--mantine-color-default-border)`}:{}},a7={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},GA="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Bw={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:a7,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:o7,autoContrast:!1,luminanceThreshold:.3,fontFamily:GA,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:GA,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:We(34),lineHeight:"1.3"},h2:{fontSize:We(26),lineHeight:"1.35"},h3:{fontSize:We(22),lineHeight:"1.4"},h4:{fontSize:We(18),lineHeight:"1.45"},h5:{fontSize:We(16),lineHeight:"1.5"},h6:{fontSize:We(14),lineHeight:"1.5"}}},fontSizes:{xs:We(12),sm:We(14),md:We(16),lg:We(18),xl:We(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:We(2),sm:We(4),md:We(8),lg:We(16),xl:We(32)},spacing:{xs:We(10),sm:We(12),md:We(16),lg:We(20),xl:We(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), 0 ${We(1)} ${We(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(10)} ${We(15)} ${We(-5)}, rgba(0, 0, 0, 0.04) 0 ${We(7)} ${We(7)} ${We(-5)}`,md:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(20)} ${We(25)} ${We(-5)}, rgba(0, 0, 0, 0.04) 0 ${We(10)} ${We(10)} ${We(-5)}`,lg:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(28)} ${We(23)} ${We(-7)}, rgba(0, 0, 0, 0.04) 0 ${We(12)} ${We(12)} ${We(-7)}`,xl:`0 ${We(1)} ${We(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${We(36)} ${We(28)} ${We(-7)}, rgba(0, 0, 0, 0.04) 0 ${We(17)} ${We(17)} ${We(-7)}`},other:{},components:{}};function qA(e){return e==="auto"||e==="dark"||e==="light"}function s7({key:e="mantine-color-scheme-value"}={}){let t;return{get:r=>{if(typeof window>"u")return r;try{const n=window.localStorage.getItem(e);return qA(n)?n:r}catch{return r}},set:r=>{try{window.localStorage.setItem(e,r)}catch(n){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",n)}},subscribe:r=>{t=n=>{n.storageArea===window.localStorage&&n.key===e&&qA(n.newValue)&&r(n.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const l7="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",KA="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function K_(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function XA(e){if(!(e.primaryColor in e.colors))throw new Error(l7);if(typeof e.primaryShade=="object"&&(!K_(e.primaryShade.dark)||!K_(e.primaryShade.light)))throw new Error(KA);if(typeof e.primaryShade=="number"&&!K_(e.primaryShade))throw new Error(KA)}function c7(e,t){var n;if(!t)return XA(e),e;const r=kw(e,t);return t.fontFamily&&!((n=t.headings)!=null&&n.fontFamily)&&(r.headings.fontFamily=t.fontFamily),XA(r),r}const Nw=$.createContext(null),u7=()=>$.useContext(Nw)||Bw;function Ra(){const e=$.useContext(Nw);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function FI({theme:e,children:t,inherit:r=!0}){const n=u7(),s=$.useMemo(()=>c7(r?n:Bw,e),[e,n,r]);return Q.jsx(Nw.Provider,{value:s,children:t})}FI.displayName="@mantine/core/MantineThemeProvider";function h7(){const e=Ra(),t=zw(),r=es(e.breakpoints).reduce((n,s)=>{const h=e.breakpoints[s].includes("px"),d=vN(e.breakpoints[s]),c=h?`${d-.1}px`:UA(d-.1),b=h?`${d}px`:UA(d);return`${n}@media (max-width: ${c}) {.mantine-visible-from-${s} {display: none !important;}}@media (min-width: ${b}) {.mantine-hidden-from-${s} {display: none !important;}}`},"");return Q.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:r}})}function X_(e){return Object.entries(e).map(([t,r])=>`${t}: ${r};`).join("")}function Y_(e,t){return(Array.isArray(e)?e:[e]).reduce((n,s)=>`${s}{${n}}`,t)}function d7(e,t){const r=X_(e.variables),n=r?Y_(t,r):"",s=X_(e.dark),h=s?Y_(`${t}[data-mantine-color-scheme="dark"]`,s):"",d=X_(e.light),c=d?Y_(`${t}[data-mantine-color-scheme="light"]`,d):"";return`${n}${h}${c}`}function f7({color:e,theme:t,autoContrast:r}){return(typeof r=="boolean"?r:t.autoContrast)&&$l({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function YA(e,t){return f7({color:e.colors[e.primaryColor][Kp(e,t)],theme:e,autoContrast:null})}function dg({theme:e,color:t,colorScheme:r,name:n=t,withColorValues:s=!0}){if(!e.colors[t])return{};if(r==="light"){const c=Kp(e,"light"),b={[`--mantine-color-${n}-text`]:`var(--mantine-color-${n}-filled)`,[`--mantine-color-${n}-filled`]:`var(--mantine-color-${n}-${c})`,[`--mantine-color-${n}-filled-hover`]:`var(--mantine-color-${n}-${c===9?8:c+1})`,[`--mantine-color-${n}-light`]:fh(e.colors[t][c],.1),[`--mantine-color-${n}-light-hover`]:fh(e.colors[t][c],.12),[`--mantine-color-${n}-light-color`]:`var(--mantine-color-${n}-${c})`,[`--mantine-color-${n}-outline`]:`var(--mantine-color-${n}-${c})`,[`--mantine-color-${n}-outline-hover`]:fh(e.colors[t][c],.05)};return s?{[`--mantine-color-${n}-0`]:e.colors[t][0],[`--mantine-color-${n}-1`]:e.colors[t][1],[`--mantine-color-${n}-2`]:e.colors[t][2],[`--mantine-color-${n}-3`]:e.colors[t][3],[`--mantine-color-${n}-4`]:e.colors[t][4],[`--mantine-color-${n}-5`]:e.colors[t][5],[`--mantine-color-${n}-6`]:e.colors[t][6],[`--mantine-color-${n}-7`]:e.colors[t][7],[`--mantine-color-${n}-8`]:e.colors[t][8],[`--mantine-color-${n}-9`]:e.colors[t][9],...b}:b}const h=Kp(e,"dark"),d={[`--mantine-color-${n}-text`]:`var(--mantine-color-${n}-4)`,[`--mantine-color-${n}-filled`]:`var(--mantine-color-${n}-${h})`,[`--mantine-color-${n}-filled-hover`]:`var(--mantine-color-${n}-${h===9?8:h+1})`,[`--mantine-color-${n}-light`]:fh(e.colors[t][Math.max(0,h-2)],.15),[`--mantine-color-${n}-light-hover`]:fh(e.colors[t][Math.max(0,h-2)],.2),[`--mantine-color-${n}-light-color`]:`var(--mantine-color-${n}-${Math.max(h-5,0)})`,[`--mantine-color-${n}-outline`]:`var(--mantine-color-${n}-${Math.max(h-4,0)})`,[`--mantine-color-${n}-outline-hover`]:fh(e.colors[t][Math.max(h-4,0)],.05)};return s?{[`--mantine-color-${n}-0`]:e.colors[t][0],[`--mantine-color-${n}-1`]:e.colors[t][1],[`--mantine-color-${n}-2`]:e.colors[t][2],[`--mantine-color-${n}-3`]:e.colors[t][3],[`--mantine-color-${n}-4`]:e.colors[t][4],[`--mantine-color-${n}-5`]:e.colors[t][5],[`--mantine-color-${n}-6`]:e.colors[t][6],[`--mantine-color-${n}-7`]:e.colors[t][7],[`--mantine-color-${n}-8`]:e.colors[t][8],[`--mantine-color-${n}-9`]:e.colors[t][9],...d}:d}function p7(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function ph(e,t,r){es(t).forEach(n=>Object.assign(e,{[`--mantine-${r}-${n}`]:t[n]}))}const BI=e=>{const t=Kp(e,"light"),r=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:We(e.defaultRadius),n={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":r,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":YA(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":YA(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};ph(n.variables,e.breakpoints,"breakpoint"),ph(n.variables,e.spacing,"spacing"),ph(n.variables,e.fontSizes,"font-size"),ph(n.variables,e.lineHeights,"line-height"),ph(n.variables,e.shadows,"shadow"),ph(n.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((h,d)=>{n.variables[`--mantine-primary-color-${d}`]=`var(--mantine-color-${e.primaryColor}-${d})`}),es(e.colors).forEach(h=>{const d=e.colors[h];if(p7(d)){Object.assign(n.light,dg({theme:e,name:d.name,color:d.light,colorScheme:"light",withColorValues:!0})),Object.assign(n.dark,dg({theme:e,name:d.name,color:d.dark,colorScheme:"dark",withColorValues:!0}));return}d.forEach((c,b)=>{n.variables[`--mantine-color-${h}-${b}`]=c}),Object.assign(n.light,dg({theme:e,color:h,colorScheme:"light",withColorValues:!1})),Object.assign(n.dark,dg({theme:e,color:h,colorScheme:"dark",withColorValues:!1}))});const s=e.headings.sizes;return es(s).forEach(h=>{n.variables[`--mantine-${h}-font-size`]=s[h].fontSize,n.variables[`--mantine-${h}-line-height`]=s[h].lineHeight,n.variables[`--mantine-${h}-font-weight`]=s[h].fontWeight||e.headings.fontWeight}),n};function m7({theme:e,generator:t}){const r=BI(e),n=t==null?void 0:t(e);return n?kw(r,n):r}const J_=BI(Bw);function g7(e){const t={variables:{},light:{},dark:{}};return es(e.variables).forEach(r=>{J_.variables[r]!==e.variables[r]&&(t.variables[r]=e.variables[r])}),es(e.light).forEach(r=>{J_.light[r]!==e.light[r]&&(t.light[r]=e.light[r])}),es(e.dark).forEach(r=>{J_.dark[r]!==e.dark[r]&&(t.dark[r]=e.dark[r])}),t}function y7(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function NI({cssVariablesSelector:e,deduplicateCssVariables:t}){const r=Ra(),n=zw(),s=GN(),h=m7({theme:r,generator:s}),d=e===":root"&&t,c=d?g7(h):h,b=d7(c,e);return b?Q.jsx("style",{"data-mantine-styles":!0,nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:`${b}${d?"":y7(e)}`}}):null}NI.displayName="@mantine/CssVariables";function v7(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function mh(e,t){var n;const r=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(n=t())==null||n.setAttribute("data-mantine-color-scheme",r)}function _7({manager:e,defaultColorScheme:t,getRootElement:r,forceColorScheme:n}){const s=$.useRef(),[h,d]=$.useState(()=>e.get(t)),c=n||h,b=$.useCallback(I=>{n||(mh(I,r),d(I),e.set(I))},[e.set,c,n]),E=$.useCallback(()=>{d(t),mh(t,r),e.clear()},[e.clear,t]);return $.useEffect(()=>(e.subscribe(b),e.unsubscribe),[e.subscribe,e.unsubscribe]),vm(()=>{mh(e.get(t),r)},[]),$.useEffect(()=>{var P;if(n)return mh(n,r),()=>{};n===void 0&&mh(h,r),s.current=window.matchMedia("(prefers-color-scheme: dark)");const I=T=>{h==="auto"&&mh(T.matches?"dark":"light",r)};return(P=s.current)==null||P.addEventListener("change",I),()=>{var T;return(T=s.current)==null?void 0:T.removeEventListener("change",I)}},[h,n]),{colorScheme:c,setColorScheme:b,clearColorScheme:E}}function x7({respectReducedMotion:e,getRootElement:t}){vm(()=>{var r;e&&((r=t())==null||r.setAttribute("data-respect-reduced-motion","true"))},[e])}v7();function jI({theme:e,children:t,getStyleNonce:r,withStaticClasses:n=!0,withGlobalClasses:s=!0,deduplicateCssVariables:h=!0,withCssVariables:d=!0,cssVariablesSelector:c=":root",classNamesPrefix:b="mantine",colorSchemeManager:E=s7(),defaultColorScheme:I="light",getRootElement:P=()=>document.documentElement,cssVariablesResolver:T,forceColorScheme:O,stylesTransform:j}){const{colorScheme:V,setColorScheme:re,clearColorScheme:W}=_7({defaultColorScheme:I,forceColorScheme:O,manager:E,getRootElement:P});return x7({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:P}),Q.jsx(zI.Provider,{value:{colorScheme:V,setColorScheme:re,clearColorScheme:W,getRootElement:P,classNamesPrefix:b,getStyleNonce:r,cssVariablesResolver:T,cssVariablesSelector:c,withStaticClasses:n,stylesTransform:j},children:Q.jsxs(FI,{theme:e,children:[d&&Q.jsx(NI,{cssVariablesSelector:c,deduplicateCssVariables:h}),s&&Q.jsx(h7,{}),t]})})}jI.displayName="@mantine/core/MantineProvider";function $I({classNames:e,styles:t,props:r,stylesCtx:n}){const s=Ra();return{resolvedClassNames:u1({theme:s,classNames:e,props:r,stylesCtx:n||void 0}),resolvedStyles:_y({theme:s,styles:t,props:r,stylesCtx:n||void 0})}}const b7={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function w7({theme:e,options:t,unstyled:r}){return Pi((t==null?void 0:t.focusable)&&!r&&(e.focusClassName||b7[e.focusRing]),(t==null?void 0:t.active)&&!r&&e.activeClassName)}function S7({selector:e,stylesCtx:t,options:r,props:n,theme:s}){return u1({theme:s,classNames:r==null?void 0:r.classNames,props:(r==null?void 0:r.props)||n,stylesCtx:t})[e]}function JA({selector:e,stylesCtx:t,theme:r,classNames:n,props:s}){return u1({theme:r,classNames:n,props:s,stylesCtx:t})[e]}function E7({rootSelector:e,selector:t,className:r}){return e===t?r:void 0}function A7({selector:e,classes:t,unstyled:r}){return r?void 0:t[e]}function C7({themeName:e,classNamesPrefix:t,selector:r,withStaticClass:n}){return n===!1?[]:e.map(s=>`${t}-${s}-${r}`)}function P7({themeName:e,theme:t,selector:r,props:n,stylesCtx:s}){return e.map(h=>{var d,c;return(c=u1({theme:t,classNames:(d=t.components[h])==null?void 0:d.classNames,props:n,stylesCtx:s}))==null?void 0:c[r]})}function T7({options:e,classes:t,selector:r,unstyled:n}){return e!=null&&e.variant&&!n?t[`${r}--${e.variant}`]:void 0}function I7({theme:e,options:t,themeName:r,selector:n,classNamesPrefix:s,classNames:h,classes:d,unstyled:c,className:b,rootSelector:E,props:I,stylesCtx:P,withStaticClasses:T,headless:O,transformedStyles:j}){return Pi(w7({theme:e,options:t,unstyled:c||O}),P7({theme:e,themeName:r,selector:n,props:I,stylesCtx:P}),T7({options:t,classes:d,selector:n,unstyled:c}),JA({selector:n,stylesCtx:P,theme:e,classNames:h,props:I}),JA({selector:n,stylesCtx:P,theme:e,classNames:j,props:I}),S7({selector:n,stylesCtx:P,options:t,props:I,theme:e}),E7({rootSelector:E,selector:n,className:b}),A7({selector:n,classes:d,unstyled:c||O}),T&&!O&&C7({themeName:r,classNamesPrefix:s,selector:n,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function M7({theme:e,themeName:t,props:r,stylesCtx:n,selector:s}){return t.map(h=>{var d;return _y({theme:e,styles:(d=e.components[h])==null?void 0:d.styles,props:r,stylesCtx:n})[s]}).reduce((h,d)=>({...h,...d}),{})}function Fb({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((r,n)=>({...r,...Fb({style:n,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function R7(e){return e.reduce((t,r)=>(r&&Object.keys(r).forEach(n=>{t[n]={...t[n],...Lw(r[n])}}),t),{})}function k7({vars:e,varsResolver:t,theme:r,props:n,stylesCtx:s,selector:h,themeName:d,headless:c}){var b;return(b=R7([c?{}:t==null?void 0:t(r,n,s),...d.map(E=>{var I,P,T;return(T=(P=(I=r.components)==null?void 0:I[E])==null?void 0:P.vars)==null?void 0:T.call(P,r,n,s)}),e==null?void 0:e(r,n,s)]))==null?void 0:b[h]}function L7({theme:e,themeName:t,selector:r,options:n,props:s,stylesCtx:h,rootSelector:d,styles:c,style:b,vars:E,varsResolver:I,headless:P,withStylesTransform:T}){return{...!T&&M7({theme:e,themeName:t,props:s,stylesCtx:h,selector:r}),...!T&&_y({theme:e,styles:c,props:s,stylesCtx:h})[r],...!T&&_y({theme:e,styles:n==null?void 0:n.styles,props:(n==null?void 0:n.props)||s,stylesCtx:h})[r],...k7({theme:e,props:s,stylesCtx:h,vars:E,varsResolver:I,selector:r,themeName:t,headless:P}),...d===r?Fb({style:b,theme:e}):null,...Fb({style:n==null?void 0:n.style,theme:e})}}function D7({props:e,stylesCtx:t,themeName:r}){var d;const n=Ra(),s=(d=JN())==null?void 0:d();return{getTransformedStyles:c=>s?[...c.map(E=>s(E,{props:e,theme:n,ctx:t})),...r.map(E=>{var I;return s((I=n.components[E])==null?void 0:I.styles,{props:e,theme:n,ctx:t})})].filter(Boolean):[],withStylesTransform:!!s}}function Or({name:e,classes:t,props:r,stylesCtx:n,className:s,style:h,rootSelector:d="root",unstyled:c,classNames:b,styles:E,vars:I,varsResolver:P}){const T=Ra(),O=qN(),j=KN(),V=XN(),re=(Array.isArray(e)?e:[e]).filter(K=>K),{withStylesTransform:W,getTransformedStyles:Z}=D7({props:r,stylesCtx:n,themeName:re});return(K,ie)=>({className:I7({theme:T,options:ie,themeName:re,selector:K,classNamesPrefix:O,classNames:b,classes:t,unstyled:c,className:s,rootSelector:d,props:r,stylesCtx:n,withStaticClasses:j,headless:V,transformedStyles:Z([ie==null?void 0:ie.styles,E])}),style:L7({theme:T,themeName:re,selector:K,options:ie,props:r,stylesCtx:n,rootSelector:d,styles:E,style:h,vars:I,varsResolver:P,headless:V,withStylesTransform:W})})}function Pt(e,t,r){var d;const n=Ra(),s=(d=n.components[e])==null?void 0:d.defaultProps,h=typeof s=="function"?s(n):s;return{...t,...h,...Lw(r)}}function QA(e){return es(e).reduce((t,r)=>e[r]!==void 0?`${t}${gN(r)}:${e[r]};`:t,"").trim()}function O7({selector:e,styles:t,media:r}){const n=t?QA(t):"",s=Array.isArray(r)?r.map(h=>`@media${h.query}{${e}{${QA(h.styles)}}}`):[];return`${n?`${e}{${n}}`:""}${s.join("")}`.trim()}function z7({selector:e,styles:t,media:r}){const n=zw();return Q.jsx("style",{"data-mantine-styles":"inline",nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:O7({selector:e,styles:t,media:r})}})}function jw(e){const{m:t,mx:r,my:n,mt:s,mb:h,ml:d,mr:c,me:b,ms:E,p:I,px:P,py:T,pt:O,pb:j,pl:V,pr:re,pe:W,ps:Z,bg:K,c:ie,opacity:de,ff:ae,fz:J,fw:we,lts:Re,ta:De,lh:Oe,fs:Qe,tt:qe,td:Ze,w:Fe,miw:Ve,maw:He,h:Se,mih:Be,mah:tt,bgsz:ot,bgp:St,bgr:qt,bga:Tt,pos:kt,top:Lt,left:Yt,bottom:or,right:zr,inset:Fr,display:ti,flex:ar,hiddenFrom:Jr,visibleFrom:Wt,lightHidden:ri,darkHidden:Le,sx:Sn,...Rn}=e;return{styleProps:Lw({m:t,mx:r,my:n,mt:s,mb:h,ml:d,mr:c,me:b,ms:E,p:I,px:P,py:T,pt:O,pb:j,pl:V,pr:re,pe:W,ps:Z,bg:K,c:ie,opacity:de,ff:ae,fz:J,fw:we,lts:Re,ta:De,lh:Oe,fs:Qe,tt:qe,td:Ze,w:Fe,miw:Ve,maw:He,h:Se,mih:Be,mah:tt,bgsz:ot,bgp:St,bgr:qt,bga:Tt,pos:kt,top:Lt,left:Yt,bottom:or,right:zr,inset:Fr,display:ti,flex:ar,hiddenFrom:Jr,visibleFrom:Wt,lightHidden:ri,darkHidden:Le,sx:Sn}),rest:Rn}}const F7={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function VI(e,t){const r=$l({color:e,theme:t});return r.color==="dimmed"?"var(--mantine-color-dimmed)":r.color==="bright"?"var(--mantine-color-bright)":r.variable?`var(${r.variable})`:r.color}function B7(e,t){const r=$l({color:e,theme:t});return r.isThemeColor&&r.shade===void 0?`var(--mantine-color-${r.color}-text)`:VI(e,t)}const e3={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function N7(e){return typeof e=="string"&&e in e3?e3[e]:e}const j7=["h1","h2","h3","h4","h5","h6"];function $7(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&j7.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?We(e):e}function V7(e){return e}const U7=["h1","h2","h3","h4","h5","h6"];function Z7(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&U7.includes(e)?`var(--mantine-${e}-line-height)`:e}function H7(e){return typeof e=="number"?We(e):e}function W7(e,t){if(typeof e=="number")return We(e);if(typeof e=="string"){const r=e.replace("-","");if(!(r in t.spacing))return We(e);const n=`--mantine-spacing-${r}`;return e.startsWith("-")?`calc(var(${n}) * -1)`:`var(${n})`}return e}const Q_={color:VI,textColor:B7,fontSize:$7,spacing:W7,identity:V7,size:H7,lineHeight:Z7,fontFamily:N7};function t3(e){return e.replace("(min-width: ","").replace("em)","")}function G7({media:e,...t}){const n=Object.keys(e).sort((s,h)=>Number(t3(s))-Number(t3(h))).map(s=>({query:s,styles:e[s]}));return{...t,media:n}}function q7(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function K7(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function X7(e){return typeof e=="object"&&e!==null?es(e).filter(t=>t!=="base"):[]}function Y7(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function J7({styleProps:e,data:t,theme:r}){return G7(es(e).reduce((n,s)=>{if(s==="hiddenFrom"||s==="visibleFrom"||s==="sx")return n;const h=t[s],d=Array.isArray(h.property)?h.property:[h.property],c=K7(e[s]);if(!q7(e[s]))return d.forEach(E=>{n.inlineStyles[E]=Q_[h.type](c,r)}),n;n.hasResponsiveStyles=!0;const b=X7(e[s]);return d.forEach(E=>{c&&(n.styles[E]=Q_[h.type](c,r)),b.forEach(I=>{const P=`(min-width: ${r.breakpoints[I]})`;n.media[P]={...n.media[P],[E]:Q_[h.type](Y7(e[s],I),r)}})}),n},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function Q7(){return`__m__-${$.useId().replace(/:/g,"")}`}function UI(e,t){return Array.isArray(e)?[...e].reduce((r,n)=>({...r,...UI(n,t)}),{}):typeof e=="function"?e(t):e??{}}function ZI(e){return e.startsWith("data-")?e:`data-${e}`}function ej(e){return Object.keys(e).reduce((t,r)=>{const n=e[r];return n===void 0||n===""||n===!1||n===null||(t[ZI(r)]=e[r]),t},{})}function HI(e){return e?typeof e=="string"?{[ZI(e)]:!0}:Array.isArray(e)?[...e].reduce((t,r)=>({...t,...HI(r)}),{}):ej(e):null}function Bb(e,t){return Array.isArray(e)?[...e].reduce((r,n)=>({...r,...Bb(n,t)}),{}):typeof e=="function"?e(t):e??{}}function tj({theme:e,style:t,vars:r,styleProps:n}){const s=Bb(t,e),h=Bb(r,e);return{...s,...h,...n}}const WI=$.forwardRef(({component:e,style:t,__vars:r,className:n,variant:s,mod:h,size:d,hiddenFrom:c,visibleFrom:b,lightHidden:E,darkHidden:I,renderRoot:P,...T},O)=>{var J;const j=Ra(),V=e||"div",{styleProps:re,rest:W}=jw(T),Z=YN(),K=(J=Z==null?void 0:Z())==null?void 0:J(re.sx),ie=Q7(),de=J7({styleProps:re,theme:j,data:F7}),ae={ref:O,style:tj({theme:j,style:t,vars:r,styleProps:de.inlineStyles}),className:Pi(n,K,{[ie]:de.hasResponsiveStyles,"mantine-light-hidden":E,"mantine-dark-hidden":I,[`mantine-hidden-from-${c}`]:c,[`mantine-visible-from-${b}`]:b}),"data-variant":s,"data-size":PI(d)?void 0:d||void 0,...HI(h),...W};return Q.jsxs(Q.Fragment,{children:[de.hasResponsiveStyles&&Q.jsx(z7,{selector:`.${ie}`,styles:de.styles,media:de.media}),typeof P=="function"?P(ae):Q.jsx(V,{...ae})]})});WI.displayName="@mantine/core/Box";const Nt=WI;function GI(e){return e}function Qt(e){const t=$.forwardRef(e);return t.extend=GI,t}function Jl(e){const t=$.forwardRef(e);return t.extend=GI,t}const rj=$.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Sd(){return $.useContext(rj)}const[nj,ta]=Xl("ScrollArea.Root component was not found in tree");function ad(e,t){const r=Rc(t);vm(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}const ij=$.forwardRef((e,t)=>{const{style:r,...n}=e,s=ta(),[h,d]=$.useState(0),[c,b]=$.useState(0),E=!!(h&&c);return ad(s.scrollbarX,()=>{var P;const I=((P=s.scrollbarX)==null?void 0:P.offsetHeight)||0;s.onCornerHeightChange(I),b(I)}),ad(s.scrollbarY,()=>{var P;const I=((P=s.scrollbarY)==null?void 0:P.offsetWidth)||0;s.onCornerWidthChange(I),d(I)}),E?Q.jsx("div",{...n,ref:t,style:{...r,width:h,height:c}}):null}),oj=$.forwardRef((e,t)=>{const r=ta(),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?Q.jsx(ij,{...e,ref:t}):null}),aj={scrollHideDelay:1e3,type:"hover"},qI=$.forwardRef((e,t)=>{const r=Pt("ScrollAreaRoot",aj,e),{type:n,scrollHideDelay:s,scrollbars:h,...d}=r,[c,b]=$.useState(null),[E,I]=$.useState(null),[P,T]=$.useState(null),[O,j]=$.useState(null),[V,re]=$.useState(null),[W,Z]=$.useState(0),[K,ie]=$.useState(0),[de,ae]=$.useState(!1),[J,we]=$.useState(!1),Re=Ti(t,De=>b(De));return Q.jsx(nj,{value:{type:n,scrollHideDelay:s,scrollArea:c,viewport:E,onViewportChange:I,content:P,onContentChange:T,scrollbarX:O,onScrollbarXChange:j,scrollbarXEnabled:de,onScrollbarXEnabledChange:ae,scrollbarY:V,onScrollbarYChange:re,scrollbarYEnabled:J,onScrollbarYEnabledChange:we,onCornerWidthChange:Z,onCornerHeightChange:ie},children:Q.jsx(Nt,{...d,ref:Re,__vars:{"--sa-corner-width":h!=="xy"?"0px":`${W}px`,"--sa-corner-height":h!=="xy"?"0px":`${K}px`}})})});qI.displayName="@mantine/core/ScrollAreaRoot";function KI(e,t){const r=e/t;return Number.isNaN(r)?0:r}function h1(e){const t=KI(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function XI(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function sj(e,[t,r]){return Math.min(r,Math.max(t,e))}function r3(e,t,r="ltr"){const n=h1(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,h=t.scrollbar.size-s,d=t.content-t.viewport,c=h-n,b=r==="ltr"?[0,d]:[d*-1,0],E=sj(e,b);return XI([0,d],[0,c])(E)}function lj(e,t,r,n="ltr"){const s=h1(r),h=s/2,d=t||h,c=s-d,b=r.scrollbar.paddingStart+d,E=r.scrollbar.size-r.scrollbar.paddingEnd-c,I=r.content-r.viewport,P=n==="ltr"?[0,I]:[I*-1,0];return XI([b,E],P)(e)}function YI(e,t){return e>0&&e<t}function xy(e){return e?parseInt(e,10):0}function Uc(e,t,{checkForDefaultPrevented:r=!0}={}){return n=>{e==null||e(n),(r===!1||!n.defaultPrevented)&&(t==null||t(n))}}const[cj,JI]=Xl("ScrollAreaScrollbar was not found in tree"),QI=$.forwardRef((e,t)=>{const{sizes:r,hasThumb:n,onThumbChange:s,onThumbPointerUp:h,onThumbPointerDown:d,onThumbPositionChange:c,onDragScroll:b,onWheelScroll:E,onResize:I,...P}=e,T=ta(),[O,j]=$.useState(null),V=Ti(t,we=>j(we)),re=$.useRef(null),W=$.useRef(""),{viewport:Z}=T,K=r.content-r.viewport,ie=Rc(E),de=Rc(c),ae=c1(I,10),J=we=>{if(re.current){const Re=we.clientX-re.current.left,De=we.clientY-re.current.top;b({x:Re,y:De})}};return $.useEffect(()=>{const we=Re=>{const De=Re.target;(O==null?void 0:O.contains(De))&&ie(Re,K)};return document.addEventListener("wheel",we,{passive:!1}),()=>document.removeEventListener("wheel",we,{passive:!1})},[Z,O,K,ie]),$.useEffect(de,[r,de]),ad(O,ae),ad(T.content,ae),Q.jsx(cj,{value:{scrollbar:O,hasThumb:n,onThumbChange:Rc(s),onThumbPointerUp:Rc(h),onThumbPositionChange:de,onThumbPointerDown:Rc(d)},children:Q.jsx("div",{...P,ref:V,style:{position:"absolute",...P.style},onPointerDown:Uc(e.onPointerDown,we=>{we.button===0&&(we.target.setPointerCapture(we.pointerId),re.current=O.getBoundingClientRect(),W.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",J(we))}),onPointerMove:Uc(e.onPointerMove,J),onPointerUp:Uc(e.onPointerUp,we=>{const Re=we.target;Re.hasPointerCapture(we.pointerId)&&Re.releasePointerCapture(we.pointerId),document.body.style.webkitUserSelect=W.current,re.current=null})})})}),uj=$.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,style:s,...h}=e,d=ta(),[c,b]=$.useState(),E=$.useRef(null),I=Ti(t,E,d.onScrollbarXChange);return $.useEffect(()=>{E.current&&b(getComputedStyle(E.current))},[E]),Q.jsx(QI,{"data-orientation":"horizontal",...h,ref:I,sizes:r,style:{...s,"--sa-thumb-width":`${h1(r)}px`},onThumbPointerDown:P=>e.onThumbPointerDown(P.x),onDragScroll:P=>e.onDragScroll(P.x),onWheelScroll:(P,T)=>{if(d.viewport){const O=d.viewport.scrollLeft+P.deltaX;e.onWheelScroll(O),YI(O,T)&&P.preventDefault()}},onResize:()=>{E.current&&d.viewport&&c&&n({content:d.viewport.scrollWidth,viewport:d.viewport.offsetWidth,scrollbar:{size:E.current.clientWidth,paddingStart:xy(c.paddingLeft),paddingEnd:xy(c.paddingRight)}})}})}),hj=$.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,style:s,...h}=e,d=ta(),[c,b]=$.useState(),E=$.useRef(null),I=Ti(t,E,d.onScrollbarYChange);return $.useEffect(()=>{E.current&&b(getComputedStyle(E.current))},[E]),Q.jsx(QI,{...h,"data-orientation":"vertical",ref:I,sizes:r,style:{"--sa-thumb-height":`${h1(r)}px`,...s},onThumbPointerDown:P=>e.onThumbPointerDown(P.y),onDragScroll:P=>e.onDragScroll(P.y),onWheelScroll:(P,T)=>{if(d.viewport){const O=d.viewport.scrollTop+P.deltaY;e.onWheelScroll(O),YI(O,T)&&P.preventDefault()}},onResize:()=>{E.current&&d.viewport&&c&&n({content:d.viewport.scrollHeight,viewport:d.viewport.offsetHeight,scrollbar:{size:E.current.clientHeight,paddingStart:xy(c.paddingTop),paddingEnd:xy(c.paddingBottom)}})}})}),$w=$.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,{dir:s}=Sd(),h=ta(),d=$.useRef(null),c=$.useRef(0),[b,E]=$.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),I=KI(b.viewport,b.content),P={...n,sizes:b,onSizesChange:E,hasThumb:I>0&&I<1,onThumbChange:O=>{d.current=O},onThumbPointerUp:()=>{c.current=0},onThumbPointerDown:O=>{c.current=O}},T=(O,j)=>lj(O,c.current,b,j);return r==="horizontal"?Q.jsx(uj,{...P,ref:t,onThumbPositionChange:()=>{if(h.viewport&&d.current){const O=h.viewport.scrollLeft,j=r3(O,b,s);d.current.style.transform=`translate3d(${j}px, 0, 0)`}},onWheelScroll:O=>{h.viewport&&(h.viewport.scrollLeft=O)},onDragScroll:O=>{h.viewport&&(h.viewport.scrollLeft=T(O,s))}}):r==="vertical"?Q.jsx(hj,{...P,ref:t,onThumbPositionChange:()=>{if(h.viewport&&d.current){const O=h.viewport.scrollTop,j=r3(O,b);d.current.style.transform=`translate3d(0, ${j}px, 0)`}},onWheelScroll:O=>{h.viewport&&(h.viewport.scrollTop=O)},onDragScroll:O=>{h.viewport&&(h.viewport.scrollTop=T(O))}}):null}),e5=$.forwardRef((e,t)=>{const r=ta(),{forceMount:n,...s}=e,[h,d]=$.useState(!1),c=e.orientation==="horizontal",b=c1(()=>{if(r.viewport){const E=r.viewport.offsetWidth<r.viewport.scrollWidth,I=r.viewport.offsetHeight<r.viewport.scrollHeight;d(c?E:I)}},10);return ad(r.viewport,b),ad(r.content,b),n||h?Q.jsx($w,{"data-state":h?"visible":"hidden",...s,ref:t}):null}),dj=$.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=ta(),[h,d]=$.useState(!1);return $.useEffect(()=>{const{scrollArea:c}=s;let b=0;if(c){const E=()=>{window.clearTimeout(b),d(!0)},I=()=>{b=window.setTimeout(()=>d(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",E),c.addEventListener("pointerleave",I),()=>{window.clearTimeout(b),c.removeEventListener("pointerenter",E),c.removeEventListener("pointerleave",I)}}},[s.scrollArea,s.scrollHideDelay]),r||h?Q.jsx(e5,{"data-state":h?"visible":"hidden",...n,ref:t}):null}),fj=$.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=ta(),h=e.orientation==="horizontal",[d,c]=$.useState("hidden"),b=c1(()=>c("idle"),100);return $.useEffect(()=>{if(d==="idle"){const E=window.setTimeout(()=>c("hidden"),s.scrollHideDelay);return()=>window.clearTimeout(E)}},[d,s.scrollHideDelay]),$.useEffect(()=>{const{viewport:E}=s,I=h?"scrollLeft":"scrollTop";if(E){let P=E[I];const T=()=>{const O=E[I];P!==O&&(c("scrolling"),b()),P=O};return E.addEventListener("scroll",T),()=>E.removeEventListener("scroll",T)}},[s.viewport,h,b]),r||d!=="hidden"?Q.jsx($w,{"data-state":d==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Uc(e.onPointerEnter,()=>c("interacting")),onPointerLeave:Uc(e.onPointerLeave,()=>c("idle"))}):null}),n3=$.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=ta(),{onScrollbarXEnabledChange:h,onScrollbarYEnabledChange:d}=s,c=e.orientation==="horizontal";return $.useEffect(()=>(c?h(!0):d(!0),()=>{c?h(!1):d(!1)}),[c,h,d]),s.type==="hover"?Q.jsx(dj,{...n,ref:t,forceMount:r}):s.type==="scroll"?Q.jsx(fj,{...n,ref:t,forceMount:r}):s.type==="auto"?Q.jsx(e5,{...n,ref:t,forceMount:r}):s.type==="always"?Q.jsx($w,{...n,ref:t}):null});function pj(e,t=()=>{}){let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const h={left:e.scrollLeft,top:e.scrollTop},d=r.left!==h.left,c=r.top!==h.top;(d||c)&&t(),r=h,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)}const mj=$.forwardRef((e,t)=>{const{style:r,...n}=e,s=ta(),h=JI(),{onThumbPositionChange:d}=h,c=Ti(t,I=>h.onThumbChange(I)),b=$.useRef(),E=c1(()=>{b.current&&(b.current(),b.current=void 0)},100);return $.useEffect(()=>{const{viewport:I}=s;if(I){const P=()=>{if(E(),!b.current){const T=pj(I,d);b.current=T,d()}};return d(),I.addEventListener("scroll",P),()=>I.removeEventListener("scroll",P)}},[s.viewport,E,d]),Q.jsx("div",{"data-state":h.hasThumb?"visible":"hidden",...n,ref:c,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...r},onPointerDownCapture:Uc(e.onPointerDownCapture,I=>{const T=I.target.getBoundingClientRect(),O=I.clientX-T.left,j=I.clientY-T.top;h.onThumbPointerDown({x:O,y:j})}),onPointerUp:Uc(e.onPointerUp,h.onThumbPointerUp)})}),i3=$.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=JI();return r||s.hasThumb?Q.jsx(mj,{ref:t,...n}):null}),t5=$.forwardRef(({children:e,style:t,...r},n)=>{const s=ta(),h=Ti(n,s.onViewportChange);return Q.jsx(Nt,{...r,ref:h,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t},children:Q.jsx("div",{style:{minWidth:"100%",display:"table"},ref:s.onContentChange,children:e})})});t5.displayName="@mantine/core/ScrollAreaViewport";var Vw={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const r5={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},gj=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":We(t)}}),xm=Qt((e,t)=>{const r=Pt("ScrollArea",r5,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,scrollbarSize:b,vars:E,type:I,scrollHideDelay:P,viewportProps:T,viewportRef:O,onScrollPositionChange:j,children:V,offsetScrollbars:re,scrollbars:W,...Z}=r,[K,ie]=$.useState(!1),de=Or({name:"ScrollArea",props:r,classes:Vw,className:s,style:h,classNames:n,styles:d,unstyled:c,vars:E,varsResolver:gj});return Q.jsxs(qI,{type:I==="never"?"always":I,scrollHideDelay:P,ref:t,scrollbars:W,...de("root"),...Z,children:[Q.jsx(t5,{...T,...de("viewport",{style:T==null?void 0:T.style}),ref:O,"data-offset-scrollbars":re===!0?"xy":re||void 0,"data-scrollbars":W||void 0,onScroll:ae=>{var J;(J=T==null?void 0:T.onScroll)==null||J.call(T,ae),j==null||j({x:ae.currentTarget.scrollLeft,y:ae.currentTarget.scrollTop})},children:V}),(W==="xy"||W==="x")&&Q.jsx(n3,{...de("scrollbar"),orientation:"horizontal","data-hidden":I==="never"||void 0,forceMount:!0,onMouseEnter:()=>ie(!0),onMouseLeave:()=>ie(!1),children:Q.jsx(i3,{...de("thumb")})}),(W==="xy"||W==="y")&&Q.jsx(n3,{...de("scrollbar"),orientation:"vertical","data-hidden":I==="never"||void 0,forceMount:!0,onMouseEnter:()=>ie(!0),onMouseLeave:()=>ie(!1),children:Q.jsx(i3,{...de("thumb")})}),Q.jsx(oj,{...de("corner"),"data-hovered":K||void 0,"data-hidden":I==="never"||void 0})]})});xm.displayName="@mantine/core/ScrollArea";const Uw=Qt((e,t)=>{const{children:r,classNames:n,styles:s,scrollbarSize:h,scrollHideDelay:d,type:c,dir:b,offsetScrollbars:E,viewportRef:I,onScrollPositionChange:P,unstyled:T,variant:O,viewportProps:j,scrollbars:V,style:re,vars:W,...Z}=Pt("ScrollAreaAutosize",r5,e);return Q.jsx(Nt,{...Z,ref:t,style:[{display:"flex",overflow:"auto"},re],children:Q.jsx(Nt,{style:{display:"flex",flexDirection:"column",flex:1},children:Q.jsx(xm,{classNames:n,styles:s,scrollHideDelay:d,scrollbarSize:h,type:c,dir:b,offsetScrollbars:E,viewportRef:I,onScrollPositionChange:P,unstyled:T,variant:O,viewportProps:j,vars:W,scrollbars:V,children:r})})})});xm.classes=Vw;Uw.displayName="@mantine/core/ScrollAreaAutosize";Uw.classes=Vw;xm.Autosize=Uw;var n5={root:"m_87cf2631"};const yj={__staticSelector:"UnstyledButton"},bm=Jl((e,t)=>{const r=Pt("UnstyledButton",yj,e),{className:n,component:s="button",__staticSelector:h,unstyled:d,classNames:c,styles:b,style:E,...I}=r,P=Or({name:h,props:r,classes:n5,className:n,style:E,classNames:c,styles:b,unstyled:d});return Q.jsx(Nt,{...P("root",{focusable:!0}),component:s,ref:t,type:s==="button"?"button":void 0,...I})});bm.classes=n5;bm.displayName="@mantine/core/UnstyledButton";var i5={root:"m_515a97f8"};const vj={},Zw=Qt((e,t)=>{const r=Pt("VisuallyHidden",vj,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,...E}=r,I=Or({name:"VisuallyHidden",classes:i5,props:r,className:s,style:h,classNames:n,styles:d,unstyled:c});return Q.jsx(Nt,{component:"span",ref:t,...I("root"),...E})});Zw.classes=i5;Zw.displayName="@mantine/core/VisuallyHidden";var o5={root:"m_1b7284a3"};const _j={},xj=(e,{radius:t,shadow:r})=>({root:{"--paper-radius":t===void 0?void 0:ea(t),"--paper-shadow":Ow(r)}}),Hw=Jl((e,t)=>{const r=Pt("Paper",_j,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,withBorder:b,vars:E,radius:I,shadow:P,variant:T,mod:O,...j}=r,V=Or({name:"Paper",props:r,classes:o5,className:s,style:h,classNames:n,styles:d,unstyled:c,vars:E,varsResolver:xj});return Q.jsx(Nt,{ref:t,mod:[{"data-with-border":b},O],...V("root"),variant:T,...j})});Hw.classes=o5;Hw.displayName="@mantine/core/Paper";function Vl(e){return a5(e)?(e.nodeName||"").toLowerCase():"#document"}function Qi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Us(e){var t;return(t=(a5(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function a5(e){return e instanceof Node||e instanceof Qi(e).Node}function on(e){return e instanceof Element||e instanceof Qi(e).Element}function So(e){return e instanceof HTMLElement||e instanceof Qi(e).HTMLElement}function Nb(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Qi(e).ShadowRoot}function wm(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Eo(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function bj(e){return["table","td","th"].includes(Vl(e))}function Ww(e){const t=Gw(),r=Eo(e);return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function wj(e){let t=Jc(e);for(;So(t)&&!sd(t);){if(Ww(t))return t;t=Jc(t)}return null}function Gw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sd(e){return["html","body","#document"].includes(Vl(e))}function Eo(e){return Qi(e).getComputedStyle(e)}function d1(e){return on(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Jc(e){if(Vl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Nb(e)&&e.host||Us(e);return Nb(t)?t.host:t}function s5(e){const t=Jc(e);return sd(t)?e.ownerDocument?e.ownerDocument.body:e.body:So(t)&&wm(t)?t:s5(t)}function ks(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=s5(e),h=s===((n=e.ownerDocument)==null?void 0:n.body),d=Qi(s);return h?t.concat(d,d.visualViewport||[],wm(s)?s:[],d.frameElement&&r?ks(d.frameElement):[]):t.concat(s,ks(s,[],r))}function o3(e){let t=e.activeElement;for(;((r=t)==null||(r=r.shadowRoot)==null?void 0:r.activeElement)!=null;){var r;t=t.shadowRoot.activeElement}return t}function Xp(e,t){if(!e||!t)return!1;const r=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&Nb(r)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function l5(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function c5(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:r,version:n}=t;return r+"/"+n}).join(" "):navigator.userAgent}function Sj(e){return Cj()?!1:!a3()&&e.width===0&&e.height===0||a3()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Ej(){return/apple/i.test(navigator.vendor)}function a3(){const e=/android/i;return e.test(l5())||e.test(c5())}function Aj(){return l5().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Cj(){return c5().includes("jsdom/")}function u5(e,t){const r=["mouse","pen"];return r.push("",void 0),r.includes(e)}function Pj(e){return"nativeEvent"in e}function Tj(e){return e.matches("html,body")}function Bc(e){return(e==null?void 0:e.ownerDocument)||document}function ex(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const r=e;return r.target!=null&&t.contains(r.target)}function xh(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Ij="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Mj(e){return So(e)&&e.matches(Ij)}const Ta=Math.min,Ai=Math.max,by=Math.round,fg=Math.floor,Ul=e=>({x:e,y:e}),Rj={left:"right",right:"left",bottom:"top",top:"bottom"},kj={start:"end",end:"start"};function jb(e,t,r){return Ai(e,Ta(t,r))}function js(e,t){return typeof e=="function"?e(t):e}function Ia(e){return e.split("-")[0]}function Ed(e){return e.split("-")[1]}function qw(e){return e==="x"?"y":"x"}function Kw(e){return e==="y"?"height":"width"}function cu(e){return["top","bottom"].includes(Ia(e))?"y":"x"}function Xw(e){return qw(cu(e))}function Lj(e,t,r){r===void 0&&(r=!1);const n=Ed(e),s=Xw(e),h=Kw(s);let d=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[h]>t.floating[h]&&(d=wy(d)),[d,wy(d)]}function Dj(e){const t=wy(e);return[$b(e),t,$b(t)]}function $b(e){return e.replace(/start|end/g,t=>kj[t])}function Oj(e,t,r){const n=["left","right"],s=["right","left"],h=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?h:d;default:return[]}}function zj(e,t,r,n){const s=Ed(e);let h=Oj(Ia(e),r==="start",n);return s&&(h=h.map(d=>d+"-"+s),t&&(h=h.concat(h.map($b)))),h}function wy(e){return e.replace(/left|right|bottom|top/g,t=>Rj[t])}function Fj(e){return{top:0,right:0,bottom:0,left:0,...e}}function Yw(e){return typeof e!="number"?Fj(e):{top:e,right:e,bottom:e,left:e}}function ld(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function s3(e,t,r){let{reference:n,floating:s}=e;const h=cu(t),d=Xw(t),c=Kw(d),b=Ia(t),E=h==="y",I=n.x+n.width/2-s.width/2,P=n.y+n.height/2-s.height/2,T=n[c]/2-s[c]/2;let O;switch(b){case"top":O={x:I,y:n.y-s.height};break;case"bottom":O={x:I,y:n.y+n.height};break;case"right":O={x:n.x+n.width,y:P};break;case"left":O={x:n.x-s.width,y:P};break;default:O={x:n.x,y:n.y}}switch(Ed(t)){case"start":O[d]-=T*(r&&E?-1:1);break;case"end":O[d]+=T*(r&&E?-1:1);break}return O}const Bj=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:h=[],platform:d}=r,c=h.filter(Boolean),b=await(d.isRTL==null?void 0:d.isRTL(t));let E=await d.getElementRects({reference:e,floating:t,strategy:s}),{x:I,y:P}=s3(E,n,b),T=n,O={},j=0;for(let V=0;V<c.length;V++){const{name:re,fn:W}=c[V],{x:Z,y:K,data:ie,reset:de}=await W({x:I,y:P,initialPlacement:n,placement:T,strategy:s,middlewareData:O,rects:E,platform:d,elements:{reference:e,floating:t}});I=Z??I,P=K??P,O={...O,[re]:{...O[re],...ie}},de&&j<=50&&(j++,typeof de=="object"&&(de.placement&&(T=de.placement),de.rects&&(E=de.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):de.rects),{x:I,y:P}=s3(E,T,b)),V=-1)}return{x:I,y:P,placement:T,strategy:s,middlewareData:O}};async function Jw(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:h,rects:d,elements:c,strategy:b}=e,{boundary:E="clippingAncestors",rootBoundary:I="viewport",elementContext:P="floating",altBoundary:T=!1,padding:O=0}=js(t,e),j=Yw(O),re=c[T?P==="floating"?"reference":"floating":P],W=ld(await h.getClippingRect({element:(r=await(h.isElement==null?void 0:h.isElement(re)))==null||r?re:re.contextElement||await(h.getDocumentElement==null?void 0:h.getDocumentElement(c.floating)),boundary:E,rootBoundary:I,strategy:b})),Z=P==="floating"?{...d.floating,x:n,y:s}:d.reference,K=await(h.getOffsetParent==null?void 0:h.getOffsetParent(c.floating)),ie=await(h.isElement==null?void 0:h.isElement(K))?await(h.getScale==null?void 0:h.getScale(K))||{x:1,y:1}:{x:1,y:1},de=ld(h.convertOffsetParentRelativeRectToViewportRelativeRect?await h.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:Z,offsetParent:K,strategy:b}):Z);return{top:(W.top-de.top+j.top)/ie.y,bottom:(de.bottom-W.bottom+j.bottom)/ie.y,left:(W.left-de.left+j.left)/ie.x,right:(de.right-W.right+j.right)/ie.x}}const Nj=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:h,platform:d,elements:c,middlewareData:b}=t,{element:E,padding:I=0}=js(e,t)||{};if(E==null)return{};const P=Yw(I),T={x:r,y:n},O=Xw(s),j=Kw(O),V=await d.getDimensions(E),re=O==="y",W=re?"top":"left",Z=re?"bottom":"right",K=re?"clientHeight":"clientWidth",ie=h.reference[j]+h.reference[O]-T[O]-h.floating[j],de=T[O]-h.reference[O],ae=await(d.getOffsetParent==null?void 0:d.getOffsetParent(E));let J=ae?ae[K]:0;(!J||!await(d.isElement==null?void 0:d.isElement(ae)))&&(J=c.floating[K]||h.floating[j]);const we=ie/2-de/2,Re=J/2-V[j]/2-1,De=Ta(P[W],Re),Oe=Ta(P[Z],Re),Qe=De,qe=J-V[j]-Oe,Ze=J/2-V[j]/2+we,Fe=jb(Qe,Ze,qe),Ve=!b.arrow&&Ed(s)!=null&&Ze!==Fe&&h.reference[j]/2-(Ze<Qe?De:Oe)-V[j]/2<0,He=Ve?Ze<Qe?Ze-Qe:Ze-qe:0;return{[O]:T[O]+He,data:{[O]:Fe,centerOffset:Ze-Fe-He,...Ve&&{alignmentOffset:He}},reset:Ve}}}),jj=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:h,rects:d,initialPlacement:c,platform:b,elements:E}=t,{mainAxis:I=!0,crossAxis:P=!0,fallbackPlacements:T,fallbackStrategy:O="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:V=!0,...re}=js(e,t);if((r=h.arrow)!=null&&r.alignmentOffset)return{};const W=Ia(s),Z=Ia(c)===c,K=await(b.isRTL==null?void 0:b.isRTL(E.floating)),ie=T||(Z||!V?[wy(c)]:Dj(c));!T&&j!=="none"&&ie.push(...zj(c,V,j,K));const de=[c,...ie],ae=await Jw(t,re),J=[];let we=((n=h.flip)==null?void 0:n.overflows)||[];if(I&&J.push(ae[W]),P){const Qe=Lj(s,d,K);J.push(ae[Qe[0]],ae[Qe[1]])}if(we=[...we,{placement:s,overflows:J}],!J.every(Qe=>Qe<=0)){var Re,De;const Qe=(((Re=h.flip)==null?void 0:Re.index)||0)+1,qe=de[Qe];if(qe)return{data:{index:Qe,overflows:we},reset:{placement:qe}};let Ze=(De=we.filter(Fe=>Fe.overflows[0]<=0).sort((Fe,Ve)=>Fe.overflows[1]-Ve.overflows[1])[0])==null?void 0:De.placement;if(!Ze)switch(O){case"bestFit":{var Oe;const Fe=(Oe=we.map(Ve=>[Ve.placement,Ve.overflows.filter(He=>He>0).reduce((He,Se)=>He+Se,0)]).sort((Ve,He)=>Ve[1]-He[1])[0])==null?void 0:Oe[0];Fe&&(Ze=Fe);break}case"initialPlacement":Ze=c;break}if(s!==Ze)return{reset:{placement:Ze}}}return{}}}};function h5(e){const t=Ta(...e.map(h=>h.left)),r=Ta(...e.map(h=>h.top)),n=Ai(...e.map(h=>h.right)),s=Ai(...e.map(h=>h.bottom));return{x:t,y:r,width:n-t,height:s-r}}function $j(e){const t=e.slice().sort((s,h)=>s.y-h.y),r=[];let n=null;for(let s=0;s<t.length;s++){const h=t[s];!n||h.y-n.y>n.height/2?r.push([h]):r[r.length-1].push(h),n=h}return r.map(s=>ld(h5(s)))}const Vj=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:r,elements:n,rects:s,platform:h,strategy:d}=t,{padding:c=2,x:b,y:E}=js(e,t),I=Array.from(await(h.getClientRects==null?void 0:h.getClientRects(n.reference))||[]),P=$j(I),T=ld(h5(I)),O=Yw(c);function j(){if(P.length===2&&P[0].left>P[1].right&&b!=null&&E!=null)return P.find(re=>b>re.left-O.left&&b<re.right+O.right&&E>re.top-O.top&&E<re.bottom+O.bottom)||T;if(P.length>=2){if(cu(r)==="y"){const De=P[0],Oe=P[P.length-1],Qe=Ia(r)==="top",qe=De.top,Ze=Oe.bottom,Fe=Qe?De.left:Oe.left,Ve=Qe?De.right:Oe.right,He=Ve-Fe,Se=Ze-qe;return{top:qe,bottom:Ze,left:Fe,right:Ve,width:He,height:Se,x:Fe,y:qe}}const re=Ia(r)==="left",W=Ai(...P.map(De=>De.right)),Z=Ta(...P.map(De=>De.left)),K=P.filter(De=>re?De.left===Z:De.right===W),ie=K[0].top,de=K[K.length-1].bottom,ae=Z,J=W,we=J-ae,Re=de-ie;return{top:ie,bottom:de,left:ae,right:J,width:we,height:Re,x:ae,y:ie}}return T}const V=await h.getElementRects({reference:{getBoundingClientRect:j},floating:n.floating,strategy:d});return s.reference.x!==V.reference.x||s.reference.y!==V.reference.y||s.reference.width!==V.reference.width||s.reference.height!==V.reference.height?{reset:{rects:V}}:{}}}};async function Uj(e,t){const{placement:r,platform:n,elements:s}=e,h=await(n.isRTL==null?void 0:n.isRTL(s.floating)),d=Ia(r),c=Ed(r),b=cu(r)==="y",E=["left","top"].includes(d)?-1:1,I=h&&b?-1:1,P=js(t,e);let{mainAxis:T,crossAxis:O,alignmentAxis:j}=typeof P=="number"?{mainAxis:P,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...P};return c&&typeof j=="number"&&(O=c==="end"?j*-1:j),b?{x:O*I,y:T*E}:{x:T*E,y:O*I}}const d5=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:h,placement:d,middlewareData:c}=t,b=await Uj(t,e);return d===((r=c.offset)==null?void 0:r.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:s+b.x,y:h+b.y,data:{...b,placement:d}}}}},Zj=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:h=!0,crossAxis:d=!1,limiter:c={fn:re=>{let{x:W,y:Z}=re;return{x:W,y:Z}}},...b}=js(e,t),E={x:r,y:n},I=await Jw(t,b),P=cu(Ia(s)),T=qw(P);let O=E[T],j=E[P];if(h){const re=T==="y"?"top":"left",W=T==="y"?"bottom":"right",Z=O+I[re],K=O-I[W];O=jb(Z,O,K)}if(d){const re=P==="y"?"top":"left",W=P==="y"?"bottom":"right",Z=j+I[re],K=j-I[W];j=jb(Z,j,K)}const V=c.fn({...t,[T]:O,[P]:j});return{...V,data:{x:V.x-r,y:V.y-n}}}}},Hj=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:h,middlewareData:d}=t,{offset:c=0,mainAxis:b=!0,crossAxis:E=!0}=js(e,t),I={x:r,y:n},P=cu(s),T=qw(P);let O=I[T],j=I[P];const V=js(c,t),re=typeof V=="number"?{mainAxis:V,crossAxis:0}:{mainAxis:0,crossAxis:0,...V};if(b){const K=T==="y"?"height":"width",ie=h.reference[T]-h.floating[K]+re.mainAxis,de=h.reference[T]+h.reference[K]-re.mainAxis;O<ie?O=ie:O>de&&(O=de)}if(E){var W,Z;const K=T==="y"?"width":"height",ie=["top","left"].includes(Ia(s)),de=h.reference[P]-h.floating[K]+(ie&&((W=d.offset)==null?void 0:W[P])||0)+(ie?0:re.crossAxis),ae=h.reference[P]+h.reference[K]+(ie?0:((Z=d.offset)==null?void 0:Z[P])||0)-(ie?re.crossAxis:0);j<de?j=de:j>ae&&(j=ae)}return{[T]:O,[P]:j}}}},Wj=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:r,rects:n,platform:s,elements:h}=t,{apply:d=()=>{},...c}=js(e,t),b=await Jw(t,c),E=Ia(r),I=Ed(r),P=cu(r)==="y",{width:T,height:O}=n.floating;let j,V;E==="top"||E==="bottom"?(j=E,V=I===(await(s.isRTL==null?void 0:s.isRTL(h.floating))?"start":"end")?"left":"right"):(V=E,j=I==="end"?"top":"bottom");const re=O-b[j],W=T-b[V],Z=!t.middlewareData.shift;let K=re,ie=W;if(P){const ae=T-b.left-b.right;ie=I||Z?Ta(W,ae):ae}else{const ae=O-b.top-b.bottom;K=I||Z?Ta(re,ae):ae}if(Z&&!I){const ae=Ai(b.left,0),J=Ai(b.right,0),we=Ai(b.top,0),Re=Ai(b.bottom,0);P?ie=T-2*(ae!==0||J!==0?ae+J:Ai(b.left,b.right)):K=O-2*(we!==0||Re!==0?we+Re:Ai(b.top,b.bottom))}await d({...t,availableWidth:ie,availableHeight:K});const de=await s.getDimensions(h.floating);return T!==de.width||O!==de.height?{reset:{rects:!0}}:{}}}};function f5(e){const t=Eo(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=So(e),h=s?e.offsetWidth:r,d=s?e.offsetHeight:n,c=by(r)!==h||by(n)!==d;return c&&(r=h,n=d),{width:r,height:n,$:c}}function Qw(e){return on(e)?e:e.contextElement}function Yh(e){const t=Qw(e);if(!So(t))return Ul(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:h}=f5(t);let d=(h?by(r.width):r.width)/n,c=(h?by(r.height):r.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!c||!Number.isFinite(c))&&(c=1),{x:d,y:c}}const Gj=Ul(0);function p5(e){const t=Qi(e);return!Gw()||!t.visualViewport?Gj:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function qj(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Qi(e)?!1:t}function Qc(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),h=Qw(e);let d=Ul(1);t&&(n?on(n)&&(d=Yh(n)):d=Yh(e));const c=qj(h,r,n)?p5(h):Ul(0);let b=(s.left+c.x)/d.x,E=(s.top+c.y)/d.y,I=s.width/d.x,P=s.height/d.y;if(h){const T=Qi(h),O=n&&on(n)?Qi(n):n;let j=T,V=j.frameElement;for(;V&&n&&O!==j;){const re=Yh(V),W=V.getBoundingClientRect(),Z=Eo(V),K=W.left+(V.clientLeft+parseFloat(Z.paddingLeft))*re.x,ie=W.top+(V.clientTop+parseFloat(Z.paddingTop))*re.y;b*=re.x,E*=re.y,I*=re.x,P*=re.y,b+=K,E+=ie,j=Qi(V),V=j.frameElement}}return ld({width:I,height:P,x:b,y:E})}const Kj=[":popover-open",":modal"];function m5(e){return Kj.some(t=>{try{return e.matches(t)}catch{return!1}})}function Xj(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const h=s==="fixed",d=Us(n),c=t?m5(t.floating):!1;if(n===d||c&&h)return r;let b={scrollLeft:0,scrollTop:0},E=Ul(1);const I=Ul(0),P=So(n);if((P||!P&&!h)&&((Vl(n)!=="body"||wm(d))&&(b=d1(n)),So(n))){const T=Qc(n);E=Yh(n),I.x=T.x+n.clientLeft,I.y=T.y+n.clientTop}return{width:r.width*E.x,height:r.height*E.y,x:r.x*E.x-b.scrollLeft*E.x+I.x,y:r.y*E.y-b.scrollTop*E.y+I.y}}function Yj(e){return Array.from(e.getClientRects())}function g5(e){return Qc(Us(e)).left+d1(e).scrollLeft}function Jj(e){const t=Us(e),r=d1(e),n=e.ownerDocument.body,s=Ai(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),h=Ai(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let d=-r.scrollLeft+g5(e);const c=-r.scrollTop;return Eo(n).direction==="rtl"&&(d+=Ai(t.clientWidth,n.clientWidth)-s),{width:s,height:h,x:d,y:c}}function Qj(e,t){const r=Qi(e),n=Us(e),s=r.visualViewport;let h=n.clientWidth,d=n.clientHeight,c=0,b=0;if(s){h=s.width,d=s.height;const E=Gw();(!E||E&&t==="fixed")&&(c=s.offsetLeft,b=s.offsetTop)}return{width:h,height:d,x:c,y:b}}function e$(e,t){const r=Qc(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,h=So(e)?Yh(e):Ul(1),d=e.clientWidth*h.x,c=e.clientHeight*h.y,b=s*h.x,E=n*h.y;return{width:d,height:c,x:b,y:E}}function l3(e,t,r){let n;if(t==="viewport")n=Qj(e,r);else if(t==="document")n=Jj(Us(e));else if(on(t))n=e$(t,r);else{const s=p5(e);n={...t,x:t.x-s.x,y:t.y-s.y}}return ld(n)}function y5(e,t){const r=Jc(e);return r===t||!on(r)||sd(r)?!1:Eo(r).position==="fixed"||y5(r,t)}function t$(e,t){const r=t.get(e);if(r)return r;let n=ks(e,[],!1).filter(c=>on(c)&&Vl(c)!=="body"),s=null;const h=Eo(e).position==="fixed";let d=h?Jc(e):e;for(;on(d)&&!sd(d);){const c=Eo(d),b=Ww(d);!b&&c.position==="fixed"&&(s=null),(h?!b&&!s:!b&&c.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||wm(d)&&!b&&y5(e,d))?n=n.filter(I=>I!==d):s=c,d=Jc(d)}return t.set(e,n),n}function r$(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const d=[...r==="clippingAncestors"?t$(t,this._c):[].concat(r),n],c=d[0],b=d.reduce((E,I)=>{const P=l3(t,I,s);return E.top=Ai(P.top,E.top),E.right=Ta(P.right,E.right),E.bottom=Ta(P.bottom,E.bottom),E.left=Ai(P.left,E.left),E},l3(t,c,s));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}}function n$(e){const{width:t,height:r}=f5(e);return{width:t,height:r}}function i$(e,t,r){const n=So(t),s=Us(t),h=r==="fixed",d=Qc(e,!0,h,t);let c={scrollLeft:0,scrollTop:0};const b=Ul(0);if(n||!n&&!h)if((Vl(t)!=="body"||wm(s))&&(c=d1(t)),n){const P=Qc(t,!0,h,t);b.x=P.x+t.clientLeft,b.y=P.y+t.clientTop}else s&&(b.x=g5(s));const E=d.left+c.scrollLeft-b.x,I=d.top+c.scrollTop-b.y;return{x:E,y:I,width:d.width,height:d.height}}function c3(e,t){return!So(e)||Eo(e).position==="fixed"?null:t?t(e):e.offsetParent}function v5(e,t){const r=Qi(e);if(!So(e)||m5(e))return r;let n=c3(e,t);for(;n&&bj(n)&&Eo(n).position==="static";)n=c3(n,t);return n&&(Vl(n)==="html"||Vl(n)==="body"&&Eo(n).position==="static"&&!Ww(n))?r:n||wj(e)||r}const o$=async function(e){const t=this.getOffsetParent||v5,r=this.getDimensions;return{reference:i$(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await r(e.floating)}}};function a$(e){return Eo(e).direction==="rtl"}const s$={convertOffsetParentRelativeRectToViewportRelativeRect:Xj,getDocumentElement:Us,getClippingRect:r$,getOffsetParent:v5,getElementRects:o$,getClientRects:Yj,getDimensions:n$,getScale:Yh,isElement:on,isRTL:a$};function l$(e,t){let r=null,n;const s=Us(e);function h(){var c;clearTimeout(n),(c=r)==null||c.disconnect(),r=null}function d(c,b){c===void 0&&(c=!1),b===void 0&&(b=1),h();const{left:E,top:I,width:P,height:T}=e.getBoundingClientRect();if(c||t(),!P||!T)return;const O=fg(I),j=fg(s.clientWidth-(E+P)),V=fg(s.clientHeight-(I+T)),re=fg(E),Z={rootMargin:-O+"px "+-j+"px "+-V+"px "+-re+"px",threshold:Ai(0,Ta(1,b))||1};let K=!0;function ie(de){const ae=de[0].intersectionRatio;if(ae!==b){if(!K)return d();ae?d(!1,ae):n=setTimeout(()=>{d(!1,1e-7)},100)}K=!1}try{r=new IntersectionObserver(ie,{...Z,root:s.ownerDocument})}catch{r=new IntersectionObserver(ie,Z)}r.observe(e)}return d(!0),h}function c$(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:h=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:b=!1}=n,E=Qw(e),I=s||h?[...E?ks(E):[],...ks(t)]:[];I.forEach(W=>{s&&W.addEventListener("scroll",r,{passive:!0}),h&&W.addEventListener("resize",r)});const P=E&&c?l$(E,r):null;let T=-1,O=null;d&&(O=new ResizeObserver(W=>{let[Z]=W;Z&&Z.target===E&&O&&(O.unobserve(t),cancelAnimationFrame(T),T=requestAnimationFrame(()=>{var K;(K=O)==null||K.observe(t)})),r()}),E&&!b&&O.observe(E),O.observe(t));let j,V=b?Qc(e):null;b&&re();function re(){const W=Qc(e);V&&(W.x!==V.x||W.y!==V.y||W.width!==V.width||W.height!==V.height)&&r(),V=W,j=requestAnimationFrame(re)}return r(),()=>{var W;I.forEach(Z=>{s&&Z.removeEventListener("scroll",r),h&&Z.removeEventListener("resize",r)}),P==null||P(),(W=O)==null||W.disconnect(),O=null,b&&cancelAnimationFrame(j)}}const eS=Zj,Vb=jj,u$=Wj,u3=Nj,Ub=Vj,h3=Hj,h$=(e,t,r)=>{const n=new Map,s={platform:s$,...r},h={...s.platform,_c:n};return Bj(e,t,{...s,platform:h})},_5=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?u3({element:n.current,padding:s}).fn(r):{}:n?u3({element:n,padding:s}).fn(r):{}}}};var Ng=typeof document<"u"?$.useLayoutEffect:$.useEffect;function Sy(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Sy(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const h=s[n];if(!(h==="_owner"&&e.$$typeof)&&!Sy(e[h],t[h]))return!1}return!0}return e!==e&&t!==t}function x5(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function d3(e,t){const r=x5(e);return Math.round(t*r)/r}function f3(e){const t=$.useRef(e);return Ng(()=>{t.current=e}),t}function d$(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:h,floating:d}={},transform:c=!0,whileElementsMounted:b,open:E}=e,[I,P]=$.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[T,O]=$.useState(n);Sy(T,n)||O(n);const[j,V]=$.useState(null),[re,W]=$.useState(null),Z=$.useCallback(He=>{He!==ae.current&&(ae.current=He,V(He))},[]),K=$.useCallback(He=>{He!==J.current&&(J.current=He,W(He))},[]),ie=h||j,de=d||re,ae=$.useRef(null),J=$.useRef(null),we=$.useRef(I),Re=b!=null,De=f3(b),Oe=f3(s),Qe=$.useCallback(()=>{if(!ae.current||!J.current)return;const He={placement:t,strategy:r,middleware:T};Oe.current&&(He.platform=Oe.current),h$(ae.current,J.current,He).then(Se=>{const Be={...Se,isPositioned:!0};qe.current&&!Sy(we.current,Be)&&(we.current=Be,_d.flushSync(()=>{P(Be)}))})},[T,t,r,Oe]);Ng(()=>{E===!1&&we.current.isPositioned&&(we.current.isPositioned=!1,P(He=>({...He,isPositioned:!1})))},[E]);const qe=$.useRef(!1);Ng(()=>(qe.current=!0,()=>{qe.current=!1}),[]),Ng(()=>{if(ie&&(ae.current=ie),de&&(J.current=de),ie&&de){if(De.current)return De.current(ie,de,Qe);Qe()}},[ie,de,Qe,De,Re]);const Ze=$.useMemo(()=>({reference:ae,floating:J,setReference:Z,setFloating:K}),[Z,K]),Fe=$.useMemo(()=>({reference:ie,floating:de}),[ie,de]),Ve=$.useMemo(()=>{const He={position:r,left:0,top:0};if(!Fe.floating)return He;const Se=d3(Fe.floating,I.x),Be=d3(Fe.floating,I.y);return c?{...He,transform:"translate("+Se+"px, "+Be+"px)",...x5(Fe.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Se,top:Be}},[r,c,Fe.floating,I.x,I.y]);return $.useMemo(()=>({...I,update:Qe,refs:Ze,elements:Fe,floatingStyles:Ve}),[I,Qe,Ze,Fe,Ve])}const f$=R2.useInsertionEffect,p$=f$||(e=>e());function bh(e){const t=$.useRef(()=>{});return p$(()=>{t.current=e}),$.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}var Ls=typeof document<"u"?$.useLayoutEffect:$.useEffect;let tx=!1,m$=0;const p3=()=>"floating-ui-"+m$++;function g$(){const[e,t]=$.useState(()=>tx?p3():void 0);return Ls(()=>{e==null&&t(p3())},[]),$.useEffect(()=>{tx||(tx=!0)},[]),e}const y$=R2.useId,b5=y$||g$;function v$(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(s=>s(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,((n=e.get(t))==null?void 0:n.filter(s=>s!==r))||[])}}}const _$=$.createContext(null),x$=$.createContext(null),tS=()=>{var e;return((e=$.useContext(_$))==null?void 0:e.id)||null},rS=()=>$.useContext(x$);function nS(e){return"data-floating-ui-"+e}function m3(e){const t=$.useRef(e);return Ls(()=>{t.current=e}),t}const g3=nS("safe-polygon");function jg(e,t,r){return r&&!u5(r)?0:typeof e=="number"?e:e==null?void 0:e[t]}function b$(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,dataRef:s,events:h,elements:{domReference:d,floating:c},refs:b}=e,{enabled:E=!0,delay:I=0,handleClose:P=null,mouseOnly:T=!1,restMs:O=0,move:j=!0}=t,V=rS(),re=tS(),W=m3(P),Z=m3(I),K=$.useRef(),ie=$.useRef(),de=$.useRef(),ae=$.useRef(),J=$.useRef(!0),we=$.useRef(!1),Re=$.useRef(()=>{}),De=$.useCallback(()=>{var Ze;const Fe=(Ze=s.current.openEvent)==null?void 0:Ze.type;return(Fe==null?void 0:Fe.includes("mouse"))&&Fe!=="mousedown"},[s]);$.useEffect(()=>{if(!E)return;function Ze(Fe){let{open:Ve}=Fe;Ve||(clearTimeout(ie.current),clearTimeout(ae.current),J.current=!0)}return h.on("openchange",Ze),()=>{h.off("openchange",Ze)}},[E,h]),$.useEffect(()=>{if(!E||!W.current||!r)return;function Ze(Ve){De()&&n(!1,Ve,"hover")}const Fe=Bc(c).documentElement;return Fe.addEventListener("mouseleave",Ze),()=>{Fe.removeEventListener("mouseleave",Ze)}},[c,r,n,E,W,De]);const Oe=$.useCallback(function(Ze,Fe,Ve){Fe===void 0&&(Fe=!0),Ve===void 0&&(Ve="hover");const He=jg(Z.current,"close",K.current);He&&!de.current?(clearTimeout(ie.current),ie.current=setTimeout(()=>n(!1,Ze,Ve),He)):Fe&&(clearTimeout(ie.current),n(!1,Ze,Ve))},[Z,n]),Qe=$.useCallback(()=>{Re.current(),de.current=void 0},[]),qe=$.useCallback(()=>{if(we.current){const Ze=Bc(b.floating.current).body;Ze.style.pointerEvents="",Ze.removeAttribute(g3),we.current=!1}},[b]);return $.useEffect(()=>{if(!E)return;function Ze(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function Fe(Se){if(clearTimeout(ie.current),J.current=!1,T&&!u5(K.current)||O>0&&jg(Z.current,"open")===0)return;const Be=jg(Z.current,"open",K.current);Be?ie.current=setTimeout(()=>{n(!0,Se,"hover")},Be):n(!0,Se,"hover")}function Ve(Se){if(Ze())return;Re.current();const Be=Bc(c);if(clearTimeout(ae.current),W.current){r||clearTimeout(ie.current),de.current=W.current({...e,tree:V,x:Se.clientX,y:Se.clientY,onClose(){qe(),Qe(),Oe(Se,!0,"safe-polygon")}});const ot=de.current;Be.addEventListener("mousemove",ot),Re.current=()=>{Be.removeEventListener("mousemove",ot)};return}(K.current==="touch"?!Xp(c,Se.relatedTarget):!0)&&Oe(Se)}function He(Se){Ze()||W.current==null||W.current({...e,tree:V,x:Se.clientX,y:Se.clientY,onClose(){qe(),Qe(),Oe(Se)}})(Se)}if(on(d)){const Se=d;return r&&Se.addEventListener("mouseleave",He),c==null||c.addEventListener("mouseleave",He),j&&Se.addEventListener("mousemove",Fe,{once:!0}),Se.addEventListener("mouseenter",Fe),Se.addEventListener("mouseleave",Ve),()=>{r&&Se.removeEventListener("mouseleave",He),c==null||c.removeEventListener("mouseleave",He),j&&Se.removeEventListener("mousemove",Fe),Se.removeEventListener("mouseenter",Fe),Se.removeEventListener("mouseleave",Ve)}}},[d,c,E,e,T,O,j,Oe,Qe,qe,n,r,V,Z,W,s]),Ls(()=>{var Ze;if(E&&r&&(Ze=W.current)!=null&&Ze.__options.blockPointerEvents&&De()){const Ve=Bc(c).body;if(Ve.setAttribute(g3,""),Ve.style.pointerEvents="none",we.current=!0,on(d)&&c){var Fe;const He=d,Se=V==null||(Fe=V.nodesRef.current.find(Be=>Be.id===re))==null||(Fe=Fe.context)==null?void 0:Fe.elements.floating;return Se&&(Se.style.pointerEvents=""),He.style.pointerEvents="auto",c.style.pointerEvents="auto",()=>{He.style.pointerEvents="",c.style.pointerEvents=""}}}},[E,r,re,c,d,V,W,De]),Ls(()=>{r||(K.current=void 0,Qe(),qe())},[r,Qe,qe]),$.useEffect(()=>()=>{Qe(),clearTimeout(ie.current),clearTimeout(ae.current),qe()},[E,d,Qe,qe]),$.useMemo(()=>{if(!E)return{};function Ze(Fe){K.current=Fe.pointerType}return{reference:{onPointerDown:Ze,onPointerEnter:Ze,onMouseMove(Fe){r||O===0||(clearTimeout(ae.current),ae.current=setTimeout(()=>{J.current||n(!0,Fe.nativeEvent,"hover")},O))}},floating:{onMouseEnter(){clearTimeout(ie.current)},onMouseLeave(Fe){Oe(Fe.nativeEvent,!1)}}}},[E,O,r,n,Oe])}const w5=$.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:()=>{},setState:()=>{},isInstantPhase:!1}),S5=()=>$.useContext(w5),w$=e=>{let{children:t,delay:r,timeoutMs:n=0}=e;const[s,h]=$.useReducer((b,E)=>({...b,...E}),{delay:r,timeoutMs:n,initialDelay:r,currentId:null,isInstantPhase:!1}),d=$.useRef(null),c=$.useCallback(b=>{h({currentId:b})},[]);return Ls(()=>{s.currentId?d.current===null?d.current=s.currentId:h({isInstantPhase:!0}):(h({isInstantPhase:!1}),d.current=null)},[s.currentId]),$.createElement(w5.Provider,{value:$.useMemo(()=>({...s,setState:h,setCurrentId:c}),[s,c])},t)},S$=(e,t)=>{let{open:r,onOpenChange:n}=e,{id:s}=t;const{currentId:h,setCurrentId:d,initialDelay:c,setState:b,timeoutMs:E}=S5();Ls(()=>{h&&(b({delay:{open:1,close:jg(c,"close")}}),h!==s&&n(!1))},[s,n,b,h,c]),Ls(()=>{function I(){n(!1),b({delay:c,currentId:null})}if(!r&&h===s){if(E){const P=window.setTimeout(I,E);return()=>{clearTimeout(P)}}I()}},[r,b,h,s,n,c,E]),Ls(()=>{r&&d(s)},[r,d,s])};function rx(e,t){let r=e.filter(s=>{var h;return s.parentId===t&&((h=s.context)==null?void 0:h.open)}),n=r;for(;n.length;)n=e.filter(s=>{var h;return(h=n)==null?void 0:h.some(d=>{var c;return s.parentId===d.id&&((c=s.context)==null?void 0:c.open)})}),r=r.concat(n);return r}const E$={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},A$={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},y3=e=>{var t,r;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(r=e==null?void 0:e.outsidePress)!=null?r:!0}};function C$(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,nodeId:s,elements:{reference:h,domReference:d,floating:c},dataRef:b}=e,{enabled:E=!0,escapeKey:I=!0,outsidePress:P=!0,outsidePressEvent:T="pointerdown",referencePress:O=!1,referencePressEvent:j="pointerdown",ancestorScroll:V=!1,bubbles:re,capture:W}=t,Z=rS(),K=bh(typeof P=="function"?P:()=>!1),ie=typeof P=="function"?K:P,de=$.useRef(!1),ae=$.useRef(!1),{escapeKey:J,outsidePress:we}=y3(re),{escapeKey:Re,outsidePress:De}=y3(W),Oe=bh(Fe=>{if(!r||!E||!I||Fe.key!=="Escape")return;const Ve=Z?rx(Z.nodesRef.current,s):[];if(!J&&(Fe.stopPropagation(),Ve.length>0)){let He=!0;if(Ve.forEach(Se=>{var Be;if((Be=Se.context)!=null&&Be.open&&!Se.context.dataRef.current.__escapeKeyBubbles){He=!1;return}}),!He)return}n(!1,Pj(Fe)?Fe.nativeEvent:Fe,"escape-key")}),Qe=bh(Fe=>{var Ve;const He=()=>{var Se;Oe(Fe),(Se=xh(Fe))==null||Se.removeEventListener("keydown",He)};(Ve=xh(Fe))==null||Ve.addEventListener("keydown",He)}),qe=bh(Fe=>{const Ve=de.current;de.current=!1;const He=ae.current;if(ae.current=!1,T==="click"&&He||Ve||typeof ie=="function"&&!ie(Fe))return;const Se=xh(Fe),Be="["+nS("inert")+"]",tt=Bc(c).querySelectorAll(Be);let ot=on(Se)?Se:null;for(;ot&&!sd(ot);){const Tt=Jc(ot);if(sd(Tt)||!on(Tt))break;ot=Tt}if(tt.length&&on(Se)&&!Tj(Se)&&!Xp(Se,c)&&Array.from(tt).every(Tt=>!Xp(ot,Tt)))return;if(So(Se)&&c){const Tt=Se.clientWidth>0&&Se.scrollWidth>Se.clientWidth,kt=Se.clientHeight>0&&Se.scrollHeight>Se.clientHeight;let Lt=kt&&Fe.offsetX>Se.clientWidth;if(kt&&Eo(Se).direction==="rtl"&&(Lt=Fe.offsetX<=Se.offsetWidth-Se.clientWidth),Lt||Tt&&Fe.offsetY>Se.clientHeight)return}const St=Z&&rx(Z.nodesRef.current,s).some(Tt=>{var kt;return ex(Fe,(kt=Tt.context)==null?void 0:kt.elements.floating)});if(ex(Fe,c)||ex(Fe,d)||St)return;const qt=Z?rx(Z.nodesRef.current,s):[];if(qt.length>0){let Tt=!0;if(qt.forEach(kt=>{var Lt;if((Lt=kt.context)!=null&&Lt.open&&!kt.context.dataRef.current.__outsidePressBubbles){Tt=!1;return}}),!Tt)return}n(!1,Fe,"outside-press")}),Ze=bh(Fe=>{var Ve;const He=()=>{var Se;qe(Fe),(Se=xh(Fe))==null||Se.removeEventListener(T,He)};(Ve=xh(Fe))==null||Ve.addEventListener(T,He)});return $.useEffect(()=>{if(!r||!E)return;b.current.__escapeKeyBubbles=J,b.current.__outsidePressBubbles=we;function Fe(Se){n(!1,Se,"ancestor-scroll")}const Ve=Bc(c);I&&Ve.addEventListener("keydown",Re?Qe:Oe,Re),ie&&Ve.addEventListener(T,De?Ze:qe,De);let He=[];return V&&(on(d)&&(He=ks(d)),on(c)&&(He=He.concat(ks(c))),!on(h)&&h&&h.contextElement&&(He=He.concat(ks(h.contextElement)))),He=He.filter(Se=>{var Be;return Se!==((Be=Ve.defaultView)==null?void 0:Be.visualViewport)}),He.forEach(Se=>{Se.addEventListener("scroll",Fe,{passive:!0})}),()=>{I&&Ve.removeEventListener("keydown",Re?Qe:Oe,Re),ie&&Ve.removeEventListener(T,De?Ze:qe,De),He.forEach(Se=>{Se.removeEventListener("scroll",Fe)})}},[b,c,d,h,I,ie,T,r,n,V,E,J,we,Oe,Re,Qe,qe,De,Ze]),$.useEffect(()=>{de.current=!1},[ie,T]),$.useMemo(()=>E?{reference:{onKeyDown:Oe,[E$[j]]:Fe=>{O&&n(!1,Fe.nativeEvent,"reference-press")}},floating:{onKeyDown:Oe,onMouseDown(){ae.current=!0},onMouseUp(){ae.current=!0},[A$[T]]:()=>{de.current=!0}}}:{},[E,O,T,j,n,Oe])}function iS(e){var t;e===void 0&&(e={});const{open:r=!1,onOpenChange:n,nodeId:s}=e,[h,d]=$.useState(null),c=((t=e.elements)==null?void 0:t.reference)||h,b=d$(e),E=rS(),I=tS()!=null,P=bh((de,ae,J)=>{de&&(O.current.openEvent=ae),j.emit("openchange",{open:de,event:ae,reason:J,nested:I}),n==null||n(de,ae,J)}),T=$.useRef(null),O=$.useRef({}),j=$.useState(()=>v$())[0],V=b5(),re=$.useCallback(de=>{const ae=on(de)?{getBoundingClientRect:()=>de.getBoundingClientRect(),contextElement:de}:de;b.refs.setReference(ae)},[b.refs]),W=$.useCallback(de=>{(on(de)||de===null)&&(T.current=de,d(de)),(on(b.refs.reference.current)||b.refs.reference.current===null||de!==null&&!on(de))&&b.refs.setReference(de)},[b.refs]),Z=$.useMemo(()=>({...b.refs,setReference:W,setPositionReference:re,domReference:T}),[b.refs,W,re]),K=$.useMemo(()=>({...b.elements,domReference:c}),[b.elements,c]),ie=$.useMemo(()=>({...b,refs:Z,elements:K,dataRef:O,nodeId:s,floatingId:V,events:j,open:r,onOpenChange:P}),[b,s,V,j,r,P,Z,K]);return Ls(()=>{const de=E==null?void 0:E.nodesRef.current.find(ae=>ae.id===s);de&&(de.context=ie)}),$.useMemo(()=>({...b,context:ie,refs:Z,elements:K}),[b,Z,K,ie])}function P$(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,events:s,refs:h,elements:{domReference:d}}=e,{enabled:c=!0,visibleOnly:b=!0}=t,E=$.useRef(!1),I=$.useRef(),P=$.useRef(!0);return $.useEffect(()=>{if(!c)return;const T=Qi(d);function O(){!r&&So(d)&&d===o3(Bc(d))&&(E.current=!0)}function j(){P.current=!0}return T.addEventListener("blur",O),T.addEventListener("keydown",j,!0),()=>{T.removeEventListener("blur",O),T.removeEventListener("keydown",j,!0)}},[d,r,c]),$.useEffect(()=>{if(!c)return;function T(O){let{reason:j}=O;(j==="reference-press"||j==="escape-key")&&(E.current=!0)}return s.on("openchange",T),()=>{s.off("openchange",T)}},[s,c]),$.useEffect(()=>()=>{clearTimeout(I.current)},[]),$.useMemo(()=>c?{reference:{onPointerDown(T){Sj(T.nativeEvent)||(P.current=!1)},onMouseLeave(){E.current=!1},onFocus(T){if(E.current)return;const O=xh(T.nativeEvent);if(b&&on(O))try{if(Ej()&&Aj())throw Error();if(!O.matches(":focus-visible"))return}catch{if(!P.current&&!Mj(O))return}n(!0,T.nativeEvent,"focus")},onBlur(T){E.current=!1;const O=T.relatedTarget,j=on(O)&&O.hasAttribute(nS("focus-guard"))&&O.getAttribute("data-type")==="outside";I.current=window.setTimeout(()=>{const V=o3(d?d.ownerDocument:document);!O&&V===d||Xp(h.floating.current,V)||Xp(d,V)||j||n(!1,T.nativeEvent,"focus")})}}}:{},[c,b,d,h,n])}const v3="active",_3="selected";function nx(e,t,r){const n=new Map,s=r==="item";let h=e;if(s&&e){const{[v3]:d,[_3]:c,...b}=e;h=b}return{...r==="floating"&&{tabIndex:-1},...h,...t.map(d=>{const c=d?d[r]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((d,c)=>(c&&Object.entries(c).forEach(b=>{let[E,I]=b;if(!(s&&[v3,_3].includes(E)))if(E.indexOf("on")===0){if(n.has(E)||n.set(E,[]),typeof I=="function"){var P;(P=n.get(E))==null||P.push(I),d[E]=function(){for(var T,O=arguments.length,j=new Array(O),V=0;V<O;V++)j[V]=arguments[V];return(T=n.get(E))==null?void 0:T.map(re=>re(...j)).find(re=>re!==void 0)}}}else d[E]=I}),d),{})}}function T$(e){e===void 0&&(e=[]);const t=e,r=$.useCallback(h=>nx(h,e,"reference"),t),n=$.useCallback(h=>nx(h,e,"floating"),t),s=$.useCallback(h=>nx(h,e,"item"),e.map(h=>h==null?void 0:h.item));return $.useMemo(()=>({getReferenceProps:r,getFloatingProps:n,getItemProps:s}),[r,n,s])}const I$=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function M$(e,t){var r;t===void 0&&(t={});const{open:n,floatingId:s}=e,{enabled:h=!0,role:d="dialog"}=t,c=(r=I$.get(d))!=null?r:d,b=b5(),I=tS()!=null;return $.useMemo(()=>{if(!h)return{};const P={id:s,...c&&{role:c}};return c==="tooltip"||d==="label"?{reference:{["aria-"+(d==="label"?"labelledby":"describedby")]:n?s:void 0},floating:P}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":c==="alertdialog"?"dialog":c,"aria-controls":n?s:void 0,...c==="listbox"&&{role:"combobox"},...c==="menu"&&{id:b},...c==="menu"&&I&&{role:"menuitem"},...d==="select"&&{"aria-autocomplete":"none"},...d==="combobox"&&{"aria-autocomplete":"list"}},floating:{...P,...c==="menu"&&{"aria-labelledby":b}},item(T){let{active:O,selected:j}=T;const V={role:"option",...O&&{id:s+"-option"}};switch(d){case"select":return{...V,"aria-selected":O&&j};case"combobox":return{...V,...O&&{"aria-selected":!0}}}return{}}}},[h,d,c,n,s,b,I])}function E5(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[r,n]=t.split("-"),s=r==="right"?"left":"right";return n===void 0?s:`${s}-${n}`}return t}function x3(e,t,r,n){return e==="center"||n==="center"?{top:t}:e==="end"?{bottom:r}:e==="start"?{top:r}:{}}function b3(e,t,r,n,s){return e==="center"||n==="center"?{left:t}:e==="end"?{[s==="ltr"?"right":"left"]:r}:e==="start"?{[s==="ltr"?"left":"right"]:r}:{}}const R$={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function k$({position:e,arrowSize:t,arrowOffset:r,arrowRadius:n,arrowPosition:s,arrowX:h,arrowY:d,dir:c}){const[b,E="center"]=e.split("-"),I={width:We(t),height:We(t),transform:"rotate(45deg)",position:"absolute",[R$[b]]:We(n)},P=We(-t/2);return b==="left"?{...I,...x3(E,d,r,s),right:P,borderLeftColor:"transparent",borderBottomColor:"transparent"}:b==="right"?{...I,...x3(E,d,r,s),left:P,borderRightColor:"transparent",borderTopColor:"transparent"}:b==="top"?{...I,...b3(E,h,r,s,c),bottom:P,borderTopColor:"transparent",borderLeftColor:"transparent"}:b==="bottom"?{...I,...b3(E,h,r,s,c),top:P,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const oS=$.forwardRef(({position:e,arrowSize:t,arrowOffset:r,arrowRadius:n,arrowPosition:s,visible:h,arrowX:d,arrowY:c,style:b,...E},I)=>{const{dir:P}=Sd();return h?Q.jsx("div",{...E,ref:I,style:{...b,...k$({position:e,arrowSize:t,arrowOffset:r,arrowRadius:n,arrowPosition:s,dir:P,arrowX:d,arrowY:c})}}):null});oS.displayName="@mantine/core/FloatingArrow";const[L$,A5]=Xl("Popover component was not found in the tree");function f1({children:e,active:t=!0,refProp:r="ref"}){const n=NN(t),s=Ti(n,e==null?void 0:e.ref);return Kl(e)?$.cloneElement(e,{[r]:s}):e}function C5(e){return Q.jsx(Zw,{tabIndex:-1,"data-autofocus":!0,...e})}f1.displayName="@mantine/core/FocusTrap";C5.displayName="@mantine/core/FocusTrapInitialFocus";f1.InitialFocus=C5;function D$(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const O$={},P5=$.forwardRef((e,t)=>{const{children:r,target:n,...s}=Pt("Portal",O$,e),[h,d]=$.useState(!1),c=$.useRef(null);return vm(()=>(d(!0),c.current=n?typeof n=="string"?document.querySelector(n):n:D$(s),LI(t,c.current),!n&&c.current&&document.body.appendChild(c.current),()=>{!n&&c.current&&document.body.removeChild(c.current)}),[n]),!h||!c.current?null:_d.createPortal(Q.jsx(Q.Fragment,{children:r}),c.current)});P5.displayName="@mantine/core/Portal";function Sm({withinPortal:e=!0,children:t,...r}){return e?Q.jsx(P5,{...r,children:t}):Q.jsx(Q.Fragment,{children:t})}Sm.displayName="@mantine/core/OptionalPortal";const ep=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${We(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),pg={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${We(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${We(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${We(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${We(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${We(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${We(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${We(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${We(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...ep("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...ep("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...ep("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...ep("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...ep("top"),common:{transformOrigin:"top right"}}},w3={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function z$({transition:e,state:t,duration:r,timingFunction:n}){const s={transitionDuration:`${r}ms`,transitionTimingFunction:n};return typeof e=="string"?e in pg?{transitionProperty:pg[e].transitionProperty,...s,...pg[e].common,...pg[e][w3[t]]}:{}:{transitionProperty:e.transitionProperty,...s,...e.common,...e[w3[t]]}}function F$({duration:e,exitDuration:t,timingFunction:r,mounted:n,onEnter:s,onExit:h,onEntered:d,onExited:c}){const b=Ra(),E=DI(),I=b.respectReducedMotion?E:!1,[P,T]=$.useState(I?0:e),[O,j]=$.useState(n?"entered":"exited"),V=$.useRef(-1),re=$.useRef(-1),W=Z=>{const K=Z?s:h,ie=Z?d:c;window.clearTimeout(V.current);const de=I?0:Z?e:t;T(de),de===0?(typeof K=="function"&&K(),typeof ie=="function"&&ie(),j(Z?"entered":"exited")):re.current=requestAnimationFrame(()=>{x8.flushSync(()=>{j(Z?"pre-entering":"pre-exiting")}),re.current=requestAnimationFrame(()=>{typeof K=="function"&&K(),j(Z?"entering":"exiting"),V.current=window.setTimeout(()=>{typeof ie=="function"&&ie(),j(Z?"entered":"exited")},de)})})};return jl(()=>{W(n)},[n]),$.useEffect(()=>()=>{window.clearTimeout(V.current),cancelAnimationFrame(re.current)},[]),{transitionDuration:P,transitionStatus:O,transitionTimingFunction:r||"ease"}}function Ql({keepMounted:e,transition:t="fade",duration:r=250,exitDuration:n=r,mounted:s,children:h,timingFunction:d="ease",onExit:c,onEntered:b,onEnter:E,onExited:I}){const{transitionDuration:P,transitionStatus:T,transitionTimingFunction:O}=F$({mounted:s,exitDuration:n,duration:r,timingFunction:d,onExit:c,onEntered:b,onEnter:E,onExited:I});return P===0?s?Q.jsx(Q.Fragment,{children:h({})}):e?h({display:"none"}):null:T==="exited"?e?h({display:"none"}):null:Q.jsx(Q.Fragment,{children:h(z$({transition:t,duration:P,state:T,timingFunction:O}))})}Ql.displayName="@mantine/core/Transition";var T5={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const B$={},aS=Qt((e,t)=>{var re,W,Z,K;const r=Pt("PopoverDropdown",B$,e),{className:n,style:s,vars:h,children:d,onKeyDownCapture:c,variant:b,classNames:E,styles:I,...P}=r,T=A5(),O=II({opened:T.opened,shouldReturnFocus:T.returnFocus}),j=T.withRoles?{"aria-labelledby":T.getTargetId(),id:T.getDropdownId(),role:"dialog",tabIndex:-1}:{},V=Ti(t,T.floating);return T.disabled?null:Q.jsx(Sm,{...T.portalProps,withinPortal:T.withinPortal,children:Q.jsx(Ql,{mounted:T.opened,...T.transitionProps,transition:((re=T.transitionProps)==null?void 0:re.transition)||"fade",duration:((W=T.transitionProps)==null?void 0:W.duration)??150,keepMounted:T.keepMounted,exitDuration:typeof((Z=T.transitionProps)==null?void 0:Z.exitDuration)=="number"?T.transitionProps.exitDuration:(K=T.transitionProps)==null?void 0:K.duration,children:ie=>Q.jsx(f1,{active:T.trapFocus,children:Q.jsxs(Nt,{...j,...P,variant:b,ref:V,onKeyDownCapture:AN(T.onClose,{active:T.closeOnEscape,onTrigger:O,onKeyDown:c}),"data-position":T.placement,...T.getStyles("dropdown",{className:n,props:r,classNames:E,styles:I,style:[{...ie,zIndex:T.zIndex,top:T.y??0,left:T.x??0,width:T.width==="target"?void 0:We(T.width)},s]}),children:[d,Q.jsx(oS,{ref:T.arrowRef,arrowX:T.arrowX,arrowY:T.arrowY,visible:T.withArrow,position:T.placement,arrowSize:T.arrowSize,arrowRadius:T.arrowRadius,arrowOffset:T.arrowOffset,arrowPosition:T.arrowPosition,...T.getStyles("arrow",{props:r,classNames:E,styles:I})})]})})})})});aS.classes=T5;aS.displayName="@mantine/core/PopoverDropdown";const N$={refProp:"ref",popupType:"dialog"},I5=Qt((e,t)=>{const{children:r,refProp:n,popupType:s,...h}=Pt("PopoverTarget",N$,e);if(!Kl(r))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const d=h,c=A5(),b=Ti(c.reference,r.ref,t),E=c.withRoles?{"aria-haspopup":s,"aria-expanded":c.opened,"aria-controls":c.getDropdownId(),id:c.getTargetId()}:{};return $.cloneElement(r,{...d,...E,...c.targetProps,className:Pi(c.targetProps.className,d.className,r.props.className),[n]:b,...c.controlled?null:{onClick:c.onToggle}})});I5.displayName="@mantine/core/PopoverTarget";function M5({opened:e,floating:t,position:r,positionDependencies:n}){const[s,h]=$.useState(0);$.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return c$(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,s,r]),jl(()=>{t.update()},n),jl(()=>{h(d=>d+1)},[e])}function j$(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function $$(e,t){const r=j$(e.middlewares),n=[d5(e.offset)];return r.shift&&n.push(eS(typeof r.shift=="boolean"?{limiter:h3(),padding:5}:{limiter:h3(),padding:5,...r.shift})),r.flip&&n.push(typeof r.flip=="boolean"?Vb():Vb(r.flip)),r.inline&&n.push(typeof r.inline=="boolean"?Ub():Ub(r.inline)),n.push(_5({element:e.arrowRef,padding:e.arrowOffset})),(r.size||e.width==="target")&&n.push(u$({...typeof r.size=="boolean"?{}:r.size,apply({rects:s,availableWidth:h,availableHeight:d}){var E;const b=((E=t().refs.floating.current)==null?void 0:E.style)??{};r.size&&Object.assign(b,{maxWidth:`${h}px`,maxHeight:`${d}px`}),e.width==="target"&&Object.assign(b,{width:`${s.reference.width}px`})}})),n}function V$(e){const[t,r]=_m({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),n=()=>{var d;t&&((d=e.onClose)==null||d.call(e),r(!1))},s=()=>{var d,c;t?((d=e.onClose)==null||d.call(e),r(!1)):((c=e.onOpen)==null||c.call(e),r(!0))},h=iS({strategy:e.strategy,placement:e.position,middleware:$$(e,()=>h)});return M5({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:h}),jl(()=>{var d;(d=e.onPositionChange)==null||d.call(e,h.placement)},[h.placement]),jl(()=>{var d,c;e.opened?(c=e.onOpen)==null||c.call(e):(d=e.onClose)==null||d.call(e)},[e.opened]),{floating:h,controlled:typeof e.opened=="boolean",opened:t,onClose:n,onToggle:s}}const U$={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Yl("popover"),__staticSelector:"Popover",width:"max-content"},Z$=(e,{radius:t,shadow:r})=>({dropdown:{"--popover-radius":t===void 0?void 0:ea(t),"--popover-shadow":Ow(r)}});function ka(e){var Sn,Rn,nr,dr,kn,$t;const t=Pt("Popover",U$,e),{children:r,position:n,offset:s,onPositionChange:h,positionDependencies:d,opened:c,transitionProps:b,width:E,middlewares:I,withArrow:P,arrowSize:T,arrowOffset:O,arrowRadius:j,arrowPosition:V,unstyled:re,classNames:W,styles:Z,closeOnClickOutside:K,withinPortal:ie,portalProps:de,closeOnEscape:ae,clickOutsideEvents:J,trapFocus:we,onClose:Re,onOpen:De,onChange:Oe,zIndex:Qe,radius:qe,shadow:Ze,id:Fe,defaultOpened:Ve,__staticSelector:He,withRoles:Se,disabled:Be,returnFocus:tt,variant:ot,keepMounted:St,vars:qt,floatingStrategy:Tt,...kt}=t,Lt=Or({name:He,props:t,classes:T5,classNames:W,styles:Z,unstyled:re,rootSelector:"dropdown",vars:qt,varsResolver:Z$}),Yt=$.useRef(null),[or,zr]=$.useState(null),[Fr,ti]=$.useState(null),{dir:ar}=Sd(),Jr=wd(Fe),Wt=V$({middlewares:I,width:E,position:E5(ar,n),offset:typeof s=="number"?s+(P?T/2:0):s,arrowRef:Yt,arrowOffset:O,onPositionChange:h,positionDependencies:d,opened:c,defaultOpened:Ve,onChange:Oe,onOpen:De,onClose:Re,strategy:Tt});IN(()=>K&&Wt.onClose(),J,[or,Fr]);const ri=$.useCallback(Vt=>{zr(Vt),Wt.floating.refs.setReference(Vt)},[Wt.floating.refs.setReference]),Le=$.useCallback(Vt=>{ti(Vt),Wt.floating.refs.setFloating(Vt)},[Wt.floating.refs.setFloating]);return Q.jsx(L$,{value:{returnFocus:tt,disabled:Be,controlled:Wt.controlled,reference:ri,floating:Le,x:Wt.floating.x,y:Wt.floating.y,arrowX:(nr=(Rn=(Sn=Wt.floating)==null?void 0:Sn.middlewareData)==null?void 0:Rn.arrow)==null?void 0:nr.x,arrowY:($t=(kn=(dr=Wt.floating)==null?void 0:dr.middlewareData)==null?void 0:kn.arrow)==null?void 0:$t.y,opened:Wt.opened,arrowRef:Yt,transitionProps:b,width:E,withArrow:P,arrowSize:T,arrowOffset:O,arrowRadius:j,arrowPosition:V,placement:Wt.floating.placement,trapFocus:we,withinPortal:ie,portalProps:de,zIndex:Qe,radius:qe,shadow:Ze,closeOnEscape:ae,onClose:Wt.onClose,onToggle:Wt.onToggle,getTargetId:()=>`${Jr}-target`,getDropdownId:()=>`${Jr}-dropdown`,withRoles:Se,targetProps:kt,__staticSelector:He,classNames:W,styles:Z,unstyled:re,variant:ot,keepMounted:St,getStyles:Lt},children:r})}ka.Target=I5;ka.Dropdown=aS;ka.displayName="@mantine/core/Popover";ka.extend=e=>e;var xa={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const H$=$.forwardRef(({className:e,...t},r)=>Q.jsxs(Nt,{component:"span",className:Pi(xa.barsLoader,e),...t,ref:r,children:[Q.jsx("span",{className:xa.bar}),Q.jsx("span",{className:xa.bar}),Q.jsx("span",{className:xa.bar})]})),W$=$.forwardRef(({className:e,...t},r)=>Q.jsxs(Nt,{component:"span",className:Pi(xa.dotsLoader,e),...t,ref:r,children:[Q.jsx("span",{className:xa.dot}),Q.jsx("span",{className:xa.dot}),Q.jsx("span",{className:xa.dot})]})),G$=$.forwardRef(({className:e,...t},r)=>Q.jsx(Nt,{component:"span",className:Pi(xa.ovalLoader,e),...t,ref:r})),R5={bars:H$,oval:G$,dots:W$},q$={loaders:R5,type:"oval"},K$=(e,{size:t,color:r})=>({root:{"--loader-size":Bn(t,"loader-size"),"--loader-color":r?Yc(r,e):void 0}}),Ad=Qt((e,t)=>{const r=Pt("Loader",q$,e),{size:n,color:s,type:h,vars:d,className:c,style:b,classNames:E,styles:I,unstyled:P,loaders:T,variant:O,children:j,...V}=r,re=Or({name:"Loader",props:r,classes:xa,className:c,style:b,classNames:E,styles:I,unstyled:P,vars:d,varsResolver:K$});return j?Q.jsx(Nt,{...re("root"),ref:t,...V,children:j}):Q.jsx(Nt,{...re("root"),ref:t,component:T[h],variant:O,size:n,...V})});Ad.defaultLoaders=R5;Ad.classes=xa;Ad.displayName="@mantine/core/Loader";const k5=$.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...r},n)=>Q.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:n,...r,children:Q.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));k5.displayName="@mantine/core/CloseIcon";var L5={root:"m_86a44da5","root--subtle":"m_220c80f2"};const X$={variant:"subtle"},Y$=(e,{size:t,radius:r,iconSize:n})=>({root:{"--cb-size":Bn(t,"cb-size"),"--cb-radius":r===void 0?void 0:ea(r),"--cb-icon-size":We(n)}}),Em=Jl((e,t)=>{const r=Pt("CloseButton",X$,e),{iconSize:n,children:s,vars:h,radius:d,className:c,classNames:b,style:E,styles:I,unstyled:P,"data-disabled":T,disabled:O,variant:j,icon:V,mod:re,...W}=r,Z=Or({name:"CloseButton",props:r,className:c,style:E,classes:L5,classNames:b,styles:I,unstyled:P,vars:h,varsResolver:Y$});return Q.jsxs(bm,{ref:t,...W,unstyled:P,variant:j,disabled:O,mod:[{disabled:O||T},re],...Z("root",{variant:j,active:!O&&!T}),children:[V||Q.jsx(k5,{}),s]})});Em.classes=L5;Em.displayName="@mantine/core/CloseButton";var D5={root:"m_9814e45f"};const J$={zIndex:Yl("modal")},Q$=(e,{gradient:t,color:r,backgroundOpacity:n,blur:s,radius:h,zIndex:d})=>({root:{"--overlay-bg":t||(r!==void 0||n!==void 0)&&jo(r||"#000",n??.6)||void 0,"--overlay-filter":s?`blur(${We(s)})`:void 0,"--overlay-radius":h===void 0?void 0:ea(h),"--overlay-z-index":d==null?void 0:d.toString()}}),Yp=Jl((e,t)=>{const r=Pt("Overlay",J$,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,fixed:E,center:I,children:P,radius:T,zIndex:O,gradient:j,blur:V,color:re,backgroundOpacity:W,mod:Z,...K}=r,ie=Or({name:"Overlay",props:r,classes:D5,className:s,style:h,classNames:n,styles:d,unstyled:c,vars:b,varsResolver:Q$});return Q.jsx(Nt,{ref:t,...ie("root"),mod:[{center:I,fixed:E},Z],...K,children:P})});Yp.classes=D5;Yp.displayName="@mantine/core/Overlay";const[eV,Zs]=Xl("ModalBase component was not found in tree");function tV({opened:e,transitionDuration:t}){const[r,n]=$.useState(e),s=$.useRef(),d=DI()?0:t;return $.useEffect(()=>(e?(n(!0),window.clearTimeout(s.current)):d===0?n(!1):s.current=window.setTimeout(()=>n(!1),d),()=>window.clearTimeout(s.current)),[e,d]),r}function rV({id:e,transitionProps:t,opened:r,trapFocus:n,closeOnEscape:s,onClose:h,returnFocus:d}){const c=wd(e),[b,E]=$.useState(!1),[I,P]=$.useState(!1),T=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,O=tV({opened:r,transitionDuration:T});return VN("keydown",j=>{var V;j.key==="Escape"&&s&&r&&((V=j.target)==null?void 0:V.getAttribute("data-mantine-stop-propagation"))!=="true"&&h()},{capture:!0}),II({opened:r,shouldReturnFocus:n&&d}),{_id:c,titleMounted:b,bodyMounted:I,shouldLockScroll:O,setTitleMounted:E,setBodyMounted:P}}const nV=$.forwardRef(({keepMounted:e,opened:t,onClose:r,id:n,transitionProps:s,trapFocus:h,closeOnEscape:d,returnFocus:c,closeOnClickOutside:b,withinPortal:E,portalProps:I,lockScroll:P,children:T,zIndex:O,shadow:j,padding:V,__vars:re,unstyled:W,removeScrollProps:Z,...K},ie)=>{const{_id:de,titleMounted:ae,bodyMounted:J,shouldLockScroll:we,setTitleMounted:Re,setBodyMounted:De}=rV({id:n,transitionProps:s,opened:t,trapFocus:h,closeOnEscape:d,onClose:r,returnFocus:c});return Q.jsx(Sm,{...I,withinPortal:E,children:Q.jsx(eV,{value:{opened:t,onClose:r,closeOnClickOutside:b,transitionProps:{...s,keepMounted:e},getTitleId:()=>`${de}-title`,getBodyId:()=>`${de}-body`,titleMounted:ae,bodyMounted:J,setTitleMounted:Re,setBodyMounted:De,trapFocus:h,closeOnEscape:d,zIndex:O,unstyled:W},children:Q.jsx(AI,{enabled:we&&P,...Z,children:Q.jsx(Nt,{ref:ie,...K,__vars:{...re,"--mb-z-index":(O||Yl("modal")).toString(),"--mb-shadow":Ow(j),"--mb-padding":CN(V)},children:T})})})})});function iV(){const e=Zs();return $.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var cd={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const O5=$.forwardRef(({className:e,...t},r)=>{const n=iV(),s=Zs();return Q.jsx(Nt,{ref:r,...t,id:n,className:Pi({[cd.body]:!s.unstyled},e)})});O5.displayName="@mantine/core/ModalBaseBody";const z5=$.forwardRef(({className:e,onClick:t,...r},n)=>{const s=Zs();return Q.jsx(Em,{ref:n,...r,onClick:h=>{s.onClose(),t==null||t(h)},className:Pi({[cd.close]:!s.unstyled},e),unstyled:s.unstyled})});z5.displayName="@mantine/core/ModalBaseCloseButton";const oV=$.forwardRef(({transitionProps:e,className:t,innerProps:r,onKeyDown:n,style:s,...h},d)=>{const c=Zs();return Q.jsx(Ql,{mounted:c.opened,transition:"pop",...c.transitionProps,...e,children:b=>Q.jsx("div",{...r,className:Pi({[cd.inner]:!c.unstyled},r.className),children:Q.jsx(f1,{active:c.opened&&c.trapFocus,children:Q.jsx(Hw,{...h,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":c.bodyMounted?c.getBodyId():void 0,"aria-labelledby":c.titleMounted?c.getTitleId():void 0,ref:d,style:[s,b],className:Pi({[cd.content]:!c.unstyled},t),unstyled:c.unstyled,children:h.children})})})})}),F5=$.forwardRef(({className:e,...t},r)=>{const n=Zs();return Q.jsx(Nt,{component:"header",ref:r,className:Pi({[cd.header]:!n.unstyled},e),...t})});F5.displayName="@mantine/core/ModalBaseHeader";const aV={duration:200,timingFunction:"ease",transition:"fade"};function sV(e){const t=Zs();return{...aV,...t.transitionProps,...e}}const B5=$.forwardRef(({onClick:e,transitionProps:t,style:r,...n},s)=>{const h=Zs(),d=sV(t);return Q.jsx(Ql,{mounted:h.opened,...d,transition:"fade",children:c=>Q.jsx(Yp,{ref:s,fixed:!0,style:[r,c],zIndex:h.zIndex,unstyled:h.unstyled,onClick:b=>{e==null||e(b),h.closeOnClickOutside&&h.onClose()},...n})})});B5.displayName="@mantine/core/ModalBaseOverlay";function lV(){const e=Zs();return $.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const N5=$.forwardRef(({className:e,...t},r)=>{const n=lV(),s=Zs();return Q.jsx(Nt,{component:"h2",ref:r,className:Pi({[cd.title]:!s.unstyled},e),...t,id:n})});N5.displayName="@mantine/core/ModalBaseTitle";function cV({children:e}){return Q.jsx(Q.Fragment,{children:e})}const[uV,p1]=Dw({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var ra={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const S3={},hV=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Ea(t)} - ${We(2)})`}}),m1=Qt((e,t)=>{const r=Pt("InputDescription",S3,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,size:E,__staticSelector:I,__inheritStyles:P=!0,variant:T,...O}=Pt("InputDescription",S3,r),j=p1(),V=Or({name:["InputWrapper",I],props:r,classes:ra,className:s,style:h,classNames:n,styles:d,unstyled:c,rootSelector:"description",vars:b,varsResolver:hV}),re=P&&(j==null?void 0:j.getStyles)||V;return Q.jsx(Nt,{component:"p",ref:t,variant:T,size:E,...re("description",j!=null&&j.getStyles?{className:s,style:h}:void 0),...O})});m1.classes=ra;m1.displayName="@mantine/core/InputDescription";const dV={},fV=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Ea(t)} - ${We(2)})`}}),g1=Qt((e,t)=>{const r=Pt("InputError",dV,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,size:E,__staticSelector:I,__inheritStyles:P=!0,variant:T,...O}=r,j=Or({name:["InputWrapper",I],props:r,classes:ra,className:s,style:h,classNames:n,styles:d,unstyled:c,rootSelector:"error",vars:b,varsResolver:fV}),V=p1(),re=P&&(V==null?void 0:V.getStyles)||j;return Q.jsx(Nt,{component:"p",ref:t,variant:T,size:E,...re("error",V!=null&&V.getStyles?{className:s,style:h}:void 0),...O})});g1.classes=ra;g1.displayName="@mantine/core/InputError";const E3={labelElement:"label"},pV=(e,{size:t})=>({label:{"--input-label-size":Ea(t),"--input-asterisk-color":void 0}}),y1=Qt((e,t)=>{const r=Pt("InputLabel",E3,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,labelElement:E,size:I,required:P,htmlFor:T,onMouseDown:O,children:j,__staticSelector:V,variant:re,mod:W,...Z}=Pt("InputLabel",E3,r),K=Or({name:["InputWrapper",V],props:r,classes:ra,className:s,style:h,classNames:n,styles:d,unstyled:c,rootSelector:"label",vars:b,varsResolver:pV}),ie=p1(),de=(ie==null?void 0:ie.getStyles)||K;return Q.jsxs(Nt,{...de("label",ie!=null&&ie.getStyles?{className:s,style:h}:void 0),component:E,variant:re,size:I,ref:t,htmlFor:E==="label"?T:void 0,mod:[{required:P},W],onMouseDown:ae=>{O==null||O(ae),!ae.defaultPrevented&&ae.detail>1&&ae.preventDefault()},...Z,children:[j,P&&Q.jsx("span",{...de("required"),"aria-hidden":!0,children:" *"})]})});y1.classes=ra;y1.displayName="@mantine/core/InputLabel";const A3={},sS=Qt((e,t)=>{const r=Pt("InputPlaceholder",A3,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,__staticSelector:E,variant:I,error:P,mod:T,...O}=Pt("InputPlaceholder",A3,r),j=Or({name:["InputPlaceholder",E],props:r,classes:ra,className:s,style:h,classNames:n,styles:d,unstyled:c,rootSelector:"placeholder"});return Q.jsx(Nt,{...j("placeholder"),mod:[{error:!!P},T],component:"span",variant:I,ref:t,...O})});sS.classes=ra;sS.displayName="@mantine/core/InputPlaceholder";function mV(e,{hasDescription:t,hasError:r}){const n=e.findIndex(b=>b==="input"),s=e.slice(0,n),h=e.slice(n+1),d=t&&s.includes("description")||r&&s.includes("error");return{offsetBottom:t&&h.includes("description")||r&&h.includes("error"),offsetTop:d}}const gV={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},yV=(e,{size:t})=>({label:{"--input-label-size":Ea(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Ea(t)} - ${We(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Ea(t)} - ${We(2)})`}}),lS=Qt((e,t)=>{const r=Pt("InputWrapper",gV,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,size:E,variant:I,__staticSelector:P,inputContainer:T,inputWrapperOrder:O,label:j,error:V,description:re,labelProps:W,descriptionProps:Z,errorProps:K,labelElement:ie,children:de,withAsterisk:ae,id:J,required:we,__stylesApiProps:Re,mod:De,...Oe}=r,Qe=Or({name:["InputWrapper",P],props:Re||r,classes:ra,className:s,style:h,classNames:n,styles:d,unstyled:c,vars:b,varsResolver:yV}),qe={size:E,variant:I,__staticSelector:P},Ze=wd(J),Fe=typeof ae=="boolean"?ae:we,Ve=(K==null?void 0:K.id)||`${Ze}-error`,He=(Z==null?void 0:Z.id)||`${Ze}-description`,Se=Ze,Be=!!V&&typeof V!="boolean",tt=!!re,ot=`${Be?Ve:""} ${tt?He:""}`,St=ot.trim().length>0?ot.trim():void 0,qt=(W==null?void 0:W.id)||`${Ze}-label`,Tt=j&&Q.jsx(y1,{labelElement:ie,id:qt,htmlFor:Se,required:Fe,...qe,...W,children:j},"label"),kt=tt&&Q.jsx(m1,{...Z,...qe,size:(Z==null?void 0:Z.size)||qe.size,id:(Z==null?void 0:Z.id)||He,children:re},"description"),Lt=Q.jsx($.Fragment,{children:T(de)},"input"),Yt=Be&&$.createElement(g1,{...K,...qe,size:(K==null?void 0:K.size)||qe.size,key:"error",id:(K==null?void 0:K.id)||Ve},V),or=O.map(zr=>{switch(zr){case"label":return Tt;case"input":return Lt;case"description":return kt;case"error":return Yt;default:return null}});return Q.jsx(uV,{value:{getStyles:Qe,describedBy:St,inputId:Se,labelId:qt,...mV(O,{hasDescription:tt,hasError:Be})},children:Q.jsx(Nt,{ref:t,variant:I,size:E,mod:[{error:!!V},De],...Qe("root"),...Oe,children:or})})});lS.classes=ra;lS.displayName="@mantine/core/InputWrapper";const vV={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},_V=(e,t,r)=>({wrapper:{"--input-margin-top":r.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":r.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Bn(t.size,"input-height"),"--input-fz":Ea(t.size),"--input-radius":t.radius===void 0?void 0:ea(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?We(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?We(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Bn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Qo=Jl((e,t)=>{const r=Pt("Input",vV,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,required:b,__staticSelector:E,__stylesApiProps:I,size:P,wrapperProps:T,error:O,disabled:j,leftSection:V,leftSectionProps:re,leftSectionWidth:W,rightSection:Z,rightSectionProps:K,rightSectionWidth:ie,rightSectionPointerEvents:de,leftSectionPointerEvents:ae,variant:J,vars:we,pointer:Re,multiline:De,radius:Oe,id:Qe,withAria:qe,withErrorStyles:Ze,mod:Fe,...Ve}=r,{styleProps:He,rest:Se}=jw(Ve),Be=p1(),tt={offsetBottom:Be==null?void 0:Be.offsetBottom,offsetTop:Be==null?void 0:Be.offsetTop},ot=Or({name:["Input",E],props:I||r,classes:ra,className:s,style:h,classNames:n,styles:d,unstyled:c,stylesCtx:tt,rootSelector:"wrapper",vars:we,varsResolver:_V}),St=qe?{required:b,disabled:j,"aria-invalid":!!O,"aria-describedby":Be==null?void 0:Be.describedBy,id:(Be==null?void 0:Be.inputId)||Qe}:{};return Q.jsxs(Nt,{...ot("wrapper"),...He,...T,mod:[{error:!!O&&Ze,pointer:Re,disabled:j,multiline:De,"data-with-right-section":!!Z,"data-with-left-section":!!V},Fe],variant:J,size:P,children:[V&&Q.jsx("div",{...re,"data-position":"left",...ot("section",{className:re==null?void 0:re.className,style:re==null?void 0:re.style}),children:V}),Q.jsx(Nt,{component:"input",...Se,...St,ref:t,required:b,mod:{disabled:j,error:!!O&&Ze},variant:J,...ot("input")}),Z&&Q.jsx("div",{...K,"data-position":"right",...ot("section",{className:K==null?void 0:K.className,style:K==null?void 0:K.style}),children:Z})]})});Qo.classes=ra;Qo.Wrapper=lS;Qo.Label=y1;Qo.Error=g1;Qo.Description=m1;Qo.Placeholder=sS;Qo.displayName="@mantine/core/Input";function xV(e,t,r){const n=Pt(e,t,r),{label:s,description:h,error:d,required:c,classNames:b,styles:E,className:I,unstyled:P,__staticSelector:T,__stylesApiProps:O,errorProps:j,labelProps:V,descriptionProps:re,wrapperProps:W,id:Z,size:K,style:ie,inputContainer:de,inputWrapperOrder:ae,withAsterisk:J,variant:we,vars:Re,mod:De,...Oe}=n,{styleProps:Qe,rest:qe}=jw(Oe),Ze={label:s,description:h,error:d,required:c,classNames:b,className:I,__staticSelector:T,__stylesApiProps:O||n,errorProps:j,labelProps:V,descriptionProps:re,unstyled:P,styles:E,size:K,style:ie,inputContainer:de,inputWrapperOrder:ae,withAsterisk:J,variant:we,id:Z,mod:De,...W};return{...qe,classNames:b,styles:E,unstyled:P,wrapperProps:{...Ze,...Qe},inputProps:{required:c,classNames:b,styles:E,unstyled:P,size:K,__staticSelector:T,__stylesApiProps:O||n,error:d,variant:we,id:Z}}}const bV={__staticSelector:"InputBase",withAria:!0},Cd=Jl((e,t)=>{const{inputProps:r,wrapperProps:n,...s}=xV("InputBase",bV,e);return Q.jsx(Qo.Wrapper,{...n,children:Q.jsx(Qo,{...r,...s,ref:t})})});Cd.classes={...Qo.classes,...Qo.Wrapper.classes};Cd.displayName="@mantine/core/InputBase";function j5(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>j5(t))}:e}function $5(e){return e?e.map(t=>j5(t)):[]}function V5(e){return e.reduce((t,r)=>"group"in r?{...t,...V5(r.items)}:(t[r.value]=r,t),{})}var eo={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const wV={error:null},SV=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Bn(t,"combobox-chevron-size")}}),v1=Qt((e,t)=>{const r=Pt("ComboboxChevron",wV,e),{size:n,error:s,style:h,className:d,classNames:c,styles:b,unstyled:E,vars:I,mod:P,...T}=r,O=Or({name:"ComboboxChevron",classes:eo,props:r,style:h,className:d,classNames:c,styles:b,unstyled:E,vars:I,varsResolver:SV,rootSelector:"chevron"});return Q.jsx(Nt,{component:"svg",...T,...O("chevron"),size:n,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:s},P],ref:t,children:Q.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});v1.classes=eo;v1.displayName="@mantine/core/ComboboxChevron";const[EV,na]=Xl("Combobox component was not found in tree"),U5=$.forwardRef(({size:e,onMouseDown:t,onClick:r,onClear:n,...s},h)=>Q.jsx(Em,{ref:h,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...s,onMouseDown:d=>{d.preventDefault(),t==null||t(d)},onClick:d=>{n(),r==null||r(d)}}));U5.displayName="@mantine/core/ComboboxClearButton";const AV={},cS=Qt((e,t)=>{const{classNames:r,styles:n,className:s,style:h,hidden:d,...c}=Pt("ComboboxDropdown",AV,e),b=na();return Q.jsx(ka.Dropdown,{...c,ref:t,role:"presentation","data-hidden":d||void 0,...b.getStyles("dropdown",{className:s,style:h,classNames:r,styles:n})})});cS.classes=eo;cS.displayName="@mantine/core/ComboboxDropdown";const CV={refProp:"ref"},Z5=Qt((e,t)=>{const{children:r,refProp:n}=Pt("ComboboxDropdownTarget",CV,e);if(na(),!Kl(r))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return Q.jsx(ka.Target,{ref:t,refProp:n,children:r})});Z5.displayName="@mantine/core/ComboboxDropdownTarget";const PV={},uS=Qt((e,t)=>{const{classNames:r,className:n,style:s,styles:h,vars:d,...c}=Pt("ComboboxEmpty",PV,e),b=na();return Q.jsx(Nt,{ref:t,...b.getStyles("empty",{className:n,classNames:r,styles:h,style:s}),...c})});uS.classes=eo;uS.displayName="@mantine/core/ComboboxEmpty";function hS({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:r,withExpandedAttribute:n,targetType:s,autoComplete:h}){const d=na(),[c,b]=$.useState(null),E=P=>{if(e==null||e(P),!d.readOnly&&t){if(P.nativeEvent.isComposing)return;if(P.nativeEvent.code==="ArrowDown"&&(P.preventDefault(),d.store.dropdownOpened?b(d.store.selectNextOption()):(d.store.openDropdown("keyboard"),b(d.store.selectActiveOption()))),P.nativeEvent.code==="ArrowUp"&&(P.preventDefault(),d.store.dropdownOpened?b(d.store.selectPreviousOption()):(d.store.openDropdown("keyboard"),b(d.store.selectActiveOption()))),P.nativeEvent.code==="Enter"||P.nativeEvent.code==="NumpadEnter"){if(P.nativeEvent.keyCode===229)return;const T=d.store.getSelectedOptionIndex();d.store.dropdownOpened&&T!==-1?(P.preventDefault(),d.store.clickSelectedOption()):s==="button"&&(P.preventDefault(),d.store.openDropdown("keyboard"))}P.nativeEvent.code==="Escape"&&d.store.closeDropdown("keyboard"),P.nativeEvent.code==="Space"&&s==="button"&&(P.preventDefault(),d.store.toggleDropdown("keyboard"))}};return{...r?{"aria-haspopup":"listbox","aria-expanded":n&&!!(d.store.listId&&d.store.dropdownOpened)||void 0,"aria-controls":d.store.listId,"aria-activedescendant":d.store.dropdownOpened&&c||void 0,autoComplete:h,"data-expanded":d.store.dropdownOpened||void 0,"data-mantine-stop-propagation":d.store.dropdownOpened||void 0}:{},onKeyDown:E}}const TV={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},H5=Qt((e,t)=>{const{children:r,refProp:n,withKeyboardNavigation:s,withAriaAttributes:h,withExpandedAttribute:d,targetType:c,autoComplete:b,...E}=Pt("ComboboxEventsTarget",TV,e);if(!Kl(r))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const I=na(),P=hS({targetType:c,withAriaAttributes:h,withKeyboardNavigation:s,withExpandedAttribute:d,onKeyDown:r.props.onKeyDown,autoComplete:b});return $.cloneElement(r,{...P,...E,[n]:Ti(t,I.store.targetRef,r==null?void 0:r.ref)})});H5.displayName="@mantine/core/ComboboxEventsTarget";const IV={},dS=Qt((e,t)=>{const{classNames:r,className:n,style:s,styles:h,vars:d,...c}=Pt("ComboboxFooter",IV,e),b=na();return Q.jsx(Nt,{ref:t,...b.getStyles("footer",{className:n,classNames:r,style:s,styles:h}),...c})});dS.classes=eo;dS.displayName="@mantine/core/ComboboxFooter";const MV={},fS=Qt((e,t)=>{const{classNames:r,className:n,style:s,styles:h,vars:d,children:c,label:b,...E}=Pt("ComboboxGroup",MV,e),I=na();return Q.jsxs(Nt,{ref:t,...I.getStyles("group",{className:n,classNames:r,style:s,styles:h}),...E,children:[b&&Q.jsx("div",{...I.getStyles("groupLabel",{classNames:r,styles:h}),children:b}),c]})});fS.classes=eo;fS.displayName="@mantine/core/ComboboxGroup";const RV={},pS=Qt((e,t)=>{const{classNames:r,className:n,style:s,styles:h,vars:d,...c}=Pt("ComboboxHeader",RV,e),b=na();return Q.jsx(Nt,{ref:t,...b.getStyles("header",{className:n,classNames:r,style:s,styles:h}),...c})});pS.classes=eo;pS.displayName="@mantine/core/ComboboxHeader";function W5({value:e,valuesDivider:t=",",...r}){return Q.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...r})}W5.displayName="@mantine/core/ComboboxHiddenInput";const kV={},mS=Qt((e,t)=>{const r=Pt("ComboboxOption",kV,e),{classNames:n,className:s,style:h,styles:d,vars:c,onClick:b,id:E,active:I,onMouseDown:P,onMouseOver:T,disabled:O,selected:j,mod:V,...re}=r,W=na(),Z=$.useId(),K=E||Z;return Q.jsx(Nt,{...W.getStyles("option",{className:s,classNames:n,styles:d,style:h}),...re,ref:t,id:K,mod:["combobox-option",{"combobox-active":I,"combobox-disabled":O,"combobox-selected":j},V],role:"option",onClick:ie=>{var de;O?ie.preventDefault():((de=W.onOptionSubmit)==null||de.call(W,r.value,r),b==null||b(ie))},onMouseDown:ie=>{ie.preventDefault(),P==null||P(ie)},onMouseOver:ie=>{W.resetSelectionOnOptionHover&&W.store.resetSelectedOption(),T==null||T(ie)}})});mS.classes=eo;mS.displayName="@mantine/core/ComboboxOption";const LV={},gS=Qt((e,t)=>{const r=Pt("ComboboxOptions",LV,e),{classNames:n,className:s,style:h,styles:d,id:c,onMouseDown:b,labelledBy:E,...I}=r,P=na(),T=wd(c);return $.useEffect(()=>{P.store.setListId(T)},[T]),Q.jsx(Nt,{ref:t,...P.getStyles("options",{className:s,style:h,classNames:n,styles:d}),...I,id:T,role:"listbox","aria-labelledby":E,onMouseDown:O=>{O.preventDefault(),b==null||b(O)}})});gS.classes=eo;gS.displayName="@mantine/core/ComboboxOptions";const DV={withAriaAttributes:!0,withKeyboardNavigation:!0},yS=Qt((e,t)=>{const r=Pt("ComboboxSearch",DV,e),{classNames:n,styles:s,unstyled:h,vars:d,withAriaAttributes:c,onKeyDown:b,withKeyboardNavigation:E,size:I,...P}=r,T=na(),O=T.getStyles("search"),j=hS({targetType:"input",withAriaAttributes:c,withKeyboardNavigation:E,withExpandedAttribute:!1,onKeyDown:b,autoComplete:"off"});return Q.jsx(Qo,{ref:Ti(t,T.store.searchRef),classNames:[{input:O.className},n],styles:[{input:O.style},s],size:I||T.size,...j,...P,__staticSelector:"Combobox"})});yS.classes=eo;yS.displayName="@mantine/core/ComboboxSearch";const OV={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},G5=Qt((e,t)=>{const{children:r,refProp:n,withKeyboardNavigation:s,withAriaAttributes:h,withExpandedAttribute:d,targetType:c,autoComplete:b,...E}=Pt("ComboboxTarget",OV,e);if(!Kl(r))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const I=na(),P=hS({targetType:c,withAriaAttributes:h,withKeyboardNavigation:s,withExpandedAttribute:d,onKeyDown:r.props.onKeyDown,autoComplete:b}),T=$.cloneElement(r,{...P,...E});return Q.jsx(ka.Target,{ref:Ti(t,I.store.targetRef),children:T})});G5.displayName="@mantine/core/ComboboxTarget";function zV(e,t,r){for(let n=e-1;n>=0;n-=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n;if(r){for(let n=t.length-1;n>-1;n-=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n}return e}function FV(e,t,r){for(let n=e+1;n<t.length;n+=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n;if(r){for(let n=0;n<t.length;n+=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n}return e}function BV(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function q5({defaultOpened:e,opened:t,onOpenedChange:r,onDropdownClose:n,onDropdownOpen:s,loop:h=!0,scrollBehavior:d="instant"}={}){const[c,b]=_m({value:t,defaultValue:e,finalValue:!1,onChange:r}),E=$.useRef(null),I=$.useRef(-1),P=$.useRef(null),T=$.useRef(null),O=$.useRef(-1),j=$.useRef(-1),V=$.useRef(-1),re=$.useCallback((Ve="unknown")=>{c||(b(!0),s==null||s(Ve))},[b,s,c]),W=$.useCallback((Ve="unknown")=>{c&&(b(!1),n==null||n(Ve))},[b,n,c]),Z=$.useCallback((Ve="unknown")=>{c?W(Ve):re(Ve)},[W,re,c]),K=$.useCallback(()=>{const Ve=document.querySelector(`#${E.current} [data-combobox-selected]`);Ve==null||Ve.removeAttribute("data-combobox-selected"),Ve==null||Ve.removeAttribute("aria-selected")},[]),ie=$.useCallback(Ve=>{const He=document.getElementById(E.current),Se=He==null?void 0:He.querySelectorAll("[data-combobox-option]");if(!Se)return null;const Be=Ve>=Se.length?0:Ve<0?Se.length-1:Ve;return I.current=Be,Se!=null&&Se[Be]&&!Se[Be].hasAttribute("data-combobox-disabled")?(K(),Se[Be].setAttribute("data-combobox-selected","true"),Se[Be].setAttribute("aria-selected","true"),Se[Be].scrollIntoView({block:"nearest",behavior:d}),Se[Be].id):null},[d,K]),de=$.useCallback(()=>{const Ve=document.querySelector(`#${E.current} [data-combobox-active]`);if(Ve){const He=document.querySelectorAll(`#${E.current} [data-combobox-option]`),Se=Array.from(He).findIndex(Be=>Be===Ve);return ie(Se)}return ie(0)},[ie]),ae=$.useCallback(()=>ie(FV(I.current,document.querySelectorAll(`#${E.current} [data-combobox-option]`),h)),[ie,h]),J=$.useCallback(()=>ie(zV(I.current,document.querySelectorAll(`#${E.current} [data-combobox-option]`),h)),[ie,h]),we=$.useCallback(()=>ie(BV(document.querySelectorAll(`#${E.current} [data-combobox-option]`))),[ie]),Re=$.useCallback((Ve="selected",He)=>{V.current=window.setTimeout(()=>{var tt;const Se=document.querySelectorAll(`#${E.current} [data-combobox-option]`),Be=Array.from(Se).findIndex(ot=>ot.hasAttribute(`data-combobox-${Ve}`));I.current=Be,He!=null&&He.scrollIntoView&&((tt=Se[Be])==null||tt.scrollIntoView({block:"nearest",behavior:d}))},0)},[]),De=$.useCallback(()=>{I.current=-1,K()},[K]),Oe=$.useCallback(()=>{const Ve=document.querySelectorAll(`#${E.current} [data-combobox-option]`),He=Ve==null?void 0:Ve[I.current];He==null||He.click()},[]),Qe=$.useCallback(Ve=>{E.current=Ve},[]),qe=$.useCallback(()=>{O.current=window.setTimeout(()=>P.current.focus(),0)},[]),Ze=$.useCallback(()=>{j.current=window.setTimeout(()=>T.current.focus(),0)},[]),Fe=$.useCallback(()=>I.current,[]);return $.useEffect(()=>()=>{window.clearTimeout(O.current),window.clearTimeout(j.current),window.clearTimeout(V.current)},[]),{dropdownOpened:c,openDropdown:re,closeDropdown:W,toggleDropdown:Z,selectedOptionIndex:I.current,getSelectedOptionIndex:Fe,selectOption:ie,selectFirstOption:we,selectActiveOption:de,selectNextOption:ae,selectPreviousOption:J,resetSelectedOption:De,updateSelectedOptionIndex:Re,listId:E.current,setListId:Qe,clickSelectedOption:Oe,searchRef:P,focusSearchInput:qe,targetRef:T,focusTarget:Ze}}const NV={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},jV=(e,{size:t,dropdownPadding:r})=>({options:{"--combobox-option-fz":Ea(t),"--combobox-option-padding":Bn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":r===void 0?void 0:We(r),"--combobox-option-fz":Ea(t),"--combobox-option-padding":Bn(t,"combobox-option-padding")}});function Wr(e){const t=Pt("Combobox",NV,e),{classNames:r,styles:n,unstyled:s,children:h,store:d,vars:c,onOptionSubmit:b,onClose:E,size:I,dropdownPadding:P,resetSelectionOnOptionHover:T,__staticSelector:O,readOnly:j,...V}=t,re=q5(),W=d||re,Z=Or({name:O||"Combobox",classes:eo,props:t,classNames:r,styles:n,unstyled:s,vars:c,varsResolver:jV}),K=()=>{E==null||E(),W.closeDropdown()};return Q.jsx(EV,{value:{getStyles:Z,store:W,onOptionSubmit:b,size:I,resetSelectionOnOptionHover:T,readOnly:j},children:Q.jsx(ka,{opened:W.dropdownOpened,...V,onClose:K,withRoles:!1,unstyled:s,children:h})})}const $V=e=>e;Wr.extend=$V;Wr.classes=eo;Wr.displayName="@mantine/core/Combobox";Wr.Target=G5;Wr.Dropdown=cS;Wr.Options=gS;Wr.Option=mS;Wr.Search=yS;Wr.Empty=uS;Wr.Chevron=v1;Wr.Footer=dS;Wr.Header=pS;Wr.EventsTarget=H5;Wr.DropdownTarget=Z5;Wr.Group=fS;Wr.ClearButton=U5;Wr.HiddenInput=W5;function VV({size:e,style:t,...r}){const n=e!==void 0?{width:We(e),height:We(e),...t}:t;return Q.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n,"aria-hidden":!0,...r,children:Q.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Jp(e){return"group"in e}function K5({options:e,search:t,limit:r}){const n=t.trim().toLowerCase(),s=[];for(let h=0;h<e.length;h+=1){const d=e[h];if(s.length===r)return s;Jp(d)&&s.push({group:d.group,items:K5({options:d.items,search:t,limit:r-s.length})}),Jp(d)||d.label.toLowerCase().includes(n)&&s.push(d)}return s}function UV(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function X5(e,t=new Set){if(Array.isArray(e))for(const r of e)if(Jp(r))X5(r.items,t);else{if(typeof r.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof r.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof r.value}`);if(t.has(r.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${r.value}" was provided more than once`);t.add(r.value)}}function ZV(e,t){return Array.isArray(e)?e.includes(t):e===t}function Y5({data:e,withCheckIcon:t,value:r,checkIconPosition:n,unstyled:s,renderOption:h}){if(!Jp(e)){const c=ZV(r,e.value),b=t&&c&&Q.jsx(VV,{className:eo.optionsDropdownCheckIcon}),E=Q.jsxs(Q.Fragment,{children:[n==="left"&&b,Q.jsx("span",{children:e.label}),n==="right"&&b]});return Q.jsx(Wr.Option,{value:e.value,disabled:e.disabled,className:Pi({[eo.optionsDropdownOption]:!s}),"data-reverse":n==="right"||void 0,"data-checked":c||void 0,"aria-selected":c,active:c,children:typeof h=="function"?h({option:e,checked:c}):E})}const d=e.items.map(c=>Q.jsx(Y5,{data:c,value:r,unstyled:s,withCheckIcon:t,checkIconPosition:n,renderOption:h},c.value));return Q.jsx(Wr.Group,{label:e.group,children:d})}function HV({data:e,hidden:t,hiddenWhenEmpty:r,filter:n,search:s,limit:h,maxDropdownHeight:d,withScrollArea:c=!0,filterOptions:b=!0,withCheckIcon:E=!1,value:I,checkIconPosition:P,nothingFoundMessage:T,unstyled:O,labelId:j,renderOption:V,scrollAreaProps:re,"aria-label":W}){X5(e);const K=typeof s=="string"?(n||K5)({options:e,search:b?s:"",limit:h??1/0}):e,ie=UV(K),de=K.map(ae=>Q.jsx(Y5,{data:ae,withCheckIcon:E,value:I,checkIconPosition:P,unstyled:O,renderOption:V},Jp(ae)?ae.group:ae.value));return Q.jsx(Wr.Dropdown,{hidden:t||r&&ie,children:Q.jsxs(Wr.Options,{labelledBy:j,"aria-label":W,children:[c?Q.jsx(xm.Autosize,{mah:d??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...re,children:de}):de,ie&&T&&Q.jsx(Wr.Empty,{children:T})]})})}const WV={},vS=Qt((e,t)=>{const r=Pt("Autocomplete",WV,e),{classNames:n,styles:s,unstyled:h,vars:d,dropdownOpened:c,defaultDropdownOpened:b,onDropdownClose:E,onDropdownOpen:I,onFocus:P,onBlur:T,onClick:O,onChange:j,data:V,value:re,defaultValue:W,selectFirstOptionOnChange:Z,onOptionSubmit:K,comboboxProps:ie,readOnly:de,disabled:ae,filter:J,limit:we,withScrollArea:Re,maxDropdownHeight:De,size:Oe,id:Qe,renderOption:qe,autoComplete:Ze,scrollAreaProps:Fe,...Ve}=r,He=wd(Qe),Se=$5(V),Be=V5(Se),[tt,ot]=_m({value:re,defaultValue:W,finalValue:"",onChange:j}),St=q5({opened:c,defaultOpened:b,onDropdownOpen:I,onDropdownClose:()=>{E==null||E(),St.resetSelectedOption()}}),{resolvedClassNames:qt,resolvedStyles:Tt}=$I({props:r,styles:s,classNames:n});return $.useEffect(()=>{Z&&St.selectFirstOption()},[Z,tt]),Q.jsxs(Wr,{store:St,__staticSelector:"Autocomplete",classNames:qt,styles:Tt,unstyled:h,readOnly:de,onOptionSubmit:kt=>{K==null||K(kt),ot(Be[kt].label),St.closeDropdown()},size:Oe,...ie,children:[Q.jsx(Wr.Target,{autoComplete:Ze,children:Q.jsx(Cd,{ref:t,...Ve,size:Oe,__staticSelector:"Autocomplete",disabled:ae,readOnly:de,value:tt,onChange:kt=>{ot(kt.currentTarget.value),St.openDropdown(),Z&&St.selectFirstOption()},onFocus:kt=>{St.openDropdown(),P==null||P(kt)},onBlur:kt=>{St.closeDropdown(),T==null||T(kt)},onClick:kt=>{St.openDropdown(),O==null||O(kt)},classNames:qt,styles:Tt,unstyled:h,id:He})}),Q.jsx(HV,{data:Se,hidden:de||ae,filter:J,search:tt,limit:we,hiddenWhenEmpty:!0,withScrollArea:Re,maxDropdownHeight:De,unstyled:h,labelId:Ve.label?`${He}-label`:void 0,"aria-label":Ve.label?void 0:Ve["aria-label"],renderOption:qe,scrollAreaProps:Fe})]})});vS.classes={...Cd.classes,...Wr.classes};vS.displayName="@mantine/core/Autocomplete";var J5={root:"m_ddec01c0",icon:"m_dde7bd57",cite:"m_dde51a35"};const GV={iconSize:48},qV=(e,{color:t,iconSize:r,radius:n})=>{const s=$l({color:t||e.primaryColor,theme:e,colorScheme:"dark"}),h=$l({color:t||e.primaryColor,theme:e,colorScheme:"light"});return{root:{"--bq-bg-light":jo(h.value,.07),"--bq-bg-dark":jo(s.value,.06),"--bq-bd":Yc(t,e),"--bq-icon-size":We(r),"--bq-radius":ea(n)}}},_S=Qt((e,t)=>{const r=Pt("Blockquote",GV,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,children:E,icon:I,iconSize:P,cite:T,...O}=r,j=Or({name:"Blockquote",classes:J5,props:r,className:s,style:h,classNames:n,styles:d,unstyled:c,vars:b,varsResolver:qV});return Q.jsxs(Nt,{component:"blockquote",ref:t,...j("root"),...O,children:[I&&Q.jsx("span",{...j("icon"),children:I}),E,T&&Q.jsx("cite",{...j("cite"),children:T})]})});_S.classes=J5;_S.displayName="@mantine/core/Blockquote";var _1={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const C3={orientation:"horizontal"},KV=(e,{borderWidth:t})=>({group:{"--button-border-width":We(t)}}),xS=Qt((e,t)=>{const r=Pt("ButtonGroup",C3,e),{className:n,style:s,classNames:h,styles:d,unstyled:c,orientation:b,vars:E,borderWidth:I,variant:P,mod:T,...O}=Pt("ButtonGroup",C3,e),j=Or({name:"ButtonGroup",props:r,classes:_1,className:n,style:s,classNames:h,styles:d,unstyled:c,vars:E,varsResolver:KV,rootSelector:"group"});return Q.jsx(Nt,{...j("group"),ref:t,variant:P,mod:[{"data-orientation":b},T],role:"group",...O})});xS.classes=_1;xS.displayName="@mantine/core/ButtonGroup";const XV={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${We(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},YV={},JV=(e,{radius:t,color:r,gradient:n,variant:s,size:h,justify:d,autoContrast:c})=>{const b=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:n,variant:s||"filled",autoContrast:c});return{root:{"--button-justify":d,"--button-height":Bn(h,"button-height"),"--button-padding-x":Bn(h,"button-padding-x"),"--button-fz":h!=null&&h.includes("compact")?Ea(h.replace("compact-","")):Ea(h),"--button-radius":t===void 0?void 0:ea(t),"--button-bg":r||s?b.background:void 0,"--button-hover":r||s?b.hover:void 0,"--button-color":b.color,"--button-bd":r||s?b.border:void 0,"--button-hover-color":r||s?b.hoverColor:void 0}}},Am=Jl((e,t)=>{const r=Pt("Button",YV,e),{style:n,vars:s,className:h,color:d,disabled:c,children:b,leftSection:E,rightSection:I,fullWidth:P,variant:T,radius:O,loading:j,loaderProps:V,gradient:re,classNames:W,styles:Z,unstyled:K,"data-disabled":ie,autoContrast:de,mod:ae,...J}=r,we=Or({name:"Button",props:r,classes:_1,className:h,style:n,classNames:W,styles:Z,unstyled:K,vars:s,varsResolver:JV}),Re=!!E,De=!!I;return Q.jsxs(bm,{ref:t,...we("root",{active:!c&&!j&&!ie}),unstyled:K,variant:T,disabled:c||j,mod:[{disabled:c||ie,loading:j,block:P,"with-left-section":Re,"with-right-section":De},ae],...J,children:[Q.jsx(Ql,{mounted:!!j,transition:XV,duration:150,children:Oe=>Q.jsx(Nt,{component:"span",...we("loader",{style:Oe}),"aria-hidden":!0,children:Q.jsx(Ad,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...V})})}),Q.jsxs("span",{...we("inner"),children:[E&&Q.jsx(Nt,{component:"span",...we("section"),mod:{position:"left"},children:E}),Q.jsx(Nt,{component:"span",mod:{loading:j},...we("label"),children:b}),I&&Q.jsx(Nt,{component:"span",...we("section"),mod:{position:"right"},children:I})]})]})});Am.classes=_1;Am.displayName="@mantine/core/Button";Am.Group=xS;function QV({open:e,close:t,openDelay:r,closeDelay:n}){const s=$.useRef(-1),h=$.useRef(-1),d=()=>{window.clearTimeout(s.current),window.clearTimeout(h.current)},c=()=>{d(),r===0||r===void 0?e():s.current=window.setTimeout(e,r)},b=()=>{d(),n===0||n===void 0?t():h.current=window.setTimeout(t,n)};return $.useEffect(()=>d,[]),{openDropdown:c,closeDropdown:b}}function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},an.apply(this,arguments)}function Q5(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,h;for(h=0;h<n.length;h++)s=n[h],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}var eM={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const P3={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Yl("overlay")},eU=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),bS=Qt((e,t)=>{const r=Pt("LoadingOverlay",P3,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,transitionProps:E,loaderProps:I,overlayProps:P,visible:T,zIndex:O,...j}=r,V=Ra(),re=Or({name:"LoadingOverlay",classes:eM,props:r,className:s,style:h,classNames:n,styles:d,unstyled:c,vars:b,varsResolver:eU}),W={...P3.overlayProps,...P};return Q.jsx(Ql,{transition:"fade",...E,mounted:!!T,children:Z=>Q.jsxs(Nt,{...re("root",{style:Z}),ref:t,...j,children:[Q.jsx(Ad,{...re("loader"),unstyled:c,...I}),Q.jsx(Yp,{...W,...re("overlay"),darkHidden:!0,unstyled:c,color:(P==null?void 0:P.color)||V.white}),Q.jsx(Yp,{...W,...re("overlay"),lightHidden:!0,unstyled:c,color:(P==null?void 0:P.color)||V.colors.dark[5]})]})})});bS.classes=eM;bS.displayName="@mantine/core/LoadingOverlay";const[tU,Cm]=Xl("Menu component was not found in the tree");var Pd={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const rU={},wS=Qt((e,t)=>{const{classNames:r,className:n,style:s,styles:h,vars:d,...c}=Pt("MenuDivider",rU,e),b=Cm();return Q.jsx(Nt,{ref:t,...b.getStyles("divider",{className:n,style:s,styles:h,classNames:r}),...c})});wS.classes=Pd;wS.displayName="@mantine/core/MenuDivider";const nU={},SS=Qt((e,t)=>{const{classNames:r,className:n,style:s,styles:h,vars:d,onMouseEnter:c,onMouseLeave:b,children:E,...I}=Pt("MenuDropdown",nU,e),P=$.useRef(null),T=Cm(),O=re=>{var W,Z;(re.key==="ArrowUp"||re.key==="ArrowDown")&&(re.preventDefault(),(Z=(W=P.current)==null?void 0:W.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||Z.focus())},j=Ms(c,()=>(T.trigger==="hover"||T.trigger==="click-hover")&&T.openDropdown()),V=Ms(b,()=>(T.trigger==="hover"||T.trigger==="click-hover")&&T.closeDropdown());return Q.jsxs(ka.Dropdown,{...I,onMouseEnter:j,onMouseLeave:V,role:"menu","aria-orientation":"vertical",ref:Ti(t,P),...T.getStyles("dropdown",{className:n,style:s,styles:h,classNames:r,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:O,children:[Q.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),E]})});SS.classes=Pd;SS.displayName="@mantine/core/MenuDropdown";const iU={},ES=Jl((e,t)=>{const{classNames:r,className:n,style:s,styles:h,vars:d,color:c,closeMenuOnClick:b,leftSection:E,rightSection:I,children:P,disabled:T,...O}=Pt("MenuItem",iU,e),j=Cm(),V=Ra(),{dir:re}=Sd(),W=$.useRef(),Z=j.getItemIndex(W.current),K=O,ie=Ms(K.onMouseLeave,()=>j.setHovered(-1)),de=Ms(K.onMouseEnter,()=>j.setHovered(j.getItemIndex(W.current))),ae=Ms(K.onClick,()=>{typeof b=="boolean"?b&&j.closeDropdownImmediately():j.closeOnItemClick&&j.closeDropdownImmediately()}),J=Ms(K.onFocus,()=>j.setHovered(j.getItemIndex(W.current))),we=c?V.variantColorResolver({color:c,theme:V,variant:"light"}):void 0,Re=c?$l({color:c,theme:V}):null;return Q.jsxs(bm,{...O,unstyled:j.unstyled,tabIndex:j.menuItemTabIndex,onFocus:J,...j.getStyles("item",{className:n,style:s,styles:h,classNames:r}),ref:Ti(W,t),role:"menuitem",disabled:T,"data-menu-item":!0,"data-disabled":T||void 0,"data-hovered":j.hovered===Z?!0:void 0,onMouseEnter:de,onMouseLeave:ie,onClick:ae,onKeyDown:wN({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:j.loop,dir:re,orientation:"vertical",onKeyDown:K.onKeydown}),__vars:{"--menu-item-color":Re!=null&&Re.isThemeColor&&(Re==null?void 0:Re.shade)===void 0?`var(--mantine-color-${Re.color}-6)`:we==null?void 0:we.color,"--menu-item-hover":we==null?void 0:we.hover},children:[E&&Q.jsx("div",{...j.getStyles("itemSection",{styles:h,classNames:r}),"data-position":"left",children:E}),P&&Q.jsx("div",{...j.getStyles("itemLabel",{styles:h,classNames:r}),children:P}),I&&Q.jsx("div",{...j.getStyles("itemSection",{styles:h,classNames:r}),"data-position":"right",children:I})]})});ES.classes=Pd;ES.displayName="@mantine/core/MenuItem";const oU={},AS=Qt((e,t)=>{const{classNames:r,className:n,style:s,styles:h,vars:d,...c}=Pt("MenuLabel",oU,e),b=Cm();return Q.jsx(Nt,{ref:t,...b.getStyles("label",{className:n,style:s,styles:h,classNames:r}),...c})});AS.classes=Pd;AS.displayName="@mantine/core/MenuLabel";const aU={refProp:"ref"},tM=$.forwardRef((e,t)=>{const{children:r,refProp:n,...s}=Pt("MenuTarget",aU,e);if(!Kl(r))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const h=Cm(),d=Ms(r.props.onClick,()=>{h.trigger==="click"?h.toggleDropdown():h.trigger==="click-hover"&&(h.setOpenedViaClick(!0),h.opened||h.openDropdown())}),c=Ms(r.props.onMouseEnter,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),b=Ms(r.props.onMouseLeave,()=>{(h.trigger==="hover"||h.trigger==="click-hover"&&!h.openedViaClick)&&h.closeDropdown()});return Q.jsx(ka.Target,{refProp:n,popupType:"menu",ref:t,...s,children:$.cloneElement(r,{onClick:d,onMouseEnter:c,onMouseLeave:b,"data-expanded":h.opened?!0:void 0})})});tM.displayName="@mantine/core/MenuTarget";const sU={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function _o(e){const t=Pt("Menu",sU,e),{children:r,onOpen:n,onClose:s,opened:h,defaultOpened:d,trapFocus:c,onChange:b,closeOnItemClick:E,loop:I,closeOnEscape:P,trigger:T,openDelay:O,closeDelay:j,classNames:V,styles:re,unstyled:W,variant:Z,vars:K,menuItemTabIndex:ie,keepMounted:de,...ae}=t,J=Or({name:"Menu",classes:Pd,props:t,classNames:V,styles:re,unstyled:W}),[we,{setHovered:Re,resetHovered:De}]=TN(),[Oe,Qe]=_m({value:h,defaultValue:d,finalValue:!1,onChange:b}),[qe,Ze]=$.useState(!1),Fe=()=>{Qe(!1),Ze(!1),Oe&&(s==null||s())},Ve=()=>{Qe(!0),!Oe&&(n==null||n())},He=()=>{Oe?Fe():Ve()},{openDropdown:Se,closeDropdown:Be}=QV({open:Ve,close:Fe,closeDelay:j,openDelay:O}),tt=qt=>PN("[data-menu-item]","[data-menu-dropdown]",qt),{resolvedClassNames:ot,resolvedStyles:St}=$I({classNames:V,styles:re,props:t});return jl(()=>{De()},[Oe]),Q.jsx(tU,{value:{getStyles:J,opened:Oe,toggleDropdown:He,getItemIndex:tt,hovered:we,setHovered:Re,openedViaClick:qe,setOpenedViaClick:Ze,closeOnItemClick:E,closeDropdown:T==="click"?Fe:Be,openDropdown:T==="click"?Ve:Se,closeDropdownImmediately:Fe,loop:I,trigger:T,unstyled:W,menuItemTabIndex:ie},children:Q.jsx(ka,{...ae,opened:Oe,onChange:He,defaultOpened:d,trapFocus:de?!1:c,closeOnEscape:P,__staticSelector:"Menu",classNames:ot,styles:St,unstyled:W,variant:Z,keepMounted:de,children:r})})}_o.extend=e=>e;_o.classes=Pd;_o.displayName="@mantine/core/Menu";_o.Item=ES;_o.Label=AS;_o.Dropdown=SS;_o.Target=tM;_o.Divider=wS;const[lU,Td]=Xl("Modal component was not found in tree");var Hs={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const cU={},x1=Qt((e,t)=>{const r=Pt("ModalBody",cU,e),{classNames:n,className:s,style:h,styles:d,vars:c,...b}=r,E=Td();return Q.jsx(O5,{ref:t,...E.getStyles("body",{classNames:n,style:h,styles:d,className:s}),...b})});x1.classes=Hs;x1.displayName="@mantine/core/ModalBody";const uU={},b1=Qt((e,t)=>{const r=Pt("ModalCloseButton",uU,e),{classNames:n,className:s,style:h,styles:d,vars:c,...b}=r,E=Td();return Q.jsx(z5,{ref:t,...E.getStyles("close",{classNames:n,style:h,styles:d,className:s}),...b})});b1.classes=Hs;b1.displayName="@mantine/core/ModalCloseButton";const hU={},w1=Qt((e,t)=>{const r=Pt("ModalContent",hU,e),{classNames:n,className:s,style:h,styles:d,vars:c,children:b,...E}=r,I=Td(),P=I.scrollAreaComponent||cV;return Q.jsx(oV,{...I.getStyles("content",{className:s,style:h,styles:d,classNames:n}),innerProps:I.getStyles("inner",{className:s,style:h,styles:d,classNames:n}),"data-full-screen":I.fullScreen||void 0,"data-modal-content":!0,ref:t,...E,children:Q.jsx(P,{style:{maxHeight:I.fullScreen?"100dvh":`calc(100dvh - (${We(I.yOffset)} * 2))`},children:b})})});w1.classes=Hs;w1.displayName="@mantine/core/ModalContent";const dU={},S1=Qt((e,t)=>{const r=Pt("ModalHeader",dU,e),{classNames:n,className:s,style:h,styles:d,vars:c,...b}=r,E=Td();return Q.jsx(F5,{ref:t,...E.getStyles("header",{classNames:n,style:h,styles:d,className:s}),...b})});S1.classes=Hs;S1.displayName="@mantine/core/ModalHeader";const fU={},E1=Qt((e,t)=>{const r=Pt("ModalOverlay",fU,e),{classNames:n,className:s,style:h,styles:d,vars:c,...b}=r,E=Td();return Q.jsx(B5,{ref:t,...E.getStyles("overlay",{classNames:n,style:h,styles:d,className:s}),...b})});E1.classes=Hs;E1.displayName="@mantine/core/ModalOverlay";const pU={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Yl("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},mU=(e,{radius:t,size:r,yOffset:n,xOffset:s})=>({root:{"--modal-radius":t===void 0?void 0:ea(t),"--modal-size":Bn(r,"modal-size"),"--modal-y-offset":We(n),"--modal-x-offset":We(s)}}),A1=Qt((e,t)=>{const r=Pt("ModalRoot",pU,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,yOffset:E,scrollAreaComponent:I,radius:P,fullScreen:T,centered:O,xOffset:j,__staticSelector:V,...re}=r,W=Or({name:V,classes:Hs,props:r,className:s,style:h,classNames:n,styles:d,unstyled:c,vars:b,varsResolver:mU});return Q.jsx(lU,{value:{yOffset:E,scrollAreaComponent:I,getStyles:W,fullScreen:T},children:Q.jsx(nV,{ref:t,...W("root"),"data-full-screen":T||void 0,"data-centered":O||void 0,unstyled:c,...re})})});A1.classes=Hs;A1.displayName="@mantine/core/ModalRoot";const gU={},C1=Qt((e,t)=>{const r=Pt("ModalTitle",gU,e),{classNames:n,className:s,style:h,styles:d,vars:c,...b}=r,E=Td();return Q.jsx(N5,{ref:t,...E.getStyles("title",{classNames:n,style:h,styles:d,className:s}),...b})});C1.classes=Hs;C1.displayName="@mantine/core/ModalTitle";const yU={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Yl("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},is=Qt((e,t)=>{const{title:r,withOverlay:n,overlayProps:s,withCloseButton:h,closeButtonProps:d,children:c,radius:b,...E}=Pt("Modal",yU,e),I=!!r||h;return Q.jsxs(A1,{ref:t,radius:b,...E,children:[n&&Q.jsx(E1,{...s}),Q.jsxs(w1,{radius:b,children:[I&&Q.jsxs(S1,{children:[r&&Q.jsx(C1,{children:r}),h&&Q.jsx(b1,{...d})]}),Q.jsx(x1,{children:c})]})]})});is.classes=Hs;is.displayName="@mantine/core/Modal";is.Root=A1;is.Overlay=E1;is.Content=w1;is.Body=x1;is.Header=S1;is.Title=C1;is.CloseButton=b1;const[hQ,rM]=Dw(),[vU,_U]=Dw();var P1={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const xU={},bU=(e,{gap:t},{size:r})=>({group:{"--pg-gap":t!==void 0?Bn(t):Bn(r,"pg-gap")}}),CS=Qt((e,t)=>{const r=Pt("PillGroup",xU,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,size:E,disabled:I,...P}=r,T=rM(),O=(T==null?void 0:T.size)||E||void 0,j=Or({name:"PillGroup",classes:P1,props:r,className:s,style:h,classNames:n,styles:d,unstyled:c,vars:b,varsResolver:bU,stylesCtx:{size:O},rootSelector:"group"});return Q.jsx(vU,{value:{size:O,disabled:I},children:Q.jsx(Nt,{ref:t,size:O,...j("group"),...P})})});CS.classes=P1;CS.displayName="@mantine/core/PillGroup";const wU={variant:"default"},SU=(e,{radius:t},{size:r})=>({root:{"--pill-fz":Bn(r,"pill-fz"),"--pill-height":Bn(r,"pill-height"),"--pill-radius":t===void 0?void 0:ea(t)}}),T1=Qt((e,t)=>{const r=Pt("Pill",wU,e),{classNames:n,className:s,style:h,styles:d,unstyled:c,vars:b,variant:E,children:I,withRemoveButton:P,onRemove:T,removeButtonProps:O,radius:j,size:V,disabled:re,mod:W,...Z}=r,K=_U(),ie=rM(),de=V||(K==null?void 0:K.size)||void 0,ae=(ie==null?void 0:ie.variant)==="filled"?"contrast":E||"default",J=Or({name:"Pill",classes:P1,props:r,className:s,style:h,classNames:n,styles:d,unstyled:c,vars:b,varsResolver:SU,stylesCtx:{size:de}});return Q.jsxs(Nt,{component:"span",ref:t,variant:ae,size:de,...J("root",{variant:ae}),mod:[{"with-remove":P&&!re,disabled:re||(K==null?void 0:K.disabled)},W],...Z,children:[Q.jsx("span",{...J("label"),children:I}),P&&Q.jsx(Em,{variant:"transparent",radius:j,tabIndex:-1,"aria-hidden":!0,unstyled:c,...O,...J("remove",{className:O==null?void 0:O.className,style:O==null?void 0:O.style}),onMouseDown:we=>{var Re;we.preventDefault(),we.stopPropagation(),(Re=O==null?void 0:O.onMouseDown)==null||Re.call(O,we)},onClick:we=>{var Re;we.stopPropagation(),T==null||T(),(Re=O==null?void 0:O.onClick)==null||Re.call(O,we)}})]})});T1.classes=P1;T1.displayName="@mantine/core/Pill";T1.Group=CS;function EU(e){return"group"in e}function PS({data:e}){if(EU(e)){const s=e.items.map(h=>Q.jsx(PS,{data:h},h.value));return Q.jsx("optgroup",{label:e.group,children:s})}const{value:t,label:r,...n}=e;return Q.jsx("option",{value:e.value,...n,children:e.label},e.value)}PS.displayName="@mantine/core/NativeSelectOption";const AU={rightSectionPointerEvents:"none"},Cp=Qt((e,t)=>{const{data:r,children:n,size:s,error:h,rightSection:d,unstyled:c,...b}=Pt("NativeSelect",AU,e),E=$5(r).map((I,P)=>Q.jsx(PS,{data:I},P));return Q.jsx(Cd,{component:"select",ref:t,...b,__staticSelector:"NativeSelect",size:s,pointer:!0,error:h,unstyled:c,rightSection:d||Q.jsx(v1,{size:s,error:h,unstyled:c}),children:n||E})});Cp.classes=Cd.classes;Cp.displayName="@mantine/core/NativeSelect";const CU={duration:100,transition:"fade"};function PU(e,t){return{...CU,...t,...e}}function TU({offset:e,position:t}){const[r,n]=$.useState(!1),s=$.useRef(),{x:h,y:d,elements:c,refs:b,update:E,placement:I}=iS({placement:t,middleware:[eS({crossAxis:!0,padding:5,rootBoundary:"document"})]}),P=I.includes("right")?e:t.includes("left")?e*-1:0,T=I.includes("bottom")?e:t.includes("top")?e*-1:0,O=$.useCallback(({clientX:j,clientY:V})=>{b.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:j,y:V,left:j+P,top:V+T,right:j,bottom:V}}})},[c.reference]);return $.useEffect(()=>{if(b.floating.current){const j=s.current;j.addEventListener("mousemove",O);const V=ks(b.floating.current);return V.forEach(re=>{re.addEventListener("scroll",E)}),()=>{j.removeEventListener("mousemove",O),V.forEach(re=>{re.removeEventListener("scroll",E)})}}},[c.reference,b.floating.current,E,O,r]),{handleMouseMove:O,x:h,y:d,opened:r,setOpened:n,boundaryRef:s,floating:b.setFloating}}var I1={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const IU={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Yl("popover")},MU=(e,{radius:t,color:r})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ea(t),"--tooltip-bg":r?Yc(r,e):void 0,"--tooltip-color":r?"var(--mantine-color-white)":void 0}}),TS=Qt((e,t)=>{const r=Pt("TooltipFloating",IU,e),{children:n,refProp:s,withinPortal:h,style:d,className:c,classNames:b,styles:E,unstyled:I,radius:P,color:T,label:O,offset:j,position:V,multiline:re,zIndex:W,disabled:Z,variant:K,vars:ie,portalProps:de,...ae}=r,J=Ra(),we=Or({name:"TooltipFloating",props:r,classes:I1,className:c,style:d,classNames:b,styles:E,unstyled:I,rootSelector:"tooltip",vars:ie,varsResolver:MU}),{handleMouseMove:Re,x:De,y:Oe,opened:Qe,boundaryRef:qe,floating:Ze,setOpened:Fe}=TU({offset:j,position:V});if(!Kl(n))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Ve=Ti(qe,n.ref,t),He=Be=>{var tt,ot;(ot=(tt=n.props).onMouseEnter)==null||ot.call(tt,Be),Re(Be),Fe(!0)},Se=Be=>{var tt,ot;(ot=(tt=n.props).onMouseLeave)==null||ot.call(tt,Be),Fe(!1)};return Q.jsxs(Q.Fragment,{children:[Q.jsx(Sm,{...de,withinPortal:h,children:Q.jsx(Nt,{...ae,...we("tooltip",{style:{...UI(d,J),zIndex:W,display:!Z&&Qe?"block":"none",top:(Oe&&Math.round(Oe))??"",left:(De&&Math.round(De))??""}}),variant:K,ref:Ze,mod:{multiline:re},children:O})}),$.cloneElement(n,{...n.props,[s]:Ve,onMouseEnter:He,onMouseLeave:Se})]})});TS.classes=I1;TS.displayName="@mantine/core/TooltipFloating";const nM=$.createContext(!1),RU=nM.Provider,kU=()=>$.useContext(nM),LU={openDelay:0,closeDelay:0};function iM(e){const{openDelay:t,closeDelay:r,children:n}=Pt("TooltipGroup",LU,e);return Q.jsx(RU,{value:!0,children:Q.jsx(w$,{delay:{open:t,close:r},children:n})})}iM.displayName="@mantine/core/TooltipGroup";function DU(e){var ae,J,we;const[t,r]=$.useState(!1),s=typeof e.opened=="boolean"?e.opened:t,h=kU(),d=wd(),{delay:c,currentId:b,setCurrentId:E}=S5(),I=$.useCallback(Re=>{r(Re),Re&&E(d)},[E,d]),{x:P,y:T,context:O,refs:j,update:V,placement:re,middlewareData:{arrow:{x:W,y:Z}={}}}=iS({strategy:e.strategy,placement:e.position,open:s,onOpenChange:I,middleware:[d5(e.offset),eS({padding:8}),Vb(),_5({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[Ub()]:[]]}),{getReferenceProps:K,getFloatingProps:ie}=T$([b$(O,{enabled:(ae=e.events)==null?void 0:ae.hover,delay:h?c:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((J=e.events)!=null&&J.touch)}),P$(O,{enabled:(we=e.events)==null?void 0:we.focus,visibleOnly:!0}),M$(O,{role:"tooltip"}),C$(O,{enabled:typeof e.opened>"u"}),S$(O,{id:d})]);M5({opened:s,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:j,update:V}}),jl(()=>{var Re;(Re=e.onPositionChange)==null||Re.call(e,re)},[re]);const de=s&&b&&b!==d;return{x:P,y:T,arrowX:W,arrowY:Z,reference:j.setReference,floating:j.setFloating,getFloatingProps:ie,getReferenceProps:K,isGroupPhase:de,opened:s,placement:re}}const T3={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Yl("popover"),positionDependencies:[]},OU=(e,{radius:t,color:r})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ea(t),"--tooltip-bg":r?Yc(r,e):void 0,"--tooltip-color":r?"var(--mantine-color-white)":void 0}}),eu=Qt((e,t)=>{const r=Pt("Tooltip",T3,e),{children:n,position:s,refProp:h,label:d,openDelay:c,closeDelay:b,onPositionChange:E,opened:I,withinPortal:P,radius:T,color:O,classNames:j,styles:V,unstyled:re,style:W,className:Z,withArrow:K,arrowSize:ie,arrowOffset:de,arrowRadius:ae,arrowPosition:J,offset:we,transitionProps:Re,multiline:De,events:Oe,zIndex:Qe,disabled:qe,positionDependencies:Ze,onClick:Fe,onMouseEnter:Ve,onMouseLeave:He,inline:Se,variant:Be,keepMounted:tt,vars:ot,portalProps:St,mod:qt,floatingStrategy:Tt,...kt}=Pt("Tooltip",T3,r),{dir:Lt}=Sd(),Yt=$.useRef(null),or=DU({position:E5(Lt,s),closeDelay:b,openDelay:c,onPositionChange:E,opened:I,events:Oe,arrowRef:Yt,arrowOffset:de,offset:typeof we=="number"?we+(K?ie/2:0):we,positionDependencies:[...Ze,n],inline:Se,strategy:Tt}),zr=Or({name:"Tooltip",props:r,classes:I1,className:Z,style:W,classNames:j,styles:V,unstyled:re,rootSelector:"tooltip",vars:ot,varsResolver:OU});if(!Kl(n))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Fr=Ti(or.reference,n.ref,t),ti=PU(Re,{duration:100,transition:"fade"});return Q.jsxs(Q.Fragment,{children:[Q.jsx(Sm,{...St,withinPortal:P,children:Q.jsx(Ql,{...ti,keepMounted:tt,mounted:!qe&&!!or.opened,duration:or.isGroupPhase?10:ti.duration,children:ar=>Q.jsxs(Nt,{...kt,variant:Be,mod:[{multiline:De},qt],...or.getFloatingProps({ref:or.floating,className:zr("tooltip").className,style:{...zr("tooltip").style,...ar,zIndex:Qe,top:or.y??0,left:or.x??0}}),children:[d,Q.jsx(oS,{ref:Yt,arrowX:or.arrowX,arrowY:or.arrowY,visible:K,position:or.placement,arrowSize:ie,arrowOffset:de,arrowRadius:ae,arrowPosition:J,...zr("arrow")})]})})}),$.cloneElement(n,or.getReferenceProps({onClick:Fe,onMouseEnter:Ve,onMouseLeave:He,onMouseMove:r.onMouseMove,onPointerDown:r.onPointerDown,onPointerEnter:r.onPointerEnter,[h]:Fr,className:Pi(Z,n.props.className),...n.props}))]})});eu.classes=I1;eu.displayName="@mantine/core/Tooltip";eu.Floating=TS;eu.Group=iM;const[zU,M1]=Xl("SliderProvider was not found in tree"),oM=$.forwardRef(({size:e,disabled:t,variant:r,color:n,thumbSize:s,radius:h,...d},c)=>{const{getStyles:b}=M1();return Q.jsx(Nt,{tabIndex:-1,variant:r,size:e,ref:c,...b("root"),...d})});oM.displayName="@mantine/core/SliderRoot";const Zb=$.forwardRef(({max:e,min:t,value:r,position:n,label:s,dragging:h,onMouseDown:d,onKeyDownCapture:c,labelTransitionProps:b,labelAlwaysOn:E,thumbLabel:I,onFocus:P,onBlur:T,showLabelOnHover:O,isHovered:j,children:V=null,disabled:re},W)=>{const{getStyles:Z}=M1(),[K,ie]=$.useState(!1),de=E||h||K||O&&j;return Q.jsxs(Nt,{tabIndex:0,role:"slider","aria-label":I,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":r,ref:W,__vars:{"--slider-thumb-offset":`${n}%`},...Z("thumb",{focusable:!0}),mod:{dragging:h,disabled:re},onFocus:()=>{ie(!0),typeof P=="function"&&P()},onBlur:()=>{ie(!1),typeof T=="function"&&T()},onTouchStart:d,onMouseDown:d,onKeyDownCapture:c,onClick:ae=>ae.stopPropagation(),children:[V,Q.jsx(Ql,{mounted:s!=null&&!!de,transition:"fade",duration:0,...b,children:ae=>Q.jsx("div",{...Z("label",{style:ae}),children:s})})]})});Zb.displayName="@mantine/core/SliderThumb";function Hb({value:e,min:t,max:r}){const n=(e-t)/(r-t)*100;return Math.min(Math.max(n,0),100)}function FU({mark:e,offset:t,value:r,inverted:n=!1}){return n?typeof t=="number"&&e.value<=t||e.value>=r:typeof t=="number"?e.value>=t&&e.value<=r:e.value<=r}function aM({marks:e,min:t,max:r,disabled:n,value:s,offset:h,inverted:d}){const{getStyles:c}=M1();if(!e)return null;const b=e.map((E,I)=>$.createElement(Nt,{...c("markWrapper"),__vars:{"--mark-offset":`${Hb({value:E.value,min:t,max:r})}%`},key:I},Q.jsx(Nt,{...c("mark"),mod:{filled:FU({mark:E,value:s,offset:h,inverted:d}),disabled:n}}),E.label&&Q.jsx("div",{...c("markLabel"),children:E.label})));return Q.jsx("div",{children:b})}aM.displayName="@mantine/core/SliderMarks";function sM({filled:e,children:t,offset:r,disabled:n,marksOffset:s,inverted:h,containerProps:d,...c}){const{getStyles:b}=M1();return Q.jsx(Q.Fragment,{children:Q.jsx(Nt,{...b("trackContainer"),mod:{disabled:n},...d,children:Q.jsxs(Nt,{...b("track"),mod:{inverted:h,disabled:n},children:[Q.jsx(Nt,{mod:{inverted:h,disabled:n},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${r}% - var(--slider-size))`},...b("bar")}),t,Q.jsx(aM,{...c,offset:s,disabled:n,inverted:h})]})})})}sM.displayName="@mantine/core/SliderTrack";function I3({value:e,containerWidth:t,min:r,max:n,step:s,precision:h}){const c=(t?Math.min(Math.max(e,0),t)/t:e)*(n-r),b=(c!==0?Math.round(c/s)*s:0)+r,E=Math.max(b,r);return h!==void 0?Number(E.toFixed(h)):E}function gl(e,t){return parseFloat(e.toFixed(t))}function BU(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var lM={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};function NU(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const jU=(e,{size:t,color:r,thumbSize:n,radius:s})=>({root:{"--slider-size":Bn(t,"slider-size"),"--slider-color":r?Yc(r,e):void 0,"--slider-radius":s===void 0?void 0:ea(s),"--slider-thumb-size":n!==void 0?We(n):"calc(var(--slider-size) * 2)"}}),$U={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},IS=Qt((e,t)=>{const r=Pt("RangeSlider",$U,e),{classNames:n,styles:s,value:h,onChange:d,onChangeEnd:c,size:b,min:E,max:I,minRange:P,maxRange:T,step:O,precision:j,defaultValue:V,name:re,marks:W,label:Z,labelTransitionProps:K,labelAlwaysOn:ie,thumbFromLabel:de,thumbToLabel:ae,showLabelOnHover:J,thumbChildren:we,disabled:Re,unstyled:De,scale:Oe,inverted:Qe,className:qe,style:Ze,vars:Fe,hiddenInputProps:Ve,...He}=r,Se=Or({name:"Slider",props:r,classes:lM,classNames:n,className:qe,styles:s,style:Ze,vars:Fe,varsResolver:jU,unstyled:De}),{dir:Be}=Sd(),[tt,ot]=$.useState(-1),[St,qt]=$.useState(!1),[Tt,kt]=_m({value:h,defaultValue:V,finalValue:[E,I],onChange:d}),Lt=$.useRef(Tt),Yt=$.useRef([]),or=$.useRef(void 0),zr=[Hb({value:Tt[0],min:E,max:I}),Hb({value:Tt[1],min:E,max:I})],Fr=j??BU(O),ti=$t=>{kt($t),Lt.current=$t};$.useEffect(()=>{Array.isArray(h)&&(Lt.current=h)},Array.isArray(h)?[h[0],h[1]]:[null,null]);const ar=($t,Vt,Ii)=>{const ur=[...Lt.current];ur[Vt]=$t,Vt===0&&($t>ur[1]-(P-1e-9)&&(ur[1]=Math.min($t+P,I)),$t>(I-(P-1e-9)||E)&&(ur[Vt]=Lt.current[Vt]),ur[1]-$t>T&&(ur[1]=$t+T)),Vt===1&&($t<ur[0]+P&&(ur[0]=Math.max($t-P,E)),$t<ur[0]+P&&(ur[Vt]=Lt.current[Vt]),$t-ur[0]>T&&(ur[0]=$t-T)),ur[0]=gl(ur[0],Fr),ur[1]=gl(ur[1],Fr),ti(ur),Ii&&(c==null||c(Lt.current))},Jr=$t=>{if(!Re){const Vt=I3({value:$t,min:E,max:I,step:O,precision:Fr});ar(Vt,or.current,!1)}},{ref:Wt,active:ri}=ZN(({x:$t})=>Jr($t),{onScrubEnd:()=>c==null?void 0:c(Lt.current)},Be);function Le($t){or.current=$t}const Sn=$t=>{Wt.current.focus();const Vt=Wt.current.getBoundingClientRect(),Ii=NU($t.nativeEvent),ur=I3({value:Ii-Vt.left,max:I,min:E,step:O,containerWidth:Vt.width}),En=Math.abs(Tt[0]-ur)>Math.abs(Tt[1]-ur)?1:0,Ui=Be==="ltr"?En:En===1?0:1;or.current=Ui},Rn=()=>tt!==1&&tt!==0?(ot(0),0):tt,nr=$t=>{if(!Re)switch($t.key){case"ArrowUp":{$t.preventDefault();const Vt=Rn();Yt.current[Vt].focus(),ar(gl(Math.min(Math.max(Lt.current[Vt]+O,E),I),Fr),Vt,!0);break}case"ArrowRight":{$t.preventDefault();const Vt=Rn();Yt.current[Vt].focus(),ar(gl(Math.min(Math.max(Be==="rtl"?Lt.current[Vt]-O:Lt.current[Vt]+O,E),I),Fr),Vt,!0);break}case"ArrowDown":{$t.preventDefault();const Vt=Rn();Yt.current[Vt].focus(),ar(gl(Math.min(Math.max(Lt.current[Vt]-O,E),I),Fr),Vt,!0);break}case"ArrowLeft":{$t.preventDefault();const Vt=Rn();Yt.current[Vt].focus(),ar(gl(Math.min(Math.max(Be==="rtl"?Lt.current[Vt]+O:Lt.current[Vt]-O,E),I),Fr),Vt,!0);break}}},dr={max:I,min:E,size:b,labelTransitionProps:K,labelAlwaysOn:ie,onBlur:()=>ot(-1)},kn=Array.isArray(we);return Q.jsx(zU,{value:{getStyles:Se},children:Q.jsxs(oM,{...He,size:b,ref:t,disabled:Re,children:[Q.jsxs(sM,{offset:zr[0],marksOffset:Tt[0],filled:zr[1]-zr[0],marks:W,inverted:Qe,min:E,max:I,value:Tt[1],disabled:Re,containerProps:{ref:Wt,onMouseEnter:J?()=>qt(!0):void 0,onMouseLeave:J?()=>qt(!1):void 0,onTouchStartCapture:Sn,onTouchEndCapture:()=>{or.current=-1},onMouseDownCapture:Sn,onMouseUpCapture:()=>{or.current=-1},onKeyDownCapture:nr},children:[Q.jsx(Zb,{...dr,value:Oe(Tt[0]),position:zr[0],dragging:ri,label:typeof Z=="function"?Z(gl(Oe(Tt[0]),Fr)):Z,ref:$t=>{Yt.current[0]=$t},thumbLabel:de,onMouseDown:()=>Le(0),onFocus:()=>ot(0),showLabelOnHover:J,isHovered:St,disabled:Re,children:kn?we[0]:we}),Q.jsx(Zb,{...dr,thumbLabel:ae,value:Oe(Tt[1]),position:zr[1],dragging:ri,label:typeof Z=="function"?Z(gl(Oe(Tt[1]),Fr)):Z,ref:$t=>{Yt.current[1]=$t},onMouseDown:()=>Le(1),onFocus:()=>ot(1),showLabelOnHover:J,isHovered:St,disabled:Re,children:kn?we[1]:we})]}),Q.jsx("input",{type:"hidden",name:`${re}_from`,value:Tt[0],...Ve}),Q.jsx("input",{type:"hidden",name:`${re}_to`,value:Tt[1],...Ve})]})})});IS.classes=lM;IS.displayName="@mantine/core/RangeSlider";const VU=(e,t,r)=>{const n=Math.round((t-e)/r)+1;return Array.from({length:n},(s,h)=>e+r*h)},Qp=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace("/","-").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"");class ud{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let n=0;for(let s=0;s<this._n&&s<32;s++){const h=r[s],d=t+h,c=Math.abs(t)<Math.abs(h)?t-(d-h):h-(d-t);c&&(r[n++]=c),t=d}return r[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let r=this._n,n,s,h,d=0;if(r>0){for(d=t[--r];r>0&&(n=d,s=t[--r],d=n+s,h=s-(d-n),!h););r>0&&(h<0&&t[r-1]<0||h>0&&t[r-1]>0)&&(s=h*2,n=d+s,s==n-d&&(d=n))}return d}}var UU=Math.PI,ZU=UU*2,HU=Math.abs,MS=Math.sqrt;function ba(){}function Ey(e,t){e&&R3.hasOwnProperty(e.type)&&R3[e.type](e,t)}var M3={Feature:function(e,t){Ey(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,s=r.length;++n<s;)Ey(r[n].geometry,t)}},R3={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,s=r.length;++n<s;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){Wb(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,s=r.length;++n<s;)Wb(r[n],t,0)},Polygon:function(e,t){k3(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,s=r.length;++n<s;)k3(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,s=r.length;++n<s;)Ey(r[n],t)}};function Wb(e,t,r){var n=-1,s=e.length-r,h;for(t.lineStart();++n<s;)h=e[n],t.point(h[0],h[1],h[2]);t.lineEnd()}function k3(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)Wb(e[r],t,1);t.polygonEnd()}function tp(e,t){e&&M3.hasOwnProperty(e.type)?M3[e.type](e,t):Ey(e,t)}const WU=e=>e;var ix=new ud,Gb=new ud,cM,uM,qb,Kb,Cs={point:ba,lineStart:ba,lineEnd:ba,polygonStart:function(){Cs.lineStart=GU,Cs.lineEnd=KU},polygonEnd:function(){Cs.lineStart=Cs.lineEnd=Cs.point=ba,ix.add(HU(Gb)),Gb=new ud},result:function(){var e=ix/2;return ix=new ud,e}};function GU(){Cs.point=qU}function qU(e,t){Cs.point=hM,cM=qb=e,uM=Kb=t}function hM(e,t){Gb.add(Kb*e-qb*t),qb=e,Kb=t}function KU(){hM(cM,uM)}var hd=1/0,Ay=hd,em=-hd,Cy=em,L3={point:XU,lineStart:ba,lineEnd:ba,polygonStart:ba,polygonEnd:ba,result:function(){var e=[[hd,Ay],[em,Cy]];return em=Cy=-(Ay=hd=1/0),e}};function XU(e,t){e<hd&&(hd=e),e>em&&(em=e),t<Ay&&(Ay=t),t>Cy&&(Cy=t)}var Xb=0,Yb=0,lp=0,Py=0,Ty=0,zh=0,Jb=0,Qb=0,cp=0,dM,fM,qa,Ka,Zo={point:tu,lineStart:D3,lineEnd:O3,polygonStart:function(){Zo.lineStart=QU,Zo.lineEnd=eZ},polygonEnd:function(){Zo.point=tu,Zo.lineStart=D3,Zo.lineEnd=O3},result:function(){var e=cp?[Jb/cp,Qb/cp]:zh?[Py/zh,Ty/zh]:lp?[Xb/lp,Yb/lp]:[NaN,NaN];return Xb=Yb=lp=Py=Ty=zh=Jb=Qb=cp=0,e}};function tu(e,t){Xb+=e,Yb+=t,++lp}function D3(){Zo.point=YU}function YU(e,t){Zo.point=JU,tu(qa=e,Ka=t)}function JU(e,t){var r=e-qa,n=t-Ka,s=MS(r*r+n*n);Py+=s*(qa+e)/2,Ty+=s*(Ka+t)/2,zh+=s,tu(qa=e,Ka=t)}function O3(){Zo.point=tu}function QU(){Zo.point=tZ}function eZ(){pM(dM,fM)}function tZ(e,t){Zo.point=pM,tu(dM=qa=e,fM=Ka=t)}function pM(e,t){var r=e-qa,n=t-Ka,s=MS(r*r+n*n);Py+=s*(qa+e)/2,Ty+=s*(Ka+t)/2,zh+=s,s=Ka*e-qa*t,Jb+=s*(qa+e),Qb+=s*(Ka+t),cp+=s*3,tu(qa=e,Ka=t)}function mM(e){this._context=e}mM.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ZU);break}}},result:ba};var e2=new ud,ox,gM,yM,up,hp,tm={point:ba,lineStart:function(){tm.point=rZ},lineEnd:function(){ox&&vM(gM,yM),tm.point=ba},polygonStart:function(){ox=!0},polygonEnd:function(){ox=null},result:function(){var e=+e2;return e2=new ud,e}};function rZ(e,t){tm.point=vM,gM=up=e,yM=hp=t}function vM(e,t){up-=e,hp-=t,e2.add(MS(up*up+hp*hp)),up=e,hp=t}let z3,Iy,F3,B3;class N3{constructor(t){this._append=t==null?_M:nZ(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==F3||this._append!==Iy){const n=this._radius,s=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,F3=n,Iy=this._append,B3=this._,this._=s}this._+=B3;break}}}result(){const t=this._;return this._="",t.length?t:null}}function _M(e){let t=1;this._+=e[0];for(const r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function nZ(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return _M;if(t!==z3){const r=10**t;z3=t,Iy=function(s){let h=1;this._+=s[0];for(const d=s.length;h<d;++h)this._+=Math.round(arguments[h]*r)/r+s[h]}}return Iy}function iZ(e,t){let r=3,n=4.5,s,h;function d(c){return c&&(typeof n=="function"&&h.pointRadius(+n.apply(this,arguments)),tp(c,s(h))),h.result()}return d.area=function(c){return tp(c,s(Cs)),Cs.result()},d.measure=function(c){return tp(c,s(tm)),tm.result()},d.bounds=function(c){return tp(c,s(L3)),L3.result()},d.centroid=function(c){return tp(c,s(Zo)),Zo.result()},d.projection=function(c){return arguments.length?(s=c==null?(e=null,WU):(e=c).stream,d):e},d.context=function(c){return arguments.length?(h=c==null?(t=null,new N3(r)):new mM(t=c),typeof n!="function"&&h.pointRadius(n),d):t},d.pointRadius=function(c){return arguments.length?(n=typeof c=="function"?c:(h.pointRadius(+c),+c),d):n},d.digits=function(c){if(!arguments.length)return r;if(c==null)r=null;else{const b=Math.floor(c);if(!(b>=0))throw new RangeError(`invalid digits: ${c}`);r=b}return t===null&&(h=new N3(r)),d},d.projection(e).digits(r).context(t)}function dp(e,t,r){this.k=e,this.x=t,this.y=r}dp.prototype={constructor:dp,scale:function(e){return e===1?this:new dp(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new dp(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};dp.prototype;function xr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var oZ={};function RS(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:oZ}var xM=Object.assign,My=Object.getOwnPropertyDescriptor,ts=Object.defineProperty,R1=Object.prototype,t2=[];Object.freeze(t2);var bM={};Object.freeze(bM);var aZ=typeof Proxy<"u",sZ=Object.toString();function wM(){aZ||xr("Proxy not available")}function SM(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Fh=function(){};function Ma(e){return typeof e=="function"}function ru(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function k1(e){return e!==null&&typeof e=="object"}function $s(e){if(!k1(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r.toString()===sZ}function EM(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function Pm(e,t,r){ts(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function AM(e,t,r){ts(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function uu(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(n){return k1(n)&&n[r]===!0}}function Id(e){return e instanceof Map}function Tm(e){return e instanceof Set}var CM=typeof Object.getOwnPropertySymbols<"u";function lZ(e){var t=Object.keys(e);if(!CM)return t;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(t,r.filter(function(n){return R1.propertyIsEnumerable.call(e,n)})):t}var dd=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:CM?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function PM(e){return e===null?null:typeof e=="object"?""+e:e}function Ds(e,t){return R1.hasOwnProperty.call(e,t)}var cZ=Object.getOwnPropertyDescriptors||function(t){var r={};return dd(t).forEach(function(n){r[n]=My(t,n)}),r};function uZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fZ(n.key),n)}}function kS(e,t,r){return t&&uZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nu(){return nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nu.apply(this,arguments)}function TM(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r2(e,t)}function r2(e,t){return r2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},r2(e,t)}function ax(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hZ(e,t){if(e){if(typeof e=="string")return j3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j3(e,t)}}function j3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bh(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=hZ(e))||t){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dZ(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function fZ(e){var t=dZ(e,"string");return typeof t=="symbol"?t:String(t)}var Ya=Symbol("mobx-stored-annotations");function rs(e){function t(r,n){if(Im(n))return e.decorate_20223_(r,n);Md(r,n,e)}return Object.assign(t,e)}function Md(e,t,r){Ds(e,Ya)||Pm(e,Ya,nu({},e[Ya])),wZ(r)||(e[Ya][t]=r)}function pZ(e){return Ds(e,Ya)||Pm(e,Ya,nu({},e[Ya])),e[Ya]}function Im(e){return typeof e=="object"&&typeof e.kind=="string"}var Ht=Symbol("mobx administration"),Mm=function(){function e(r){r===void 0&&(r="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=wr.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=r}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.reportObserved=function(){return WM(this)},t.reportChanged=function(){qo(),GM(this),Ko()},t.toString=function(){return this.name_},e}(),LS=uu("Atom",Mm);function IM(e,t,r){t===void 0&&(t=Fh),r===void 0&&(r=Fh);var n=new Mm(e);return t!==Fh&&PH(n,t),r!==Fh&&JM(n,r),n}function mZ(e,t){return e===t}function gZ(e,t){return NS(e,t)}function yZ(e,t){return NS(e,t,1)}function vZ(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Ry={identity:mZ,structural:gZ,default:vZ,shallow:yZ};function iu(e,t,r){return nR(e)?e:Array.isArray(e)?Jn.array(e,{name:r}):$s(e)?Jn.object(e,void 0,{name:r}):Id(e)?Jn.map(e,{name:r}):Tm(e)?Jn.set(e,{name:r}):typeof e=="function"&&!N1(e)&&!im(e)?EM(e)?pd(e):nm(r,e):e}function _Z(e,t,r){if(e==null||$1(e)||j1(e)||du(e)||Rd(e))return e;if(Array.isArray(e))return Jn.array(e,{name:r,deep:!1});if($s(e))return Jn.object(e,void 0,{name:r,deep:!1});if(Id(e))return Jn.map(e,{name:r,deep:!1});if(Tm(e))return Jn.set(e,{name:r,deep:!1})}function L1(e){return e}function xZ(e,t){return NS(e,t)?t:e}var bZ="override";function wZ(e){return e.annotationType_===bZ}function Rm(e,t){return{annotationType_:e,options_:t,make_:SZ,extend_:EZ,decorate_20223_:AZ}}function SZ(e,t,r,n){var s;if((s=this.options_)!=null&&s.bound)return this.extend_(e,t,r,!1)===null?0:1;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if(N1(r.value))return 1;var h=MM(e,this,t,r,!1);return ts(n,t,h),2}function EZ(e,t,r,n){var s=MM(e,this,t,r);return e.defineProperty_(t,s,n)}function AZ(e,t){var r=t.kind,n=t.name,s=t.addInitializer,h=this,d=function(E){var I,P,T,O;return ou((I=(P=h.options_)==null?void 0:P.name)!=null?I:n.toString(),E,(T=(O=h.options_)==null?void 0:O.autoAction)!=null?T:!1)};if(r=="field"){s(function(){Md(this,n,h)});return}if(r=="method"){var c;return N1(e)||(e=d(e)),(c=this.options_)!=null&&c.bound&&s(function(){var b=this,E=b[n].bind(b);E.isMobxAction=!0,b[n]=E}),e}xr("Cannot apply '"+h.annotationType_+"' to '"+String(n)+"' (kind: "+r+"):"+(`
'`+h.annotationType_+"' can only be used on properties with a function value."))}function CZ(e,t,r,n){t.annotationType_,n.value}function MM(e,t,r,n,s){var h,d,c,b,E,I,P;s===void 0&&(s=gt.safeDescriptors),CZ(e,t,r,n);var T=n.value;if((h=t.options_)!=null&&h.bound){var O;T=T.bind((O=e.proxy_)!=null?O:e.target_)}return{value:ou((d=(c=t.options_)==null?void 0:c.name)!=null?d:r.toString(),T,(b=(E=t.options_)==null?void 0:E.autoAction)!=null?b:!1,(I=t.options_)!=null&&I.bound?(P=e.proxy_)!=null?P:e.target_:void 0),configurable:s?e.isPlainObject_:!0,enumerable:!1,writable:!s}}function RM(e,t){return{annotationType_:e,options_:t,make_:PZ,extend_:TZ,decorate_20223_:IZ}}function PZ(e,t,r,n){var s;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if((s=this.options_)!=null&&s.bound&&(!Ds(e.target_,t)||!im(e.target_[t]))&&this.extend_(e,t,r,!1)===null)return 0;if(im(r.value))return 1;var h=kM(e,this,t,r,!1,!1);return ts(n,t,h),2}function TZ(e,t,r,n){var s,h=kM(e,this,t,r,(s=this.options_)==null?void 0:s.bound);return e.defineProperty_(t,h,n)}function IZ(e,t){var r,n=t.name,s=t.addInitializer;return im(e)||(e=pd(e)),(r=this.options_)!=null&&r.bound&&s(function(){var h=this,d=h[n].bind(h);d.isMobXFlow=!0,h[n]=d}),e}function MZ(e,t,r,n){t.annotationType_,n.value}function kM(e,t,r,n,s,h){h===void 0&&(h=gt.safeDescriptors),MZ(e,t,r,n);var d=n.value;if(im(d)||(d=pd(d)),s){var c;d=d.bind((c=e.proxy_)!=null?c:e.target_),d.isMobXFlow=!0}return{value:d,configurable:h?e.isPlainObject_:!0,enumerable:!1,writable:!h}}function DS(e,t){return{annotationType_:e,options_:t,make_:RZ,extend_:kZ,decorate_20223_:LZ}}function RZ(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function kZ(e,t,r,n){return DZ(e,this,t,r),e.defineComputedProperty_(t,nu({},this.options_,{get:r.get,set:r.set}),n)}function LZ(e,t){var r=this,n=t.name,s=t.addInitializer;return s(function(){var h=fu(this)[Ht],d=nu({},r.options_,{get:e,context:this});d.name||(d.name="ObservableObject."+n.toString()),h.values_.set(n,new fd(d))}),function(){return this[Ht].getObservablePropValue_(n)}}function DZ(e,t,r,n){t.annotationType_,n.get}function D1(e,t){return{annotationType_:e,options_:t,make_:OZ,extend_:zZ,decorate_20223_:FZ}}function OZ(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function zZ(e,t,r,n){var s,h;return BZ(e,this),e.defineObservableProperty_(t,r.value,(s=(h=this.options_)==null?void 0:h.enhancer)!=null?s:iu,n)}function FZ(e,t){var r=this,n=t.kind,s=t.name,h=new WeakSet;function d(c,b){var E,I,P=fu(c)[Ht],T=new Zc(b,(E=(I=r.options_)==null?void 0:I.enhancer)!=null?E:iu,"ObservableObject."+s.toString(),!1);P.values_.set(s,T),h.add(c)}if(n=="accessor")return{get:function(){return h.has(this)||d(this,e.get.call(this)),this[Ht].getObservablePropValue_(s)},set:function(b){return h.has(this)||d(this,b),this[Ht].setObservablePropValue_(s,b)},init:function(b){return h.has(this)||d(this,b),b}}}function BZ(e,t,r,n){t.annotationType_}var NZ="true",jZ=LM();function LM(e){return{annotationType_:NZ,options_:e,make_:$Z,extend_:VZ,decorate_20223_:UZ}}function $Z(e,t,r,n){var s,h;if(r.get)return O1.make_(e,t,r,n);if(r.set){var d=ou(t.toString(),r.set);return n===e.target_?e.defineProperty_(t,{configurable:gt.safeDescriptors?e.isPlainObject_:!0,set:d})===null?0:2:(ts(n,t,{configurable:!0,set:d}),2)}if(n!==e.target_&&typeof r.value=="function"){var c;if(EM(r.value)){var b,E=(b=this.options_)!=null&&b.autoBind?pd.bound:pd;return E.make_(e,t,r,n)}var I=(c=this.options_)!=null&&c.autoBind?nm.bound:nm;return I.make_(e,t,r,n)}var P=((s=this.options_)==null?void 0:s.deep)===!1?Jn.ref:Jn;if(typeof r.value=="function"&&(h=this.options_)!=null&&h.autoBind){var T;r.value=r.value.bind((T=e.proxy_)!=null?T:e.target_)}return P.make_(e,t,r,n)}function VZ(e,t,r,n){var s,h;if(r.get)return O1.extend_(e,t,r,n);if(r.set)return e.defineProperty_(t,{configurable:gt.safeDescriptors?e.isPlainObject_:!0,set:ou(t.toString(),r.set)},n);if(typeof r.value=="function"&&(s=this.options_)!=null&&s.autoBind){var d;r.value=r.value.bind((d=e.proxy_)!=null?d:e.target_)}var c=((h=this.options_)==null?void 0:h.deep)===!1?Jn.ref:Jn;return c.extend_(e,t,r,n)}function UZ(e,t){xr("'"+this.annotationType_+"' cannot be used as a decorator")}var ZZ="observable",HZ="observable.ref",WZ="observable.shallow",GZ="observable.struct",DM={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(DM);function mg(e){return e||DM}var n2=D1(ZZ),qZ=D1(HZ,{enhancer:L1}),KZ=D1(WZ,{enhancer:_Z}),XZ=D1(GZ,{enhancer:xZ}),OM=rs(n2);function gg(e){return e.deep===!0?iu:e.deep===!1?L1:JZ(e.defaultDecorator)}function YZ(e){var t;return e?(t=e.defaultDecorator)!=null?t:LM(e):void 0}function JZ(e){var t,r;return e&&(t=(r=e.options_)==null?void 0:r.enhancer)!=null?t:iu}function zM(e,t,r){if(Im(t))return n2.decorate_20223_(e,t);if(ru(t)){Md(e,t,n2);return}return nR(e)?e:$s(e)?Jn.object(e,t,r):Array.isArray(e)?Jn.array(e,t):Id(e)?Jn.map(e,t):Tm(e)?Jn.set(e,t):typeof e=="object"&&e!==null?e:Jn.box(e,t)}xM(zM,OM);var QZ={box:function(t,r){var n=mg(r);return new Zc(t,gg(n),n.name,!0,n.equals)},array:function(t,r){var n=mg(r);return(gt.useProxies===!1||n.proxy===!1?YH:$H)(t,gg(n),n.name)},map:function(t,r){var n=mg(r);return new sR(t,gg(n),n.name)},set:function(t,r){var n=mg(r);return new uR(t,gg(n),n.name)},object:function(t,r,n){return ec(function(){return eR(gt.useProxies===!1||(n==null?void 0:n.proxy)===!1?fu({},n):FH({},n),t,r)})},ref:rs(qZ),shallow:rs(KZ),deep:OM,struct:rs(XZ)},Jn=xM(zM,QZ),FM="computed",eH="computed.struct",i2=DS(FM),tH=DS(eH,{equals:Ry.structural}),O1=function(t,r){if(Im(r))return i2.decorate_20223_(t,r);if(ru(r))return Md(t,r,i2);if($s(t))return rs(DS(FM,t));var n=$s(r)?r:{};return n.get=t,n.name||(n.name=t.name||""),new fd(n)};Object.assign(O1,i2);O1.struct=rs(tH);var $3,V3,ky=0,rH=1,nH=($3=(V3=My(function(){},"name"))==null?void 0:V3.configurable)!=null?$3:!1,U3={value:"action",configurable:!0,writable:!1,enumerable:!1};function ou(e,t,r,n){r===void 0&&(r=!1);function s(){return iH(e,r,t,n||this,arguments)}return s.isMobxAction=!0,s.toString=function(){return t.toString()},nH&&(U3.value=e,ts(s,"name",U3)),s}function iH(e,t,r,n,s){var h=oH(e,t);try{return r.apply(n,s)}catch(d){throw h.error_=d,d}finally{aH(h)}}function oH(e,t,r,n){var s=!1,h=0,d=gt.trackingDerivation,c=!t||!d;qo();var b=gt.allowStateChanges;c&&(hu(),b=z1(!0));var E=OS(!0),I={runAsAction_:c,prevDerivation_:d,prevAllowStateChanges_:b,prevAllowStateReads_:E,notifySpy_:s,startTime_:h,actionId_:rH++,parentActionId_:ky};return ky=I.actionId_,I}function aH(e){ky!==e.actionId_&&xr(30),ky=e.parentActionId_,e.error_!==void 0&&(gt.suppressReactionErrors=!0),F1(e.prevAllowStateChanges_),Pp(e.prevAllowStateReads_),Ko(),e.runAsAction_&&Os(e.prevDerivation_),gt.suppressReactionErrors=!1}function sH(e,t){var r=z1(e);try{return t()}finally{F1(r)}}function z1(e){var t=gt.allowStateChanges;return gt.allowStateChanges=e,t}function F1(e){gt.allowStateChanges=e}var BM;BM=Symbol.toPrimitive;var Zc=function(e){TM(t,e);function t(n,s,h,d,c){var b;return h===void 0&&(h="ObservableValue"),c===void 0&&(c=Ry.default),b=e.call(this,h)||this,b.enhancer=void 0,b.name_=void 0,b.equals=void 0,b.hasUnreportedChange_=!1,b.interceptors_=void 0,b.changeListeners_=void 0,b.value_=void 0,b.dehancer=void 0,b.enhancer=s,b.name_=h,b.equals=c,b.value_=s(n,void 0,h),b}var r=t.prototype;return r.dehanceValue=function(s){return this.dehancer!==void 0?this.dehancer(s):s},r.set=function(s){this.value_,s=this.prepareNewValue_(s),s!==gt.UNCHANGED&&this.setNewValue_(s)},r.prepareNewValue_=function(s){if(Ho(this)){var h=Wo(this,{object:this,type:ns,newValue:s});if(!h)return gt.UNCHANGED;s=h.newValue}return s=this.enhancer(s,this.value_,this.name_),this.equals(this.value_,s)?gt.UNCHANGED:s},r.setNewValue_=function(s){var h=this.value_;this.value_=s,this.reportChanged(),Aa(this)&&Ca(this,{type:ns,object:this,newValue:s,oldValue:h})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(s){return km(this,s)},r.observe_=function(s,h){return h&&s({observableKind:"value",debugObjectName:this.name_,object:this,type:ns,newValue:this.value_,oldValue:void 0}),Lm(this,s)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return PM(this.get())},r[BM]=function(){return this.valueOf()},t}(Mm),NM;NM=Symbol.toPrimitive;var fd=function(){function e(r){this.dependenciesState_=wr.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=wr.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Dy(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Ly.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,r.get||xr(31),this.derivation=r.get,this.name_=r.name||"ComputedValue",r.set&&(this.setter_=ou("ComputedValue-setter",r.set)),this.equals_=r.equals||(r.compareStructural||r.struct?Ry.structural:Ry.default),this.scope_=r.context,this.requiresReaction_=r.requiresReaction,this.keepAlive_=!!r.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){dH(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.get=function(){if(this.isComputing_&&xr(32,this.name_,this.derivation),gt.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)o2(this)&&(this.warnAboutUntrackedRead_(),qo(),this.value_=this.computeValue_(!1),Ko());else if(WM(this),o2(this)){var n=gt.trackingContext;this.keepAlive_&&!n&&(gt.trackingContext=this),this.trackAndCompute()&&hH(this),gt.trackingContext=n}var s=this.value_;if($g(s))throw s.cause;return s},t.set=function(n){if(this.setter_){this.isRunningSetter_&&xr(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else xr(34,this.name_)},t.trackAndCompute=function(){var n=this.value_,s=this.dependenciesState_===wr.NOT_TRACKING_,h=this.computeValue_(!0),d=s||$g(n)||$g(h)||!this.equals_(n,h);return d&&(this.value_=h),d},t.computeValue_=function(n){this.isComputing_=!0;var s=z1(!1),h;if(n)h=jM(this,this.derivation,this.scope_);else if(gt.disableErrorBoundaries===!0)h=this.derivation.call(this.scope_);else try{h=this.derivation.call(this.scope_)}catch(d){h=new Dy(d)}return F1(s),this.isComputing_=!1,h},t.suspend_=function(){this.keepAlive_||(a2(this),this.value_=void 0)},t.observe_=function(n,s){var h=this,d=!0,c=void 0;return wH(function(){var b=h.get();if(!d||s){var E=hu();n({observableKind:"computed",debugObjectName:h.name_,type:ns,object:h,newValue:b,oldValue:c}),Os(E)}d=!1,c=b})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return PM(this.get())},t[NM]=function(){return this.valueOf()},e}(),B1=uu("ComputedValue",fd),wr;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(wr||(wr={}));var Ly;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(Ly||(Ly={}));var Dy=function(t){this.cause=void 0,this.cause=t};function $g(e){return e instanceof Dy}function o2(e){switch(e.dependenciesState_){case wr.UP_TO_DATE_:return!1;case wr.NOT_TRACKING_:case wr.STALE_:return!0;case wr.POSSIBLY_STALE_:{for(var t=OS(!0),r=hu(),n=e.observing_,s=n.length,h=0;h<s;h++){var d=n[h];if(B1(d)){if(gt.disableErrorBoundaries)d.get();else try{d.get()}catch{return Os(r),Pp(t),!0}if(e.dependenciesState_===wr.STALE_)return Os(r),Pp(t),!0}}return VM(e),Os(r),Pp(t),!1}}}function jM(e,t,r){var n=OS(!0);VM(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++gt.runId;var s=gt.trackingDerivation;gt.trackingDerivation=e,gt.inBatch++;var h;if(gt.disableErrorBoundaries===!0)h=t.call(r);else try{h=t.call(r)}catch(d){h=new Dy(d)}return gt.inBatch--,gt.trackingDerivation=s,lH(e),Pp(n),h}function lH(e){for(var t=e.observing_,r=e.observing_=e.newObserving_,n=wr.UP_TO_DATE_,s=0,h=e.unboundDepsCount_,d=0;d<h;d++){var c=r[d];c.diffValue_===0&&(c.diffValue_=1,s!==d&&(r[s]=c),s++),c.dependenciesState_>n&&(n=c.dependenciesState_)}for(r.length=s,e.newObserving_=null,h=t.length;h--;){var b=t[h];b.diffValue_===0&&ZM(b,e),b.diffValue_=0}for(;s--;){var E=r[s];E.diffValue_===1&&(E.diffValue_=0,uH(E,e))}n!==wr.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}function a2(e){var t=e.observing_;e.observing_=[];for(var r=t.length;r--;)ZM(t[r],e);e.dependenciesState_=wr.NOT_TRACKING_}function $M(e){var t=hu();try{return e()}finally{Os(t)}}function hu(){var e=gt.trackingDerivation;return gt.trackingDerivation=null,e}function Os(e){gt.trackingDerivation=e}function OS(e){var t=gt.allowStateReads;return gt.allowStateReads=e,t}function Pp(e){gt.allowStateReads=e}function VM(e){if(e.dependenciesState_!==wr.UP_TO_DATE_){e.dependenciesState_=wr.UP_TO_DATE_;for(var t=e.observing_,r=t.length;r--;)t[r].lowestObserverState_=wr.UP_TO_DATE_}}var Vg=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Ug=!0,UM=!1,gt=function(){var e=RS();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Ug=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new Vg().version&&(Ug=!1),Ug?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Vg):(setTimeout(function(){UM||xr(35)},1),new Vg)}();function cH(){if((gt.pendingReactions.length||gt.inBatch||gt.isRunningReactions)&&xr(36),UM=!0,Ug){var e=RS();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),gt=new Vg}}function uH(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function ZM(e,t){e.observers_.delete(t),e.observers_.size===0&&HM(e)}function HM(e){e.isPendingUnobservation_===!1&&(e.isPendingUnobservation_=!0,gt.pendingUnobservations.push(e))}function qo(){gt.inBatch++}function Ko(){if(--gt.inBatch===0){qM();for(var e=gt.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation_=!1,r.observers_.size===0&&(r.isBeingObserved_&&(r.isBeingObserved_=!1,r.onBUO()),r instanceof fd&&r.suspend_())}gt.pendingUnobservations=[]}}function WM(e){var t=gt.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&gt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(e.observers_.size===0&&gt.inBatch>0&&HM(e),!1)}function GM(e){e.lowestObserverState_!==wr.STALE_&&(e.lowestObserverState_=wr.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===wr.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=wr.STALE_}))}function hH(e){e.lowestObserverState_!==wr.STALE_&&(e.lowestObserverState_=wr.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===wr.POSSIBLY_STALE_?t.dependenciesState_=wr.STALE_:t.dependenciesState_===wr.UP_TO_DATE_&&(e.lowestObserverState_=wr.UP_TO_DATE_)}))}function dH(e){e.lowestObserverState_===wr.UP_TO_DATE_&&(e.lowestObserverState_=wr.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===wr.UP_TO_DATE_&&(t.dependenciesState_=wr.POSSIBLY_STALE_,t.onBecomeStale_())}))}var rm=function(){function e(r,n,s,h){r===void 0&&(r="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=wr.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Ly.NONE,this.name_=r,this.onInvalidate_=n,this.errorHandler_=s,this.requiresObservable_=h}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,gt.pendingReactions.push(this),qM())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){qo(),this.isScheduled_=!1;var n=gt.trackingContext;if(gt.trackingContext=this,o2(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(s){this.reportExceptionInDerivation_(s)}}gt.trackingContext=n,Ko()}},t.track=function(n){if(!this.isDisposed_){qo(),this.isRunning_=!0;var s=gt.trackingContext;gt.trackingContext=this;var h=jM(this,n,void 0);gt.trackingContext=s,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&a2(this),$g(h)&&this.reportExceptionInDerivation_(h.cause),Ko()}},t.reportExceptionInDerivation_=function(n){var s=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(gt.disableErrorBoundaries)throw n;var h="[mobx] uncaught error in '"+this+"'";gt.suppressReactionErrors||console.error(h,n),gt.globalReactionErrorHandlers.forEach(function(d){return d(n,s)})},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(qo(),a2(this),Ko()))},t.getDisposer_=function(n){var s=this,h=function d(){s.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",d)};return n==null||n.addEventListener==null||n.addEventListener("abort",h),h[Ht]=this,h},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(n){},e}(),fH=100,s2=function(t){return t()};function qM(){gt.inBatch>0||gt.isRunningReactions||s2(pH)}function pH(){gt.isRunningReactions=!0;for(var e=gt.pendingReactions,t=0;e.length>0;){++t===fH&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,s=r.length;n<s;n++)r[n].runReaction_()}gt.isRunningReactions=!1}var Oy=uu("Reaction",rm);function mH(e){var t=s2;s2=function(n){return e(function(){return t(n)})}}function Tp(){return!1}function gH(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var KM="action",yH="action.bound",XM="autoAction",vH="autoAction.bound",_H="<unnamed action>",l2=Rm(KM),xH=Rm(yH,{bound:!0}),c2=Rm(XM,{autoAction:!0}),bH=Rm(vH,{autoAction:!0,bound:!0});function YM(e){var t=function(n,s){if(Ma(n))return ou(n.name||_H,n,e);if(Ma(s))return ou(n,s,e);if(Im(s))return(e?c2:l2).decorate_20223_(n,s);if(ru(s))return Md(n,s,e?c2:l2);if(ru(n))return rs(Rm(e?XM:KM,{name:n,autoAction:e}))};return t}var Nh=YM(!1);Object.assign(Nh,l2);var nm=YM(!0);Object.assign(nm,c2);Nh.bound=rs(xH);nm.bound=rs(bH);function N1(e){return Ma(e)&&e.isMobxAction===!0}function wH(e,t){var r,n,s,h,d;t===void 0&&(t=bM);var c=(r=(n=t)==null?void 0:n.name)!=null?r:"Autorun",b=!t.scheduler&&!t.delay,E;if(b)E=new rm(c,function(){this.track(T)},t.onError,t.requiresObservable);else{var I=EH(t),P=!1;E=new rm(c,function(){P||(P=!0,I(function(){P=!1,E.isDisposed_||E.track(T)}))},t.onError,t.requiresObservable)}function T(){e(E)}return(s=t)!=null&&(h=s.signal)!=null&&h.aborted||E.schedule_(),E.getDisposer_((d=t)==null?void 0:d.signal)}var SH=function(t){return t()};function EH(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:SH}var AH="onBO",CH="onBUO";function PH(e,t,r){return QM(AH,e,t,r)}function JM(e,t,r){return QM(CH,e,t,r)}function QM(e,t,r,n){var s=By(t),h=Ma(n)?n:r,d=e+"L";return s[d]?s[d].add(h):s[d]=new Set([h]),function(){var c=s[d];c&&(c.delete(h),c.size===0&&delete s[d])}}var TH="never",yg="always",IH="observed";function MH(e){e.isolateGlobalState===!0&&cH();var t=e.useProxies,r=e.enforceActions;if(t!==void 0&&(gt.useProxies=t===yg?!0:t===TH?!1:typeof Proxy<"u"),t==="ifavailable"&&(gt.verifyProxies=!0),r!==void 0){var n=r===yg?yg:r===IH;gt.enforceActions=n,gt.allowStateChanges=!(n===!0||n===yg)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(s){s in e&&(gt[s]=!!e[s])}),gt.allowStateReads=!gt.observableRequiresReaction,e.reactionScheduler&&mH(e.reactionScheduler)}function eR(e,t,r,n){var s=cZ(t);return ec(function(){var h=fu(e,n)[Ht];dd(s).forEach(function(d){h.extend_(d,s[d],r&&d in r?r[d]:!0)})}),e}function RH(e,t){return tR(By(e,t))}function tR(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=kH(e.observing_).map(tR)),t}function kH(e){return Array.from(new Set(e))}var LH=0;function rR(){this.message="FLOW_CANCELLED"}rR.prototype=Object.create(Error.prototype);var sx=RM("flow"),DH=RM("flow.bound",{bound:!0}),pd=Object.assign(function(t,r){if(Im(r))return sx.decorate_20223_(t,r);if(ru(r))return Md(t,r,sx);var n=t,s=n.name||"<unnamed flow>",h=function(){var c=this,b=arguments,E=++LH,I=Nh(s+" - runid: "+E+" - init",n).apply(c,b),P,T=void 0,O=new Promise(function(j,V){var re=0;P=V;function W(ie){T=void 0;var de;try{de=Nh(s+" - runid: "+E+" - yield "+re++,I.next).call(I,ie)}catch(ae){return V(ae)}K(de)}function Z(ie){T=void 0;var de;try{de=Nh(s+" - runid: "+E+" - yield "+re++,I.throw).call(I,ie)}catch(ae){return V(ae)}K(de)}function K(ie){if(Ma(ie==null?void 0:ie.then)){ie.then(K,V);return}return ie.done?j(ie.value):(T=Promise.resolve(ie.value),T.then(W,Z))}W(void 0)});return O.cancel=Nh(s+" - runid: "+E+" - cancel",function(){try{T&&Z3(T);var j=I.return(void 0),V=Promise.resolve(j.value);V.then(Fh,Fh),Z3(V),P(new rR)}catch(re){P(re)}}),O};return h.isMobXFlow=!0,h},sx);pd.bound=rs(DH);function Z3(e){Ma(e.cancel)&&e.cancel()}function im(e){return(e==null?void 0:e.isMobXFlow)===!0}function OH(e,t){return e?$1(e)||!!e[Ht]||LS(e)||Oy(e)||B1(e):!1}function nR(e){return OH(e)}function Ps(e,t){t===void 0&&(t=void 0),qo();try{return e.apply(t)}finally{Ko()}}function gh(e){return e[Ht]}var zH={has:function(t,r){return gh(t).has_(r)},get:function(t,r){return gh(t).get_(r)},set:function(t,r,n){var s;return ru(r)?(s=gh(t).set_(r,n,!0))!=null?s:!0:!1},deleteProperty:function(t,r){var n;return ru(r)?(n=gh(t).delete_(r,!0))!=null?n:!0:!1},defineProperty:function(t,r,n){var s;return(s=gh(t).defineProperty_(r,n))!=null?s:!0},ownKeys:function(t){return gh(t).ownKeys_()},preventExtensions:function(t){xr(13)}};function FH(e,t){var r,n;return wM(),e=fu(e,t),(n=(r=e[Ht]).proxy_)!=null?n:r.proxy_=new Proxy(e,zH)}function Ho(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function km(e,t){var r=e.interceptors_||(e.interceptors_=[]);return r.push(t),SM(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function Wo(e,t){var r=hu();try{for(var n=[].concat(e.interceptors_||[]),s=0,h=n.length;s<h&&(t=n[s](t),t&&!t.type&&xr(14),!!t);s++);return t}finally{Os(r)}}function Aa(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function Lm(e,t){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(t),SM(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function Ca(e,t){var r=hu(),n=e.changeListeners_;if(n){n=n.slice();for(var s=0,h=n.length;s<h;s++)n[s](t);Os(r)}}function BH(e,t,r){return ec(function(){var n,s=fu(e,r)[Ht];(n=t)!=null||(t=pZ(e)),dd(t).forEach(function(h){return s.make_(h,t[h])})}),e}var lx=Symbol("mobx-keys");function zS(e,t,r){return $s(e)?eR(e,e,t,r):(ec(function(){var n=fu(e,r)[Ht];if(!e[lx]){var s=Object.getPrototypeOf(e),h=new Set([].concat(dd(e),dd(s)));h.delete("constructor"),h.delete(Ht),Pm(s,lx,h)}e[lx].forEach(function(d){return n.make_(d,t&&d in t?t[d]:!0)})}),e)}var H3="splice",ns="update",NH=1e4,jH={get:function(t,r){var n=t[Ht];return r===Ht?n:r==="length"?n.getArrayLength_():typeof r=="string"&&!isNaN(r)?n.get_(parseInt(r)):Ds(zy,r)?zy[r]:t[r]},set:function(t,r,n){var s=t[Ht];return r==="length"&&s.setArrayLength_(n),typeof r=="symbol"||isNaN(r)?t[r]=n:s.set_(parseInt(r),n),!0},preventExtensions:function(){xr(15)}},FS=function(){function e(r,n,s,h){r===void 0&&(r="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=s,this.legacyMode_=h,this.atom_=new Mm(r),this.enhancer_=function(d,c){return n(d,c,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},t.intercept_=function(n){return km(this,n)},t.observe_=function(n,s){return s===void 0&&(s=!1),s&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Lm(this,n)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&xr("Out of range: "+n);var s=this.values_.length;if(n!==s)if(n>s){for(var h=new Array(n-s),d=0;d<n-s;d++)h[d]=void 0;this.spliceWithArray_(s,0,h)}else this.spliceWithArray_(n,s-n)},t.updateArrayLength_=function(n,s){n!==this.lastKnownLength_&&xr(16),this.lastKnownLength_+=s,this.legacyMode_&&s>0&&pR(n+s+1)},t.spliceWithArray_=function(n,s,h){var d=this;this.atom_;var c=this.values_.length;if(n===void 0?n=0:n>c?n=c:n<0&&(n=Math.max(0,c+n)),arguments.length===1?s=c-n:s==null?s=0:s=Math.max(0,Math.min(s,c-n)),h===void 0&&(h=t2),Ho(this)){var b=Wo(this,{object:this.proxy_,type:H3,index:n,removedCount:s,added:h});if(!b)return t2;s=b.removedCount,h=b.added}if(h=h.length===0?h:h.map(function(P){return d.enhancer_(P,void 0)}),this.legacyMode_){var E=h.length-s;this.updateArrayLength_(c,E)}var I=this.spliceItemsIntoValues_(n,s,h);return(s!==0||h.length!==0)&&this.notifyArraySplice_(n,h,I),this.dehanceValues_(I)},t.spliceItemsIntoValues_=function(n,s,h){if(h.length<NH){var d;return(d=this.values_).splice.apply(d,[n,s].concat(h))}else{var c=this.values_.slice(n,n+s),b=this.values_.slice(n+s);this.values_.length+=h.length-s;for(var E=0;E<h.length;E++)this.values_[n+E]=h[E];for(var I=0;I<b.length;I++)this.values_[n+h.length+I]=b[I];return c}},t.notifyArrayChildUpdate_=function(n,s,h){var d=!this.owned_&&Tp(),c=Aa(this),b=c||d?{observableKind:"array",object:this.proxy_,type:ns,debugObjectName:this.atom_.name_,index:n,newValue:s,oldValue:h}:null;this.atom_.reportChanged(),c&&Ca(this,b)},t.notifyArraySplice_=function(n,s,h){var d=!this.owned_&&Tp(),c=Aa(this),b=c||d?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:H3,index:n,removed:h,added:s,removedCount:h.length,addedCount:s.length}:null;this.atom_.reportChanged(),c&&Ca(this,b)},t.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},t.set_=function(n,s){var h=this.values_;if(this.legacyMode_&&n>h.length&&xr(17,n,h.length),n<h.length){this.atom_;var d=h[n];if(Ho(this)){var c=Wo(this,{type:ns,object:this.proxy_,index:n,newValue:s});if(!c)return;s=c.newValue}s=this.enhancer_(s,d);var b=s!==d;b&&(h[n]=s,this.notifyArrayChildUpdate_(n,s,d))}else{for(var E=new Array(n+1-h.length),I=0;I<E.length-1;I++)E[I]=void 0;E[E.length-1]=s,this.spliceWithArray_(h.length,0,E)}},e}();function $H(e,t,r,n){return r===void 0&&(r="ObservableArray"),n===void 0&&(n=!1),wM(),ec(function(){var s=new FS(r,t,n,!1);AM(s.values_,Ht,s);var h=new Proxy(s.values_,jH);return s.proxy_=h,e&&e.length&&s.spliceWithArray_(0,0,e),h})}var zy={clear:function(){return this.splice(0)},replace:function(t){var r=this[Ht];return r.spliceWithArray_(0,r.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),h=2;h<n;h++)s[h-2]=arguments[h];var d=this[Ht];switch(arguments.length){case 0:return[];case 1:return d.spliceWithArray_(t);case 2:return d.spliceWithArray_(t,r)}return d.spliceWithArray_(t,r,s)},spliceWithArray:function(t,r,n){return this[Ht].spliceWithArray_(t,r,n)},push:function(){for(var t=this[Ht],r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[Ht].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[Ht],r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return gt.trackingDerivation&&xr(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){gt.trackingDerivation&&xr(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var r=this[Ht],n=r.dehanceValues_(r.values_).indexOf(t);return n>-1?(this.splice(n,1),!0):!1}};Vr("at",Po);Vr("concat",Po);Vr("flat",Po);Vr("includes",Po);Vr("indexOf",Po);Vr("join",Po);Vr("lastIndexOf",Po);Vr("slice",Po);Vr("toString",Po);Vr("toLocaleString",Po);Vr("toSorted",Po);Vr("toSpliced",Po);Vr("with",Po);Vr("every",La);Vr("filter",La);Vr("find",La);Vr("findIndex",La);Vr("findLast",La);Vr("findLastIndex",La);Vr("flatMap",La);Vr("forEach",La);Vr("map",La);Vr("some",La);Vr("toReversed",La);Vr("reduce",iR);Vr("reduceRight",iR);function Vr(e,t){typeof Array.prototype[e]=="function"&&(zy[e]=t(e))}function Po(e){return function(){var t=this[Ht];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_);return r[e].apply(r,arguments)}}function La(e){return function(t,r){var n=this,s=this[Ht];s.atom_.reportObserved();var h=s.dehanceValues_(s.values_);return h[e](function(d,c){return t.call(r,d,c,n)})}}function iR(e){return function(){var t=this,r=this[Ht];r.atom_.reportObserved();var n=r.dehanceValues_(r.values_),s=arguments[0];return arguments[0]=function(h,d,c){return s(h,d,c,t)},n[e].apply(n,arguments)}}var VH=uu("ObservableArrayAdministration",FS);function j1(e){return k1(e)&&VH(e[Ht])}var oR,aR,UH={},Pl="add",Fy="delete";oR=Symbol.iterator;aR=Symbol.toStringTag;var sR=function(){function e(r,n,s){var h=this;n===void 0&&(n=iu),s===void 0&&(s="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ht]=UH,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=s,Ma(Map)||xr(18),ec(function(){h.keysAtom_=IM("ObservableMap.keys()"),h.data_=new Map,h.hasMap_=new Map,r&&h.merge(r)})}var t=e.prototype;return t.has_=function(n){return this.data_.has(n)},t.has=function(n){var s=this;if(!gt.trackingDerivation)return this.has_(n);var h=this.hasMap_.get(n);if(!h){var d=h=new Zc(this.has_(n),L1,"ObservableMap.key?",!1);this.hasMap_.set(n,d),JM(d,function(){return s.hasMap_.delete(n)})}return h.get()},t.set=function(n,s){var h=this.has_(n);if(Ho(this)){var d=Wo(this,{type:h?ns:Pl,object:this,newValue:s,name:n});if(!d)return this;s=d.newValue}return h?this.updateValue_(n,s):this.addValue_(n,s),this},t.delete=function(n){var s=this;if(this.keysAtom_,Ho(this)){var h=Wo(this,{type:Fy,object:this,name:n});if(!h)return!1}if(this.has_(n)){var d=Tp(),c=Aa(this),b=c||d?{observableKind:"map",debugObjectName:this.name_,type:Fy,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Ps(function(){var E;s.keysAtom_.reportChanged(),(E=s.hasMap_.get(n))==null||E.setNewValue_(!1);var I=s.data_.get(n);I.setNewValue_(void 0),s.data_.delete(n)}),c&&Ca(this,b),!0}return!1},t.updateValue_=function(n,s){var h=this.data_.get(n);if(s=h.prepareNewValue_(s),s!==gt.UNCHANGED){var d=Tp(),c=Aa(this),b=c||d?{observableKind:"map",debugObjectName:this.name_,type:ns,object:this,oldValue:h.value_,name:n,newValue:s}:null;h.setNewValue_(s),c&&Ca(this,b)}},t.addValue_=function(n,s){var h=this;this.keysAtom_,Ps(function(){var E,I=new Zc(s,h.enhancer_,"ObservableMap.key",!1);h.data_.set(n,I),s=I.value_,(E=h.hasMap_.get(n))==null||E.setNewValue_(!0),h.keysAtom_.reportChanged()});var d=Tp(),c=Aa(this),b=c||d?{observableKind:"map",debugObjectName:this.name_,type:Pl,object:this,name:n,newValue:s}:null;c&&Ca(this,b)},t.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var n=this,s=this.keys();return om({next:function(){var d=s.next(),c=d.done,b=d.value;return{done:c,value:c?void 0:n.get(b)}}})},t.entries=function(){var n=this,s=this.keys();return om({next:function(){var d=s.next(),c=d.done,b=d.value;return{done:c,value:c?void 0:[b,n.get(b)]}}})},t[oR]=function(){return this.entries()},t.forEach=function(n,s){for(var h=Bh(this),d;!(d=h()).done;){var c=d.value,b=c[0],E=c[1];n.call(s,E,b,this)}},t.merge=function(n){var s=this;return du(n)&&(n=new Map(n)),Ps(function(){$s(n)?lZ(n).forEach(function(h){return s.set(h,n[h])}):Array.isArray(n)?n.forEach(function(h){var d=h[0],c=h[1];return s.set(d,c)}):Id(n)?(n.constructor!==Map&&xr(19,n),n.forEach(function(h,d){return s.set(d,h)})):n!=null&&xr(20,n)}),this},t.clear=function(){var n=this;Ps(function(){$M(function(){for(var s=Bh(n.keys()),h;!(h=s()).done;){var d=h.value;n.delete(d)}})})},t.replace=function(n){var s=this;return Ps(function(){for(var h=ZH(n),d=new Map,c=!1,b=Bh(s.data_.keys()),E;!(E=b()).done;){var I=E.value;if(!h.has(I)){var P=s.delete(I);if(P)c=!0;else{var T=s.data_.get(I);d.set(I,T)}}}for(var O=Bh(h.entries()),j;!(j=O()).done;){var V=j.value,re=V[0],W=V[1],Z=s.data_.has(re);if(s.set(re,W),s.data_.has(re)){var K=s.data_.get(re);d.set(re,K),Z||(c=!0)}}if(!c)if(s.data_.size!==d.size)s.keysAtom_.reportChanged();else for(var ie=s.data_.keys(),de=d.keys(),ae=ie.next(),J=de.next();!ae.done;){if(ae.value!==J.value){s.keysAtom_.reportChanged();break}ae=ie.next(),J=de.next()}s.data_=d}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(n,s){return Lm(this,n)},t.intercept_=function(n){return km(this,n)},kS(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:aR,get:function(){return"Map"}}]),e}(),du=uu("ObservableMap",sR);function ZH(e){if(Id(e)||du(e))return e;if(Array.isArray(e))return new Map(e);if($s(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return xr(21,e)}var lR,cR,HH={};lR=Symbol.iterator;cR=Symbol.toStringTag;var uR=function(){function e(r,n,s){var h=this;n===void 0&&(n=iu),s===void 0&&(s="ObservableSet"),this.name_=void 0,this[Ht]=HH,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=s,Ma(Set)||xr(22),this.enhancer_=function(d,c){return n(d,c,s)},ec(function(){h.atom_=IM(h.name_),r&&h.replace(r)})}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.clear=function(){var n=this;Ps(function(){$M(function(){for(var s=Bh(n.data_.values()),h;!(h=s()).done;){var d=h.value;n.delete(d)}})})},t.forEach=function(n,s){for(var h=Bh(this),d;!(d=h()).done;){var c=d.value;n.call(s,c,c,this)}},t.add=function(n){var s=this;if(this.atom_,Ho(this)){var h=Wo(this,{type:Pl,object:this,newValue:n});if(!h)return this}if(!this.has(n)){Ps(function(){s.data_.add(s.enhancer_(n,void 0)),s.atom_.reportChanged()});var d=!1,c=Aa(this),b=c||d?{observableKind:"set",debugObjectName:this.name_,type:Pl,object:this,newValue:n}:null;c&&Ca(this,b)}return this},t.delete=function(n){var s=this;if(Ho(this)){var h=Wo(this,{type:Fy,object:this,oldValue:n});if(!h)return!1}if(this.has(n)){var d=!1,c=Aa(this),b=c||d?{observableKind:"set",debugObjectName:this.name_,type:Fy,object:this,oldValue:n}:null;return Ps(function(){s.atom_.reportChanged(),s.data_.delete(n)}),c&&Ca(this,b),!0}return!1},t.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},t.entries=function(){var n=0,s=Array.from(this.keys()),h=Array.from(this.values());return om({next:function(){var c=n;return n+=1,c<h.length?{value:[s[c],h[c]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var n=this,s=0,h=Array.from(this.data_.values());return om({next:function(){return s<h.length?{value:n.dehanceValue_(h[s++]),done:!1}:{done:!0}}})},t.replace=function(n){var s=this;return Rd(n)&&(n=new Set(n)),Ps(function(){Array.isArray(n)?(s.clear(),n.forEach(function(h){return s.add(h)})):Tm(n)?(s.clear(),n.forEach(function(h){return s.add(h)})):n!=null&&xr("Cannot initialize set from "+n)}),this},t.observe_=function(n,s){return Lm(this,n)},t.intercept_=function(n){return km(this,n)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[lR]=function(){return this.values()},kS(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:cR,get:function(){return"Set"}}]),e}(),Rd=uu("ObservableSet",uR),W3=Object.create(null),G3="remove",hR=function(){function e(r,n,s,h){n===void 0&&(n=new Map),h===void 0&&(h=jZ),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=r,this.values_=n,this.name_=s,this.defaultAnnotation_=h,this.keysAtom_=new Mm("ObservableObject.keys"),this.isPlainObject_=$s(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(n){return this.values_.get(n).get()},t.setObservablePropValue_=function(n,s){var h=this.values_.get(n);if(h instanceof fd)return h.set(s),!0;if(Ho(this)){var d=Wo(this,{type:ns,object:this.proxy_||this.target_,name:n,newValue:s});if(!d)return null;s=d.newValue}if(s=h.prepareNewValue_(s),s!==gt.UNCHANGED){var c=Aa(this),b=!1,E=c||b?{type:ns,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:h.value_,name:n,newValue:s}:null;h.setNewValue_(s),c&&Ca(this,E)}return!0},t.get_=function(n){return gt.trackingDerivation&&!Ds(this.target_,n)&&this.has_(n),this.target_[n]},t.set_=function(n,s,h){return h===void 0&&(h=!1),Ds(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,s):h?Reflect.set(this.target_,n,s):(this.target_[n]=s,!0):this.extend_(n,{value:s,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,h)},t.has_=function(n){if(!gt.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var s=this.pendingKeys_.get(n);return s||(s=new Zc(n in this.target_,L1,"ObservableObject.key?",!1),this.pendingKeys_.set(n,s)),s.get()},t.make_=function(n,s){if(s===!0&&(s=this.defaultAnnotation_),s!==!1){if(!(n in this.target_)){var h;if((h=this.target_[Ya])!=null&&h[n])return;xr(1,s.annotationType_,this.name_+"."+n.toString())}for(var d=this.target_;d&&d!==R1;){var c=My(d,n);if(c){var b=s.make_(this,n,c,d);if(b===0)return;if(b===1)break}d=Object.getPrototypeOf(d)}K3(this,s,n)}},t.extend_=function(n,s,h,d){if(d===void 0&&(d=!1),h===!0&&(h=this.defaultAnnotation_),h===!1)return this.defineProperty_(n,s,d);var c=h.extend_(this,n,s,d);return c&&K3(this,h,n),c},t.defineProperty_=function(n,s,h){h===void 0&&(h=!1),this.keysAtom_;try{qo();var d=this.delete_(n);if(!d)return d;if(Ho(this)){var c=Wo(this,{object:this.proxy_||this.target_,name:n,type:Pl,newValue:s.value});if(!c)return null;var b=c.newValue;s.value!==b&&(s=nu({},s,{value:b}))}if(h){if(!Reflect.defineProperty(this.target_,n,s))return!1}else ts(this.target_,n,s);this.notifyPropertyAddition_(n,s.value)}finally{Ko()}return!0},t.defineObservableProperty_=function(n,s,h,d){d===void 0&&(d=!1),this.keysAtom_;try{qo();var c=this.delete_(n);if(!c)return c;if(Ho(this)){var b=Wo(this,{object:this.proxy_||this.target_,name:n,type:Pl,newValue:s});if(!b)return null;s=b.newValue}var E=q3(n),I={configurable:gt.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:E.get,set:E.set};if(d){if(!Reflect.defineProperty(this.target_,n,I))return!1}else ts(this.target_,n,I);var P=new Zc(s,h,"ObservableObject.key",!1);this.values_.set(n,P),this.notifyPropertyAddition_(n,P.value_)}finally{Ko()}return!0},t.defineComputedProperty_=function(n,s,h){h===void 0&&(h=!1),this.keysAtom_;try{qo();var d=this.delete_(n);if(!d)return d;if(Ho(this)){var c=Wo(this,{object:this.proxy_||this.target_,name:n,type:Pl,newValue:void 0});if(!c)return null}s.name||(s.name="ObservableObject.key"),s.context=this.proxy_||this.target_;var b=q3(n),E={configurable:gt.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:b.get,set:b.set};if(h){if(!Reflect.defineProperty(this.target_,n,E))return!1}else ts(this.target_,n,E);this.values_.set(n,new fd(s)),this.notifyPropertyAddition_(n,void 0)}finally{Ko()}return!0},t.delete_=function(n,s){if(s===void 0&&(s=!1),this.keysAtom_,!Ds(this.target_,n))return!0;if(Ho(this)){var h=Wo(this,{object:this.proxy_||this.target_,name:n,type:G3});if(!h)return null}try{var d,c;qo();var b=Aa(this),E=!1,I=this.values_.get(n),P=void 0;if(!I&&(b||E)){var T;P=(T=My(this.target_,n))==null?void 0:T.value}if(s){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(I&&(this.values_.delete(n),I instanceof Zc&&(P=I.value_),GM(I)),this.keysAtom_.reportChanged(),(d=this.pendingKeys_)==null||(c=d.get(n))==null||c.set(n in this.target_),b||E){var O={type:G3,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:P,name:n};b&&Ca(this,O)}}finally{Ko()}return!0},t.observe_=function(n,s){return Lm(this,n)},t.intercept_=function(n){return km(this,n)},t.notifyPropertyAddition_=function(n,s){var h,d,c=Aa(this),b=!1;if(c||b){var E=c||b?{type:Pl,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:s}:null;c&&Ca(this,E)}(h=this.pendingKeys_)==null||(d=h.get(n))==null||d.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),dd(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function fu(e,t){var r;if(Ds(e,Ht))return e;var n=(r=t==null?void 0:t.name)!=null?r:"ObservableObject",s=new hR(e,new Map,String(n),YZ(t));return Pm(e,Ht,s),e}var WH=uu("ObservableObjectAdministration",hR);function q3(e){return W3[e]||(W3[e]={get:function(){return this[Ht].getObservablePropValue_(e)},set:function(r){return this[Ht].setObservablePropValue_(e,r)}})}function $1(e){return k1(e)?WH(e[Ht]):!1}function K3(e,t,r){var n;(n=e.target_[Ya])==null||delete n[r]}var GH=fR(0),qH=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),cx=0,dR=function(){};function KH(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}KH(dR,Array.prototype);var BS=function(e,t,r){TM(n,e);function n(h,d,c,b){var E;return c===void 0&&(c="ObservableArray"),b===void 0&&(b=!1),E=e.call(this)||this,ec(function(){var I=new FS(c,d,b,!0);I.proxy_=ax(E),AM(ax(E),Ht,I),h&&h.length&&E.spliceWithArray(0,0,h),qH&&Object.defineProperty(ax(E),"0",GH)}),E}var s=n.prototype;return s.concat=function(){this[Ht].atom_.reportObserved();for(var d=arguments.length,c=new Array(d),b=0;b<d;b++)c[b]=arguments[b];return Array.prototype.concat.apply(this.slice(),c.map(function(E){return j1(E)?E.slice():E}))},s[r]=function(){var h=this,d=0;return om({next:function(){return d<h.length?{value:h[d++],done:!1}:{done:!0,value:void 0}}})},kS(n,[{key:"length",get:function(){return this[Ht].getArrayLength_()},set:function(d){this[Ht].setArrayLength_(d)}},{key:t,get:function(){return"Array"}}]),n}(dR,Symbol.toStringTag,Symbol.iterator);Object.entries(zy).forEach(function(e){var t=e[0],r=e[1];t!=="concat"&&Pm(BS.prototype,t,r)});function fR(e){return{enumerable:!1,configurable:!0,get:function(){return this[Ht].get_(e)},set:function(r){this[Ht].set_(e,r)}}}function XH(e){ts(BS.prototype,""+e,fR(e))}function pR(e){if(e>cx){for(var t=cx;t<e+100;t++)XH(t);cx=e}}pR(1e3);function YH(e,t,r){return new BS(e,t,r)}function By(e,t){if(typeof e=="object"&&e!==null){if(j1(e))return t!==void 0&&xr(23),e[Ht].atom_;if(Rd(e))return e.atom_;if(du(e)){if(t===void 0)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||xr(25,t,u2(e)),r}if($1(e)){if(!t)return xr(26);var n=e[Ht].values_.get(t);return n||xr(27,t,u2(e)),n}if(LS(e)||B1(e)||Oy(e))return e}else if(Ma(e)&&Oy(e[Ht]))return e[Ht];xr(28)}function JH(e,t){if(e||xr(29),LS(e)||B1(e)||Oy(e)||du(e)||Rd(e))return e;if(e[Ht])return e[Ht];xr(24,e)}function u2(e,t){var r;if(t!==void 0)r=By(e,t);else{if(N1(e))return e.name;$1(e)||du(e)||Rd(e)?r=JH(e):r=By(e)}return r.name_}function ec(e){var t=hu(),r=z1(!0);qo();try{return e()}finally{Ko(),F1(r),Os(t)}}var X3=R1.toString;function NS(e,t,r){return r===void 0&&(r=-1),h2(e,t,r)}function h2(e,t,r,n,s){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var h=typeof e;if(h!=="function"&&h!=="object"&&typeof t!="object")return!1;var d=X3.call(e);if(d!==X3.call(t))return!1;switch(d){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++;break}e=Y3(e),t=Y3(t);var c=d==="[object Array]";if(!c){if(typeof e!="object"||typeof t!="object")return!1;var b=e.constructor,E=t.constructor;if(b!==E&&!(Ma(b)&&b instanceof b&&Ma(E)&&E instanceof E)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),n=n||[],s=s||[];for(var I=n.length;I--;)if(n[I]===e)return s[I]===t;if(n.push(e),s.push(t),c){if(I=e.length,I!==t.length)return!1;for(;I--;)if(!h2(e[I],t[I],r-1,n,s))return!1}else{var P=Object.keys(e),T;if(I=P.length,Object.keys(t).length!==I)return!1;for(;I--;)if(T=P[I],!(Ds(t,T)&&h2(e[T],t[T],r-1,n,s)))return!1}return n.pop(),s.pop(),!0}function Y3(e){return j1(e)?e.slice():Id(e)||du(e)||Tm(e)||Rd(e)?Array.from(e.entries()):e}function om(e){return e[Symbol.iterator]=QH,e}function QH(){return this}["Symbol","Map","Set"].forEach(function(e){var t=RS();typeof t[e]>"u"&&xr("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:gH,extras:{getDebugName:u2},$mobx:Ht});const eW="urban-heat",tW="https://urbanheat.app",rW="Damien Allen",nW="AGPL-3.0",iW="2024.12.5",oW="module",aW={type:"git",url:"https://github.com/damienallen/urban-heat.git"},sW={dev:"vite",build:"tsc && vite build",lint:"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",preview:"vite preview"},lW={"@mantine/core":"^7.9","@mantine/hooks":"^7.9","@mantine/modals":"^7.9","@mantine/notifications":"^7.9","@mantine/spotlight":"^7.9","@maptiler/sdk":"^2.0.3","@phosphor-icons/react":"^2.1",clsx:"^2.1",d3:"^7.9","d3-contour":"^4.0","d3-geo-projection":"^4.0","geojson-bounds":"^1.0.4",geotiff:"^2.1",mobx:"^6.12","mobx-react":"^9.1",react:"^18.3","react-dom":"^18.3","react-jss":"^10.10","react-router-dom":"^6.23.1"},cW={"@types/d3":"^7.4","@types/react":"^18.3","@types/react-dom":"^18.3","@typescript-eslint/eslint-plugin":"^7.9","@typescript-eslint/parser":"^7.9","@vitejs/plugin-react":"^4.2",eslint:"^8.56","eslint-plugin-react-hooks":"^4.6","eslint-plugin-react-refresh":"^0.4.7","generate-license-file":"^3.5.1",typescript:"^5.4",vite:"~5"},uW={name:eW,homepage:tW,author:rW,license:nW,private:!0,version:iW,type:oW,repository:aW,scripts:sW,dependencies:lW,devDependencies:cW};vo.apiKey="wDiAbMXktsF0wdW1skrt";const hW=iZ().digits(3),J3=new Worker(new URL("/assets/contour.worker-7vWzDuSY.js",import.meta.url),{type:"module"});class dW{constructor(){tr(this,"app");tr(this,"contours");tr(this,"ui");this.app=new fW(this),this.contours=new pW(this),this.ui=new mW(this)}}class fW{constructor(t){tr(this,"apiRoot","https://api.urbanheat.app");tr(this,"version",uW.version);tr(this,"cityLookup",{});tr(this,"urbanExtents");tr(this,"mapStyle","dataviz");tr(this,"setMapStyle",t=>{this.mapStyle=t});tr(this,"setUrbanExtents",(t,r)=>{this.urbanExtents={type:"FeatureCollection",features:t.features.filter(s=>!r.includes(s.id))};let n={};for(let s of this.featureProperties){const h=`${s.URAU_NAME}, ${s.CNTR_CODE}`;n[h]=Qp(s.URAU_NAME)}this.cityLookup=n});tr(this,"fetchUrbanExtents",async()=>{const r=await(await fetch("urban_extents.geojson")).json(),s=await(await fetch(`${this.apiRoot}/urau/missing`)).json();this.setUrbanExtents(r,s),this.root.ui.setMapLoaded(!0)});this.root=t,zS(this,{},{autoBind:!0})}get features(){var t;return(t=this.urbanExtents)==null?void 0:t.features}get selectedFeature(){var t;return(t=this.features)==null?void 0:t.find(r=>{var n;return r.properties.URAU_CODE===((n=this.root.contours.selected)==null?void 0:n.URAU_CODE)})}get featureProperties(){var t;return(t=this.urbanExtents)==null?void 0:t.features.map(r=>r.properties)}get centroidsGeojson(){return{type:"FeatureCollection",features:this.features?this.features.map(t=>({type:"Feature",properties:t.properties,geometry:{coordinates:hW.centroid(t),type:"Point"}})):[]}}}class pW{constructor(t){tr(this,"sourceKey","max_surface_temp");tr(this,"areProcessing",!0);tr(this,"layers",[]);tr(this,"range",[1,2]);tr(this,"annualData",[]);tr(this,"year",2023);tr(this,"selected",null);tr(this,"setAreProcessing",t=>{this.areProcessing=t});tr(this,"setLayers",t=>{this.layers=t});tr(this,"setRange",t=>{this.range=t,this.root.ui.toggleShowControls(),this.processContours()});tr(this,"setYear",t=>{this.year=Number(t),this.root.ui.toggleShowControls(),this.processContours()});tr(this,"setSelected",t=>{this.selected=t,this.initUrau()});tr(this,"setAnnualData",t=>{this.annualData=t});tr(this,"randomizeFeature",(t=!0)=>{const r=this.root.app.featureProperties.filter(s=>s.CITY_CPTL==="Y"||t),n=r[Math.floor(Math.random()*r.length)];t?C2.navigate(`/${Qp(n.URAU_NAME)}`):this.setSelected(n)});tr(this,"featureFromPath",t=>{const r=t.replace("/",""),n=this.root.app.features.find(s=>Qp(s.properties.URAU_NAME)===r);n?this.setSelected(n.properties):(console.log(`Unable to find city '${r}', randomizing...`),C2.navigate("/"))});tr(this,"initUrau",async()=>{const r=await(await fetch(`${this.root.app.apiRoot}/urau/${this.selected.URAU_CODE}/sources`)).json();this.setAnnualData(r.find(s=>s.key===this.sourceKey).data);const n=this.annualData.reduce((s,h)=>h.year>s.year?h:s);this.setYear(n.year)});tr(this,"processContours",async()=>{this.stats&&this.url?(this.setAreProcessing(!0),J3.postMessage({url:this.url,thresholds:this.thresholds}),J3.onmessage=t=>{t.data.type==="progress"?console.debug(t.data.state,t.data.progress):t.data.type==="result"&&(this.setLayers(t.data.result),this.setAreProcessing(!1),this.root.ui.setShowControls(!1))}):console.error(`Unable to find data for year '${this.year}'`)});this.root=t,zS(this,{},{autoBind:!0})}get availableYears(){var t;return(t=this.annualData)==null?void 0:t.map(r=>r.year).sort((r,n)=>r-n)}get thresholds(){if(this.stats){const t=this.stats.mean+this.range[0]*this.stats.st_dev,r=this.stats.mean+this.range[1]*this.stats.st_dev;return[...new Set(VU(t,r,this.stats.st_dev/2).map(s=>Math.round(s)))]}else return[]}get city(){var t;return(t=this.selected)==null?void 0:t.URAU_NAME}get country(){var t;return(t=this.selected)==null?void 0:t.CNTR_CODE}get json(){return JSON.stringify({range:this.range,year:this.year,selectedUrau:this.selected})}get data(){return this.annualData.find(r=>r.year===this.year)}get stats(){var t;return(t=this.data)==null?void 0:t.stats}get url(){var t;return(t=this.data)==null?void 0:t.url}}class mW{constructor(t){tr(this,"mapLoaded",!1);tr(this,"showAbout",!1);tr(this,"showControls",!1);tr(this,"showStyleMenu",!1);tr(this,"absoluteReference",!1);tr(this,"colorScheme","light");tr(this,"setMapLoaded",t=>{this.mapLoaded=t});tr(this,"toggleShowAbout",()=>{this.showAbout=!this.showAbout});tr(this,"toggleShowControls",()=>{this.showControls=!this.showControls});tr(this,"toggleShowStyleMenu",()=>{this.showStyleMenu=!this.showStyleMenu});tr(this,"setShowControls",t=>{this.showControls=t});tr(this,"setAbsoluteReference",t=>{this.absoluteReference=t});tr(this,"toggleColorScheme",()=>{this.colorScheme=this.colorScheme==="dark"?"light":"dark"});this.root=t,zS(this,{},{autoBind:!0})}get theme(){return{primaryColor:"default",colors:{default:["#ffefe5","#ffddce","#ffb99c","#fe9365","#fe7338","#fe5e1b","#fe540c","#e34400","#ca3b00","#b12f00"]},focusRing:"never"}}}const mR=new dW,gR=ue.createContext(mR),gW=({children:e})=>Q.jsx(gR.Provider,{value:mR,children:e}),to=()=>ue.useContext(gR);var yR={exports:{}},Ir={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ei=typeof Symbol=="function"&&Symbol.for,jS=ei?Symbol.for("react.element"):60103,$S=ei?Symbol.for("react.portal"):60106,V1=ei?Symbol.for("react.fragment"):60107,U1=ei?Symbol.for("react.strict_mode"):60108,Z1=ei?Symbol.for("react.profiler"):60114,H1=ei?Symbol.for("react.provider"):60109,W1=ei?Symbol.for("react.context"):60110,VS=ei?Symbol.for("react.async_mode"):60111,G1=ei?Symbol.for("react.concurrent_mode"):60111,q1=ei?Symbol.for("react.forward_ref"):60112,K1=ei?Symbol.for("react.suspense"):60113,yW=ei?Symbol.for("react.suspense_list"):60120,X1=ei?Symbol.for("react.memo"):60115,Y1=ei?Symbol.for("react.lazy"):60116,vW=ei?Symbol.for("react.block"):60121,_W=ei?Symbol.for("react.fundamental"):60117,xW=ei?Symbol.for("react.responder"):60118,bW=ei?Symbol.for("react.scope"):60119;function To(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jS:switch(e=e.type,e){case VS:case G1:case V1:case Z1:case U1:case K1:return e;default:switch(e=e&&e.$$typeof,e){case W1:case q1:case Y1:case X1:case H1:return e;default:return t}}case $S:return t}}}function vR(e){return To(e)===G1}Ir.AsyncMode=VS;Ir.ConcurrentMode=G1;Ir.ContextConsumer=W1;Ir.ContextProvider=H1;Ir.Element=jS;Ir.ForwardRef=q1;Ir.Fragment=V1;Ir.Lazy=Y1;Ir.Memo=X1;Ir.Portal=$S;Ir.Profiler=Z1;Ir.StrictMode=U1;Ir.Suspense=K1;Ir.isAsyncMode=function(e){return vR(e)||To(e)===VS};Ir.isConcurrentMode=vR;Ir.isContextConsumer=function(e){return To(e)===W1};Ir.isContextProvider=function(e){return To(e)===H1};Ir.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jS};Ir.isForwardRef=function(e){return To(e)===q1};Ir.isFragment=function(e){return To(e)===V1};Ir.isLazy=function(e){return To(e)===Y1};Ir.isMemo=function(e){return To(e)===X1};Ir.isPortal=function(e){return To(e)===$S};Ir.isProfiler=function(e){return To(e)===Z1};Ir.isStrictMode=function(e){return To(e)===U1};Ir.isSuspense=function(e){return To(e)===K1};Ir.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===V1||e===G1||e===Z1||e===U1||e===K1||e===yW||typeof e=="object"&&e!==null&&(e.$$typeof===Y1||e.$$typeof===X1||e.$$typeof===H1||e.$$typeof===W1||e.$$typeof===q1||e.$$typeof===_W||e.$$typeof===xW||e.$$typeof===bW||e.$$typeof===vW)};Ir.typeOf=To;yR.exports=Ir;var wW=yR.exports,US=wW,SW={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},EW={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},AW={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},_R={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ZS={};ZS[US.ForwardRef]=AW;ZS[US.Memo]=_R;function Q3(e){return US.isMemo(e)?_R:ZS[e.$$typeof]||SW}var CW=Object.defineProperty,PW=Object.getOwnPropertyNames,eC=Object.getOwnPropertySymbols,TW=Object.getOwnPropertyDescriptor,IW=Object.getPrototypeOf,tC=Object.prototype;function xR(e,t,r){if(typeof t!="string"){if(tC){var n=IW(t);n&&n!==tC&&xR(e,n,r)}var s=PW(t);eC&&(s=s.concat(eC(t)));for(var h=Q3(e),d=Q3(t),c=0;c<s.length;++c){var b=s[c];if(!EW[b]&&!(r&&r[b])&&!(d&&d[b])&&!(h&&h[b])){var E=TW(t,b);try{CW(e,b,E)}catch{}}}}return e}var MW=xR;const RW=um(MW);var bR={};Object.defineProperty(bR,"__esModule",{value:!0});bR.default=kW;function kW(e){return e.displayName||e.name||(typeof e=="string"&&e.length>0?e:"Unknown")}function vg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ny(){return Ny=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ny.apply(this,arguments)}function LW(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function yl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DW(e){var t=function(r){LW(n,r);function n(){for(var h,d=arguments.length,c=new Array(d),b=0;b<d;b++)c[b]=arguments[b];return h=r.call.apply(r,[this].concat(c))||this,vg(yl(yl(h)),"cachedTheme",void 0),vg(yl(yl(h)),"lastOuterTheme",void 0),vg(yl(yl(h)),"lastTheme",void 0),vg(yl(yl(h)),"renderProvider",function(E){var I=h.props.children;return ue.createElement(e.Provider,{value:h.getTheme(E)},I)}),h}var s=n.prototype;return s.getTheme=function(d){if(this.props.theme!==this.lastTheme||d!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=d,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var c=this.props.theme;this.cachedTheme=c(d)}else{var b=this.props.theme;this.cachedTheme=d?Ny({},d,b):b}return this.cachedTheme},s.render=function(){var d=this.props.children;return d?ue.createElement(e.Consumer,null,this.renderProvider):null},n}(ue.Component);return t}function OW(e){return function(r){var n=ue.forwardRef(function(s,h){return ue.createElement(e.Consumer,null,function(d){return ue.createElement(r,Ny({theme:d,ref:h},s))})});return RW(n,r),n}}function zW(e){var t=function(){var n=ue.useContext(e);return n};return t}function FW(e){return{context:e,withTheme:OW(e),useTheme:zW(e),ThemeProvider:DW(e)}}var wR=$.createContext();FW(wR);var rC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd=(typeof window>"u"?"undefined":rC(window))==="object"&&(typeof document>"u"?"undefined":rC(document))==="object"&&document.nodeType===9;function am(e){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},am(e)}function BW(e,t){if(am(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(am(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function NW(e){var t=BW(e,"string");return am(t)=="symbol"?t:t+""}function jW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NW(n.key),n)}}function HS(e,t,r){return t&&jW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function d2(e,t){return d2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},d2(e,t)}function SR(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d2(e,t)}function nC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var $W={}.constructor;function f2(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))return e.map(f2);if(e.constructor!==$W)return e;var t={};for(var r in e)t[r]=f2(e[r]);return t}function J1(e,t,r){e===void 0&&(e="unnamed");var n=r.jss,s=f2(t),h=n.plugins.onCreateRule(e,s,r);return h||(e[0],null)}var iC=function(t,r){for(var n="",s=0;s<t.length&&t[s]!=="!important";s++)n&&(n+=r),n+=t[s];return n},Hc=function(t){if(!Array.isArray(t))return t;var r="";if(Array.isArray(t[0]))for(var n=0;n<t.length&&t[n]!=="!important";n++)r&&(r+=", "),r+=iC(t[n]," ");else r=iC(t,", ");return t[t.length-1]==="!important"&&(r+=" !important"),r};function Ld(e){return e&&e.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function rp(e,t){for(var r="",n=0;n<t;n++)r+="  ";return r+e}function sm(e,t,r){r===void 0&&(r={});var n="";if(!t)return n;var s=r,h=s.indent,d=h===void 0?0:h,c=t.fallbacks;r.format===!1&&(d=-1/0);var b=Ld(r),E=b.linebreak,I=b.space;if(e&&d++,c)if(Array.isArray(c))for(var P=0;P<c.length;P++){var T=c[P];for(var O in T){var j=T[O];j!=null&&(n&&(n+=E),n+=rp(O+":"+I+Hc(j)+";",d))}}else for(var V in c){var re=c[V];re!=null&&(n&&(n+=E),n+=rp(V+":"+I+Hc(re)+";",d))}for(var W in t){var Z=t[W];Z!=null&&W!=="fallbacks"&&(n&&(n+=E),n+=rp(W+":"+I+Hc(Z)+";",d))}return!n&&!r.allowEmpty||!e?n:(d--,n&&(n=""+E+n+E),rp(""+e+I+"{"+n,d)+rp("}",d))}var VW=/([[\].#*$><+~=|^:(),"'`\s])/g,oC=typeof CSS<"u"&&CSS.escape,WS=function(e){return oC?oC(e):e.replace(VW,"\\$1")},ER=function(){function e(r,n,s){this.type="style",this.isProcessed=!1;var h=s.sheet,d=s.Renderer;this.key=r,this.options=s,this.style=n,h?this.renderer=h.renderer:d&&(this.renderer=new d)}var t=e.prototype;return t.prop=function(n,s,h){if(s===void 0)return this.style[n];var d=h?h.force:!1;if(!d&&this.style[n]===s)return this;var c=s;(!h||h.process!==!1)&&(c=this.options.jss.plugins.onChangeValue(s,n,this));var b=c==null||c===!1,E=n in this.style;if(b&&!E&&!d)return this;var I=b&&E;if(I?delete this.style[n]:this.style[n]=c,this.renderable&&this.renderer)return I?this.renderer.removeProperty(this.renderable,n):this.renderer.setProperty(this.renderable,n,c),this;var P=this.options.sheet;return P&&P.attached,this},e}(),p2=function(e){SR(t,e);function t(n,s,h){var d;d=e.call(this,n,s,h)||this;var c=h.selector,b=h.scoped,E=h.sheet,I=h.generateId;return c?d.selectorText=c:b!==!1&&(d.id=I(nC(nC(d)),E),d.selectorText="."+WS(d.id)),d}var r=t.prototype;return r.applyTo=function(s){var h=this.renderer;if(h){var d=this.toJSON();for(var c in d)h.setProperty(s,c,d[c])}return this},r.toJSON=function(){var s={};for(var h in this.style){var d=this.style[h];typeof d!="object"?s[h]=d:Array.isArray(d)&&(s[h]=Hc(d))}return s},r.toString=function(s){var h=this.options.sheet,d=h?h.options.link:!1,c=d?an({},s,{allowEmpty:!0}):s;return sm(this.selectorText,this.style,c)},HS(t,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var h=this.renderer,d=this.renderable;if(!(!d||!h)){var c=h.setSelector(d,s);c||h.replaceRule(d,this)}}},get:function(){return this.selectorText}}]),t}(ER),UW={onCreateRule:function(t,r,n){return t[0]==="@"||n.parent&&n.parent.type==="keyframes"?null:new p2(t,r,n)}},ux={indent:1,children:!0},ZW=/@([\w-]+)/,HW=function(){function e(r,n,s){this.type="conditional",this.isProcessed=!1,this.key=r;var h=r.match(ZW);this.at=h?h[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new Q1(an({},s,{parent:this}));for(var d in n)this.rules.add(d,n[d]);this.rules.process()}var t=e.prototype;return t.getRule=function(n){return this.rules.get(n)},t.indexOf=function(n){return this.rules.indexOf(n)},t.addRule=function(n,s,h){var d=this.rules.add(n,s,h);return d?(this.options.jss.plugins.onProcessRule(d),d):null},t.replaceRule=function(n,s,h){var d=this.rules.replace(n,s,h);return d&&this.options.jss.plugins.onProcessRule(d),d},t.toString=function(n){n===void 0&&(n=ux);var s=Ld(n),h=s.linebreak;if(n.indent==null&&(n.indent=ux.indent),n.children==null&&(n.children=ux.children),n.children===!1)return this.query+" {}";var d=this.rules.toString(n);return d?this.query+" {"+h+d+h+"}":""},e}(),WW=/@container|@media|@supports\s+/,GW={onCreateRule:function(t,r,n){return WW.test(t)?new HW(t,r,n):null}},hx={indent:1,children:!0},qW=/@keyframes\s+([\w-]+)/,m2=function(){function e(r,n,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var h=r.match(qW);h&&h[1]?this.name=h[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var d=s.scoped,c=s.sheet,b=s.generateId;this.id=d===!1?this.name:WS(b(this,c)),this.rules=new Q1(an({},s,{parent:this}));for(var E in n)this.rules.add(E,n[E],an({},s,{parent:this}));this.rules.process()}var t=e.prototype;return t.toString=function(n){n===void 0&&(n=hx);var s=Ld(n),h=s.linebreak;if(n.indent==null&&(n.indent=hx.indent),n.children==null&&(n.children=hx.children),n.children===!1)return this.at+" "+this.id+" {}";var d=this.rules.toString(n);return d&&(d=""+h+d+h),this.at+" "+this.id+" {"+d+"}"},e}(),KW=/@keyframes\s+/,XW=/\$([\w-]+)/g,g2=function(t,r){return typeof t=="string"?t.replace(XW,function(n,s){return s in r?r[s]:n}):t},aC=function(t,r,n){var s=t[r],h=g2(s,n);h!==s&&(t[r]=h)},YW={onCreateRule:function(t,r,n){return typeof t=="string"&&KW.test(t)?new m2(t,r,n):null},onProcessStyle:function(t,r,n){return r.type!=="style"||!n||("animation-name"in t&&aC(t,"animation-name",n.keyframes),"animation"in t&&aC(t,"animation",n.keyframes)),t},onChangeValue:function(t,r,n){var s=n.options.sheet;if(!s)return t;switch(r){case"animation":return g2(t,s.keyframes);case"animation-name":return g2(t,s.keyframes);default:return t}}},JW=function(e){SR(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.toString=function(s){var h=this.options.sheet,d=h?h.options.link:!1,c=d?an({},s,{allowEmpty:!0}):s;return sm(this.key,this.style,c)},t}(ER),QW={onCreateRule:function(t,r,n){return n.parent&&n.parent.type==="keyframes"?new JW(t,r,n):null}},eG=function(){function e(r,n,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=r,this.style=n,this.options=s}var t=e.prototype;return t.toString=function(n){var s=Ld(n),h=s.linebreak;if(Array.isArray(this.style)){for(var d="",c=0;c<this.style.length;c++)d+=sm(this.at,this.style[c]),this.style[c+1]&&(d+=h);return d}return sm(this.at,this.style,n)},e}(),tG=/@font-face/,rG={onCreateRule:function(t,r,n){return tG.test(t)?new eG(t,r,n):null}},nG=function(){function e(r,n,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=r,this.style=n,this.options=s}var t=e.prototype;return t.toString=function(n){return sm(this.key,this.style,n)},e}(),iG={onCreateRule:function(t,r,n){return t==="@viewport"||t==="@-ms-viewport"?new nG(t,r,n):null}},oG=function(){function e(r,n,s){this.type="simple",this.isProcessed=!1,this.key=r,this.value=n,this.options=s}var t=e.prototype;return t.toString=function(n){if(Array.isArray(this.value)){for(var s="",h=0;h<this.value.length;h++)s+=this.key+" "+this.value[h]+";",this.value[h+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},e}(),aG={"@charset":!0,"@import":!0,"@namespace":!0},sG={onCreateRule:function(t,r,n){return t in aG?new oG(t,r,n):null}},sC=[UW,GW,YW,QW,rG,iG,sG],lG={process:!0},lC={force:!0,process:!0},Q1=function(){function e(r){this.map={},this.raw={},this.index=[],this.counter=0,this.options=r,this.classes=r.classes,this.keyframes=r.keyframes}var t=e.prototype;return t.add=function(n,s,h){var d=this.options,c=d.parent,b=d.sheet,E=d.jss,I=d.Renderer,P=d.generateId,T=d.scoped,O=an({classes:this.classes,parent:c,sheet:b,jss:E,Renderer:I,generateId:P,scoped:T,name:n,keyframes:this.keyframes,selector:void 0},h),j=n;n in this.raw&&(j=n+"-d"+this.counter++),this.raw[j]=s,j in this.classes&&(O.selector="."+WS(this.classes[j]));var V=J1(j,s,O);if(!V)return null;this.register(V);var re=O.index===void 0?this.index.length:O.index;return this.index.splice(re,0,V),V},t.replace=function(n,s,h){var d=this.get(n),c=this.index.indexOf(d);d&&this.remove(d);var b=h;return c!==-1&&(b=an({},h,{index:c})),this.add(n,s,b)},t.get=function(n){return this.map[n]},t.remove=function(n){this.unregister(n),delete this.raw[n.key],this.index.splice(this.index.indexOf(n),1)},t.indexOf=function(n){return this.index.indexOf(n)},t.process=function(){var n=this.options.jss.plugins;this.index.slice(0).forEach(n.onProcessRule,n)},t.register=function(n){this.map[n.key]=n,n instanceof p2?(this.map[n.selector]=n,n.id&&(this.classes[n.key]=n.id)):n instanceof m2&&this.keyframes&&(this.keyframes[n.name]=n.id)},t.unregister=function(n){delete this.map[n.key],n instanceof p2?(delete this.map[n.selector],delete this.classes[n.key]):n instanceof m2&&delete this.keyframes[n.name]},t.update=function(){var n,s,h;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(n=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],h=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],h=arguments.length<=1?void 0:arguments[1],n=null),n)this.updateOne(this.get(n),s,h);else for(var d=0;d<this.index.length;d++)this.updateOne(this.index[d],s,h)},t.updateOne=function(n,s,h){h===void 0&&(h=lG);var d=this.options,c=d.jss.plugins,b=d.sheet;if(n.rules instanceof e){n.rules.update(s,h);return}var E=n.style;if(c.onUpdate(s,n,b,h),h.process&&E&&E!==n.style){c.onProcessStyle(n.style,n,b);for(var I in n.style){var P=n.style[I],T=E[I];P!==T&&n.prop(I,P,lC)}for(var O in E){var j=n.style[O],V=E[O];j==null&&j!==V&&n.prop(O,null,lC)}}},t.toString=function(n){for(var s="",h=this.options.sheet,d=h?h.options.link:!1,c=Ld(n),b=c.linebreak,E=0;E<this.index.length;E++){var I=this.index[E],P=I.toString(n);!P&&!d||(s&&(s+=b),s+=P)}return s},e}(),AR=function(){function e(r,n){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=an({},n,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),n.Renderer&&(this.renderer=new n.Renderer(this)),this.rules=new Q1(this.options);for(var s in r)this.rules.add(s,r[s]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(n,s,h){var d=this.queue;this.attached&&!d&&(this.queue=[]);var c=this.rules.add(n,s,h);return c?(this.options.jss.plugins.onProcessRule(c),this.attached?(this.deployed&&(d?d.push(c):(this.insertRule(c),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),c):(this.deployed=!1,c)):null},t.replaceRule=function(n,s,h){var d=this.rules.get(n);if(!d)return this.addRule(n,s,h);var c=this.rules.replace(n,s,h);return c&&this.options.jss.plugins.onProcessRule(c),this.attached?(this.deployed&&this.renderer&&(c?d.renderable&&this.renderer.replaceRule(d.renderable,c):this.renderer.deleteRule(d)),c):(this.deployed=!1,c)},t.insertRule=function(n){this.renderer&&this.renderer.insertRule(n)},t.addRules=function(n,s){var h=[];for(var d in n){var c=this.addRule(d,n[d],s);c&&h.push(c)}return h},t.getRule=function(n){return this.rules.get(n)},t.deleteRule=function(n){var s=typeof n=="object"?n:this.rules.get(n);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},t.indexOf=function(n){return this.rules.indexOf(n)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var n;return(n=this.rules).update.apply(n,arguments),this},t.updateOne=function(n,s,h){return this.rules.updateOne(n,s,h),this},t.toString=function(n){return this.rules.toString(n)},e}(),cG=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(n,s,h){for(var d=0;d<this.registry.onCreateRule.length;d++){var c=this.registry.onCreateRule[d](n,s,h);if(c)return c}return null},t.onProcessRule=function(n){if(!n.isProcessed){for(var s=n.options.sheet,h=0;h<this.registry.onProcessRule.length;h++)this.registry.onProcessRule[h](n,s);n.style&&this.onProcessStyle(n.style,n,s),n.isProcessed=!0}},t.onProcessStyle=function(n,s,h){for(var d=0;d<this.registry.onProcessStyle.length;d++)s.style=this.registry.onProcessStyle[d](s.style,s,h)},t.onProcessSheet=function(n){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](n)},t.onUpdate=function(n,s,h,d){for(var c=0;c<this.registry.onUpdate.length;c++)this.registry.onUpdate[c](n,s,h,d)},t.onChangeValue=function(n,s,h){for(var d=n,c=0;c<this.registry.onChangeValue.length;c++)d=this.registry.onChangeValue[c](d,s,h);return d},t.use=function(n,s){s===void 0&&(s={queue:"external"});var h=this.plugins[s.queue];h.indexOf(n)===-1&&(h.push(n),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(d,c){for(var b in c)b in d&&d[b].push(c[b]);return d},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),uG=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(n){var s=this.registry,h=n.options.index;if(s.indexOf(n)===-1){if(s.length===0||h>=this.index){s.push(n);return}for(var d=0;d<s.length;d++)if(s[d].options.index>h){s.splice(d,0,n);return}}},t.reset=function(){this.registry=[]},t.remove=function(n){var s=this.registry.indexOf(n);this.registry.splice(s,1)},t.toString=function(n){for(var s=n===void 0?{}:n,h=s.attached,d=Q5(s,["attached"]),c=Ld(d),b=c.linebreak,E="",I=0;I<this.registry.length;I++){var P=this.registry[I];h!=null&&P.attached!==h||(E&&(E+=b),E+=P.toString(d))}return E},HS(e,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),e}(),Ip=new uG,y2=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),v2="2f1acc6c3a606b082e5eef5e54414ffb";y2[v2]==null&&(y2[v2]=0);var cC=y2[v2]++,uC=function(t){t===void 0&&(t={});var r=0,n=function(h,d){r+=1;var c="",b="";return d&&(d.options.classNamePrefix&&(b=d.options.classNamePrefix),d.options.jss.id!=null&&(c=String(d.options.jss.id))),t.minify?""+(b||"c")+cC+c+r:b+h.key+"-"+cC+(c?"-"+c:"")+"-"+r};return n},CR=function(t){var r;return function(){return r||(r=t()),r}},hG=function(t,r){try{return t.attributeStyleMap?t.attributeStyleMap.get(r):t.style.getPropertyValue(r)}catch{return""}},dG=function(t,r,n){try{var s=n;if(Array.isArray(n)&&(s=Hc(n)),t.attributeStyleMap)t.attributeStyleMap.set(r,s);else{var h=s?s.indexOf("!important"):-1,d=h>-1?s.substr(0,h-1):s;t.style.setProperty(r,d,h>-1?"important":"")}}catch{return!1}return!0},fG=function(t,r){try{t.attributeStyleMap?t.attributeStyleMap.delete(r):t.style.removeProperty(r)}catch{}},pG=function(t,r){return t.selectorText=r,t.selectorText===r},PR=CR(function(){return document.querySelector("head")});function mG(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.attached&&n.options.index>t.index&&n.options.insertionPoint===t.insertionPoint)return n}return null}function gG(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.attached&&n.options.insertionPoint===t.insertionPoint)return n}return null}function yG(e){for(var t=PR(),r=0;r<t.childNodes.length;r++){var n=t.childNodes[r];if(n.nodeType===8&&n.nodeValue.trim()===e)return n}return null}function vG(e){var t=Ip.registry;if(t.length>0){var r=mG(t,e);if(r&&r.renderer)return{parent:r.renderer.element.parentNode,node:r.renderer.element};if(r=gG(t,e),r&&r.renderer)return{parent:r.renderer.element.parentNode,node:r.renderer.element.nextSibling}}var n=e.insertionPoint;if(n&&typeof n=="string"){var s=yG(n);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function _G(e,t){var r=t.insertionPoint,n=vG(t);if(n!==!1&&n.parent){n.parent.insertBefore(e,n.node);return}if(r&&typeof r.nodeType=="number"){var s=r,h=s.parentNode;h&&h.insertBefore(e,s.nextSibling);return}PR().appendChild(e)}var xG=CR(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),hC=function(t,r,n){try{"insertRule"in t?t.insertRule(r,n):"appendRule"in t&&t.appendRule(r)}catch{return!1}return t.cssRules[n]},dC=function(t,r){var n=t.cssRules.length;return r===void 0||r>n?n:r},bG=function(){var t=document.createElement("style");return t.textContent=`
`,t},wG=function(){function e(r){this.getPropertyValue=hG,this.setProperty=dG,this.removeProperty=fG,this.setSelector=pG,this.hasInsertedRules=!1,this.cssRules=[],r&&Ip.add(r),this.sheet=r;var n=this.sheet?this.sheet.options:{},s=n.media,h=n.meta,d=n.element;this.element=d||bG(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),h&&this.element.setAttribute("data-meta",h);var c=xG();c&&this.element.setAttribute("nonce",c)}var t=e.prototype;return t.attach=function(){if(!(this.element.parentNode||!this.sheet)){_G(this.element,this.sheet.options);var n=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&n&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var n=this.element.parentNode;n&&n.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},t.deploy=function(){var n=this.sheet;if(n){if(n.options.link){this.insertRules(n.rules);return}this.element.textContent=`
`+n.toString()+`
`}},t.insertRules=function(n,s){for(var h=0;h<n.index.length;h++)this.insertRule(n.index[h],h,s)},t.insertRule=function(n,s,h){if(h===void 0&&(h=this.element.sheet),n.rules){var d=n,c=h;if(n.type==="conditional"||n.type==="keyframes"){var b=dC(h,s);if(c=hC(h,d.toString({children:!1}),b),c===!1)return!1;this.refCssRule(n,b,c)}return this.insertRules(d.rules,c),c}var E=n.toString();if(!E)return!1;var I=dC(h,s),P=hC(h,E,I);return P===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(n,I,P),P)},t.refCssRule=function(n,s,h){n.renderable=h,n.options.parent instanceof AR&&this.cssRules.splice(s,0,h)},t.deleteRule=function(n){var s=this.element.sheet,h=this.indexOf(n);return h===-1?!1:(s.deleteRule(h),this.cssRules.splice(h,1),!0)},t.indexOf=function(n){return this.cssRules.indexOf(n)},t.replaceRule=function(n,s){var h=this.indexOf(n);return h===-1?!1:(this.element.sheet.deleteRule(h),this.cssRules.splice(h,1),this.insertRule(s,h))},t.getRules=function(){return this.element.sheet.cssRules},e}(),SG=0,EG=function(){function e(r){this.id=SG++,this.version="10.10.0",this.plugins=new cG,this.options={id:{minify:!1},createGenerateId:uC,Renderer:kd?wG:null,plugins:[]},this.generateId=uC({minify:!1});for(var n=0;n<sC.length;n++)this.plugins.use(sC[n],{queue:"internal"});this.setup(r)}var t=e.prototype;return t.setup=function(n){return n===void 0&&(n={}),n.createGenerateId&&(this.options.createGenerateId=n.createGenerateId),n.id&&(this.options.id=an({},this.options.id,n.id)),(n.createGenerateId||n.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),n.insertionPoint!=null&&(this.options.insertionPoint=n.insertionPoint),"Renderer"in n&&(this.options.Renderer=n.Renderer),n.plugins&&this.use.apply(this,n.plugins),this},t.createStyleSheet=function(n,s){s===void 0&&(s={});var h=s,d=h.index;typeof d!="number"&&(d=Ip.index===0?0:Ip.index+1);var c=new AR(n,an({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:d}));return this.plugins.onProcessSheet(c),c},t.removeStyleSheet=function(n){return n.detach(),Ip.remove(n),this},t.createRule=function(n,s,h){if(s===void 0&&(s={}),h===void 0&&(h={}),typeof n=="object")return this.createRule(void 0,n,s);var d=an({},h,{name:n,jss:this,Renderer:this.options.Renderer});d.generateId||(d.generateId=this.generateId),d.classes||(d.classes={}),d.keyframes||(d.keyframes={});var c=J1(n,s,d);return c&&this.plugins.onProcessRule(c),c},t.use=function(){for(var n=this,s=arguments.length,h=new Array(s),d=0;d<s;d++)h[d]=arguments[d];return h.forEach(function(c){n.plugins.use(c)}),this},e}(),TR=function(t){return new EG(t)},fC=function(){function e(){this.length=0,this.sheets=new WeakMap}var t=e.prototype;return t.get=function(n){var s=this.sheets.get(n);return s&&s.sheet},t.add=function(n,s){this.sheets.has(n)||(this.length++,this.sheets.set(n,{sheet:s,refs:0}))},t.manage=function(n){var s=this.sheets.get(n);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},t.unmanage=function(n){var s=this.sheets.get(n);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},HS(e,[{key:"size",get:function(){return this.length}}]),e}(),GS=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function IR(e){var t=null;for(var r in e){var n=e[r],s=typeof n;if(s==="function")t||(t={}),t[r]=n;else if(s==="object"&&n!==null&&!Array.isArray(n)){var h=IR(n);h&&(t||(t={}),t[r]=h)}}return t}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */TR();var MR=Date.now(),dx="fnValues"+MR,fx="fnStyle"+ ++MR,AG=function(){return{onCreateRule:function(r,n,s){if(typeof n!="function")return null;var h=J1(r,{},s);return h[fx]=n,h},onProcessStyle:function(r,n){if(dx in n||fx in n)return r;var s={};for(var h in r){var d=r[h];typeof d=="function"&&(delete r[h],s[h]=d)}return n[dx]=s,r},onUpdate:function(r,n,s,h){var d=n,c=d[fx];c&&(d.style=c(r)||{});var b=d[dx];if(b)for(var E in b)d.prop(E,b[E](r),h)}}};function CG(e){var t,r=e.Symbol;return typeof r=="function"?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}var wh;typeof self<"u"?wh=self:typeof window<"u"?wh=window:typeof global<"u"?wh=global:typeof module<"u"?wh=module:wh=Function("return this")();var pC=CG(wh),mC=function(t){return t&&t[pC]&&t===t[pC]()},PG=function(t){return{onCreateRule:function(n,s,h){if(!mC(s))return null;var d=s,c=J1(n,{},h);return d.subscribe(function(b){for(var E in b)c.prop(E,b[E],t)}),c},onProcessRule:function(n){if(!(n&&n.type!=="style")){var s=n,h=s.style,d=function(I){var P=h[I];if(!mC(P))return"continue";delete h[I],P.subscribe({next:function(O){s.prop(I,O,t)}})};for(var c in h)var b=d(c)}}}},TG=/;\n/,IG=function(t){for(var r={},n=t.split(TG),s=0;s<n.length;s++){var h=(n[s]||"").trim();if(h){var d=h.indexOf(":");if(d!==-1){var c=h.substr(0,d).trim(),b=h.substr(d+1).trim();r[c]=b}}}return r},MG=function(t){typeof t.style=="string"&&(t.style=IG(t.style))};function RG(){return{onProcessRule:MG}}var Fl="@global",_2="@global ",kG=function(){function e(r,n,s){this.type="global",this.at=Fl,this.isProcessed=!1,this.key=r,this.options=s,this.rules=new Q1(an({},s,{parent:this}));for(var h in n)this.rules.add(h,n[h]);this.rules.process()}var t=e.prototype;return t.getRule=function(n){return this.rules.get(n)},t.addRule=function(n,s,h){var d=this.rules.add(n,s,h);return d&&this.options.jss.plugins.onProcessRule(d),d},t.replaceRule=function(n,s,h){var d=this.rules.replace(n,s,h);return d&&this.options.jss.plugins.onProcessRule(d),d},t.indexOf=function(n){return this.rules.indexOf(n)},t.toString=function(n){return this.rules.toString(n)},e}(),LG=function(){function e(r,n,s){this.type="global",this.at=Fl,this.isProcessed=!1,this.key=r,this.options=s;var h=r.substr(_2.length);this.rule=s.jss.createRule(h,n,an({},s,{parent:this}))}var t=e.prototype;return t.toString=function(n){return this.rule?this.rule.toString(n):""},e}(),DG=/\s*,\s*/g;function RR(e,t){for(var r=e.split(DG),n="",s=0;s<r.length;s++)n+=t+" "+r[s].trim(),r[s+1]&&(n+=", ");return n}function OG(e,t){var r=e.options,n=e.style,s=n?n[Fl]:null;if(s){for(var h in s)t.addRule(h,s[h],an({},r,{selector:RR(h,e.selector)}));delete n[Fl]}}function zG(e,t){var r=e.options,n=e.style;for(var s in n)if(!(s[0]!=="@"||s.substr(0,Fl.length)!==Fl)){var h=RR(s.substr(Fl.length),e.selector);t.addRule(h,n[s],an({},r,{selector:h})),delete n[s]}}function FG(){function e(r,n,s){if(!r)return null;if(r===Fl)return new kG(r,n,s);if(r[0]==="@"&&r.substr(0,_2.length)===_2)return new LG(r,n,s);var h=s.parent;return h&&(h.type==="global"||h.options.parent&&h.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=r),null}function t(r,n){r.type!=="style"||!n||(OG(r,n),zG(r,n))}return{onCreateRule:e,onProcessRule:t}}var Zg=function(t){return t&&typeof t=="object"&&!Array.isArray(t)},px="extendCurrValue"+Date.now();function BG(e,t,r,n){var s=typeof e.extend;if(s==="string"){if(!r)return;var h=r.getRule(e.extend);if(!h||h===t)return;var d=h.options.parent;if(d){var c=d.rules.raw[e.extend];Nc(c,t,r,n)}return}if(Array.isArray(e.extend)){for(var b=0;b<e.extend.length;b++){var E=e.extend[b],I=typeof E=="string"?an({},e,{extend:E}):e.extend[b];Nc(I,t,r,n)}return}for(var P in e.extend){if(P==="extend"){Nc(e.extend.extend,t,r,n);continue}if(Zg(e.extend[P])){P in n||(n[P]={}),Nc(e.extend[P],t,r,n[P]);continue}n[P]=e.extend[P]}}function NG(e,t,r,n){for(var s in e)if(s!=="extend"){if(Zg(n[s])&&Zg(e[s])){Nc(e[s],t,r,n[s]);continue}if(Zg(e[s])){n[s]=Nc(e[s],t,r);continue}n[s]=e[s]}}function Nc(e,t,r,n){return n===void 0&&(n={}),BG(e,t,r,n),NG(e,t,r,n),n}function jG(){function e(r,n,s){return"extend"in r?Nc(r,n,s):r}function t(r,n,s){if(n!=="extend")return r;if(r==null||r===!1){for(var h in s[px])s.prop(h,null);return s[px]=null,null}if(typeof r=="object"){for(var d in r)s.prop(d,r[d]);s[px]=r}return null}return{onProcessStyle:e,onChangeValue:t}}var gC=/\s*,\s*/g,$G=/&/g,VG=/\$([\w-]+)/g;function UG(){function e(s,h){return function(d,c){var b=s.getRule(c)||h&&h.getRule(c);return b?b.selector:c}}function t(s,h){for(var d=h.split(gC),c=s.split(gC),b="",E=0;E<d.length;E++)for(var I=d[E],P=0;P<c.length;P++){var T=c[P];b&&(b+=", "),b+=T.indexOf("&")!==-1?T.replace($G,I):I+" "+T}return b}function r(s,h,d){if(d)return an({},d,{index:d.index+1});var c=s.options.nestingLevel;c=c===void 0?1:c+1;var b=an({},s.options,{nestingLevel:c,index:h.indexOf(s)+1});return delete b.name,b}function n(s,h,d){if(h.type!=="style")return s;var c=h,b=c.options.parent,E,I;for(var P in s){var T=P.indexOf("&")!==-1,O=P[0]==="@";if(!(!T&&!O)){if(E=r(c,b,E),T){var j=t(P,c.selector);I||(I=e(b,d)),j=j.replace(VG,I);var V=c.key+"-"+P;"replaceRule"in b?b.replaceRule(V,s[P],an({},E,{selector:j})):b.addRule(V,s[P],an({},E,{selector:j}))}else O&&b.addRule(P,{},E).addRule(c.key,s[P],{selector:c.selector});delete s[P]}}return s}return{onProcessStyle:n}}function x2(e,t){if(!t)return!0;if(Array.isArray(t)){for(var r=0;r<t.length;r++){var n=x2(e,t[r]);if(!n)return!1}return!0}if(t.indexOf(" ")>-1)return x2(e,t.split(" "));var s=e.options.parent;if(t[0]==="$"){var h=s.getRule(t.substr(1));return!h||h===e?!1:(s.classes[e.key]+=" "+s.classes[h.key],!0)}return s.classes[e.key]+=" "+t,!0}function ZG(){function e(t,r){return"composes"in t&&(x2(r,t.composes),delete t.composes),t}return{onProcessStyle:e}}var HG=/[A-Z]/g,WG=/^ms-/,mx={};function GG(e){return"-"+e.toLowerCase()}function kR(e){if(mx.hasOwnProperty(e))return mx[e];var t=e.replace(HG,GG);return mx[e]=WG.test(t)?"-"+t:t}function jy(e){var t={};for(var r in e){var n=r.indexOf("--")===0?r:kR(r);t[n]=e[r]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(jy):t.fallbacks=jy(e.fallbacks)),t}function qG(){function e(r){if(Array.isArray(r)){for(var n=0;n<r.length;n++)r[n]=jy(r[n]);return r}return jy(r)}function t(r,n,s){if(n.indexOf("--")===0)return r;var h=kR(n);return n===h?r:(s.prop(h,r),null)}return{onProcessStyle:e,onChangeValue:t}}var Ue=GS&&CSS?CSS.px:"px",_g=GS&&CSS?CSS.ms:"ms",yh=GS&&CSS?CSS.percent:"%",KG={"animation-delay":_g,"animation-duration":_g,"background-position":Ue,"background-position-x":Ue,"background-position-y":Ue,"background-size":Ue,border:Ue,"border-bottom":Ue,"border-bottom-left-radius":Ue,"border-bottom-right-radius":Ue,"border-bottom-width":Ue,"border-left":Ue,"border-left-width":Ue,"border-radius":Ue,"border-right":Ue,"border-right-width":Ue,"border-top":Ue,"border-top-left-radius":Ue,"border-top-right-radius":Ue,"border-top-width":Ue,"border-width":Ue,"border-block":Ue,"border-block-end":Ue,"border-block-end-width":Ue,"border-block-start":Ue,"border-block-start-width":Ue,"border-block-width":Ue,"border-inline":Ue,"border-inline-end":Ue,"border-inline-end-width":Ue,"border-inline-start":Ue,"border-inline-start-width":Ue,"border-inline-width":Ue,"border-start-start-radius":Ue,"border-start-end-radius":Ue,"border-end-start-radius":Ue,"border-end-end-radius":Ue,margin:Ue,"margin-bottom":Ue,"margin-left":Ue,"margin-right":Ue,"margin-top":Ue,"margin-block":Ue,"margin-block-end":Ue,"margin-block-start":Ue,"margin-inline":Ue,"margin-inline-end":Ue,"margin-inline-start":Ue,padding:Ue,"padding-bottom":Ue,"padding-left":Ue,"padding-right":Ue,"padding-top":Ue,"padding-block":Ue,"padding-block-end":Ue,"padding-block-start":Ue,"padding-inline":Ue,"padding-inline-end":Ue,"padding-inline-start":Ue,"mask-position-x":Ue,"mask-position-y":Ue,"mask-size":Ue,height:Ue,width:Ue,"min-height":Ue,"max-height":Ue,"min-width":Ue,"max-width":Ue,bottom:Ue,left:Ue,top:Ue,right:Ue,inset:Ue,"inset-block":Ue,"inset-block-end":Ue,"inset-block-start":Ue,"inset-inline":Ue,"inset-inline-end":Ue,"inset-inline-start":Ue,"box-shadow":Ue,"text-shadow":Ue,"column-gap":Ue,"column-rule":Ue,"column-rule-width":Ue,"column-width":Ue,"font-size":Ue,"font-size-delta":Ue,"letter-spacing":Ue,"text-decoration-thickness":Ue,"text-indent":Ue,"text-stroke":Ue,"text-stroke-width":Ue,"word-spacing":Ue,motion:Ue,"motion-offset":Ue,outline:Ue,"outline-offset":Ue,"outline-width":Ue,perspective:Ue,"perspective-origin-x":yh,"perspective-origin-y":yh,"transform-origin":yh,"transform-origin-x":yh,"transform-origin-y":yh,"transform-origin-z":yh,"transition-delay":_g,"transition-duration":_g,"vertical-align":Ue,"flex-basis":Ue,"shape-margin":Ue,size:Ue,gap:Ue,grid:Ue,"grid-gap":Ue,"row-gap":Ue,"grid-row-gap":Ue,"grid-column-gap":Ue,"grid-template-rows":Ue,"grid-template-columns":Ue,"grid-auto-rows":Ue,"grid-auto-columns":Ue,"box-shadow-x":Ue,"box-shadow-y":Ue,"box-shadow-blur":Ue,"box-shadow-spread":Ue,"font-line-height":Ue,"text-shadow-x":Ue,"text-shadow-y":Ue,"text-shadow-blur":Ue};function LR(e){var t=/(-[a-z])/g,r=function(d){return d[1].toUpperCase()},n={};for(var s in e)n[s]=e[s],n[s.replace(t,r)]=e[s];return n}var XG=LR(KG);function Mp(e,t,r){if(t==null)return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=Mp(e,t[n],r);else if(typeof t=="object")if(e==="fallbacks")for(var s in t)t[s]=Mp(s,t[s],r);else for(var h in t)t[h]=Mp(e+"-"+h,t[h],r);else if(typeof t=="number"&&isNaN(t)===!1){var d=r[e]||XG[e];return d&&!(t===0&&d===Ue)?typeof d=="function"?d(t).toString():""+t+d:t.toString()}return t}function YG(e){e===void 0&&(e={});var t=LR(e);function r(s,h){if(h.type!=="style")return s;for(var d in s)s[d]=Mp(d,s[d],t);return s}function n(s,h){return Mp(h,s,t)}return{onProcessStyle:r,onChangeValue:n}}var JG={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},QG={position:!0,size:!0},xg={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},gx={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function eq(e,t,r){return e.map(function(n){return OR(n,t,r,!1,!0)})}function DR(e,t,r,n){return r[t]==null?e:e.length===0?[]:Array.isArray(e[0])?DR(e[0],t,r,n):typeof e[0]=="object"?eq(e,t,n):[e]}function OR(e,t,r,n,s){if(!(xg[t]||gx[t]))return[];var h=[];if(gx[t]&&(e=tq(e,r,gx[t],n)),Object.keys(e).length)for(var d in xg[t]){if(e[d]){Array.isArray(e[d])?h.push(QG[d]===null?e[d]:e[d].join(" ")):h.push(e[d]);continue}xg[t][d]!=null&&h.push(xg[t][d])}return!h.length||s?h:[h]}function tq(e,t,r,n){for(var s in r){var h=r[s];if(typeof e[s]<"u"&&(n||!t.prop(h))){var d,c=lm((d={},d[h]=e[s],d),t)[h];n?t.style.fallbacks[h]=c:t.style[h]=c}delete e[s]}return e}function lm(e,t,r){for(var n in e){var s=e[n];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(n==="fallbacks"){for(var h=0;h<e.fallbacks.length;h++)e.fallbacks[h]=lm(e.fallbacks[h],t,!0);continue}e[n]=DR(s,n,JG,t),e[n].length||delete e[n]}}else if(typeof s=="object"){if(n==="fallbacks"){e.fallbacks=lm(e.fallbacks,t,!0);continue}e[n]=OR(s,n,t,r),e[n].length||delete e[n]}else e[n]===""&&delete e[n]}return e}function rq(){function e(t,r){if(!t||r.type!=="style")return t;if(Array.isArray(t)){for(var n=0;n<t.length;n++)t[n]=lm(t[n],r);return t}return lm(t,r)}return{onProcessStyle:e}}function b2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nq(e){if(Array.isArray(e))return b2(e)}function iq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oq(e,t){if(e){if(typeof e=="string")return b2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b2(e,t)}}function aq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sq(e){return nq(e)||iq(e)||oq(e)||aq()}var fp="",w2="",zR="",FR="",lq=kd&&"ontouchstart"in document.documentElement;if(kd){var yx={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},cq=document.createElement("p"),vx=cq.style,uq="Transform";for(var _x in yx)if(_x+uq in vx){fp=_x,w2=yx[_x];break}fp==="Webkit"&&"msHyphens"in vx&&(fp="ms",w2=yx.ms,FR="edge"),fp==="Webkit"&&"-apple-trailing-word"in vx&&(zR="apple")}var rr={js:fp,css:w2,vendor:zR,browser:FR,isTouch:lq};function hq(e){return e[1]==="-"||rr.js==="ms"?e:"@"+rr.css+"keyframes"+e.substr(10)}var dq={noPrefill:["appearance"],supportedProperty:function(t){return t!=="appearance"?!1:rr.js==="ms"?"-webkit-"+t:rr.css+t}},fq={noPrefill:["color-adjust"],supportedProperty:function(t){return t!=="color-adjust"?!1:rr.js==="Webkit"?rr.css+"print-"+t:t}},pq=/[-\s]+(.)?/g;function mq(e,t){return t?t.toUpperCase():""}function qS(e){return e.replace(pq,mq)}function Zl(e){return qS("-"+e)}var gq={noPrefill:["mask"],supportedProperty:function(t,r){if(!/^mask/.test(t))return!1;if(rr.js==="Webkit"){var n="mask-image";if(qS(n)in r)return t;if(rr.js+Zl(n)in r)return rr.css+t}return t}},yq={noPrefill:["text-orientation"],supportedProperty:function(t){return t!=="text-orientation"?!1:rr.vendor==="apple"&&!rr.isTouch?rr.css+t:t}},vq={noPrefill:["transform"],supportedProperty:function(t,r,n){return t!=="transform"?!1:n.transform?t:rr.css+t}},_q={noPrefill:["transition"],supportedProperty:function(t,r,n){return t!=="transition"?!1:n.transition?t:rr.css+t}},xq={noPrefill:["writing-mode"],supportedProperty:function(t){return t!=="writing-mode"?!1:rr.js==="Webkit"||rr.js==="ms"&&rr.browser!=="edge"?rr.css+t:t}},bq={noPrefill:["user-select"],supportedProperty:function(t){return t!=="user-select"?!1:rr.js==="Moz"||rr.js==="ms"||rr.vendor==="apple"?rr.css+t:t}},wq={supportedProperty:function(t,r){if(!/^break-/.test(t))return!1;if(rr.js==="Webkit"){var n="WebkitColumn"+Zl(t);return n in r?rr.css+"column-"+t:!1}if(rr.js==="Moz"){var s="page"+Zl(t);return s in r?"page-"+t:!1}return!1}},Sq={supportedProperty:function(t,r){if(!/^(border|margin|padding)-inline/.test(t))return!1;if(rr.js==="Moz")return t;var n=t.replace("-inline","");return rr.js+Zl(n)in r?rr.css+n:!1}},Eq={supportedProperty:function(t,r){return qS(t)in r?t:!1}},Aq={supportedProperty:function(t,r){var n=Zl(t);return t[0]==="-"||t[0]==="-"&&t[1]==="-"?t:rr.js+n in r?rr.css+t:rr.js!=="Webkit"&&"Webkit"+n in r?"-webkit-"+t:!1}},Cq={supportedProperty:function(t){return t.substring(0,11)!=="scroll-snap"?!1:rr.js==="ms"?""+rr.css+t:t}},Pq={supportedProperty:function(t){return t!=="overscroll-behavior"?!1:rr.js==="ms"?rr.css+"scroll-chaining":t}},Tq={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Iq={supportedProperty:function(t,r){var n=Tq[t];return n&&rr.js+Zl(n)in r?rr.css+n:!1}},BR={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Mq=Object.keys(BR),Rq=function(t){return rr.css+t},kq={supportedProperty:function(t,r,n){var s=n.multiple;if(Mq.indexOf(t)>-1){var h=BR[t];if(!Array.isArray(h))return rr.js+Zl(h)in r?rr.css+h:!1;if(!s)return!1;for(var d=0;d<h.length;d++)if(!(rr.js+Zl(h[0])in r))return!1;return h.map(Rq)}return!1}},NR=[dq,fq,gq,yq,vq,_q,xq,bq,wq,Sq,Eq,Aq,Cq,Pq,Iq,kq],yC=NR.filter(function(e){return e.supportedProperty}).map(function(e){return e.supportedProperty}),Lq=NR.filter(function(e){return e.noPrefill}).reduce(function(e,t){return e.push.apply(e,sq(t.noPrefill)),e},[]),pp,kc={};if(kd){pp=document.createElement("p");var xx=window.getComputedStyle(document.documentElement,"");for(var bx in xx)isNaN(bx)||(kc[xx[bx]]=xx[bx]);Lq.forEach(function(e){return delete kc[e]})}function S2(e,t){if(t===void 0&&(t={}),!pp)return e;if(kc[e]!=null)return kc[e];(e==="transition"||e==="transform")&&(t[e]=e in pp.style);for(var r=0;r<yC.length&&(kc[e]=yC[r](e,pp.style,t),!kc[e]);r++);try{pp.style[e]=""}catch{return!1}return kc[e]}var vh={},Dq={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Oq=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,_l;function zq(e,t,r){if(t==="var")return"var";if(t==="all")return"all";if(r==="all")return", all";var n=t?S2(t):", "+S2(r);return n||t||r}kd&&(_l=document.createElement("p"));function vC(e,t){var r=t;if(!_l||e==="content")return t;if(typeof r!="string"||!isNaN(parseInt(r,10)))return r;var n=e+r;if(vh[n]!=null)return vh[n];try{_l.style[e]=r}catch{return vh[n]=!1,!1}if(Dq[e])r=r.replace(Oq,zq);else if(_l.style[e]===""&&(r=rr.css+r,r==="-ms-flex"&&(_l.style[e]="-ms-flexbox"),_l.style[e]=r,_l.style[e]===""))return vh[n]=!1,!1;return _l.style[e]="",vh[n]=r,vh[n]}function Fq(){function e(s){if(s.type==="keyframes"){var h=s;h.at=hq(h.at)}}function t(s){for(var h in s){var d=s[h];if(h==="fallbacks"&&Array.isArray(d)){s[h]=d.map(t);continue}var c=!1,b=S2(h);b&&b!==h&&(c=!0);var E=!1,I=vC(b,Hc(d));I&&I!==d&&(E=!0),(c||E)&&(c&&delete s[h],s[b||h]=I||d)}return s}function r(s,h){return h.type!=="style"?s:t(s)}function n(s,h){return vC(h,Hc(s))||s}return{onProcessRule:e,onProcessStyle:r,onChangeValue:n}}function Bq(){var e=function(r,n){return r.length===n.length?r>n?1:-1:r.length-n.length};return{onProcessStyle:function(r,n){if(n.type!=="style")return r;for(var s={},h=Object.keys(r).sort(e),d=0;d<h.length;d++)s[h[d]]=r[h[d]];return s}}}var Nq=function(t){return t===void 0&&(t={}),{plugins:[AG(),PG(t.observable),RG(),FG(),jG(),UG(),ZG(),qG(),YG(t.defaultUnit),rq(),Fq(),Bq()]}},jq=Number.MIN_SAFE_INTEGER||-1e9,$q=function(){return jq++},Vq=$.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!kd}),_C=new Map,KS=function(t,r){var n=t.managers;if(n)return n[r]||(n[r]=new fC),n[r];var s=_C.get(r);return s||(s=new fC,_C.set(r,s)),s},xC=function(t){var r=t.sheet,n=t.context,s=t.index,h=t.theme;if(r){var d=KS(n,s);d.manage(h),n.registry&&n.registry.add(r)}},Uq=function(t){if(t.sheet){var r=KS(t.context,t.index);r.unmanage(t.theme)}},Zq=TR(Nq()),jR=new WeakMap,$R=function(t){return jR.get(t)},Hq=function(t,r){jR.set(t,r)},Wq=function(t){var r=t.styles;return typeof r!="function"?r:r(t.theme)};function Gq(e,t){var r;e.context.id&&e.context.id.minify!=null&&(r=e.context.id.minify);var n=e.context.classNamePrefix||"";e.name&&!r&&(n+=e.name.replace(/\s/g,"-")+"-");var s="";return e.name&&(s=e.name+", "),s+=typeof e.styles=="function"?"Themed":"Unthemed",an({},e.sheetOptions,{index:e.index,meta:s,classNamePrefix:n,link:t,generateId:e.sheetOptions&&e.sheetOptions.generateId?e.sheetOptions.generateId:e.context.generateId})}var qq=function(t){if(!t.context.disableStylesGeneration){var r=KS(t.context,t.index),n=r.get(t.theme);if(n)return n;var s=t.context.jss||Zq,h=Wq(t),d=IR(h),c=s.createStyleSheet(h,Gq(t,d!==null));return Hq(c,{dynamicStyles:d,styles:h}),r.add(t.theme,c),c}},Kq=function(t,r){for(var n in r)t.deleteRule(r[n])},Xq=function(t,r,n){for(var s in n)r.updateOne(n[s],t)},Yq=function(t,r){var n=$R(t);if(n){var s={};for(var h in n.dynamicStyles)for(var d=t.rules.index.length,c=t.addRule(h,n.dynamicStyles[h]),b=d;b<t.rules.index.length;b++){var E=t.rules.index[b];t.updateOne(E,r),s[c===E?h:E.key]=E}return s}},Jq=function(t,r){if(!r)return t.classes;var n=$R(t);if(!n)return t.classes;var s={};for(var h in n.styles)s[h]=t.classes[h],h in r&&(s[h]+=" "+t.classes[r[h].key]);return s};function bC(e){return e?$.useEffect:ue.useInsertionEffect||$.useLayoutEffect}var wx={},mi=function(t,r){r===void 0&&(r={});var n=r,s=n.index,h=s===void 0?$q():s,d=n.theming,c=n.name,b=Q5(n,["index","theming","name"]),E=d&&d.context||wR,I=function(O){return typeof t=="function"&&(O||$.useContext(E))||wx},P={};return function(O){var j=$.useRef(!0),V=$.useContext(Vq),re=I(O&&O.theme),W=$.useMemo(function(){var de=qq({context:V,styles:t,name:c,theme:re,index:h,sheetOptions:b});return de&&V.isSSR&&xC({index:h,context:V,sheet:de,theme:re}),[de,de?Yq(de,O):null]},[V,re]),Z=W[0],K=W[1];bC(V.isSSR)(function(){Z&&K&&!j.current&&Xq(O,Z,K)},[O]),bC(V.isSSR)(function(){return Z&&xC({index:h,context:V,sheet:Z,theme:re}),function(){Z&&(Uq({index:h,context:V,sheet:Z,theme:re}),K&&Kq(Z,K))}},[Z]);var ie=$.useMemo(function(){return Z&&K?Jq(Z,K):P},[Z,K]);return $.useDebugValue(ie),$.useDebugValue(re===wx?"No theme":re),$.useEffect(function(){j.current=!1}),ie}};if(!$.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!BH)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function Qq(e){e()}function eK(e){e||(e=Qq),MH({reactionScheduler:e})}function tK(e){return RH(e)}var rK=1e4,nK=1e4,iK=function(){function e(t){var r=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(n){n===void 0&&(n=rK),clearTimeout(r.sweepTimeout),r.sweepTimeout=void 0;var s=Date.now();r.registrations.forEach(function(h,d){s-h.registeredAt>=n&&(r.finalize(h.value),r.registrations.delete(d))}),r.registrations.size>0&&r.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n){this.registrations.set(n,{value:r,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,nK))}}),e}(),oK=typeof FinalizationRegistry<"u"?FinalizationRegistry:iK,cm=new oK(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),VR={exports:{}},UR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md=$;function aK(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sK=typeof Object.is=="function"?Object.is:aK,lK=md.useState,cK=md.useEffect,uK=md.useLayoutEffect,hK=md.useDebugValue;function dK(e,t){var r=t(),n=lK({inst:{value:r,getSnapshot:t}}),s=n[0].inst,h=n[1];return uK(function(){s.value=r,s.getSnapshot=t,Sx(s)&&h({inst:s})},[e,r,t]),cK(function(){return Sx(s)&&h({inst:s}),e(function(){Sx(s)&&h({inst:s})})},[e]),hK(r),r}function Sx(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sK(e,r)}catch{return!0}}function fK(e,t){return t()}var pK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fK:dK;UR.useSyncExternalStore=md.useSyncExternalStore!==void 0?md.useSyncExternalStore:pK;VR.exports=UR;var mK=VR.exports;function wC(e){e.reaction=new rm("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function gK(e,t){t===void 0&&(t="observed");var r=ue.useRef(null);if(!r.current){var n={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(c){return cm.unregister(n),n.onStoreChange=c,n.reaction||(wC(n),n.stateVersion=Symbol()),function(){var b;n.onStoreChange=null,(b=n.reaction)===null||b===void 0||b.dispose(),n.reaction=null}},getSnapshot:function(){return n.stateVersion}};r.current=n}var s=r.current;s.reaction||(wC(s),cm.register(r,s,s)),ue.useDebugValue(s.reaction,tK),mK.useSyncExternalStore(s.subscribe,s.getSnapshot,s.getSnapshot);var h,d;if(s.reaction.track(function(){try{h=e()}catch(c){d=c}}),d)throw d;return h}var Ex,Ax,ZR=typeof Symbol=="function"&&Symbol.for,yK=(Ax=(Ex=Object.getOwnPropertyDescriptor(function(){},"name"))===null||Ex===void 0?void 0:Ex.configurable)!==null&&Ax!==void 0?Ax:!1,SC=ZR?Symbol.for("react.forward_ref"):typeof $.forwardRef=="function"&&$.forwardRef(function(e){return null}).$$typeof,EC=ZR?Symbol.for("react.memo"):typeof $.memo=="function"&&$.memo(function(e){return null}).$$typeof;function vK(e,t){var r;if(EC&&e.$$typeof===EC)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var n=(r=void 0)!==null&&r!==void 0?r:!1,s=e,h=e.displayName||e.name;if(SC&&e.$$typeof===SC&&(n=!0,s=e.render,typeof s!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var d=function(c,b){return gK(function(){return s(c,b)},h)};return d.displayName=e.displayName,yK&&Object.defineProperty(d,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(d.contextTypes=e.contextTypes),n&&(d=$.forwardRef(d)),d=$.memo(d),xK(e,d),d}var _K={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function xK(e,t){Object.keys(e).forEach(function(r){_K[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}var Cx;eK(_d.unstable_batchedUpdates);Cx=cm.finalizeAllImmediately;function bK(e,t){if(AC(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var s=0;s<r.length;s++)if(!Object.hasOwnProperty.call(t,r[s])||!AC(e[r[s]],t[r[s]]))return!1;return!0}function AC(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var CC=Symbol("patchMixins"),HR=Symbol("patchedDefinition");function wK(e,t){var r=e[CC]=e[CC]||{},n=r[t]=r[t]||{};return n.locks=n.locks||0,n.methods=n.methods||[],n}function PC(e,t){for(var r=this,n=arguments.length,s=new Array(n>2?n-2:0),h=2;h<n;h++)s[h-2]=arguments[h];t.locks++;try{var d;return e!=null&&(d=e.apply(this,s)),d}finally{t.locks--,t.locks===0&&t.methods.forEach(function(c){c.apply(r,s)})}}function TC(e,t){var r=function(){for(var s=arguments.length,h=new Array(s),d=0;d<s;d++)h[d]=arguments[d];PC.call.apply(PC,[this,e,t].concat(h))};return r}function SK(e,t,r){var n=wK(e,t);n.methods.indexOf(r)<0&&n.methods.push(r);var s=Object.getOwnPropertyDescriptor(e,t);if(!(s&&s[HR])){var h=e[t],d=WR(e,t,s?s.enumerable:void 0,n,h);Object.defineProperty(e,t,d)}}function WR(e,t,r,n,s){var h,d=TC(s,n);return h={},h[HR]=!0,h.get=function(){return d},h.set=function(b){if(this===e)d=TC(b,n);else{var E=WR(this,t,r,n,b);Object.defineProperty(this,t,E)}},h.configurable=!0,h.enumerable=r,h}var IC=Symbol("ObserverAdministration"),MC=Symbol("isMobXReactObserver");function E2(e){var t;return(t=e[IC])!=null?t:e[IC]={reaction:null,mounted:!1,reactionInvalidatedBeforeMount:!1,forceUpdate:null,name:A2(e.constructor),state:void 0,props:void 0,context:void 0}}function EK(e){var t=e.prototype;if(e[MC]){var r=A2(e);throw new Error("The provided component class ("+r+") has already been declared as an observer component.")}else e[MC]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==$.PureComponent){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=RC;else if(t.shouldComponentUpdate!==RC)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}var n=t.render;if(typeof n!="function"){var s=A2(e);throw new Error("[mobx-react] class component ("+s+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}t.render=function(){return Object.defineProperty(this,"render",{configurable:!1,writable:!1,value:AK.call(this,n)}),this.render()};var h=t.componentDidMount;return t.componentDidMount=function(){var d=this,c=E2(this);return c.mounted=!0,cm.unregister(this),c.forceUpdate=function(){return d.forceUpdate()},(!c.reaction||c.reactionInvalidatedBeforeMount)&&c.forceUpdate(),h==null?void 0:h.apply(this,arguments)},SK(t,"componentWillUnmount",function(){var d,c=E2(this);(d=c.reaction)==null||d.dispose(),c.reaction=null,c.forceUpdate=null,c.mounted=!1,c.reactionInvalidatedBeforeMount=!1}),e}function A2(e){return e.displayName||e.name||"<component>"}function AK(e){var t=e.bind(this),r=E2(this);function n(){r.reaction||(r.reaction=CK(r),r.mounted||cm.register(this,r,this));var s=void 0,h=void 0;if(r.reaction.track(function(){try{h=sH(!1,t)}catch(d){s=d}}),s)throw s;return h}return n}function CK(e){return new rm(e.name+".render()",function(){if(!e.mounted){e.reactionInvalidatedBeforeMount=!0;return}try{e.forceUpdate==null||e.forceUpdate()}catch{var t;(t=e.reaction)==null||t.dispose(),e.reaction=null}})}function RC(e,t){return this.state!==t?!0:!bK(this.props,e)}function Io(e,t){return e.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call($.Component,e)||Object.prototype.isPrototypeOf.call($.PureComponent,e)?EK(e):vK(e)}ue.version.split(".")[0];if(!$.Component)throw new Error("mobx-react requires React to be available");if(!Jn)throw new Error("mobx-react requires mobx to be available");const PK=mi({container:{fontSize:"0.9em","& p":{margin:"16px 0 0 0"},"& .mantine-Modal-body":{marginTop:-8,marginBottom:8},"& .mantine-Modal-content":{padding:"0 8px"}},title:{fontWeight:"bold"}}),TK=Io(()=>{const{app:e,ui:t}=to(),r=PK();return Q.jsxs(is,{className:r.container,opened:t.showAbout,onClose:()=>t.toggleShowAbout(),title:Q.jsxs("span",{className:r.title,children:["About the Project ",Q.jsxs(T1,{children:["v",e.version]})]}),centered:!0,children:[Q.jsxs("p",{children:["This app aims to provide a convenient visualization of the"," ",Q.jsx("a",{href:"https://en.wikipedia.org/wiki/Urban_heat_island",rel:"external",children:"Urban Heat Island Effect"})," ","across European urban centers."]}),Q.jsx("p",{children:"Isotherm contours are generated from moderate resolution satellite imagery using client-side worker processes."}),Q.jsxs("p",{children:["Due to limitations in available processing power and cloud resources, this project is limited to cities included in the"," ",Q.jsx("a",{href:"https://ec.europa.eu/eurostat/web/gisco/geodata/statistical-units/urban-audit",rel:"external",children:"Eurostat GISCO Urban Audit"})," ","(2021)."]}),Q.jsx("br",{}),Q.jsxs("p",{children:["Questions & comments are welcome:"," ",Q.jsx("a",{href:"mailto:mail@urbanheat.app",children:"mail@urbanheat.app"})]}),Q.jsx("br",{}),Q.jsxs("p",{children:["An"," ",Q.jsx("a",{href:"https://github.com/damienallen/urban-heat",rel:"external",children:"open-source"})," ","project by"," ",Q.jsx("a",{href:"https://dallen.co",rel:"author",target:"_blank",children:"Damien Allen"})]})]})}),IK=$.createContext({color:"currentColor",size:"1em",weight:"regular",mirrored:!1});var MK=Object.defineProperty,$y=Object.getOwnPropertySymbols,GR=Object.prototype.hasOwnProperty,qR=Object.prototype.propertyIsEnumerable,kC=(e,t,r)=>t in e?MK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,LC=(e,t)=>{for(var r in t||(t={}))GR.call(t,r)&&kC(e,r,t[r]);if($y)for(var r of $y(t))qR.call(t,r)&&kC(e,r,t[r]);return e},DC=(e,t)=>{var r={};for(var n in e)GR.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&$y)for(var n of $y(e))t.indexOf(n)<0&&qR.call(e,n)&&(r[n]=e[n]);return r};const KR=$.forwardRef((e,t)=>{const r=e,{alt:n,color:s,size:h,weight:d,mirrored:c,children:b,weights:E}=r,I=DC(r,["alt","color","size","weight","mirrored","children","weights"]),P=$.useContext(IK),{color:T="currentColor",size:O,weight:j="regular",mirrored:V=!1}=P,re=DC(P,["color","size","weight","mirrored"]);return ue.createElement("svg",LC(LC({ref:t,xmlns:"http://www.w3.org/2000/svg",width:h??O,height:h??O,fill:s??T,viewBox:"0 0 256 256",transform:c||V?"scale(-1, 1)":void 0},re),I),!!n&&ue.createElement("title",null,n),b,E.get(d??j))});KR.displayName="IconBase";const Mo=KR,RK=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M108,84a16,16,0,1,1,16,16A16,16,0,0,1,108,84Zm128,44A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128Zm-72,36.68V132a20,20,0,0,0-20-20,12,12,0,0,0-4,23.32V168a20,20,0,0,0,20,20,12,12,0,0,0,4-23.32Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),ue.createElement("path",{d:"M144,176a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176Zm88-48A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128ZM124,96a12,12,0,1,0-12-12A12,12,0,0,0,124,96Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm-4,48a12,12,0,1,1-12,12A12,12,0,0,1,124,72Zm12,112a16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40a8,8,0,0,1,0,16Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M142,176a6,6,0,0,1-6,6,14,14,0,0,1-14-14V128a2,2,0,0,0-2-2,6,6,0,0,1,0-12,14,14,0,0,1,14,14v40a2,2,0,0,0,2,2A6,6,0,0,1,142,176ZM124,94a10,10,0,1,0-10-10A10,10,0,0,0,124,94Zm106,34A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M140,176a4,4,0,0,1-4,4,12,12,0,0,1-12-12V128a4,4,0,0,0-4-4,4,4,0,0,1,0-8,12,12,0,0,1,12,12v40a4,4,0,0,0,4,4A4,4,0,0,1,140,176ZM124,92a8,8,0,1,0-8-8A8,8,0,0,0,124,92Zm104,36A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"}))]]);var kK=Object.defineProperty,LK=Object.defineProperties,DK=Object.getOwnPropertyDescriptors,OC=Object.getOwnPropertySymbols,OK=Object.prototype.hasOwnProperty,zK=Object.prototype.propertyIsEnumerable,zC=(e,t,r)=>t in e?kK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,FK=(e,t)=>{for(var r in t||(t={}))OK.call(t,r)&&zC(e,r,t[r]);if(OC)for(var r of OC(t))zK.call(t,r)&&zC(e,r,t[r]);return e},BK=(e,t)=>LK(e,DK(t));const XR=$.forwardRef((e,t)=>ue.createElement(Mo,BK(FK({ref:t},e),{weights:RK})));XR.displayName="Info";const NK=mi({tooltip:{position:"relative",display:"flex",flex:0},icon:{margin:"0 8px",flex:0,display:"flex",cursor:"pointer"}}),jK=()=>{const{ui:e}=to(),t=NK();return Q.jsx("span",{className:t.icon,onClick:()=>e.toggleShowAbout(),children:Q.jsx(XR,{size:32,weight:"duotone"})})},$K=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M240,204H228V96a20,20,0,0,0-20-20H172V32a20,20,0,0,0-28.45-18.12l-104,48.54A20.06,20.06,0,0,0,28,80.55V204H16a12,12,0,0,0,0,24H240a12,12,0,0,0,0-24ZM204,100V204H172V100ZM52,83.09,148,38.3V204H52ZM132,112v12a12,12,0,0,1-24,0V112a12,12,0,0,1,24,0Zm-40,0v12a12,12,0,0,1-24,0V112a12,12,0,0,1,24,0Zm0,52v12a12,12,0,0,1-24,0V164a12,12,0,0,1,24,0Zm40,0v12a12,12,0,0,1-24,0V164a12,12,0,0,1,24,0Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M136,32V216H40V85.35a8,8,0,0,1,3.56-6.66l80-53.33A8,8,0,0,1,136,32Z",opacity:"0.2"}),ue.createElement("path",{d:"M240,208H224V96a16,16,0,0,0-16-16H144V32a16,16,0,0,0-24.88-13.32L39.12,72A16,16,0,0,0,32,85.34V208H16a8,8,0,0,0,0,16H240a8,8,0,0,0,0-16ZM208,96V208H144V96ZM48,85.34,128,32V208H48ZM112,112v16a8,8,0,0,1-16,0V112a8,8,0,1,1,16,0Zm-32,0v16a8,8,0,0,1-16,0V112a8,8,0,1,1,16,0Zm0,56v16a8,8,0,0,1-16,0V168a8,8,0,0,1,16,0Zm32,0v16a8,8,0,0,1-16,0V168a8,8,0,0,1,16,0Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M239.73,208H224V96a16,16,0,0,0-16-16H164a4,4,0,0,0-4,4V208H144V32.41a16.43,16.43,0,0,0-6.16-13,16,16,0,0,0-18.72-.69L39.12,72A16,16,0,0,0,32,85.34V208H16.27A8.18,8.18,0,0,0,8,215.47,8,8,0,0,0,16,224H240a8,8,0,0,0,8-8.53A8.18,8.18,0,0,0,239.73,208ZM76,184a8,8,0,0,1-8.53,8A8.18,8.18,0,0,1,60,183.72V168.27A8.19,8.19,0,0,1,67.47,160,8,8,0,0,1,76,168Zm0-56a8,8,0,0,1-8.53,8A8.19,8.19,0,0,1,60,127.72V112.27A8.19,8.19,0,0,1,67.47,104,8,8,0,0,1,76,112Zm40,56a8,8,0,0,1-8.53,8,8.18,8.18,0,0,1-7.47-8.26V168.27a8.19,8.19,0,0,1,7.47-8.26,8,8,0,0,1,8.53,8Zm0-56a8,8,0,0,1-8.53,8,8.19,8.19,0,0,1-7.47-8.26V112.27a8.19,8.19,0,0,1,7.47-8.26,8,8,0,0,1,8.53,8Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M240,210H222V96a14,14,0,0,0-14-14H142V32a14,14,0,0,0-21.77-11.64l-80,53.33A14,14,0,0,0,34,85.34V210H16a6,6,0,0,0,0,12H240a6,6,0,0,0,0-12ZM208,94a2,2,0,0,1,2,2V210H142V94ZM46,85.34a2,2,0,0,1,.89-1.66l80-53.34A2,2,0,0,1,130,32V210H46ZM110,112v16a6,6,0,0,1-12,0V112a6,6,0,0,1,12,0Zm-32,0v16a6,6,0,0,1-12,0V112a6,6,0,0,1,12,0Zm0,56v16a6,6,0,0,1-12,0V168a6,6,0,0,1,12,0Zm32,0v16a6,6,0,0,1-12,0V168a6,6,0,0,1,12,0Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M240,208H224V96a16,16,0,0,0-16-16H144V32a16,16,0,0,0-24.88-13.32L39.12,72A16,16,0,0,0,32,85.34V208H16a8,8,0,0,0,0,16H240a8,8,0,0,0,0-16ZM208,96V208H144V96ZM48,85.34,128,32V208H48ZM112,112v16a8,8,0,0,1-16,0V112a8,8,0,1,1,16,0Zm-32,0v16a8,8,0,0,1-16,0V112a8,8,0,1,1,16,0Zm0,56v16a8,8,0,0,1-16,0V168a8,8,0,0,1,16,0Zm32,0v16a8,8,0,0,1-16,0V168a8,8,0,0,1,16,0Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M240,212H220V96a12,12,0,0,0-12-12H140V32a12,12,0,0,0-18.66-10l-80,53.33a12,12,0,0,0-5.34,10V212H16a4,4,0,0,0,0,8H240a4,4,0,0,0,0-8ZM208,92a4,4,0,0,1,4,4V212H140V92ZM44,85.34A4,4,0,0,1,45.78,82l80-53.33A4,4,0,0,1,132,32V212H44ZM108,112v16a4,4,0,0,1-8,0V112a4,4,0,0,1,8,0Zm-32,0v16a4,4,0,0,1-8,0V112a4,4,0,0,1,8,0Zm0,56v16a4,4,0,0,1-8,0V168a4,4,0,0,1,8,0Zm32,0v16a4,4,0,0,1-8,0V168a4,4,0,0,1,8,0Z"}))]]);var VK=Object.defineProperty,UK=Object.defineProperties,ZK=Object.getOwnPropertyDescriptors,FC=Object.getOwnPropertySymbols,HK=Object.prototype.hasOwnProperty,WK=Object.prototype.propertyIsEnumerable,BC=(e,t,r)=>t in e?VK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,GK=(e,t)=>{for(var r in t||(t={}))HK.call(t,r)&&BC(e,r,t[r]);if(FC)for(var r of FC(t))WK.call(t,r)&&BC(e,r,t[r]);return e},qK=(e,t)=>UK(e,ZK(t));const YR=$.forwardRef((e,t)=>ue.createElement(Mo,qK(GK({ref:t},e),{weights:$K})));YR.displayName="Buildings";const KK=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,28H64A36,36,0,0,0,28,64V192a36,36,0,0,0,36,36H192a36,36,0,0,0,36-36V64A36,36,0,0,0,192,28Zm12,164a12,12,0,0,1-12,12H64a12,12,0,0,1-12-12V64A12,12,0,0,1,64,52H192a12,12,0,0,1,12,12ZM104,88A16,16,0,1,1,88,72,16,16,0,0,1,104,88Zm40,40a16,16,0,1,1-16-16A16,16,0,0,1,144,128Zm40-40a16,16,0,1,1-16-16A16,16,0,0,1,184,88Zm-80,80a16,16,0,1,1-16-16A16,16,0,0,1,104,168Zm80,0a16,16,0,1,1-16-16A16,16,0,0,1,184,168Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M216,64V192a24,24,0,0,1-24,24H64a24,24,0,0,1-24-24V64A24,24,0,0,1,64,40H192A24,24,0,0,1,216,64Z",opacity:"0.2"}),ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16ZM104,92A12,12,0,1,1,92,80,12,12,0,0,1,104,92Zm72,0a12,12,0,1,1-12-12A12,12,0,0,1,176,92Zm-72,72a12,12,0,1,1-12-12A12,12,0,0,1,104,164Zm36-36a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm36,36a12,12,0,1,1-12-12A12,12,0,0,1,176,164Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32ZM92,176a12,12,0,1,1,12-12A12,12,0,0,1,92,176Zm0-72a12,12,0,1,1,12-12A12,12,0,0,1,92,104Zm36,36a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm36,36a12,12,0,1,1,12-12A12,12,0,0,1,164,176Zm0-72a12,12,0,1,1,12-12A12,12,0,0,1,164,104Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,34H64A30,30,0,0,0,34,64V192a30,30,0,0,0,30,30H192a30,30,0,0,0,30-30V64A30,30,0,0,0,192,34Zm18,158a18,18,0,0,1-18,18H64a18,18,0,0,1-18-18V64A18,18,0,0,1,64,46H192a18,18,0,0,1,18,18ZM102,92A10,10,0,1,1,92,82,10,10,0,0,1,102,92Zm36,36a10,10,0,1,1-10-10A10,10,0,0,1,138,128Zm36-36a10,10,0,1,1-10-10A10,10,0,0,1,174,92Zm-72,72a10,10,0,1,1-10-10A10,10,0,0,1,102,164Zm72,0a10,10,0,1,1-10-10A10,10,0,0,1,174,164Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16ZM104,92A12,12,0,1,1,92,80,12,12,0,0,1,104,92Zm72,0a12,12,0,1,1-12-12A12,12,0,0,1,176,92Zm-72,72a12,12,0,1,1-12-12A12,12,0,0,1,104,164Zm36-36a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm36,36a12,12,0,1,1-12-12A12,12,0,0,1,176,164Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,36H64A28,28,0,0,0,36,64V192a28,28,0,0,0,28,28H192a28,28,0,0,0,28-28V64A28,28,0,0,0,192,36Zm20,156a20,20,0,0,1-20,20H64a20,20,0,0,1-20-20V64A20,20,0,0,1,64,44H192a20,20,0,0,1,20,20ZM100,92a8,8,0,1,1-8-8A8,8,0,0,1,100,92Zm36,36a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm36-36a8,8,0,1,1-8-8A8,8,0,0,1,172,92Zm-72,72a8,8,0,1,1-8-8A8,8,0,0,1,100,164Zm72,0a8,8,0,1,1-8-8A8,8,0,0,1,172,164Z"}))]]);var XK=Object.defineProperty,YK=Object.defineProperties,JK=Object.getOwnPropertyDescriptors,NC=Object.getOwnPropertySymbols,QK=Object.prototype.hasOwnProperty,eX=Object.prototype.propertyIsEnumerable,jC=(e,t,r)=>t in e?XK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tX=(e,t)=>{for(var r in t||(t={}))QK.call(t,r)&&jC(e,r,t[r]);if(NC)for(var r of NC(t))eX.call(t,r)&&jC(e,r,t[r]);return e},rX=(e,t)=>YK(e,JK(t));const JR=$.forwardRef((e,t)=>ue.createElement(Mo,rX(tX({ref:t},e),{weights:KK})));JR.displayName="DiceFive";const nX=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,28H64A36,36,0,0,0,28,64V192a36,36,0,0,0,36,36H192a36,36,0,0,0,36-36V64A36,36,0,0,0,192,28Zm12,164a12,12,0,0,1-12,12H64a12,12,0,0,1-12-12V64A12,12,0,0,1,64,52H192a12,12,0,0,1,12,12ZM112,96A16,16,0,1,1,96,80,16,16,0,0,1,112,96Zm64,0a16,16,0,1,1-16-16A16,16,0,0,1,176,96Zm-64,64a16,16,0,1,1-16-16A16,16,0,0,1,112,160Zm64,0a16,16,0,1,1-16-16A16,16,0,0,1,176,160Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M216,64V192a24,24,0,0,1-24,24H64a24,24,0,0,1-24-24V64A24,24,0,0,1,64,40H192A24,24,0,0,1,216,64Z",opacity:"0.2"}),ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16Zm-96-92a12,12,0,1,1-12-12A12,12,0,0,1,112,100Zm56,0a12,12,0,1,1-12-12A12,12,0,0,1,168,100Zm-56,56a12,12,0,1,1-12-12A12,12,0,0,1,112,156Zm56,0a12,12,0,1,1-12-12A12,12,0,0,1,168,156Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32ZM100,168a12,12,0,1,1,12-12A12,12,0,0,1,100,168Zm0-56a12,12,0,1,1,12-12A12,12,0,0,1,100,112Zm56,56a12,12,0,1,1,12-12A12,12,0,0,1,156,168Zm0-56a12,12,0,1,1,12-12A12,12,0,0,1,156,112Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,34H64A30,30,0,0,0,34,64V192a30,30,0,0,0,30,30H192a30,30,0,0,0,30-30V64A30,30,0,0,0,192,34Zm18,158a18,18,0,0,1-18,18H64a18,18,0,0,1-18-18V64A18,18,0,0,1,64,46H192a18,18,0,0,1,18,18ZM110,100a10,10,0,1,1-10-10A10,10,0,0,1,110,100Zm56,0a10,10,0,1,1-10-10A10,10,0,0,1,166,100Zm-56,56a10,10,0,1,1-10-10A10,10,0,0,1,110,156Zm56,0a10,10,0,1,1-10-10A10,10,0,0,1,166,156Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16Zm-96-92a12,12,0,1,1-12-12A12,12,0,0,1,112,100Zm56,0a12,12,0,1,1-12-12A12,12,0,0,1,168,100Zm-56,56a12,12,0,1,1-12-12A12,12,0,0,1,112,156Zm56,0a12,12,0,1,1-12-12A12,12,0,0,1,168,156Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,36H64A28,28,0,0,0,36,64V192a28,28,0,0,0,28,28H192a28,28,0,0,0,28-28V64A28,28,0,0,0,192,36Zm20,156a20,20,0,0,1-20,20H64a20,20,0,0,1-20-20V64A20,20,0,0,1,64,44H192a20,20,0,0,1,20,20ZM108,100a8,8,0,1,1-8-8A8,8,0,0,1,108,100Zm56,0a8,8,0,1,1-8-8A8,8,0,0,1,164,100Zm-56,56a8,8,0,1,1-8-8A8,8,0,0,1,108,156Zm56,0a8,8,0,1,1-8-8A8,8,0,0,1,164,156Z"}))]]);var iX=Object.defineProperty,oX=Object.defineProperties,aX=Object.getOwnPropertyDescriptors,$C=Object.getOwnPropertySymbols,sX=Object.prototype.hasOwnProperty,lX=Object.prototype.propertyIsEnumerable,VC=(e,t,r)=>t in e?iX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cX=(e,t)=>{for(var r in t||(t={}))sX.call(t,r)&&VC(e,r,t[r]);if($C)for(var r of $C(t))lX.call(t,r)&&VC(e,r,t[r]);return e},uX=(e,t)=>oX(e,aX(t));const QR=$.forwardRef((e,t)=>ue.createElement(Mo,uX(cX({ref:t},e),{weights:nX})));QR.displayName="DiceFour";const hX=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,28H64A36,36,0,0,0,28,64V192a36,36,0,0,0,36,36H192a36,36,0,0,0,36-36V64A36,36,0,0,0,192,28Zm12,164a12,12,0,0,1-12,12H64a12,12,0,0,1-12-12V64A12,12,0,0,1,64,52H192a12,12,0,0,1,12,12Zm-60-64a16,16,0,1,1-16-16A16,16,0,0,1,144,128Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M216,64V192a24,24,0,0,1-24,24H64a24,24,0,0,1-24-24V64A24,24,0,0,1,64,40H192A24,24,0,0,1,216,64Z",opacity:"0.2"}),ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16Zm-68-64a12,12,0,1,1-12-12A12,12,0,0,1,140,128Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32ZM128,140a12,12,0,1,1,12-12A12,12,0,0,1,128,140Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,34H64A30,30,0,0,0,34,64V192a30,30,0,0,0,30,30H192a30,30,0,0,0,30-30V64A30,30,0,0,0,192,34Zm18,158a18,18,0,0,1-18,18H64a18,18,0,0,1-18-18V64A18,18,0,0,1,64,46H192a18,18,0,0,1,18,18Zm-72-64a10,10,0,1,1-10-10A10,10,0,0,1,138,128Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16Zm-68-64a12,12,0,1,1-12-12A12,12,0,0,1,140,128Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,36H64A28,28,0,0,0,36,64V192a28,28,0,0,0,28,28H192a28,28,0,0,0,28-28V64A28,28,0,0,0,192,36Zm20,156a20,20,0,0,1-20,20H64a20,20,0,0,1-20-20V64A20,20,0,0,1,64,44H192a20,20,0,0,1,20,20Zm-76-64a8,8,0,1,1-8-8A8,8,0,0,1,136,128Z"}))]]);var dX=Object.defineProperty,fX=Object.defineProperties,pX=Object.getOwnPropertyDescriptors,UC=Object.getOwnPropertySymbols,mX=Object.prototype.hasOwnProperty,gX=Object.prototype.propertyIsEnumerable,ZC=(e,t,r)=>t in e?dX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yX=(e,t)=>{for(var r in t||(t={}))mX.call(t,r)&&ZC(e,r,t[r]);if(UC)for(var r of UC(t))gX.call(t,r)&&ZC(e,r,t[r]);return e},vX=(e,t)=>fX(e,pX(t));const ek=$.forwardRef((e,t)=>ue.createElement(Mo,vX(yX({ref:t},e),{weights:hX})));ek.displayName="DiceOne";const _X=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,28H64A36,36,0,0,0,28,64V192a36,36,0,0,0,36,36H192a36,36,0,0,0,36-36V64A36,36,0,0,0,192,28Zm12,164a12,12,0,0,1-12,12H64a12,12,0,0,1-12-12V64A12,12,0,0,1,64,52H192a12,12,0,0,1,12,12ZM112,84A16,16,0,1,1,96,68,16,16,0,0,1,112,84Zm64,0a16,16,0,1,1-16-16A16,16,0,0,1,176,84Zm-64,44a16,16,0,1,1-16-16A16,16,0,0,1,112,128Zm64,0a16,16,0,1,1-16-16A16,16,0,0,1,176,128Zm-64,44a16,16,0,1,1-16-16A16,16,0,0,1,112,172Zm64,0a16,16,0,1,1-16-16A16,16,0,0,1,176,172Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M216,64V192a24,24,0,0,1-24,24H64a24,24,0,0,1-24-24V64A24,24,0,0,1,64,40H192A24,24,0,0,1,216,64Z",opacity:"0.2"}),ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16ZM104,84A12,12,0,1,1,92,72,12,12,0,0,1,104,84Zm72,0a12,12,0,1,1-12-12A12,12,0,0,1,176,84Zm-72,44a12,12,0,1,1-12-12A12,12,0,0,1,104,128Zm72,0a12,12,0,1,1-12-12A12,12,0,0,1,176,128Zm-72,44a12,12,0,1,1-12-12A12,12,0,0,1,104,172Zm72,0a12,12,0,1,1-12-12A12,12,0,0,1,176,172Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32ZM92,184a12,12,0,1,1,12-12A12,12,0,0,1,92,184Zm0-44a12,12,0,1,1,12-12A12,12,0,0,1,92,140Zm0-44a12,12,0,1,1,12-12A12,12,0,0,1,92,96Zm72,88a12,12,0,1,1,12-12A12,12,0,0,1,164,184Zm0-44a12,12,0,1,1,12-12A12,12,0,0,1,164,140Zm0-44a12,12,0,1,1,12-12A12,12,0,0,1,164,96Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,34H64A30,30,0,0,0,34,64V192a30,30,0,0,0,30,30H192a30,30,0,0,0,30-30V64A30,30,0,0,0,192,34Zm18,158a18,18,0,0,1-18,18H64a18,18,0,0,1-18-18V64A18,18,0,0,1,64,46H192a18,18,0,0,1,18,18ZM102,84A10,10,0,1,1,92,74,10,10,0,0,1,102,84Zm72,0a10,10,0,1,1-10-10A10,10,0,0,1,174,84Zm-72,44a10,10,0,1,1-10-10A10,10,0,0,1,102,128Zm72,0a10,10,0,1,1-10-10A10,10,0,0,1,174,128Zm-72,44a10,10,0,1,1-10-10A10,10,0,0,1,102,172Zm72,0a10,10,0,1,1-10-10A10,10,0,0,1,174,172Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16ZM104,84A12,12,0,1,1,92,72,12,12,0,0,1,104,84Zm72,0a12,12,0,1,1-12-12A12,12,0,0,1,176,84Zm-72,44a12,12,0,1,1-12-12A12,12,0,0,1,104,128Zm72,0a12,12,0,1,1-12-12A12,12,0,0,1,176,128Zm-72,44a12,12,0,1,1-12-12A12,12,0,0,1,104,172Zm72,0a12,12,0,1,1-12-12A12,12,0,0,1,176,172Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,36H64A28,28,0,0,0,36,64V192a28,28,0,0,0,28,28H192a28,28,0,0,0,28-28V64A28,28,0,0,0,192,36Zm20,156a20,20,0,0,1-20,20H64a20,20,0,0,1-20-20V64A20,20,0,0,1,64,44H192a20,20,0,0,1,20,20ZM100,84a8,8,0,1,1-8-8A8,8,0,0,1,100,84Zm72,0a8,8,0,1,1-8-8A8,8,0,0,1,172,84Zm-72,44a8,8,0,1,1-8-8A8,8,0,0,1,100,128Zm72,0a8,8,0,1,1-8-8A8,8,0,0,1,172,128Zm-72,44a8,8,0,1,1-8-8A8,8,0,0,1,100,172Zm72,0a8,8,0,1,1-8-8A8,8,0,0,1,172,172Z"}))]]);var xX=Object.defineProperty,bX=Object.defineProperties,wX=Object.getOwnPropertyDescriptors,HC=Object.getOwnPropertySymbols,SX=Object.prototype.hasOwnProperty,EX=Object.prototype.propertyIsEnumerable,WC=(e,t,r)=>t in e?xX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,AX=(e,t)=>{for(var r in t||(t={}))SX.call(t,r)&&WC(e,r,t[r]);if(HC)for(var r of HC(t))EX.call(t,r)&&WC(e,r,t[r]);return e},CX=(e,t)=>bX(e,wX(t));const tk=$.forwardRef((e,t)=>ue.createElement(Mo,CX(AX({ref:t},e),{weights:_X})));tk.displayName="DiceSix";const PX=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,28H64A36,36,0,0,0,28,64V192a36,36,0,0,0,36,36H192a36,36,0,0,0,36-36V64A36,36,0,0,0,192,28Zm12,164a12,12,0,0,1-12,12H64a12,12,0,0,1-12-12V64A12,12,0,0,1,64,52H192a12,12,0,0,1,12,12ZM104,88A16,16,0,1,1,88,72,16,16,0,0,1,104,88Zm40,40a16,16,0,1,1-16-16A16,16,0,0,1,144,128Zm40,40a16,16,0,1,1-16-16A16,16,0,0,1,184,168Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M216,64V192a24,24,0,0,1-24,24H64a24,24,0,0,1-24-24V64A24,24,0,0,1,64,40H192A24,24,0,0,1,216,64Z",opacity:"0.2"}),ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16ZM104,92A12,12,0,1,1,92,80,12,12,0,0,1,104,92Zm36,36a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm36,36a12,12,0,1,1-12-12A12,12,0,0,1,176,164Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32ZM92,104a12,12,0,1,1,12-12A12,12,0,0,1,92,104Zm36,36a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm36,36a12,12,0,1,1,12-12A12,12,0,0,1,164,176Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,34H64A30,30,0,0,0,34,64V192a30,30,0,0,0,30,30H192a30,30,0,0,0,30-30V64A30,30,0,0,0,192,34Zm18,158a18,18,0,0,1-18,18H64a18,18,0,0,1-18-18V64A18,18,0,0,1,64,46H192a18,18,0,0,1,18,18ZM102,92A10,10,0,1,1,92,82,10,10,0,0,1,102,92Zm36,36a10,10,0,1,1-10-10A10,10,0,0,1,138,128Zm36,36a10,10,0,1,1-10-10A10,10,0,0,1,174,164Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16ZM104,92A12,12,0,1,1,92,80,12,12,0,0,1,104,92Zm36,36a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm36,36a12,12,0,1,1-12-12A12,12,0,0,1,176,164Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,36H64A28,28,0,0,0,36,64V192a28,28,0,0,0,28,28H192a28,28,0,0,0,28-28V64A28,28,0,0,0,192,36Zm20,156a20,20,0,0,1-20,20H64a20,20,0,0,1-20-20V64A20,20,0,0,1,64,44H192a20,20,0,0,1,20,20ZM100,92a8,8,0,1,1-8-8A8,8,0,0,1,100,92Zm36,36a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm36,36a8,8,0,1,1-8-8A8,8,0,0,1,172,164Z"}))]]);var TX=Object.defineProperty,IX=Object.defineProperties,MX=Object.getOwnPropertyDescriptors,GC=Object.getOwnPropertySymbols,RX=Object.prototype.hasOwnProperty,kX=Object.prototype.propertyIsEnumerable,qC=(e,t,r)=>t in e?TX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,LX=(e,t)=>{for(var r in t||(t={}))RX.call(t,r)&&qC(e,r,t[r]);if(GC)for(var r of GC(t))kX.call(t,r)&&qC(e,r,t[r]);return e},DX=(e,t)=>IX(e,MX(t));const rk=$.forwardRef((e,t)=>ue.createElement(Mo,DX(LX({ref:t},e),{weights:PX})));rk.displayName="DiceThree";const OX=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,28H64A36,36,0,0,0,28,64V192a36,36,0,0,0,36,36H192a36,36,0,0,0,36-36V64A36,36,0,0,0,192,28Zm12,164a12,12,0,0,1-12,12H64a12,12,0,0,1-12-12V64A12,12,0,0,1,64,52H192a12,12,0,0,1,12,12Zm-84-88a16,16,0,1,1-16-16A16,16,0,0,1,120,104Zm48,48a16,16,0,1,1-16-16A16,16,0,0,1,168,152Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M216,64V192a24,24,0,0,1-24,24H64a24,24,0,0,1-24-24V64A24,24,0,0,1,64,40H192A24,24,0,0,1,216,64Z",opacity:"0.2"}),ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16Zm-88-84a12,12,0,1,1-12-12A12,12,0,0,1,120,108Zm40,40a12,12,0,1,1-12-12A12,12,0,0,1,160,148Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm-84,88a12,12,0,1,1,12-12A12,12,0,0,1,108,120Zm40,40a12,12,0,1,1,12-12A12,12,0,0,1,148,160Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,34H64A30,30,0,0,0,34,64V192a30,30,0,0,0,30,30H192a30,30,0,0,0,30-30V64A30,30,0,0,0,192,34Zm18,158a18,18,0,0,1-18,18H64a18,18,0,0,1-18-18V64A18,18,0,0,1,64,46H192a18,18,0,0,1,18,18Zm-92-84a10,10,0,1,1-10-10A10,10,0,0,1,118,108Zm40,40a10,10,0,1,1-10-10A10,10,0,0,1,158,148Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,32H64A32,32,0,0,0,32,64V192a32,32,0,0,0,32,32H192a32,32,0,0,0,32-32V64A32,32,0,0,0,192,32Zm16,160a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192a16,16,0,0,1,16,16Zm-88-84a12,12,0,1,1-12-12A12,12,0,0,1,120,108Zm40,40a12,12,0,1,1-12-12A12,12,0,0,1,160,148Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M192,36H64A28,28,0,0,0,36,64V192a28,28,0,0,0,28,28H192a28,28,0,0,0,28-28V64A28,28,0,0,0,192,36Zm20,156a20,20,0,0,1-20,20H64a20,20,0,0,1-20-20V64A20,20,0,0,1,64,44H192a20,20,0,0,1,20,20Zm-96-84a8,8,0,1,1-8-8A8,8,0,0,1,116,108Zm40,40a8,8,0,1,1-8-8A8,8,0,0,1,156,148Z"}))]]);var zX=Object.defineProperty,FX=Object.defineProperties,BX=Object.getOwnPropertyDescriptors,KC=Object.getOwnPropertySymbols,NX=Object.prototype.hasOwnProperty,jX=Object.prototype.propertyIsEnumerable,XC=(e,t,r)=>t in e?zX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$X=(e,t)=>{for(var r in t||(t={}))NX.call(t,r)&&XC(e,r,t[r]);if(KC)for(var r of KC(t))jX.call(t,r)&&XC(e,r,t[r]);return e},VX=(e,t)=>FX(e,BX(t));const nk=$.forwardRef((e,t)=>ue.createElement(Mo,VX($X({ref:t},e),{weights:OX})));nk.displayName="DiceTwo";const UX=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M128,76a52,52,0,1,0,52,52A52.06,52.06,0,0,0,128,76Zm0,80a28,28,0,1,1,28-28A28,28,0,0,1,128,156Zm92-27.21v-1.58l14-17.51a12,12,0,0,0,2.23-10.59A111.75,111.75,0,0,0,225,71.89,12,12,0,0,0,215.89,66L193.61,63.5l-1.11-1.11L190,40.1A12,12,0,0,0,184.11,31a111.67,111.67,0,0,0-27.23-11.27A12,12,0,0,0,146.3,22L128.79,36h-1.58L109.7,22a12,12,0,0,0-10.59-2.23A111.75,111.75,0,0,0,71.89,31.05,12,12,0,0,0,66,40.11L63.5,62.39,62.39,63.5,40.1,66A12,12,0,0,0,31,71.89,111.67,111.67,0,0,0,19.77,99.12,12,12,0,0,0,22,109.7l14,17.51v1.58L22,146.3a12,12,0,0,0-2.23,10.59,111.75,111.75,0,0,0,11.29,27.22A12,12,0,0,0,40.11,190l22.28,2.48,1.11,1.11L66,215.9A12,12,0,0,0,71.89,225a111.67,111.67,0,0,0,27.23,11.27A12,12,0,0,0,109.7,234l17.51-14h1.58l17.51,14a12,12,0,0,0,10.59,2.23A111.75,111.75,0,0,0,184.11,225a12,12,0,0,0,5.91-9.06l2.48-22.28,1.11-1.11L215.9,190a12,12,0,0,0,9.06-5.91,111.67,111.67,0,0,0,11.27-27.23A12,12,0,0,0,234,146.3Zm-24.12-4.89a70.1,70.1,0,0,1,0,8.2,12,12,0,0,0,2.61,8.22l12.84,16.05A86.47,86.47,0,0,1,207,166.86l-20.43,2.27a12,12,0,0,0-7.65,4,69,69,0,0,1-5.8,5.8,12,12,0,0,0-4,7.65L166.86,207a86.47,86.47,0,0,1-10.49,4.35l-16.05-12.85a12,12,0,0,0-7.5-2.62c-.24,0-.48,0-.72,0a70.1,70.1,0,0,1-8.2,0,12.06,12.06,0,0,0-8.22,2.6L99.63,211.33A86.47,86.47,0,0,1,89.14,207l-2.27-20.43a12,12,0,0,0-4-7.65,69,69,0,0,1-5.8-5.8,12,12,0,0,0-7.65-4L49,166.86a86.47,86.47,0,0,1-4.35-10.49l12.84-16.05a12,12,0,0,0,2.61-8.22,70.1,70.1,0,0,1,0-8.2,12,12,0,0,0-2.61-8.22L44.67,99.63A86.47,86.47,0,0,1,49,89.14l20.43-2.27a12,12,0,0,0,7.65-4,69,69,0,0,1,5.8-5.8,12,12,0,0,0,4-7.65L89.14,49a86.47,86.47,0,0,1,10.49-4.35l16.05,12.85a12.06,12.06,0,0,0,8.22,2.6,70.1,70.1,0,0,1,8.2,0,12,12,0,0,0,8.22-2.6l16.05-12.85A86.47,86.47,0,0,1,166.86,49l2.27,20.43a12,12,0,0,0,4,7.65,69,69,0,0,1,5.8,5.8,12,12,0,0,0,7.65,4L207,89.14a86.47,86.47,0,0,1,4.35,10.49l-12.84,16.05A12,12,0,0,0,195.88,123.9Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M207.86,123.18l16.78-21a99.14,99.14,0,0,0-10.07-24.29l-26.7-3a81,81,0,0,0-6.81-6.81l-3-26.71a99.43,99.43,0,0,0-24.3-10l-21,16.77a81.59,81.59,0,0,0-9.64,0l-21-16.78A99.14,99.14,0,0,0,77.91,41.43l-3,26.7a81,81,0,0,0-6.81,6.81l-26.71,3a99.43,99.43,0,0,0-10,24.3l16.77,21a81.59,81.59,0,0,0,0,9.64l-16.78,21a99.14,99.14,0,0,0,10.07,24.29l26.7,3a81,81,0,0,0,6.81,6.81l3,26.71a99.43,99.43,0,0,0,24.3,10l21-16.77a81.59,81.59,0,0,0,9.64,0l21,16.78a99.14,99.14,0,0,0,24.29-10.07l3-26.7a81,81,0,0,0,6.81-6.81l26.71-3a99.43,99.43,0,0,0,10-24.3l-16.77-21A81.59,81.59,0,0,0,207.86,123.18ZM128,168a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z",opacity:"0.2"}),ue.createElement("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.6,107.6,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.29,107.29,0,0,0-26.25-10.86,8,8,0,0,0-7.06,1.48L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.6,107.6,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8.06,8.06,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8.06,8.06,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M216,130.16q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.6,107.6,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.29,107.29,0,0,0-26.25-10.86,8,8,0,0,0-7.06,1.48L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.6,107.6,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06ZM128,168a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M128,82a46,46,0,1,0,46,46A46.06,46.06,0,0,0,128,82Zm0,80a34,34,0,1,1,34-34A34,34,0,0,1,128,162ZM214,130.84c.06-1.89.06-3.79,0-5.68L229.33,106a6,6,0,0,0,1.11-5.29A105.34,105.34,0,0,0,219.76,74.9a6,6,0,0,0-4.53-3l-24.45-2.71q-1.93-2.07-4-4l-2.72-24.46a6,6,0,0,0-3-4.53,105.65,105.65,0,0,0-25.77-10.66A6,6,0,0,0,150,26.68l-19.2,15.37c-1.89-.06-3.79-.06-5.68,0L106,26.67a6,6,0,0,0-5.29-1.11A105.34,105.34,0,0,0,74.9,36.24a6,6,0,0,0-3,4.53L69.23,65.22q-2.07,1.94-4,4L40.76,72a6,6,0,0,0-4.53,3,105.65,105.65,0,0,0-10.66,25.77A6,6,0,0,0,26.68,106l15.37,19.2c-.06,1.89-.06,3.79,0,5.68L26.67,150.05a6,6,0,0,0-1.11,5.29A105.34,105.34,0,0,0,36.24,181.1a6,6,0,0,0,4.53,3l24.45,2.71q1.94,2.07,4,4L72,215.24a6,6,0,0,0,3,4.53,105.65,105.65,0,0,0,25.77,10.66,6,6,0,0,0,5.29-1.11L125.16,214c1.89.06,3.79.06,5.68,0l19.21,15.38a6,6,0,0,0,3.75,1.31,6.2,6.2,0,0,0,1.54-.2,105.34,105.34,0,0,0,25.76-10.68,6,6,0,0,0,3-4.53l2.71-24.45q2.07-1.93,4-4l24.46-2.72a6,6,0,0,0,4.53-3,105.49,105.49,0,0,0,10.66-25.77,6,6,0,0,0-1.11-5.29Zm-3.1,41.63-23.64,2.63a6,6,0,0,0-3.82,2,75.14,75.14,0,0,1-6.31,6.31,6,6,0,0,0-2,3.82l-2.63,23.63A94.28,94.28,0,0,1,155.14,218l-18.57-14.86a6,6,0,0,0-3.75-1.31h-.36a78.07,78.07,0,0,1-8.92,0,6,6,0,0,0-4.11,1.3L100.87,218a94.13,94.13,0,0,1-17.34-7.17L80.9,187.21a6,6,0,0,0-2-3.82,75.14,75.14,0,0,1-6.31-6.31,6,6,0,0,0-3.82-2l-23.63-2.63A94.28,94.28,0,0,1,38,155.14l14.86-18.57a6,6,0,0,0,1.3-4.11,78.07,78.07,0,0,1,0-8.92,6,6,0,0,0-1.3-4.11L38,100.87a94.13,94.13,0,0,1,7.17-17.34L68.79,80.9a6,6,0,0,0,3.82-2,75.14,75.14,0,0,1,6.31-6.31,6,6,0,0,0,2-3.82l2.63-23.63A94.28,94.28,0,0,1,100.86,38l18.57,14.86a6,6,0,0,0,4.11,1.3,78.07,78.07,0,0,1,8.92,0,6,6,0,0,0,4.11-1.3L155.13,38a94.13,94.13,0,0,1,17.34,7.17l2.63,23.64a6,6,0,0,0,2,3.82,75.14,75.14,0,0,1,6.31,6.31,6,6,0,0,0,3.82,2l23.63,2.63A94.28,94.28,0,0,1,218,100.86l-14.86,18.57a6,6,0,0,0-1.3,4.11,78.07,78.07,0,0,1,0,8.92,6,6,0,0,0,1.3,4.11L218,155.13A94.13,94.13,0,0,1,210.85,172.47Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M128,84a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,84Zm0,80a36,36,0,1,1,36-36A36,36,0,0,1,128,164Zm83.93-32.49q.13-3.51,0-7l15.83-19.79a4,4,0,0,0,.75-3.53A103.64,103.64,0,0,0,218,75.9a4,4,0,0,0-3-2l-25.19-2.8c-1.58-1.71-3.24-3.37-4.95-4.95L182.07,41a4,4,0,0,0-2-3A104,104,0,0,0,154.82,27.5a4,4,0,0,0-3.53.74L131.51,44.07q-3.51-.14-7,0L104.7,28.24a4,4,0,0,0-3.53-.75A103.64,103.64,0,0,0,75.9,38a4,4,0,0,0-2,3l-2.8,25.19c-1.71,1.58-3.37,3.24-4.95,4.95L41,73.93a4,4,0,0,0-3,2A104,104,0,0,0,27.5,101.18a4,4,0,0,0,.74,3.53l15.83,19.78q-.14,3.51,0,7L28.24,151.3a4,4,0,0,0-.75,3.53A103.64,103.64,0,0,0,38,180.1a4,4,0,0,0,3,2l25.19,2.8c1.58,1.71,3.24,3.37,4.95,4.95l2.8,25.2a4,4,0,0,0,2,3,104,104,0,0,0,25.28,10.46,4,4,0,0,0,3.53-.74l19.78-15.83q3.51.13,7,0l19.79,15.83a4,4,0,0,0,2.5.88,4,4,0,0,0,1-.13A103.64,103.64,0,0,0,180.1,218a4,4,0,0,0,2-3l2.8-25.19c1.71-1.58,3.37-3.24,4.95-4.95l25.2-2.8a4,4,0,0,0,3-2,104,104,0,0,0,10.46-25.28,4,4,0,0,0-.74-3.53Zm.17,42.83-24.67,2.74a4,4,0,0,0-2.55,1.32,76.2,76.2,0,0,1-6.48,6.48,4,4,0,0,0-1.32,2.55l-2.74,24.66a95.45,95.45,0,0,1-19.64,8.15l-19.38-15.51a4,4,0,0,0-2.5-.87h-.24a73.67,73.67,0,0,1-9.16,0,4,4,0,0,0-2.74.87l-19.37,15.5a95.33,95.33,0,0,1-19.65-8.13l-2.74-24.67a4,4,0,0,0-1.32-2.55,76.2,76.2,0,0,1-6.48-6.48,4,4,0,0,0-2.55-1.32l-24.66-2.74a95.45,95.45,0,0,1-8.15-19.64l15.51-19.38a4,4,0,0,0,.87-2.74,77.76,77.76,0,0,1,0-9.16,4,4,0,0,0-.87-2.74l-15.5-19.37A95.33,95.33,0,0,1,43.9,81.66l24.67-2.74a4,4,0,0,0,2.55-1.32,76.2,76.2,0,0,1,6.48-6.48,4,4,0,0,0,1.32-2.55l2.74-24.66a95.45,95.45,0,0,1,19.64-8.15l19.38,15.51a4,4,0,0,0,2.74.87,73.67,73.67,0,0,1,9.16,0,4,4,0,0,0,2.74-.87l19.37-15.5a95.33,95.33,0,0,1,19.65,8.13l2.74,24.67a4,4,0,0,0,1.32,2.55,76.2,76.2,0,0,1,6.48,6.48,4,4,0,0,0,2.55,1.32l24.66,2.74a95.45,95.45,0,0,1,8.15,19.64l-15.51,19.38a4,4,0,0,0-.87,2.74,77.76,77.76,0,0,1,0,9.16,4,4,0,0,0,.87,2.74l15.5,19.37A95.33,95.33,0,0,1,212.1,174.34Z"}))]]);var ZX=Object.defineProperty,HX=Object.defineProperties,WX=Object.getOwnPropertyDescriptors,YC=Object.getOwnPropertySymbols,GX=Object.prototype.hasOwnProperty,qX=Object.prototype.propertyIsEnumerable,JC=(e,t,r)=>t in e?ZX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,KX=(e,t)=>{for(var r in t||(t={}))GX.call(t,r)&&JC(e,r,t[r]);if(YC)for(var r of YC(t))qX.call(t,r)&&JC(e,r,t[r]);return e},XX=(e,t)=>HX(e,WX(t));const ik=$.forwardRef((e,t)=>ue.createElement(Mo,XX(KX({ref:t},e),{weights:UX})));ik.displayName="Gear";const YX=mi({container:{color:"#333",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",padding:"0 4px 0 8px"},gear:{animation:"spin 5s linear infinite"},button:{"& .dice":{display:"none"},"& .city":{display:"flex"},"&:hover":{"& .dice":{display:"flex"},"& .city":{display:"none"},cursor:"pointer"}}}),Px=()=>Math.floor(Math.random()*6),JX=Io(()=>{const{contours:e}=to(),t=YX(),[r,n]=$.useState(Px),s=[Q.jsx(ek,{size:32,weight:"duotone",className:"dice"}),Q.jsx(nk,{size:32,weight:"duotone",className:"dice"}),Q.jsx(rk,{size:32,weight:"duotone",className:"dice"}),Q.jsx(QR,{size:32,weight:"duotone",className:"dice"}),Q.jsx(JR,{size:32,weight:"duotone",className:"dice"}),Q.jsx(tk,{size:32,weight:"duotone",className:"dice"})];return Q.jsx("div",{className:t.container,children:e.areProcessing?Q.jsx(eu,{label:"Generating contours...",children:Q.jsx(ik,{size:32,weight:"duotone",className:t.gear})}):Q.jsx(eu,{label:"Randomize",children:Q.jsxs("div",{onMouseLeave:()=>n(Px()),onClick:()=>{e.randomizeFeature(),n(Px())},className:t.button,children:[s[r],Q.jsx(YR,{size:32,weight:"duotone",className:"city"})]})})})}),QX=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"}),ue.createElement("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM181.66,170.34a8,8,0,0,1-11.32,11.32L128,139.31,85.66,181.66a8,8,0,0,1-11.32-11.32L116.69,128,74.34,85.66A8,8,0,0,1,85.66,74.34L128,116.69l42.34-42.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M204.24,195.76a6,6,0,1,1-8.48,8.48L128,136.49,60.24,204.24a6,6,0,0,1-8.48-8.48L119.51,128,51.76,60.24a6,6,0,0,1,8.48-8.48L128,119.51l67.76-67.75a6,6,0,0,1,8.48,8.48L136.49,128Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M202.83,197.17a4,4,0,0,1-5.66,5.66L128,133.66,58.83,202.83a4,4,0,0,1-5.66-5.66L122.34,128,53.17,58.83a4,4,0,0,1,5.66-5.66L128,122.34l69.17-69.17a4,4,0,1,1,5.66,5.66L133.66,128Z"}))]]);var eY=Object.defineProperty,tY=Object.defineProperties,rY=Object.getOwnPropertyDescriptors,QC=Object.getOwnPropertySymbols,nY=Object.prototype.hasOwnProperty,iY=Object.prototype.propertyIsEnumerable,eP=(e,t,r)=>t in e?eY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oY=(e,t)=>{for(var r in t||(t={}))nY.call(t,r)&&eP(e,r,t[r]);if(QC)for(var r of QC(t))iY.call(t,r)&&eP(e,r,t[r]);return e},aY=(e,t)=>tY(e,rY(t));const ok=$.forwardRef((e,t)=>ue.createElement(Mo,aY(oY({ref:t},e),{weights:QX})));ok.displayName="X";const sY=mi({container:{flex:1},input:{background:"none",width:"100%","& .mantine-Autocomplete-input":{color:"#333",border:"none",fontSize:"1.1em","@media (max-width: 720px)":{fontSize:"1em"}}}}),lY=Io(()=>{const{app:e,contours:t}=to(),r=sY(),[n,s]=$.useState(""),h=O8();return Q.jsx("div",{className:r.container,children:Q.jsx(vS,{className:r.input,placeholder:t.city&&t.country&&!t.areProcessing?`${t.city}, ${t.country}`:"Contouring...",data:n.length>1?Object.keys(e.cityLookup):[],value:n,onChange:d=>s(d),onOptionSubmit:d=>{h(`/${e.cityLookup[d]}`)},color:"gray",rightSection:Q.jsx(ok,{size:16,onClick:()=>s("")}),comboboxProps:{transitionProps:{transition:"fade",duration:200}}})})}),cY=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M10.05,110.42l112,64a12,12,0,0,0,11.9,0l112-64a12,12,0,0,0,0-20.84l-112-64a12,12,0,0,0-11.9,0l-112,64a12,12,0,0,0,0,20.84Zm118-60.6L215.81,100,128,150.18,40.19,100Zm122.42,92.23A12,12,0,0,1,246,158.42l-112,64a12,12,0,0,1-11.9,0l-112-64A12,12,0,1,1,22,137.58l106,60.6,106-60.6A12,12,0,0,1,250.42,142.05Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M240,104,128,168,16,104,128,40Z",opacity:"0.2"}),ue.createElement("path",{d:"M12,111l112,64a8,8,0,0,0,7.94,0l112-64a8,8,0,0,0,0-13.9l-112-64a8,8,0,0,0-7.94,0l-112,64A8,8,0,0,0,12,111ZM128,49.21,223.87,104,128,158.79,32.13,104ZM247,140A8,8,0,0,1,244,151L132,215a8,8,0,0,1-7.94,0L12,151A8,8,0,1,1,20,137.05l108,61.74,108-61.74A8,8,0,0,1,247,140Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M12,111l112,64a8,8,0,0,0,7.94,0l112-64a8,8,0,0,0,0-13.9l-112-64a8,8,0,0,0-7.94,0l-112,64A8,8,0,0,0,12,111Z"}),ue.createElement("path",{d:"M236,137.05,128,198.79,20,137.05A8,8,0,1,0,12,151l112,64a8,8,0,0,0,7.94,0l112-64a8,8,0,1,0-7.94-13.9Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M13,109.21l112,64a6,6,0,0,0,6,0l112-64a6,6,0,0,0,0-10.42l-112-64a6,6,0,0,0-6,0l-112,64a6,6,0,0,0,0,10.42Zm115-62.3L227.91,104,128,161.09,28.09,104ZM245.21,141a6,6,0,0,1-2.23,8.19l-112,64a6,6,0,0,1-6,0l-112-64a6,6,0,0,1,6-10.42l109,62.3,109-62.3A6,6,0,0,1,245.21,141Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M12,111l112,64a8,8,0,0,0,7.94,0l112-64a8,8,0,0,0,0-13.9l-112-64a8,8,0,0,0-7.94,0l-112,64A8,8,0,0,0,12,111ZM128,49.21,223.87,104,128,158.79,32.13,104ZM246.94,140A8,8,0,0,1,244,151L132,215a8,8,0,0,1-7.94,0L12,151A8,8,0,0,1,20,137.05l108,61.74,108-61.74A8,8,0,0,1,246.94,140Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M14,107.47l112,64a4,4,0,0,0,4,0l112-64a4,4,0,0,0,0-6.94l-112-64a4,4,0,0,0-4,0l-112,64a4,4,0,0,0,0,6.94ZM128,44.61,231.94,104,128,163.39,24.06,104ZM243.47,142a4,4,0,0,1-1.49,5.45l-112,64a4,4,0,0,1-4,0l-112-64a4,4,0,0,1,4-6.94l110,62.86,110-62.86A4,4,0,0,1,243.47,142Z"}))]]);var uY=Object.defineProperty,hY=Object.defineProperties,dY=Object.getOwnPropertyDescriptors,tP=Object.getOwnPropertySymbols,fY=Object.prototype.hasOwnProperty,pY=Object.prototype.propertyIsEnumerable,rP=(e,t,r)=>t in e?uY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mY=(e,t)=>{for(var r in t||(t={}))fY.call(t,r)&&rP(e,r,t[r]);if(tP)for(var r of tP(t))pY.call(t,r)&&rP(e,r,t[r]);return e},gY=(e,t)=>hY(e,dY(t));const ak=$.forwardRef((e,t)=>ue.createElement(Mo,gY(mY({ref:t},e),{weights:cY})));ak.displayName="StackSimple";const yY=mi({icon:{margin:"0 8px",flex:0,display:"flex",cursor:"pointer"},disabled:{cursor:"not-allowed",opacity:.5},menuItem:{textAlign:"center"}}),vY=Io(()=>{const{app:e,contours:t}=to(),r=yY(),s=[{label:"Basic",value:"basic-v2"},{label:"Dataviz",value:"dataviz"},{label:"OSM",value:"openstreetmap"},{label:"Satellite",value:"satellite"},{label:"Streets",value:"streets-v2"},{label:"Topo (3D)",value:"topo-v2"}].map(h=>Q.jsx(_o.Item,{component:"span",onClick:()=>e.setMapStyle(h.value),className:r.menuItem,children:h.value==e.mapStyle?Q.jsx("b",{children:h.label}):h.label},`style-${h.value}`));return Q.jsxs(_o,{shadow:"sm",position:"bottom",offset:0,withArrow:!0,arrowPosition:"center",disabled:t.areProcessing,children:[Q.jsx(_o.Target,{children:Q.jsx("span",{className:`${r.icon} ${t.areProcessing?r.disabled:""}`,children:Q.jsx(ak,{size:32,weight:"duotone"})})}),Q.jsxs(_o.Dropdown,{children:[Q.jsx(_o.Label,{children:"Maptiler Styles"}),...s]})]})}),_Y=mi({container:{background:"rgba(255, 255, 255, 0.6)",display:"flex",backdropFilter:"blur(4px)",alignItems:"center",width:"100vw",userSelect:"none",zIndex:100,flex:"0 1",padding:"8px 0",borderBottom:"1px solid rgba(0, 0, 0, 0.2)","@media (min-width: 720px)":{flex:"0 1 420px",margin:16,padding:"8px 4px",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:8}}}),xY=()=>{const e=_Y();return Q.jsxs("div",{className:e.container,children:[Q.jsx(JX,{}),Q.jsx(lY,{}),Q.jsx(vY,{}),Q.jsx(jK,{})]})},bY=mi({container:{display:"flex",alignItems:"center",marginBottom:8},label:{marginRight:8,flex:2},input:{flex:3}}),bg=e=>{const t=bY();return Q.jsxs("div",{className:t.container,children:[Q.jsx("div",{className:t.label,children:e.label}),Q.jsx("div",{className:t.input,children:e.children})]})},wY=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M39.51,80.49a12,12,0,0,1,17-17L128,135l71.51-71.52a12,12,0,0,1,17,17l-80,80a12,12,0,0,1-17,0ZM208,180H48a12,12,0,0,0,0,24H208a12,12,0,0,0,0-24Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M208,72l-80,80L48,72Z",opacity:"0.2"}),ue.createElement("path",{d:"M122.34,157.66a8,8,0,0,0,11.32,0l80-80A8,8,0,0,0,208,64H48a8,8,0,0,0-5.66,13.66ZM188.69,80,128,140.69,67.31,80ZM216,192a8,8,0,0,1-8,8H48a8,8,0,0,1,0-16H208A8,8,0,0,1,216,192Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M42.34,77.66A8,8,0,0,1,48,64H208a8,8,0,0,1,5.66,13.66l-80,80a8,8,0,0,1-11.32,0ZM208,184H48a8,8,0,0,0,0,16H208a8,8,0,0,0,0-16Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M43.76,76.24a6,6,0,0,1,8.48-8.48L128,143.51l75.76-75.75a6,6,0,0,1,8.48,8.48l-80,80a6,6,0,0,1-8.48,0ZM208,186H48a6,6,0,0,0,0,12H208a6,6,0,0,0,0-12Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M42.34,77.66A8,8,0,0,1,53.66,66.34L128,140.69l74.34-74.35a8,8,0,0,1,11.32,11.32l-80,80a8,8,0,0,1-11.32,0ZM208,184H48a8,8,0,0,0,0,16H208a8,8,0,0,0,0-16Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M45.17,74.83a4,4,0,0,1,5.66-5.66L128,146.34l77.17-77.17a4,4,0,1,1,5.66,5.66l-80,80a4,4,0,0,1-5.66,0ZM208,188H48a4,4,0,0,0,0,8H208a4,4,0,0,0,0-8Z"}))]]);var SY=Object.defineProperty,EY=Object.defineProperties,AY=Object.getOwnPropertyDescriptors,nP=Object.getOwnPropertySymbols,CY=Object.prototype.hasOwnProperty,PY=Object.prototype.propertyIsEnumerable,iP=(e,t,r)=>t in e?SY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,TY=(e,t)=>{for(var r in t||(t={}))CY.call(t,r)&&iP(e,r,t[r]);if(nP)for(var r of nP(t))PY.call(t,r)&&iP(e,r,t[r]);return e},IY=(e,t)=>EY(e,AY(t));const sk=$.forwardRef((e,t)=>ue.createElement(Mo,IY(TY({ref:t},e),{weights:wY})));sk.displayName="CaretLineDown";const MY=mi({container:{fontSize:"1.8em",color:"#666",flex:0,display:"flex",alignItems:"flex-end",cursor:"pointer","@media (max-width: 720px)":{fontSize:"1.6em"}}}),RY=Io(()=>{const{ui:e}=to(),t=MY();return Q.jsx("span",{className:t.container,children:Q.jsx(Am,{onClick:e.toggleShowControls,leftSection:Q.jsx(sk,{size:24,weight:"duotone"}),variant:"light",children:"Hide"})})}),kY=mi({container:{minWidth:360,display:"flex",flexDirection:"column",flex:1,gap:8,position:"relative","@media (max-width: 720px)":{padding:8}},sliderInput:{flex:3,padding:"8px 8px 32px 16px"},description:{margin:"0 0 8px 0 !important",padding:8,fontSize:"0.8em"},actionButtons:{marginTop:16,display:"flex",justifyContent:"space-between"}}),LY=Io(()=>{const{contours:e,ui:t}=to(),r=kY(),n=Q.jsxs("div",{children:["Source:"," ",Q.jsx("a",{href:"https://landsat.gsfc.nasa.gov/article/thermal-infrared-sensor-tirs/",children:"NASA Landsat: Thermal Infrared Sensor"})]});return Q.jsxs("div",{className:r.container,children:[Q.jsx(_S,{className:r.description,color:"gray",cite:n,mt:"xl",children:"Annual maximum land surface temperature (LST)."}),Q.jsx(bg,{label:"Dataset",children:Q.jsx(Cp,{value:"Max. Surface Temp.",data:["Max. Surface Temp."],onChange:s=>console.log(s),disabled:e.areProcessing})}),Q.jsx(bg,{label:"Year",children:Q.jsx(Cp,{value:e.year,data:e.availableYears.map(String),onChange:s=>e.setYear(s.currentTarget.value),disabled:e.areProcessing})}),Q.jsx(bg,{label:"Reference",children:Q.jsx(Cp,{value:t.absoluteReference?"absolute":"relative",data:[{label:"Absolute",value:"absolute"},{label:"Relative to Mean",value:"relative"}],onChange:s=>t.setAbsoluteReference(s.currentTarget.value==="absolute"),disabled:e.areProcessing})}),Q.jsx(bg,{label:"Thresholds",children:Q.jsx("div",{className:r.sliderInput,children:Q.jsx(IS,{label:null,step:.5,minRange:1,maxRange:2,min:0,max:3,marks:[{value:0,label:"mean"},{value:.5},{value:1,label:"σ"},{value:1.5},{value:2,label:"2σ"},{value:2.5},{value:3,label:"3σ"}],defaultValue:e.range,onChangeEnd:s=>e.setRange(s),disabled:e.areProcessing})})}),Q.jsx("div",{className:r.actionButtons,children:Q.jsx(RY,{})})]})}),DY=mi({items:{display:"flex",flex:1,gap:16,overflowX:"scroll","@media (max-width: 720px)":{padding:"8px 0",marginRight:16},"@media (min-width: 720px)":{marginLeft:16}},threholdItem:{flex:"0",background:"#f00",padding:"4px 8px",borderRadius:4,minWidth:60,textAlign:"center"}}),OY=Io(()=>{const{contours:e,ui:t}=to(),r=DY();if(e.stats==null||e.thresholds.length<1)return Q.jsxs("div",{className:r.items,children:[Q.jsx("div",{className:r.threholdItem,style:{background:"rgba(255, 0, 0, 0.2)"}},"placeholder-0"),Q.jsx("div",{className:r.threholdItem,style:{background:"rgba(255, 0, 0, 0.4)"}},"placeholder-1"),Q.jsx("div",{className:r.threholdItem,style:{background:"rgba(255, 0, 0, 0.6)"}},"placeholder-2")]});let n=[];for(let s=0;s<e.thresholds.length;s++){const h=.8*(s+1)/(e.thresholds.length+1),d=t.absoluteReference?Math.round(e.thresholds[s]):`+${Math.round(e.thresholds[s]-e.stats.mean)}`;n.push(Q.jsxs("div",{className:r.threholdItem,style:{background:`rgba(255, 0, 0, ${h})`},children:[d,"°C"]},`threshold-${s}`))}return Q.jsx("div",{className:r.items,children:n})}),zY=new Map([["bold",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M68,102.06V40a12,12,0,0,0-24,0v62.06a36,36,0,0,0,0,67.88V216a12,12,0,0,0,24,0V169.94a36,36,0,0,0,0-67.88ZM56,148a12,12,0,1,1,12-12A12,12,0,0,1,56,148ZM164,88a36.07,36.07,0,0,0-24-33.94V40a12,12,0,0,0-24,0V54.06a36,36,0,0,0,0,67.88V216a12,12,0,0,0,24,0V121.94A36.07,36.07,0,0,0,164,88Zm-36,12a12,12,0,1,1,12-12A12,12,0,0,1,128,100Zm108,68a36.07,36.07,0,0,0-24-33.94V40a12,12,0,0,0-24,0v94.06a36,36,0,0,0,0,67.88V216a12,12,0,0,0,24,0V201.94A36.07,36.07,0,0,0,236,168Zm-36,12a12,12,0,1,1,12-12A12,12,0,0,1,200,180Z"}))],["duotone",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M80,136a24,24,0,1,1-24-24A24,24,0,0,1,80,136Zm48-72a24,24,0,1,0,24,24A24,24,0,0,0,128,64Zm72,80a24,24,0,1,0,24,24A24,24,0,0,0,200,144Z",opacity:"0.2"}),ue.createElement("path",{d:"M64,105V40a8,8,0,0,0-16,0v65a32,32,0,0,0,0,62v49a8,8,0,0,0,16,0V167a32,32,0,0,0,0-62Zm-8,47a16,16,0,1,1,16-16A16,16,0,0,1,56,152Zm80-95V40a8,8,0,0,0-16,0V57a32,32,0,0,0,0,62v97a8,8,0,0,0,16,0V119a32,32,0,0,0,0-62Zm-8,47a16,16,0,1,1,16-16A16,16,0,0,1,128,104Zm104,64a32.06,32.06,0,0,0-24-31V40a8,8,0,0,0-16,0v97a32,32,0,0,0,0,62v17a8,8,0,0,0,16,0V199A32.06,32.06,0,0,0,232,168Zm-32,16a16,16,0,1,1,16-16A16,16,0,0,1,200,184Z"}))],["fill",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M84,136a28,28,0,0,1-20,26.83V216a8,8,0,0,1-16,0V162.83a28,28,0,0,1,0-53.66V40a8,8,0,0,1,16,0v69.17A28,28,0,0,1,84,136Zm52-74.83V40a8,8,0,0,0-16,0V61.17a28,28,0,0,0,0,53.66V216a8,8,0,0,0,16,0V114.83a28,28,0,0,0,0-53.66Zm72,80V40a8,8,0,0,0-16,0V141.17a28,28,0,0,0,0,53.66V216a8,8,0,0,0,16,0V194.83a28,28,0,0,0,0-53.66Z"}))],["light",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M62,106.6V40a6,6,0,0,0-12,0v66.6a30,30,0,0,0,0,58.8V216a6,6,0,0,0,12,0V165.4a30,30,0,0,0,0-58.8ZM56,154a18,18,0,1,1,18-18A18,18,0,0,1,56,154Zm78-95.4V40a6,6,0,0,0-12,0V58.6a30,30,0,0,0,0,58.8V216a6,6,0,0,0,12,0V117.4a30,30,0,0,0,0-58.8ZM128,106a18,18,0,1,1,18-18A18,18,0,0,1,128,106Zm102,62a30.05,30.05,0,0,0-24-29.4V40a6,6,0,0,0-12,0v98.6a30,30,0,0,0,0,58.8V216a6,6,0,0,0,12,0V197.4A30.05,30.05,0,0,0,230,168Zm-30,18a18,18,0,1,1,18-18A18,18,0,0,1,200,186Z"}))],["regular",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M64,105V40a8,8,0,0,0-16,0v65a32,32,0,0,0,0,62v49a8,8,0,0,0,16,0V167a32,32,0,0,0,0-62Zm-8,47a16,16,0,1,1,16-16A16,16,0,0,1,56,152Zm80-95V40a8,8,0,0,0-16,0V57a32,32,0,0,0,0,62v97a8,8,0,0,0,16,0V119a32,32,0,0,0,0-62Zm-8,47a16,16,0,1,1,16-16A16,16,0,0,1,128,104Zm104,64a32.06,32.06,0,0,0-24-31V40a8,8,0,0,0-16,0v97a32,32,0,0,0,0,62v17a8,8,0,0,0,16,0V199A32.06,32.06,0,0,0,232,168Zm-32,16a16,16,0,1,1,16-16A16,16,0,0,1,200,184Z"}))],["thin",ue.createElement(ue.Fragment,null,ue.createElement("path",{d:"M60,108.29V40a4,4,0,0,0-8,0v68.29a28,28,0,0,0,0,55.42V216a4,4,0,0,0,8,0V163.71a28,28,0,0,0,0-55.42ZM56,156a20,20,0,1,1,20-20A20,20,0,0,1,56,156Zm76-95.71V40a4,4,0,0,0-8,0V60.29a28,28,0,0,0,0,55.42V216a4,4,0,0,0,8,0V115.71a28,28,0,0,0,0-55.42ZM128,108a20,20,0,1,1,20-20A20,20,0,0,1,128,108Zm100,60a28,28,0,0,0-24-27.71V40a4,4,0,0,0-8,0V140.29a28,28,0,0,0,0,55.42V216a4,4,0,0,0,8,0V195.71A28,28,0,0,0,228,168Zm-28,20a20,20,0,1,1,20-20A20,20,0,0,1,200,188Z"}))]]);var FY=Object.defineProperty,BY=Object.defineProperties,NY=Object.getOwnPropertyDescriptors,oP=Object.getOwnPropertySymbols,jY=Object.prototype.hasOwnProperty,$Y=Object.prototype.propertyIsEnumerable,aP=(e,t,r)=>t in e?FY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,VY=(e,t)=>{for(var r in t||(t={}))jY.call(t,r)&&aP(e,r,t[r]);if(oP)for(var r of oP(t))$Y.call(t,r)&&aP(e,r,t[r]);return e},UY=(e,t)=>BY(e,NY(t));const lk=$.forwardRef((e,t)=>ue.createElement(Mo,UY(VY({ref:t},e),{weights:zY})));lk.displayName="Sliders";const ZY=mi({container:{fontSize:"1.8em",color:"#666",flex:0,display:"flex",alignItems:"flex-end",cursor:"pointer","@media (max-width: 720px)":{fontSize:"1.6em",padding:8}}}),HY=Io(()=>{const{contours:e,ui:t}=to(),r=ZY();return t.showControls&&!e.areProcessing?null:Q.jsx("span",{className:r.container,children:Q.jsx(eu,{label:"Controls",children:Q.jsx(Am,{onClick:t.toggleShowControls,variant:"light",disabled:e.areProcessing,children:Q.jsx(lk,{size:24,weight:"duotone"})})})})}),WY=mi({container:{background:"rgba(255, 255, 255, 0.8)",display:"flex",userSelect:"none",zIndex:100,backdropFilter:"blur(4px)",flex:1,borderTop:"1px solid rgba(0, 0, 0, 0.2)",padding:4,"@media (min-width: 720px)":{flex:"0 0 280px",margin:16,padding:12,border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:8}}}),GY=Io(()=>{const{contours:e,ui:t}=to(),r=WY();return t.showControls&&!e.areProcessing?Q.jsx("div",{className:r.container,children:Q.jsx(LY,{})}):Q.jsxs("div",{className:r.container,children:[Q.jsx(HY,{}),Q.jsx(OY,{})]})});var ck={exports:{}};(function(){function e(ae,J){J=J||[];for(var we=J.length,Re=0;Re<ae.length;Re++)Array.isArray(ae[Re])&&Array.isArray(ae[Re][0])?(e(ae[Re],J),we=J.length):J[we++]=ae[Re];return Array.isArray(J[0])?J:[J]}function t(ae,J=32e3){const we=[];for(let Re=0;Re<ae.length;Re+=J)we.push(ae.slice(Re,Re+J));return we}function r(ae){return Math.min.apply(null,ae.map(J=>Math.min.apply(null,J)))}function n(ae){return Math.max.apply(null,ae.map(J=>Math.max.apply(null,J)))}function s(ae){return n(t(ae.map(function(J){return J[1]})))}function h(ae){return n(t(ae.map(function(J){return J[0]})))}function d(ae){return r(t(ae.map(function(J){return J[1]})))}function c(ae){return r(t(ae.map(function(J){return J[0]})))}function b(ae){var J={minLng:c(ae),minLat:d(ae),maxLng:h(ae),maxLat:s(ae)};return{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[J.minLng,J.minLat],[J.minLng,J.maxLat],[J.maxLng,J.maxLat],[J.maxLng,J.minLat],[J.minLng,J.minLat]]]}}}function E(ae){return[c(ae),d(ae),h(ae),s(ae)]}function I(ae){for(var J={x:0,y:0},we=0,Re=0,De=0,Oe=0,Qe=0,qe=0,Ze=0;Ze<ae.length-1;Ze++)Re=ae[Ze][0],De=ae[Ze][1],Oe=ae[Ze+1][0],Qe=ae[Ze+1][1],qe=Re*Qe-Oe*De,we+=qe,J.x+=(Re+Oe)*qe,J.y+=(De+Qe)*qe;return Re=ae[ae.length-1][0],De=ae[ae.length-1][1],Oe=ae[0][0],Qe=ae[0][1],qe=Re*Qe-Oe*De,we+=qe,J.x+=(Re+Oe)*qe,J.y+=(De+Qe)*qe,we=we*.5,J.x=J.x/(6*we),J.y=J.y/(6*we),[J.x,J.y]}function P(ae){switch(ae.geometry.type){case"GeometryCollection":return O(ae.geometry);case"FeatureCollection":return T(ae.geometry);default:return e(ae.geometry.coordinates)}}function T(ae){return e(ae.features.map(P))}function O(ae){return e(ae.geometries.map(j))}function j(ae){if(!ae)return[];switch(ae.type){case"Feature":return P(ae);case"GeometryCollection":return O(ae);case"FeatureCollection":return T(ae);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiPolygon":case"MultiLineString":return e(ae.coordinates);default:return[]}}function V(ae){return b(j(ae))}function re(ae){return E(j(ae))}function W(ae){return I(j(ae))}function Z(ae){return c(j(ae))}function K(ae){return h(j(ae))}function ie(ae){return d(j(ae))}function de(ae){return s(j(ae))}ck.exports={envelope:V,extent:re,centroid:W,xMin:Z,xMax:K,yMin:ie,yMax:de}})();var qY=ck.exports;const KY=mi({map:{position:"absolute",width:"100%",height:"100%",zIndex:50,"& .maplibregl-ctrl-group":{opacity:.8},"& .maplibregl-ctrl-top-right":{padding:"160px 8px 0 0"},"& .maplibregl-ctrl-bottom-left":{padding:"0 0 80px 12px"},"@media (max-width: 720px)":{"& .maplibregl-ctrl-top-right":{marginRight:-10,padding:"160px 0 0 0"},"& .maplibregl-ctrl-bottom-left":{padding:"0 0 64px 8px"}}}}),XY=`
<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#333333" viewBox="0 0 256 256">
    <path d="M136,32V216H40V85.35a8,8,0,0,1,3.56-6.66l80-53.33A8,8,0,0,1,136,32Z" opacity="0.2"></path>
    <path d="M240,208H224V96a16,16,0,0,0-16-16H144V32a16,16,0,0,0-24.88-13.32L39.12,72A16,16,0,0,0,32,85.34V208H16a8,8,0,0,0,0,16H240a8,8,0,0,0,0-16ZM208,96V208H144V96ZM48,85.34,128,32V208H48ZM112,112v16a8,8,0,0,1-16,0V112a8,8,0,1,1,16,0Zm-32,0v16a8,8,0,0,1-16,0V112a8,8,0,1,1,16,0Zm0,56v16a8,8,0,0,1-16,0V168a8,8,0,0,1,16,0Zm32,0v16a8,8,0,0,1-16,0V168a8,8,0,0,1,16,0Z"></path>
</svg>
`,YY=`
<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#333333" viewBox="0 0 256 256">
    <path d="M56,76a60,60,0,0,1,120,0,8,8,0,0,1-16,0,44,44,0,0,0-88,0,8,8,0,1,1-16,0Zm140,44a27.9,27.9,0,0,0-13.36,3.39A28,28,0,0,0,144,106.7V76a28,28,0,0,0-56,0v80l-3.82-6.13a28,28,0,0,0-48.41,28.17l29.32,50A8,8,0,1,0,78.89,220L49.6,170a12,12,0,1,1,20.78-12l.14.23,18.68,30A8,8,0,0,0,104,184V76a12,12,0,0,1,24,0v68a8,8,0,1,0,16,0V132a12,12,0,0,1,24,0v20a8,8,0,0,0,16,0v-4a12,12,0,0,1,24,0v36c0,21.61-7.1,36.3-7.16,36.42a8,8,0,0,0,3.58,10.73A7.9,7.9,0,0,0,208,232a8,8,0,0,0,7.16-4.42c.37-.73,8.85-18,8.85-43.58V148A28,28,0,0,0,196,120Z"></path>
</svg>
`,JY=Io(()=>{const{app:e,contours:t}=to(),r=KY(),n=O8(),s=$.useRef(null),h=$.useRef(null),d=()=>{if(h.current&&!t.areProcessing){const P=h.current;P.setStyle(e.mapStyle,{diff:!1}),P.on("style.load",()=>{I(t.layers),b(),E()})}},c=P=>{h.current&&e.urbanExtents&&h.current.on("click",P,O=>{const j=O.features[0];if(!t.areProcessing){const V=Qp(j.properties.URAU_NAME);console.debug(`Selected URAU: ${j.properties.URAU_CODE} (${V})`),n(`/${V}`)}})},b=()=>{if(h.current&&e.urbanExtents){const P=h.current,T="eu-urban-extents",O=6,j=14;[...P.getLayersOrder().values()].includes(T)&&(P.removeLayer(`${T}-fill`),P.removeLayer(`${T}-line`)),P.getSource(T)&&P.removeSource(T),P.addSource(T,{type:"geojson",data:e.urbanExtents}),P.addLayer({id:`${T}-fill`,type:"fill",source:T,layout:{},paint:{"fill-color":"#777","fill-opacity":.2},maxzoom:j,minzoom:O}),P.addLayer({id:`${T}-line`,type:"line",source:T,layout:{},paint:{"line-width":1.5,"line-color":"#777","line-opacity":.3},maxzoom:j,minzoom:O}),P.on("mouseenter",`${T}-fill`,()=>{P.getCanvas().style.cursor="pointer"}),P.on("mouseleave",`${T}-fill`,()=>{P.getCanvas().style.cursor=""}),c(`${T}-fill`)}},E=()=>{var P,T;if(h.current&&e.centroidsGeojson){const O=h.current,j="centroids",V=.4;if(!O.getSource(j)){const re=new Image(64,64);re.onload=()=>{O.addImage("buildingsIcon",re)},re.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(XY);const W=new Image(64,64);W.onload=()=>{O.addImage("tapIcon",W)},W.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(YY),O.addSource(j,{type:"geojson",data:e.centroidsGeojson}),O.addLayer({id:`${j}-building`,type:"symbol",source:j,filter:["all",["!=","URAU_CODE",((P=t.selected)==null?void 0:P.URAU_CODE)||""]],layout:{"icon-image":"buildingsIcon","icon-size":V},paint:{},maxzoom:9}),O.addLayer({id:`${j}-tap`,type:"symbol",source:j,filter:["all",["!=","URAU_CODE",((T=t.selected)==null?void 0:T.URAU_CODE)||""]],layout:{"icon-image":"tapIcon","icon-size":V},paint:{},minzoom:9}),c(`${j}-building`),c(`${j}-tap`)}}},I=P=>{if(h.current&&t.selected){const T=h.current,O=[...T.getLayersOrder().values()];for(let V of O)V.includes("contour-")&&(T.removeLayer(V),T.removeSource(V));let j=0;for(let V=0;V<P.length;V++){const re=`contour-${t.selected.URAU_CODE}-${P[V].threshold}`,W=(V+1)/(P.length+1)-j;j+=W,T.addSource(re,{type:"geojson",data:P[V]}),T.addLayer({id:re,type:e.mapStyle==="topo-v2"?"fill-extrusion":"fill",source:re,layout:{},paint:e.mapStyle==="topo-v2"?{"fill-extrusion-color":"#f00","fill-extrusion-opacity":W,"fill-extrusion-height":10*(V+1)}:{"fill-color":"#f00","fill-opacity":W},minzoom:6})}console.debug(`${P.length} contour layers added`)}};return $.useEffect(()=>{h.current||(console.log("Initializing map..."),h.current=new yI({container:s.current||"",geolocateControl:!1,style:e.mapStyle,center:[4,48],zoom:5}),h.current.on("load",()=>{console.log("Map loaded successfully"),e.fetchUrbanExtents()}))},[]),$.useEffect(()=>{t.areProcessing||(I(t.layers),E())},[t.layers]),$.useEffect(()=>{var P,T;if(e.features&&h.current&&e.selectedFeature){const O=h.current;O.getLayer("centroids-building")&&O.getLayer("centroids-tap")&&(O.setFilter("centroids-building",["all",["!=","URAU_CODE",((P=t.selected)==null?void 0:P.URAU_CODE)||""]]),O.setFilter("centroids-tap",["all",["!=","URAU_CODE",((T=t.selected)==null?void 0:T.URAU_CODE)||""]])),setTimeout(()=>{O.fitBounds(qY.extent(e.selectedFeature),{maxZoom:12,duration:1e3})},200)}},[e.features,t.selected]),$.useEffect(()=>b(),[e.urbanExtents]),$.useEffect(()=>d(),[e.mapStyle]),Q.jsx(Q.Fragment,{children:Q.jsx("div",{ref:s,className:r.map})})}),QY=mi({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},state:{flex:1}}),eJ=Io(e=>{const t=QY();return Q.jsxs("div",{className:t.container,children:[Q.jsx(Ad,{size:64,color:"#fff",type:"dots"}),Q.jsx("div",{className:t.state,style:{color:e.color},children:"Loading map..."})]})}),tJ=mi({container:{color:"#fff",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},ring:{flex:1},state:{flex:1}}),rJ=Io(()=>{const{ui:e}=to(),t=tJ();return Q.jsx(bS,{className:t.container,visible:!e.mapLoaded,loaderProps:{children:Q.jsx(eJ,{color:"white"})},overlayProps:{color:"#000",backgroundOpacity:.4,blur:2},transitionProps:{transition:"fade",duration:500},zIndex:150})}),nJ=Io(()=>{const{app:e,contours:t}=to(),r=Pw();return $.useEffect(()=>{e.features&&(r.pathname==="/"?t.randomizeFeature(!1):(t.featureFromPath(r.pathname),document.title=`Urban Heat in ${t.city}, ${t.country}`))},[e.features,r]),null}),iJ="0.03em",oJ="rgba(216, 64, 0, 0.6)",aJ="#fff",sJ=mi({container:{flex:0,userSelect:"none",zIndex:300,margin:16},title:{fontSize:42,fontWeight:700,fontFamily:'"Courier Prime", monospace',fontOpticalSizing:"auto",fontVariationSettings:'"MONO" 1',lineHeight:"0.9em",textTransform:"uppercase",color:aJ,"-webkit-text-stroke":`${iJ} ${oJ}`,"@media (max-width: 720px)":{fontSize:32}}}),lJ=()=>{const e=sJ();return Q.jsx("div",{className:e.container,children:Q.jsx("div",{className:e.title,children:"Urban Heat"})})},cJ=mi({app:{top:0,margin:0,padding:0,height:"100dvh",width:"100vw",position:"absolute",display:"flex",flexDirection:"column",justifyContent:"space-between","@media (max-width: 720px)":{alignItems:"stretch"}},row:{flex:0,display:"flex",flexDirection:"row",justifyContent:"space-between","@media (max-width: 720px)":{flexDirection:"column",alignItems:"stretch",justifyContent:"flex-end"}},top:{alignItems:"flex-start","@media (max-width: 720px)":{flexDirection:"column-reverse",alignItems:"center"}},bottom:{alignItems:"flex-end","@media (max-width: 720px)":{alignItems:"stretch"}}}),uJ=`%c
██╗   ██╗██████╗ ██████╗  █████╗ ███╗   ██╗
██║   ██║██╔══██╗██╔══██╗██╔══██╗████╗  ██║
██║   ██║██████╔╝██████╔╝███████║██╔██╗ ██║
██║   ██║██╔══██╗██╔══██╗██╔══██║██║╚██╗██║
╚██████╔╝██║  ██║██████╔╝██║  ██║██║ ╚████║
 ╚═════╝ ╚═╝  ╚═╝╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═══╝
                                           
██╗  ██╗███████╗ █████╗ ████████╗          
██║  ██║██╔════╝██╔══██╗╚══██╔══╝          
███████║█████╗  ███████║   ██║             
██╔══██║██╔══╝  ██╔══██║   ██║             
██║  ██║███████╗██║  ██║   ██║             
╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝   ╚═╝             
                                           

Curious about what's going on under the hood?

Check out the source: https://github.com/damienallen/urban-heat

Or browse the swagger: https://api.urbanheat.app/docs

`,hJ=()=>{const{ui:e}=to(),t=cJ();return console.log(uJ,"color: #d84100"),Q.jsxs(gW,{children:[Q.jsx(nJ,{}),Q.jsx(jI,{defaultColorScheme:e.colorScheme,theme:e.theme,children:Q.jsxs("div",{className:t.app,children:[Q.jsxs("div",{className:`${t.row} ${t.top}`,children:[Q.jsx(lJ,{}),Q.jsx(xY,{})]}),Q.jsx("div",{className:`${t.row} ${t.bottom}`,children:Q.jsx(GY,{})}),Q.jsx(TK,{}),Q.jsx(JY,{}),Q.jsx(rJ,{})]})})]})},dJ=async()=>await(await fetch("urban_extents.geojson")).json(),fJ=()=>{const[e,t]=$.useState([]);return $.useEffect(()=>{dJ().then(r=>{t(r.features.map(n=>Qp(n.properties.URAU_NAME)).sort().map(n=>Q.jsx("div",{children:`${window.location.origin}/${n}`})))})},[]),Q.jsx("div",{children:e})},C2=VF([{path:"/sitemap",element:Q.jsx(fJ,{})},{path:"*",element:Q.jsx(hJ,{})}]);Tx.createRoot(document.getElementById("root")).render(Q.jsx(YF,{router:C2}));
